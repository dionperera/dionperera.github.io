!function(n){var i={};function o(e){if(i[e])return i[e].exports;var t=i[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=i,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="rainloop/v/0.0.0/static/js/min/",o(o.s=514)}([function(e,t,n){"use strict";n.r(t),n.d(t,"FileType",function(){return i}),n.d(t,"StorageResultType",function(){return o}),n.d(t,"Focused",function(){return a}),n.d(t,"State",function(){return r}),n.d(t,"StateType",function(){return s}),n.d(t,"Capa",function(){return c}),n.d(t,"KeyState",function(){return l}),n.d(t,"FolderType",function(){return u}),n.d(t,"ServerFolderType",function(){return d}),n.d(t,"LoginSignMeTypeAsString",function(){return p}),n.d(t,"LoginSignMeType",function(){return f}),n.d(t,"ComposeType",function(){return h}),n.d(t,"UploadErrorCode",function(){return m}),n.d(t,"SetSystemFoldersNotification",function(){return g}),n.d(t,"ClientSideKeyName",function(){return b}),n.d(t,"EventKeyCode",function(){return v}),n.d(t,"MessageSetAction",function(){return y}),n.d(t,"MessageSelectAction",function(){return S}),n.d(t,"DesktopNotification",function(){return O}),n.d(t,"MessagePriority",function(){return w}),n.d(t,"EditorDefaultType",function(){return T}),n.d(t,"ServerSecure",function(){return C}),n.d(t,"SearchDateType",function(){return A}),n.d(t,"SaveSettingsStep",function(){return E}),n.d(t,"Layout",function(){return F}),n.d(t,"FilterConditionField",function(){return j}),n.d(t,"FilterConditionType",function(){return N}),n.d(t,"FiltersAction",function(){return R}),n.d(t,"FilterRulesType",function(){return I}),n.d(t,"SignedVerifyStatus",function(){return L}),n.d(t,"ContactPropertyType",function(){return P}),n.d(t,"Magics",function(){return M}),n.d(t,"Ports",function(){return D}),n.d(t,"Notification",function(){return _});var i={Unknown:"unknown",Text:"text",Html:"html",Code:"code",Eml:"eml",WordText:"word-text",Pdf:"pdf",Image:"image",Audio:"audio",Video:"video",Sheet:"sheet",Presentation:"presentation",Certificate:"certificate",CertificateBin:"certificate-bin",Archive:"archive"},o={Success:"success",Abort:"abort",Error:"error",Unload:"unload"},a={None:"none",MessageList:"message-list",MessageView:"message-view",FolderList:"folder-list"},r={Empty:10,Login:20,Auth:30},s={Webmail:0,Admin:1},c={TwoFactor:"TWO_FACTOR",TwoFactorForce:"TWO_FACTOR_FORCE",OpenPGP:"OPEN_PGP",Prefetch:"PREFETCH",Gravatar:"GRAVATAR",Folders:"FOLDERS",Composer:"COMPOSER",Contacts:"CONTACTS",Reload:"RELOAD",Search:"SEARCH",SearchAdv:"SEARCH_ADV",MessageActions:"MESSAGE_ACTIONS",MessageListActions:"MESSAGELIST_ACTIONS",AttachmentsActions:"ATTACHMENTS_ACTIONS",DangerousActions:"DANGEROUS_ACTIONS",Settings:"SETTINGS",Help:"HELP",Themes:"THEMES",UserBackground:"USER_BACKGROUND",Sieve:"SIEVE",Filters:"FILTERS",AttachmentThumbnails:"ATTACHMENT_THUMBNAILS",Templates:"TEMPLATES",AutoLogout:"AUTOLOGOUT",AdditionalAccounts:"ADDITIONAL_ACCOUNTS",Identities:"IDENTITIES"},l={All:"all",None:"none",ContactList:"contact-list",MessageList:"message-list",FolderList:"folder-list",MessageView:"message-view",Compose:"compose",Settings:"settings",Menu:"menu",PopupComposeOpenPGP:"compose-open-pgp",PopupMessageOpenPGP:"message-open-pgp",PopupViewOpenPGP:"view-open-pgp",PopupKeyboardShortcutsHelp:"popup-keyboard-shortcuts-help",PopupAsk:"popup-ask"},u={Inbox:10,SentItems:11,Draft:12,Trash:13,Spam:14,Archive:15,NotSpam:80,User:99},d={USER:0,INBOX:1,SENT:2,DRAFTS:3,JUNK:4,TRASH:5,IMPORTANT:10,FLAGGED:11,ALL:12},p={DefaultOff:"defaultoff",DefaultOn:"defaulton",Unused:"unused"},f={DefaultOff:0,DefaultOn:1,Unused:2},h={Empty:"empty",Reply:"reply",ReplyAll:"replyall",Forward:"forward",ForwardAsAttachment:"forward-as-attachment",Draft:"draft",EditAsNew:"editasnew"},m={Normal:0,FileIsTooBig:1,FilePartiallyUploaded:2,FileNoUploaded:3,MissingTempFolder:4,FileOnSaveingError:5,FileType:98,Unknown:99},g={None:0,Sent:1,Draft:2,Spam:3,Trash:4,Archive:5},b={FoldersLashHash:0,MessagesInboxLastHash:1,MailBoxListSize:2,ExpandedFolders:3,FolderListSize:4,MessageListSize:5,LastReplyAction:6,LastSignMe:7,ComposeLastIdentityID:8,MessageHeaderFullInfo:9,MessageAttachmnetControls:10},v={Backspace:8,Tab:9,Enter:13,Esc:27,PageUp:33,PageDown:34,Left:37,Right:39,Up:38,Down:40,End:35,Home:36,Space:32,Insert:45,Delete:46,A:65,S:83},y={SetSeen:0,UnsetSeen:1,SetFlag:2,UnsetFlag:3},S={All:0,None:1,Invert:2,Unseen:3,Seen:4,Flagged:5,Unflagged:6},O={Allowed:0,NotAllowed:1,Denied:2,NotSupported:9},w={Low:5,Normal:3,High:1},T={Html:"Html",Plain:"Plain",HtmlForced:"HtmlForced",PlainForced:"PlainForced"},C={None:0,SSL:1,TLS:2},A={All:-1,Days3:3,Days7:7,Month:30},E={Animate:-2,Idle:-1,TrueResult:1,FalseResult:0},F={NoPreview:0,SidePreview:1,BottomPreview:2},j={From:"From",Recipient:"Recipient",Subject:"Subject",Header:"Header",Size:"Size"},N={Contains:"Contains",NotContains:"NotContains",EqualTo:"EqualTo",NotEqualTo:"NotEqualTo",Regex:"Regex",Over:"Over",Under:"Under"},R={None:"None",MoveTo:"MoveTo",Discard:"Discard",Vacation:"Vacation",Reject:"Reject",Forward:"Forward"},I={All:"All",Any:"Any"},L={UnknownPublicKeys:-4,UnknownPrivateKey:-3,Unverified:-2,Error:-1,None:0,Success:1},P={Unknown:0,FullName:10,FirstName:15,LastName:16,MiddleName:16,Nick:18,NamePrefix:20,NameSuffix:21,Email:30,Phone:31,Web:32,Birthday:40,Facebook:90,Skype:91,GitHub:92,Note:110,Custom:250},M={EventWhichMouseMiddle:3,ifvisibleIdle10s:10,BitLength2048:2048,BitLength1024:1024,Size350px:350,Size50px:50,Size20px:20,Size1px:1,Time30mInMin:30,Time60m:36e5,Time30m:18e5,Time20m:12e5,Time15m:9e5,Time10m:6e5,Time5m:3e5,Time3m:18e4,Time2m:12e4,Time1m:6e4,Time30s:3e4,Time10s:1e4,Time7s:7e3,Time5s:5e3,Time3s:3e3,Time1s:1e3,Time500ms:500,Time350ms:350,Time250ms:250,Time200ms:200,Time100ms:100,Time50ms:50,Time20ms:20,Time10ms:10,Time1ms:1},D={Imap:143,ImapSsl:993,Smtp:25,SmtpSsl:465,SmtpStartTls:587},_={InvalidToken:101,AuthError:102,AccessError:103,ConnectionError:104,CaptchaError:105,SocialFacebookLoginAccessDisable:106,SocialTwitterLoginAccessDisable:107,SocialGoogleLoginAccessDisable:108,DomainNotAllowed:109,AccountNotAllowed:110,AccountTwoFactorAuthRequired:120,AccountTwoFactorAuthError:121,CouldNotSaveNewPassword:130,CurrentPasswordIncorrect:131,NewPasswordShort:132,NewPasswordWeak:133,NewPasswordForbidden:134,ContactsSyncError:140,CantGetMessageList:201,CantGetMessage:202,CantDeleteMessage:203,CantMoveMessage:204,CantCopyMessage:205,CantSaveMessage:301,CantSendMessage:302,InvalidRecipients:303,CantSaveFilters:351,CantGetFilters:352,FiltersAreNotCorrect:355,CantCreateFolder:400,CantRenameFolder:401,CantDeleteFolder:402,CantSubscribeFolder:403,CantUnsubscribeFolder:404,CantDeleteNonEmptyFolder:405,CantSaveSettings:501,CantSavePluginSettings:502,DomainAlreadyExists:601,CantInstallPackage:701,CantDeletePackage:702,InvalidPluginPackage:703,UnsupportedPluginPackage:704,LicensingServerIsUnavailable:710,LicensingExpired:711,LicensingBanned:712,DemoSendMessageError:750,DemoAccountError:751,AccountAlreadyExists:801,AccountDoesNotExist:802,MailServerError:901,ClientViewError:902,InvalidInputArgument:903,AjaxFalse:950,AjaxAbort:951,AjaxParse:952,AjaxTimeout:953,UnknownNotification:999,UnknownError:999}},function(e,t,l){"use strict";l(75),l(55),l(144),l(94),l(169),l(67);var n=l(18),u=l.n(n),i=l(30),d=l.n(i),o=l(137),p=l.n(o),a=l(12),c=l.n(a),r=l(4),f=l.n(r),s=l(3),h=l.n(s),m=l(8),g=l.n(m),b=l(207),v=l(208),y=l.n(v),S=l(0),O=f.a.ko,w=g()(f.a);O.bindingHandlers.updateWidth={init:function(e,t){var n=g()(e),i=t(),o=function(){i(n.width()),f.a.setTimeout(function(){i(n.width())},S.Magics.Time500ms)};w.on("resize",o),o(),O.utils.domNodeDisposal.addDisposeCallback(e,function(){w.off("resize",o)})}},O.bindingHandlers.editor={init:function(e,t){var n=null,i=t(),o=l(204).default,a=function(){i&&i.__editor&&i.__editor.setHtmlOrPlain(i())},r=function(){i&&i.__editor&&i(i.__editor.getDataWithHtmlMark())};O.isObservable(i)&&o&&(n=new o(e,r,function(){i.__editor=n,a()},r),i.__fetchEditorValue=r,i.subscribe(a))}},O.bindingHandlers.json={init:function(e,t){g()(e).text(f.a.JSON.stringify(O.unwrap(t())))},update:function(e,t){g()(e).text(f.a.JSON.stringify(O.unwrap(t())))}},O.bindingHandlers.scrollerShadows={init:function(e){var t=g()(e),n=c()(t).call(t,"[data-scroller-shadows-content]")[0]||null,i=h.a.throttle(function(){t.toggleClass("scroller-shadow-top",8<n.scrollTop).toggleClass("scroller-shadow-bottom",n.scrollTop+8<n.scrollHeight-n.clientHeight)},100);n&&(g()(n).on("scroll resize",i),w.on("resize",i),O.utils.domNodeDisposal.addDisposeCallback(n,function(){g()(n).off(),w.off("resize",i)}))}},O.bindingHandlers.pikaday={init:function(e,t,n,i,o){O.bindingHandlers.textInput.init(e,t,n,i,o),y.a&&(e.__pikaday=new y.a({field:e}))}},O.bindingHandlers.visibleAnimated={init:function(e,t){var n=g()(e);n.addClass("rl-animated-inited"),O.unwrap(t())?n.show():n.hide()},update:function(e,t){var n=g()(e);O.unwrap(t())?(n.addClass("rl-animated-hidden").show(),h.a.delay(function(){n.removeClass("rl-animated-hidden")},10)):n.hide().removeClass("rl-animated-hidden")}},O.bindingHandlers.tooltip={init:function(t,e){var n=g()(t),i=e(),o="on"===(n.data("tooltip-mobile")||"off"),a="on"===(n.data("tooltip-i18n")||"on"),r=l(6);if(!r.bMobileDevice||o){var s=!O.isObservable(i)&&h.a.isFunction(i)?i():O.unwrap(i);if(t.__opentip=new b.a(t,{style:"rainloopTip",element:t,tipJoint:n.data("tooltip-join")||"bottom"}),r.dropdownVisibility.subscribe(function(e){e&&t.__opentip.hide()}),""===s?(t.__opentip.hide(),t.__opentip.deactivate(),t.__opentip.setContent("")):t.__opentip.activate(),a){var c=l(9);t.__opentip.setContent(c.i18n(s)),c.trigger.subscribe(function(){t.__opentip.setContent(c.i18n(s))}),r.dropdownVisibility.subscribe(function(){t&&t.__opentip&&t.__opentip.setContent(c.i18n(s))})}else t.__opentip.setContent(s);w.on("rl.tooltips.diactivate",function(){t.__opentip.hide(),t.__opentip.deactivate()}),w.on("rl.tooltips.activate",function(){t.__opentip.activate()})}},update:function(e,t){var n=g()(e),i=t(),o="on"===(n.data("tooltip-mobile")||"off"),a="on"===(n.data("tooltip-i18n")||"on");if((!l(6).bMobileDevice||o)&&e.__opentip){var r=!O.isObservable(i)&&h.a.isFunction(i)?i():O.unwrap(i);r?(e.__opentip.setContent(a?l(9).i18n(r):r),e.__opentip.activate()):(e.__opentip.hide(),e.__opentip.deactivate(),e.__opentip.setContent(""))}}},O.bindingHandlers.tooltipErrorTip={init:function(e){var t,n=g()(e);e.__opentip=new b.a(e,{style:"rainloopErrorTip",hideOn:"mouseout click",element:e,tipJoint:n.data("tooltip-join")||"top"}),e.__opentip.deactivate(),g()(f.a.document).on("click",function(){e&&e.__opentip&&e.__opentip.hide()}),t=e,O.utils.domNodeDisposal.addDisposeCallback(t,function(){t&&t.__opentip&&t.__opentip.deactivate()})},update:function(e,t){var n=g()(e),i=t(),o=!O.isObservable(i)&&h.a.isFunction(i)?i():O.unwrap(i),a=e.__opentip;a&&(""===o?(a.hide(),a.deactivate(),a.setContent("")):h.a.delay(function(){n.is(":visible")?(a.setContent(o),a.activate(),a.show()):(a.hide(),a.deactivate(),a.setContent(""))},S.Magics.Time100ms))}},O.bindingHandlers.registrateBootstrapDropdown={init:function(e){var t=l(6);t&&t.data.aBootstrapDropdowns&&(t.data.aBootstrapDropdowns.push(g()(e)),g()(e).click(function(){l(2).detectDropdownVisibility()}))}},O.bindingHandlers.openDropdownTrigger={update:function(e,t){if(O.unwrap(t())){var n=g()(e);n.hasClass("open")||c()(n).call(n,".dropdown-toggle").dropdown("toggle"),c()(n).call(n,".dropdown-toggle").focus(),l(2).detectDropdownVisibility(),t()(!1)}}},O.bindingHandlers.dropdownCloser={init:function(e){g()(e).closest(".dropdown").on("click",".e-item",function(){g()(e).dropdown("toggle")})}},O.bindingHandlers.popover={init:function(e,t){g()(e).popover(O.unwrap(t())),O.utils.domNodeDisposal.addDisposeCallback(e,function(){g()(e).popover("destroy")})}},O.bindingHandlers.csstext={},O.bindingHandlers.csstext.init=O.bindingHandlers.csstext.update=function(e,t){e&&e.styleSheet&&void 0!==e.styleSheet.cssText?e.styleSheet.cssText=O.unwrap(t()):g()(e).text(O.unwrap(t()))},O.bindingHandlers.resizecrop={init:function(e){g()(e).addClass("resizecrop").resizecrop({width:"100",height:"100",wrapperCSS:{"border-radius":"10px"}})},update:function(e,t){t()(),g()(e).resizecrop({width:"100",height:"100"})}},O.bindingHandlers.onKeyDown={init:function(e,t,n,i){g()(e).on("keydown.koOnKeyDown",function(e){return!e||t().call(i,e)}),O.utils.domNodeDisposal.addDisposeCallback(e,function(){g()(e).off("keydown.koOnKeyDown")})}},O.bindingHandlers.onEnter={init:function(t,n,e,i){g()(t).on("keypress.koOnEnter",function(e){e&&13===f.a.parseInt(e.keyCode,10)&&(g()(t).trigger("change"),n().call(i))}),O.utils.domNodeDisposal.addDisposeCallback(t,function(){g()(t).off("keypress.koOnEnter")})}},O.bindingHandlers.onSpace={init:function(e,t,n,i){g()(e).on("keyup.koOnSpace",function(e){e&&32===f.a.parseInt(e.keyCode,10)&&t().call(i,e)}),O.utils.domNodeDisposal.addDisposeCallback(e,function(){g()(e).off("keyup.koOnSpace")})}},O.bindingHandlers.onTab={init:function(e,t,n,i){g()(e).on("keydown.koOnTab",function(e){return!e||9!==f.a.parseInt(e.keyCode,10)||t().call(i,!!e.shiftKey)}),O.utils.domNodeDisposal.addDisposeCallback(e,function(){g()(e).off("keydown.koOnTab")})}},O.bindingHandlers.onEsc={init:function(t,n,e,i){g()(t).on("keyup.koOnEsc",function(e){e&&27===f.a.parseInt(e.keyCode,10)&&(g()(t).trigger("change"),n().call(i))}),O.utils.domNodeDisposal.addDisposeCallback(t,function(){g()(t).off("keyup.koOnEsc")})}},O.bindingHandlers.clickOnTrue={update:function(e,t){O.unwrap(t())&&g()(e).click()}},O.bindingHandlers.modal={init:function(t,e){var n,i=l(6),o=l(2);c()(n=g()(t).toggleClass("fade",!i.bMobileDevice).modal({keyboard:!1,show:O.unwrap(e())}).on("shown.koModal",o.windowResizeCallback)).call(n,".close").on("click.koModal",function(){e()(!1)}),O.utils.domNodeDisposal.addDisposeCallback(t,function(){var e;c()(e=g()(t).off("shown.koModal")).call(e,".close").off("click.koModal")})},update:function(e,t){var n=l(6);g()(e).modal(O.unwrap(t())?"show":"hide"),n.$html.hasClass("rl-anim")&&(n.$html.addClass("rl-modal-animation"),h.a.delay(function(){n.$html.removeClass("rl-modal-animation")},S.Magics.Time500ms))}},O.bindingHandlers.moment={init:function(e,t){l(60).momentToNode(g()(e).addClass("moment").data("moment-time",O.unwrap(t())))},update:function(e,t){l(60).momentToNode(g()(e).data("moment-time",O.unwrap(t())))}},O.bindingHandlers.i18nInit={init:function(e){l(9).i18nToNodes(e)}},O.bindingHandlers.translatorInit={init:function(e){l(9).i18nToNodes(e)}},O.bindingHandlers.i18nUpdate={update:function(e,t){O.unwrap(t()),l(9).i18nToNodes(e)}},O.bindingHandlers.link={update:function(e,t){g()(e).attr("href",O.unwrap(t()))}},O.bindingHandlers.title={update:function(e,t){g()(e).attr("title",O.unwrap(t()))}},O.bindingHandlers.textF={init:function(e,t){g()(e).text(O.unwrap(t()))}},O.bindingHandlers.initDom={init:function(e,t){t()(e)}},O.bindingHandlers.initFixedTrigger={init:function(e,t){var n=O.unwrap(t()),i=g()(e),o=n[1]||0,a=g()(n[0]||null);(a=a[0]?a:null)&&w.resize(function(){var e=a?a.offset():null;e&&e.top&&i.css("top",e.top+o)})}},O.bindingHandlers.initResizeTrigger={init:function(e,t){var n=O.unwrap(t());g()(e).css({height:n[1],"min-height":n[1]})},update:function(e,t){var n=l(2),i=l(6),o=O.unwrap(t()),a=n.pInt(o[1]),r=0,s=g()(e).offset().top;0<s&&(s+=n.pInt(o[2]),a<(r=i.$win.height()-s)&&(a=r),g()(e).css({height:a,"min-height":a}))}},O.bindingHandlers.appendDom={update:function(e,t){g()(e).hide().empty().append(O.unwrap(t())).show()}},O.bindingHandlers.draggable={init:function(e,t,n){var i=l(6),r=l(2);if(!i.bMobileDevice){var o=n(),s=o&&o.droppableSelector?o.droppableSelector:"",a={distance:20,handle:".dragHandle",cursorAt:{top:22,left:3},refreshPositions:!0,scroll:!0,drag:null,stop:null,helper:null};s&&(a.drag=function(a){g()(s).each(function(){var e=g()(this),t=e.offset(),n=t.top+e.height();if(f.a.clearInterval(e.data("timerScroll")),e.data("timerScroll",!1),a.pageX>=t.left&&a.pageX<=t.left+e.width()){if(a.pageY>=n-100&&a.pageY<=n){var i=function(){e.scrollTop(e.scrollTop()+3),r.windowResize()};e.data("timerScroll",f.a.setInterval(i,10)),i()}if(a.pageY>=t.top&&a.pageY<=t.top+100){var o=function(){e.scrollTop(e.scrollTop()-3),r.windowResize()};e.data("timerScroll",f.a.setInterval(o,10)),o()}}})},a.stop=function(){g()(s).each(function(){var e=g()(this);f.a.clearInterval(e.data("timerScroll")),e.data("timerScroll",!1)})}),a.helper=function(e){return t()(e&&e.target?O.dataFor(e.target):null)},g()(e).draggable(a).on("mousedown.koDraggable",function(){r.removeInFocus()}),O.utils.domNodeDisposal.addDisposeCallback(e,function(){g()(e).off("mousedown.koDraggable").draggable("destroy")})}}},O.bindingHandlers.droppable={init:function(e,t,n){if(!l(6).bMobileDevice){var i=t(),o=n(),a=o&&o.droppableOver?o.droppableOver:null,r=o&&o.droppableOut?o.droppableOut:null,s={tolerance:"pointer",hoverClass:"droppableHover",drop:null,over:null,out:null};i&&(s.drop=function(e,t){i(e,t)},a&&(s.over=function(e,t){a(e,t)}),r&&(s.out=function(e,t){r(e,t)}),g()(e).droppable(s),O.utils.domNodeDisposal.addDisposeCallback(e,function(){g()(e).droppable("destroy")}))}}},O.bindingHandlers.nano={init:function(e){var t=l(6),n=l(5);t.bDisableNanoScroll||n.appSettingsGet("useNativeScrollbars")||g()(e).addClass("nano").nanoScroller({iOSNativeScrolling:!1,preventPageScrolling:!0})}},O.bindingHandlers.saveTrigger={init:function(e){var t=g()(e);t.data("save-trigger-type",t.is("input[type=text],input[type=email],input[type=password],select,textarea")?"input":"custom"),"custom"===t.data("save-trigger-type")?t.append('&nbsp;&nbsp;<i class="icon-spinner animated"></i><i class="icon-remove error"></i><i class="icon-ok success"></i>').addClass("settings-saved-trigger"):t.addClass("settings-saved-trigger-input")},update:function(e,t){var n,i,o,a,r=O.unwrap(t()),s=g()(e);if("custom"===s.data("save-trigger-type"))switch(r.toString()){case"1":c()(n=c()(s).call(s,".animated,.error").hide().removeClass("visible").end()).call(n,".success").show().addClass("visible");break;case"0":c()(i=c()(s).call(s,".animated,.success").hide().removeClass("visible").end()).call(i,".error").show().addClass("visible");break;case"-2":c()(o=c()(s).call(s,".error,.success").hide().removeClass("visible").end()).call(o,".animated").show().addClass("visible");break;default:c()(a=c()(s).call(s,".animated").hide().end()).call(a,".error,.success").removeClass("visible")}else switch(r.toString()){case"1":s.addClass("success").removeClass("error");break;case"0":s.addClass("error").removeClass("success");break;case"-2":break;default:s.removeClass("error success")}}},O.bindingHandlers.emailsTags={init:function(e,t,n){var i=l(2),o=l(81).default,a=g()(e),r=t(),s=n().autoCompleteSource||null,c=[",",";","\n"];a.inputosaurus({parseOnBlur:!0,allowDragAndDrop:!0,focusCallback:function(e){r&&r.focused&&r.focused(!!e)},inputDelimiters:c,autoCompleteSource:s,splitHook:function(e){var t=p()(i).call(i,e);return t&&-1<d()(c).call(c,t.substr(-1))?o.splitEmailLine(e):null},parseHook:function(e){return u()(h.a).call(h.a,h.a.flatten(u()(h.a).call(h.a,e,function(e){var t=o.parseEmailLine(e);return t.length?t:e})),function(e){return h.a.isObject(e)?[e.toLine(!1),e]:[e,null]})},change:function(e){a.data("EmailsTagsValue",e.target.value),r(e.target.value)}}),r&&r.focused&&r.focused.subscribe&&r.focused.subscribe(function(e){a.inputosaurus(e?"focus":"blur")})},update:function(e,t){var n=g()(e),i=t(),o=O.unwrap(i);n.data("EmailsTagsValue")!==o&&(n.val(o),n.data("EmailsTagsValue",o),n.inputosaurus("refresh"))}},O.bindingHandlers.command={init:function(e,t,n,i,o){var a=g()(e),r=t();if(!r||!r.isCommand)throw new Error("Value should be a command");if(r.enabled||(r.enabled=O.observable(!0)),!r.canExecute){var s=r.__realCanExecute;h.a.isFunction(s)?r.canExecute=O.computed(function(){return r.enabled()&&s.call(i,i)}):r.canExecute=O.computed(function(){return r.enabled()&&!!s})}a.addClass("command"),O.bindingHandlers[a.is("form")?"submit":"click"].init(e,t,n,i,o)},update:function(e,t){var n=g()(e),i=t(),o=i.enabled();n.toggleClass("command-not-enabled",!o),o&&(o=i.canExecute(),n.toggleClass("command-can-not-be-execute",!o)),n.toggleClass("command-disabled disable disabled",!o).toggleClass("no-disabled",!!o),(n.is("input")||n.is("button"))&&n.prop("disabled",!o)}},O.extenders.trimmer=function(t){var n=l(2),e=O.computed({read:t,write:function(e){t(p()(n).call(n,e.toString()))}});return e(t()),e},O.extenders.posInterer=function(n,i){var o=l(2),e=O.computed({read:n,write:function(e){var t=o.pInt(e.toString(),i);t<=0&&(t=i),t===n()&&""+t!=""+e&&n(t+1),n(t)}});return e(n()),e},O.extenders.limitedList=function(i,o){var a=l(2),e=O.computed({read:i,write:function(e){var t=O.unwrap(i),n=O.unwrap(o);a.isNonEmptyArray(n)?-1<a.inArray(e,n)?i(e):-1<a.inArray(t,n)?(i(t+" "),i(t)):(i(n[0]+" "),i(n[0])):i("")}}).extend({notify:"always"});return e(i()),e.valueHasMutated||(e.valueHasMutated=function(){i.valueHasMutated()}),e},O.extenders.reversible=function(e){var t=e();return e.commit=function(){t=e()},e.reverse=function(){e(t)},e.commitedValue=function(){return t},e},O.extenders.toggleSubscribe=function(e,t){return e.subscribe(t[1],t[0],"beforeChange"),e.subscribe(t[2],t[0]),e},O.extenders.toggleSubscribeProperty=function(e,t){var n=t[1];return n&&(e.subscribe(function(e){e&&e[n]&&e[n](!1)},t[0],"beforeChange"),e.subscribe(function(e){e&&e[n]&&e[n](!0)},t[0])),e},O.extenders.falseTimeout=function(t,n){return t.iFalseTimeoutTimeout=0,t.subscribe(function(e){e&&(f.a.clearTimeout(t.iFalseTimeoutTimeout),t.iFalseTimeoutTimeout=f.a.setTimeout(function(){t(!1),t.iFalseTimeoutTimeout=0},l(2).pInt(n)))}),t},O.extenders.specialThrottle=function(t,e){return t.iSpecialThrottleTimeoutValue=l(2).pInt(e),0<t.iSpecialThrottleTimeoutValue?(t.iSpecialThrottleTimeout=0,t.valueForRead=O.observable(!!t()).extend({throttle:10}),O.computed({read:t.valueForRead,write:function(e){e?t.valueForRead(e):t.valueForRead()?(f.a.clearTimeout(t.iSpecialThrottleTimeout),t.iSpecialThrottleTimeout=f.a.setTimeout(function(){t.valueForRead(!1),t.iSpecialThrottleTimeout=0},t.iSpecialThrottleTimeoutValue)):t.valueForRead(e)}})):t},O.extenders.idleTrigger=function(e){return e.trigger=O.observable(S.SaveSettingsStep.Idle),e},O.observable.fn.idleTrigger=function(){return this.extend({idleTrigger:!0})},O.observable.fn.validateNone=function(){return this.hasError=O.observable(!1),this},O.observable.fn.validateEmail=function(){var t=this;return this.hasError=O.observable(!1),this.subscribe(function(e){t.hasError(""!==e&&!/^[^@\s]+@[^@\s]+$/.test(e))}),this.valueHasMutated(),this},O.observable.fn.validateSimpleEmail=function(){var t=this;return this.hasError=O.observable(!1),this.subscribe(function(e){t.hasError(""!==e&&!/^.+@.+$/.test(e))}),this.valueHasMutated(),this},O.observable.fn.deleteAccessHelper=function(){return this.extend({falseTimeout:3e3}).extend({toggleSubscribeProperty:[this,"deleteAccess"]}),this},O.observable.fn.validateFunc=function(t){var n=this;return this.hasFuncError=O.observable(!1),h.a.isFunction(t)&&(this.subscribe(function(e){n.hasFuncError(!t(e))}),this.valueHasMutated()),this},t.a=O},function(e,t,v){"use strict";v.r(t),v.d(t,"trim",function(){return L}),v.d(t,"inArray",function(){return P}),v.d(t,"isArray",function(){return M}),v.d(t,"isObject",function(){return D}),v.d(t,"isFunc",function(){return _}),v.d(t,"isUnd",function(){return k}),v.d(t,"isNull",function(){return x}),v.d(t,"has",function(){return U}),v.d(t,"bind",function(){return H}),v.d(t,"noop",function(){return B}),v.d(t,"noopTrue",function(){return G}),v.d(t,"noopFalse",function(){return V}),v.d(t,"silentTryCatch",function(){return K}),v.d(t,"isNormal",function(){return q}),v.d(t,"isPosNumeric",function(){return z}),v.d(t,"pInt",function(){return W}),v.d(t,"pString",function(){return Y}),v.d(t,"pBool",function(){return $}),v.d(t,"boolToAjax",function(){return J}),v.d(t,"isNonEmptyArray",function(){return X}),v.d(t,"encodeURIComponent",function(){return Z}),v.d(t,"decodeURIComponent",function(){return Q}),v.d(t,"decodeURI",function(){return ee}),v.d(t,"encodeURI",function(){return te}),v.d(t,"simpleQueryParser",function(){return ne}),v.d(t,"fakeMd5",function(){return ie}),v.d(t,"encodeHtml",function(){return oe}),v.d(t,"splitPlainText",function(){return ae}),v.d(t,"timeOutAction",function(){return ce}),v.d(t,"timeOutActionSecond",function(){return le}),v.d(t,"deModule",function(){return ue}),v.d(t,"inFocus",function(){return de}),v.d(t,"removeInFocus",function(){return pe}),v.d(t,"removeSelection",function(){return fe}),v.d(t,"replySubjectAdd",function(){return he}),v.d(t,"roundNumber",function(){return me}),v.d(t,"friendlySize",function(){return ge}),v.d(t,"log",function(){return be}),v.d(t,"delegateRun",function(){return ve}),v.d(t,"killCtrlACtrlS",function(){return ye}),v.d(t,"createCommandLegacy",function(){return Se}),v.d(t,"convertThemeName",function(){return Oe}),v.d(t,"quoteName",function(){return we}),v.d(t,"microtime",function(){return Te}),v.d(t,"timestamp",function(){return Ce}),v.d(t,"convertLangName",function(){return Ae}),v.d(t,"draggablePlace",function(){return Ee}),v.d(t,"defautOptionsAfterRender",function(){return Fe}),v.d(t,"clearBqSwitcher",function(){return je}),v.d(t,"previewMessage",function(){return Ne}),v.d(t,"settingsSaveHelperFunction",function(){return Re}),v.d(t,"settingsSaveHelperSimpleFunction",function(){return Ie}),v.d(t,"settingsSaveHelperSubscribeFunction",function(){return Le}),v.d(t,"findEmailAndLinks",function(){return Pe}),v.d(t,"htmlToPlain",function(){return Me}),v.d(t,"plainToHtml",function(){return De}),v.d(t,"folderListOptionsBuilder",function(){return _e}),v.d(t,"selectElement",function(){return ke}),v.d(t,"detectDropdownVisibility",function(){return xe}),v.d(t,"triggerAutocompleteInputChange",function(){return Ue}),v.d(t,"getConfigurationFromScriptTag",function(){return Be}),v.d(t,"disposeOne",function(){return Ge}),v.d(t,"disposeObject",function(){return Ve}),v.d(t,"delegateRunOnDestroy",function(){return Ke}),v.d(t,"appendStyles",function(){return qe}),v.d(t,"changeTheme",function(){return Ye}),v.d(t,"computedPagenatorHelper",function(){return $e}),v.d(t,"getFileExtension",function(){return Je}),v.d(t,"mimeContentType",function(){return Xe}),v.d(t,"isTransparent",function(){return Ze}),v.d(t,"getRealHeight",function(){return Qe}),v.d(t,"resizeAndCrop",function(){return et}),v.d(t,"mailToHelper",function(){return tt}),v.d(t,"domReady",function(){return nt}),v.d(t,"windowResize",function(){return it}),v.d(t,"windowResizeCallback",function(){return ot});v(76),v(75),v(52),v(55),v(144),v(48),v(94),v(193),v(56),v(168),v(169),v(67);var n=v(205),l=v.n(n),i=v(114),u=v.n(i),o=v(157),m=v.n(o),a=v(30),c=v.n(a),r=v(12),s=v.n(r),d=v(206),p=v.n(d),f=v(26),h=v.n(f),g=v(137),b=v.n(g),y=v(4),S=v.n(y),O=v(8),w=v.n(O),T=v(3),C=v.n(T),A=v(1),E=v(209),F=v.n(E),j=v(6),N=v(0),R=v(210),I=v(107);v.d(t,"jassl",function(){return I.a});var L=b()(w.a),P=w.a.inArray,M=C.a.isArray,D=C.a.isObject,_=C.a.isFunction,k=C.a.isUndefined,x=C.a.isNull,U=C.a.has,H=h()(C.a),B=function(){},G=function(){return!0},V=function(){return!1};function K(e){try{e()}catch(e){}}function q(e){return!k(e)&&!x(e)}function z(e,t){return void 0===t&&(t=!0),!!q(e)&&(t?/^[0-9]*$/.test(e.toString()):/^[1-9]+[0-9]*$/.test(e.toString()))}function W(e,t){void 0===t&&(t=0);var n=q(e)&&""!==e?S.a.parseInt(e,10):t;return S.a.isNaN(n)?t:n}function Y(e){return q(e)?""+e:""}function $(e){return!!e}function J(e){return e?"1":"0"}function X(e){return M(e)&&0<e.length}function Z(e){return S.a.encodeURIComponent(e)}function Q(e){return S.a.decodeURIComponent(e)}function ee(e){return S.a.decodeURI(e)}function te(e){return S.a.encodeURI(e)}function ne(e){var t,n=0,i=null,o=e.split("&"),a={};for(t=o.length;n<t;n++)a[Q((i=o[n].split("="))[0])]=Q(i[1]);return a}function ie(e){void 0===e&&(e=32);var t="0123456789abcdefghijklmnopqrstuvwxyz",n=t.length;e=W(e);for(var i="";i.length<e;)i+=t.substr(S.a.Math.round(S.a.Math.random()*n),1);return i}function oe(e){return q(e)?C.a.escape(e.toString()):""}function ae(e,t){void 0===t&&(t=100);for(var n="",i="",o=e,a=0,r=0;o.length>t;)i=o.substring(0,t),a=p()(i).call(i," "),-1!==(r=p()(i).call(i,"\n"))&&(a=r),-1===a&&(a=t),n+=i.substring(0,a)+"\n",o=o.substring(a+1);return n+o}var re,se,ce=(re={},function(e,t,n){re[e]=k(re[e])?0:re[e],S.a.clearTimeout(re[e]),re[e]=S.a.setTimeout(t,n)}),le=(se={},function(e,t,n){se[e]||(se[e]=S.a.setTimeout(function(){t(),se[e]=0},n))});function ue(e){return(e&&e.default?e.default:e)||""}function de(){try{if(S.a.document.activeElement)return k(S.a.document.activeElement.__inFocusCache)&&(S.a.document.activeElement.__inFocusCache=w()(S.a.document.activeElement).is("input,textarea,iframe,.cke_editable")),!!S.a.document.activeElement.__inFocusCache}catch(e){}return!1}function pe(e){if(S.a.document&&S.a.document.activeElement&&S.a.document.activeElement.blur)try{var t=w()(S.a.document.activeElement);t&&t.is("input,textarea")?S.a.document.activeElement.blur():e&&S.a.document.activeElement.blur()}catch(e){}}function fe(){try{if(S.a&&S.a.getSelection){var e=S.a.getSelection();e&&e.removeAllRanges&&e.removeAllRanges()}else S.a.document&&S.a.document.selection&&S.a.document.selection.empty&&S.a.document.selection.empty()}catch(e){}}function he(e,t){e=L(e.toUpperCase()),t=L(t.replace(/[\s]+/g," "));var n=!1,i="RE"===e,o="FWD"===e,a=[],r=!o;return""!==t&&C.a.each(t.split(":"),function(e){var t=L(e);n||!/^(RE|FWD)$/i.test(t)&&!/^(RE|FWD)[[(][\d]+[\])]$/i.test(t)?(a.push(e),n=!0):(i||(i=!!/^RE/i.test(t)),o||(o=!!/^FWD/i.test(t)))}),r?i=!1:o=!1,L((r?"Re: ":"Fwd: ")+(i?"Re: ":"")+(o?"Fwd: ":"")+L(a.join(":")))}function me(e,t){return S.a.Math.round(e*S.a.Math.pow(10,t))/S.a.Math.pow(10,t)}function ge(e){switch(e=W(e),!0){case 1073741824<=e:return me(e/1073741824,1)+"GB";case 1048576<=e:return me(e/1048576,1)+"MB";case 1024<=e:return me(e/1024,0)+"KB"}return e+"B"}function be(e){S.a.console&&S.a.console.log&&S.a.console.log(e)}function ve(e,t,n,i){void 0===i&&(i=0),e&&e[t]&&(i=W(i),n=M(n)?n:[],i<=0?e[t].apply(e,n):C.a.delay(function(){e[t].apply(e,n)},i))}function ye(e){if((e=e||S.a.event)&&e.ctrlKey&&!e.shiftKey&&!e.altKey){var t=e.keyCode||e.which;if(t===N.EventKeyCode.S)return void e.preventDefault();if(t===N.EventKeyCode.A){var n=e.target||e.srcElement;if(n&&("true"==""+n.contentEditable||n.tagName&&n.tagName.match(/INPUT|TEXTAREA/i)))return;S.a.getSelection?S.a.getSelection().removeAllRanges():S.a.document.selection&&S.a.document.selection.clear&&S.a.document.selection.clear(),e.preventDefault()}}}function Se(i,o,e){void 0===e&&(e=!0);var a=null;return(a=o?function(){if(a&&a.canExecute&&a.canExecute()){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o.apply(i,t)}return!1}:B).enabled=A.a.observable(!0),a.isCommand=!0,_(e)?a.canExecute=A.a.computed(function(){return a&&a.enabled()&&e.call(i)}):a.canExecute=A.a.computed(function(){return a&&a.enabled()&&!!e}),a}var Oe=C.a.memoize(function(e){return"@custom"===e.substr(-7)&&(e=L(e.substring(0,e.length-7))),L(e.replace(/[^a-zA-Z0-9]+/g," ").replace(/([A-Z])/g," $1").replace(/[\s]+/g," "))});function we(e){return e.replace(/["]/g,'\\"')}function Te(){return(new S.a.Date).getTime()}function Ce(){return S.a.Math.round(Te()/1e3)}function Ae(e,t){return void 0===t&&(t=!1),v(9).i18n("LANGS_NAMES"+(!0===t?"_EN":"")+"/LANG_"+e.toUpperCase().replace(/[^a-zA-Z0-9]+/g,"_"),null,e)}function Ee(){return w()('<div class="draggablePlace"><span class="text"></span>&nbsp;<i class="icon-copy icon-white visible-on-ctrl"></i><i class="icon-mail icon-white hidden-on-ctrl"></i></div>').appendTo("#rl-hidden")}function Fe(e,t){t&&!k(t.disabled)&&e&&w()(e).toggleClass("disabled",t.disabled).prop("disabled",t.disabled)}function je(e){s()(e).call(e,"blockquote.rl-bq-switcher").removeClass("rl-bq-switcher hidden-bq"),s()(e).call(e,".rlBlockquoteSwitcher").off(".rlBlockquoteSwitcher").remove(),s()(e).call(e,"[data-html-editor-font-wrapper]").removeAttr("data-html-editor-font-wrapper")}function Ne(e,t,n,i){var o=e.title,a=e.subject,r=e.date,s=e.fromCreds,c=e.toCreds,l=e.toLabel,u=e.ccClass,d=e.ccCreds,p=e.ccLabel,f=S.a.open(""),h=f.document,m=t.clone(),g=n?"html":"plain";je(m);var b=m?m.html():"";h.write(ue(v(346)).replace("{{title}}",oe(o)).replace("{{subject}}",oe(a)).replace("{{date}}",oe(r)).replace("{{fromCreds}}",oe(s)).replace("{{toCreds}}",oe(c)).replace("{{toLabel}}",oe(l)).replace("{{ccClass}}",oe(u)).replace("{{ccCreds}}",oe(d)).replace("{{ccLabel}}",oe(p)).replace("{{bodyClass}}",g).replace("{{html}}",b)),h.close(),i&&S.a.setTimeout(function(){return f.print()},100)}function Re(a,r,s,c){return void 0===s&&(s=null),void 0===c&&(c=1e3),c=W(c),function(e,t,n,i,o){r.call(s,t&&t.Result?N.SaveSettingsStep.TrueResult:N.SaveSettingsStep.FalseResult),a&&a.call(s,e,t,n,i,o),C.a.delay(function(){r.call(s,N.SaveSettingsStep.Idle)},c)}}function Ie(e,t){return Re(null,e,t,1e3)}function Le(n,i,o,a){return function(e){if(n){switch(o){case"bool":case"boolean":e=e?"1":"0";break;case"int":case"integer":case"number":e=W(e);break;case"trim":e=L(e);break;default:e=Y(e)}var t={};t[i]=e,n.saveAdminConfig?n.saveAdminConfig(a||null,t):n.saveSettings&&n.saveSettings(a||null,t)}}}function Pe(e){return F.a?F.a.link(e,{newWindow:!0,stripPrefix:!1,urls:!0,email:!0,mention:!1,phone:!1,hashtag:!1,replaceFn:function(e){var t;return!(e&&"url"===e.getType()&&e.matchedText&&0!==c()(t=e.matchedText).call(t,"http"))}}):e}function Me(e){var t,n=0,i=0,o=0,a=0,r=0,s="";for(s=e.replace(/<p[^>]*><\/p>/gi,"").replace(/<pre[^>]*>([\s\S\r\n\t]*)<\/pre>/gim,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t&&1<t.length?t[1].toString().replace(/[\n]/gm,"<br />").replace(/[\r]/gm,""):""}).replace(/[\s]+/gm," ").replace(/((?:href|data)\s?=\s?)("[^"]+?"|'[^']+?')/gim,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t&&1<t.length?""+t[1]+C.a.escape(t[2]):""}).replace(/<br[^>]*>/gim,"\n").replace(/<\/h[\d]>/gi,"\n").replace(/<\/p>/gi,"\n\n").replace(/<ul[^>]*>/gim,"\n").replace(/<\/ul>/gi,"\n").replace(/<li[^>]*>/gim," * ").replace(/<\/li>/gi,"\n").replace(/<\/td>/gi,"\n").replace(/<\/tr>/gi,"\n").replace(/<hr[^>]*>/gim,"\n_______________________________\n\n").replace(/<div[^>]*>([\s\S\r\n]*)<\/div>/gim,function e(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];if(n&&1<n.length){var o=L(n[1]);return 0<o.length&&(o=o.replace(/<div[^>]*>([\s\S\r\n]*)<\/div>/gim,e),o="\n"+L(o)+"\n"),o}return""}).replace(/<blockquote[^>]*>/gim,"\n__bq__start__\n").replace(/<\/blockquote>/gim,"\n__bq__end__\n").replace(/<a [^>]*>([\s\S\r\n]*?)<\/a>/gim,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t&&1<t.length?L(t[1]):""}).replace(/<\/div>/gi,"\n").replace(/&nbsp;/gi," ").replace(/&quot;/gi,'"').replace(/<[^>]*>/gm,""),s=ae(s=(s=j.$div.html(s).text()).replace(/\n[ \t]+/gm,"\n").replace(/[\n]{3,}/gm,"\n\n").replace(/&gt;/gi,">").replace(/&lt;/gi,"<").replace(/&amp;/gi,"&")),n=0,i=800;0<i&&(i-=1,-1<(o=c()(s).call(s,"__bq__start__",n)));)a=c()(s).call(s,"__bq__start__",o+5),r=c()(s).call(s,"__bq__end__",o+5),n=(-1===a||r<a)&&o<r?(s=s.substring(0,o)+(t=s.substring(o+13,r),(t="> "+L(t).replace(/\n/gm,"\n> ")).replace(/(^|\n)([> ]+)/gm,function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t&&2<t.length?t[1]+L(t[2].replace(/[\s]/g,""))+" ":""}))+s.substring(r+11),0):-1<a&&a<r?a-1:0;return s=s.replace(/__bq__start__/gm,"").replace(/__bq__end__/gm,"")}function De(e,t){void 0===t&&(t=!1);var n=!1,i=!0,o=!0,a=[],r="",s=0,c=(e=(e=e.toString().replace(/\r/g,"")).replace(/^>[> ]>+/gm,function(e){var t=e[0];return t?t.replace(/[ ]+/g,""):t})).split("\n");do{for(i=!1,a=[],s=0;s<c.length;s++)(o=">"===(r=c[s]).substr(0,1))&&!n?(n=i=!0,a.push("~~~blockquote~~~"),a.push(r.substr(1))):!o&&n?(""!==r&&(n=!1,a.push("~~~/blockquote~~~")),a.push(r)):o&&n?a.push(r.substr(1)):a.push(r);n&&(n=!1,a.push("~~~/blockquote~~~")),c=a}while(i);return e=(e=c.join("\n")).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/~~~blockquote~~~[\s]*/g,"<blockquote>").replace(/[\s]*~~~\/blockquote~~~/g,"</blockquote>").replace(/\n/g,"<br />"),t?Pe(e):e}function _e(e,t,n,i,o,a,r,s,c,l){var u=null,d=!1,p=0,f=0,h=[];for(l=!k(l)&&!!l,c=q(c)?c:0<e.length,o=q(o)?o:0,a=q(a)?a:null,r=q(r)?r:null,s=q(s)?s:null,M(n)||(n=[]),M(i)||(i=[]),p=0,f=i.length;p<f;p++)h.push({id:i[p][0],name:i[p][1],system:!1,seporator:!1,disabled:!1});for(d=!0,p=0,f=e.length;p<f;p++)u=e[p],r&&!r(u)||(d&&0<h.length&&h.push({id:"---",name:"---",system:!1,seporator:!0,disabled:!0}),d=!1,h.push({id:u.fullNameRaw,name:s?s(u):u.name(),system:!0,seporator:!1,disabled:!u.selectable||-1<P(u.fullNameRaw,n)||!!a&&a(u)}));for(d=!0,p=0,f=t.length;p<f;p++)!(u=t[p]).subScribed()&&u.existen&&!l||!u.selectable&&!u.hasSubScribedSubfolders()||r&&!r(u)||N.FolderType.User!==u.type()&&c&&!u.hasSubScribedSubfolders()||(d&&0<h.length&&h.push({id:"---",name:"---",system:!1,seporator:!0,disabled:!0}),d=!1,h.push({id:u.fullNameRaw,name:new S.a.Array(u.deep+1-o).join("   ")+(s?s(u):u.name()),system:!1,seporator:!1,disabled:!u.selectable||-1<P(u.fullNameRaw,n)||!!a&&a(u)})),u.subScribed()&&0<u.subFolders().length&&(h=m()(h).call(h,_e([],u.subFolders(),n,[],o,a,r,s,c,l)));return h}function ke(e){var t=null,n=null;S.a.getSelection?((t=S.a.getSelection()).removeAllRanges(),(n=S.a.document.createRange()).selectNodeContents(e),t.addRange(n)):S.a.document.selection&&((n=S.a.document.body.createTextRange()).moveToElementText(e),n.select())}S.a.rainloop_Utils_htmlToPlain=Me,S.a.rainloop_Utils_plainToHtml=De;var xe=C.a.debounce(function(){Object(j.dropdownVisibility)(!!s()(C.a).call(C.a,j.data.aBootstrapDropdowns,function(e){return e.hasClass("open")}))},50);function Ue(e){void 0===e&&(e=!1);var t=function(){w()(".checkAutocomplete").trigger("change")};e?C.a.delay(t,100):t()}var He={};function Be(e){He[e]||(He[e]=w()('script[type="application/json"][data-configuration="'+e+'"]'));try{return JSON.parse(He[e].text())}catch(e){}return{}}function Ge(e,t){var n=t||e;n&&"function"==typeof n.dispose&&n.dispose()}function Ve(e){e&&(M(e.disposables)&&C.a.each(e.disposables,Ge),A.a.utils.objectForEach(e,Ge))}function Ke(e){e&&(M(e)?C.a.each(e,function(e){Ke(e)}):e&&e.onDestroy&&e.onDestroy())}function qe(e,t){return!(!e||!e[0])&&(e[0].styleSheet&&!k(e[0].styleSheet.cssText)?e[0].styleSheet.cssText=t:e.text(t),!0)}var ze=0,We=null;function Ye(e,t){void 0===t&&(t=B);var n=w()("#app-theme-link"),i=function(){ze=S.a.setTimeout(function(){return t(N.SaveSettingsStep.Idle)},1e3),We=null},o=w()("#app-theme-style"),a=n.attr("href");a||(a=o.attr("data-href")),a&&("Json/"!==(a=(a=(a=a.toString().replace(/\/-\/[^/]+\/-\//,"/-/"+e+"/-/")).replace(/\/Css\/[^/]+\/User\//,"/Css/0/User/")).replace(/\/Hash\/[^/]+\//,"/Hash/-/")).substring(a.length-5,a.length)&&(a+="Json/"),S.a.clearTimeout(ze),t(N.SaveSettingsStep.Animate),We&&We.abort&&We.abort(),We=w.a.ajax({url:a,dataType:"json"}).then(function(e){e&&M(e)&&2===e.length&&(!n||!n[0]||o&&o[0]||(o=w()('<style id="app-theme-style"></style>'),n.after(o),n.remove()),o&&o[0]&&qe(o,e[1])&&o.attr("data-href",a).attr("data-theme",e[0]),t(N.SaveSettingsStep.TrueResult))}).then(i,i))}function $e(s,c){return function(){var o=s(),e=c(),a=[],t=function(e,t,n){void 0===t&&(t=!0),void 0===n&&(n="");var i={current:e===o,name:""===n?e.toString():n.toString(),custom:""!==n,title:""===n?"":e.toString(),value:e.toString()};t?a.push(i):a.unshift(i)},n=0,i=0,r=2;if(1<e||0<e&&e<o){for(i=n=e<o?(t(e),e):((o<=3||e-2<=o)&&(r+=2),t(o),o);0<r;)if(i+=1,0<(n-=1)&&(t(n,!1),r-=1),i<=e)t(i,!0),r-=1;else if(n<=0)break;3===n?t(2,!1):3<n&&t(Math.round((n-1)/2),!1,"..."),e-2===i?t(e-1,!0):i<e-2&&t(Math.round((e+i)/2),!0,"..."),1<n&&t(1,!1),i<e&&t(e,!0)}return a}}function Je(e){var t=(e=L(e).toLowerCase()).split(".").pop();return t===e?"":t}function Xe(e){var t,n="application/octet-stream";return"winmail.dat"===(e=L(e).toLowerCase())?"application/ms-tnef":((t=Je(e))&&0<t.length&&!k(R.a[t])&&(n=R.a[t]),n)}function Ze(e){return"rgba(0, 0, 0, 0)"===e||"transparent"===e}function Qe(e){e.clone().show().appendTo(j.$hcont);var t=j.$hcont.height();return j.$hcont.empty(),t}function et(e,i,o){var t=new S.a.Image;t.onload=function(){var e=[0,0],t=S.a.document.createElement("canvas"),n=t.getContext("2d");t.width=i,t.height=i,e=this.width>this.height?[this.width-this.height,0]:[0,this.height-this.width],n.fillStyle="#fff",n.fillRect(0,0,i,i),n.drawImage(this,e[0]/2,e[1]/2,this.width-e[0],this.height-e[1],0,0,i,i),o(t.toDataURL("image/jpeg"))},t.src=e}function tt(e,t){if(e&&"mailto:"===e.toString().substr(0,7).toLowerCase()){if(!t)return!0;var n,i=[],o=null,a=null,r=(e=e.toString().substr(7)).replace(/\?.+$/,""),s=e.replace(/^[^?]*\?/,""),c=v(81).default;return n=ne(s),i=k(n.to)?c.parseEmailLine(r):(i=c.parseEmailLine(Q(r+","+n.to)),u()(C.a).call(C.a,l()(i).call(i,function(e,t){return t&&(e[t.email]&&e[t.email].name||(e[t.email]=t)),e},{}))),k(n.cc)||(o=c.parseEmailLine(Q(n.cc))),k(n.bcc)||(a=c.parseEmailLine(Q(n.bcc))),v(7).showScreenPopup(t,[N.ComposeType.Empty,null,i,o,a,k(n.subject)?null:Y(Q(n.subject)),k(n.body)?null:De(Y(Q(n.body)))]),!0}return!1}function nt(e){w()(function(){return e()})}var it=C.a.debounce(function(e){k(e)||x(e)?j.$win.resize():S.a.setTimeout(function(){j.$win.resize()},e)},50);function ot(){it()}var at=S.a.String.substr;"b"!=="ab".substr(-1)&&(at=function(e,t,n){return t=t<0?e.length+t:t,e.substr(t,n)},S.a.String.substr=at)},function(e,t){e.exports=window._},function(e,t){e.exports=window},function(e,t,n){"use strict";n.r(t),n.d(t,"settingsGet",function(){return c}),n.d(t,"settingsSet",function(){return l}),n.d(t,"appSettingsGet",function(){return u}),n.d(t,"capa",function(){return d});var i=n(4),o=n.n(i),a=n(2),r=o.a.__rlah_data()||null,s=(r=Object(a.isNormal)(r)?r:{}).System||null;function c(e){return Object(a.isUnd)(r[e])?null:r[e]}function l(e,t){r[e]=t}function u(e){return Object(a.isUnd)(s[e])?null:s[e]}function d(e){var t=c("Capa");return Object(a.isArray)(t)&&Object(a.isNormal)(e)&&-1<Object(a.inArray)(e,t)}s=Object(a.isNormal)(s)?s:{}},function(e,t,n){"use strict";n.r(t),n.d(t,"$win",function(){return b}),n.d(t,"$doc",function(){return v}),n.d(t,"$html",function(){return y}),n.d(t,"$body",function(){return S}),n.d(t,"$div",function(){return O}),n.d(t,"$hcont",function(){return w}),n.d(t,"startMicrotime",function(){return T}),n.d(t,"community",function(){return C}),n.d(t,"dropdownVisibility",function(){return A}),n.d(t,"useKeyboardShortcuts",function(){return E}),n.d(t,"sUserAgent",function(){return F}),n.d(t,"bIE",function(){return j}),n.d(t,"bChrome",function(){return N}),n.d(t,"bSafari",function(){return R}),n.d(t,"bMobileDevice",function(){return I}),n.d(t,"bDisableNanoScroll",function(){return L}),n.d(t,"bAnimationSupported",function(){return P}),n.d(t,"bXMLHttpRequestSupported",function(){return M}),n.d(t,"bIsHttps",function(){return D}),n.d(t,"htmlEditorDefaultConfig",function(){return _}),n.d(t,"htmlEditorLangsMap",function(){return k}),n.d(t,"bAllowPdfPreview",function(){return x}),n.d(t,"VIEW_MODELS",function(){return U}),n.d(t,"moveAction",function(){return H}),n.d(t,"leftPanelDisabled",function(){return B}),n.d(t,"leftPanelType",function(){return G}),n.d(t,"leftPanelWidth",function(){return V}),n.d(t,"popupVisibilityNames",function(){return K}),n.d(t,"popupVisibility",function(){return q}),n.d(t,"keyScopeReal",function(){return z}),n.d(t,"keyScopeFake",function(){return W}),n.d(t,"keyScope",function(){return Y}),n.d(t,"data",function(){return $});n(265),n(75);var i=n(12),o=n.n(i),a=n(30),r=n.n(a),s=n(4),c=n.n(s),l=n(3),u=n.n(l),d=n(8),p=n.n(d),f=n(21),h=n.n(f),m=n(1),g=n(0),b=p()(c.a);b.__sizes=[0,0];var v=p()(c.a.document),y=p()("html"),S=p()("body"),O=p()("<div></div>"),w=p()("<div></div>");w.attr("area","hidden").css({position:"absolute",left:-5e3}).appendTo(S);var T=(new c.a.Date).getTime(),C=!0,A=m.a.observable(!1).extend({rateLimit:0}),E=m.a.observable(!0),F="navigator"in c.a&&"userAgent"in c.a.navigator&&c.a.navigator.userAgent.toLowerCase()||"",j=-1<r()(F).call(F,"msie"),N=-1<r()(F).call(F,"chrome"),R=!N&&-1<r()(F).call(F,"safari"),I=/android/i.test(F)||/iphone/i.test(F)||/ipod/i.test(F)||/ipad/i.test(F)||/blackberry/i.test(F),L=I,P=!I&&y.hasClass("csstransitions")&&y.hasClass("cssanimations"),M=!!c.a.XMLHttpRequest,D=!(!c.a.document||!c.a.document.location)&&"https:"===c.a.document.location.protocol,_={title:!1,stylesSet:!1,customConfig:"",contentsCss:"",toolbarGroups:[{name:"spec"},{name:"styles"},{name:"basicstyles",groups:["basicstyles","cleanup","bidi"]},{name:"colors"},I?{}:{name:"paragraph",groups:["list","indent","blocks","align"]},{name:"links"},{name:"insert"},{name:"document",groups:["mode","document","doctools"]},{name:"others"}],removePlugins:"liststyle",removeButtons:"Format,Undo,Redo,Cut,Copy,Paste,Anchor,Strike,Subscript,Superscript,Image,SelectAll,Source",removeDialogTabs:"link:advanced;link:target;image:advanced;images:advanced",extraPlugins:"plain,signature",allowedContent:!0,extraAllowedContent:!0,fillEmptyBlocks:!1,ignoreEmptyParagraph:!0,disableNativeSpellChecker:!1,colorButton_enableAutomatic:!1,colorButton_enableMore:!0,font_defaultLabel:"Arial",fontSize_defaultLabel:"13",fontSize_sizes:"10/10px;12/12px;13/13px;14/14px;16/16px;18/18px;20/20px;24/24px;28/28px;36/36px;48/48px"},k={ar_sa:"ar-sa",bg_bg:"bg",cs_CZ:"cs",de_de:"de",el_gr:"el",es_es:"es",et_ee:"et",fr_fr:"fr",hu_hu:"hu",is_is:"is",it_it:"it",ja_jp:"ja",ko_kr:"ko",lt_lt:"lt",lv_lv:"lv",fa_ir:"fa",nb_no:"nb",nl_nl:"nl",pl_pl:"pl",pt_br:"pt-br",pt_pt:"pt",ro_ro:"ro",ru_ru:"ru",sk_sk:"sk",sl_si:"sl",sv_se:"sv",tr_tr:"tr",uk_ua:"uk",zh_cn:"zh-cn",zh_tw:"zh"},x=!I;x&&c.a.navigator&&c.a.navigator.mimeTypes&&((x=!!o()(u.a).call(u.a,c.a.navigator.mimeTypes,function(e){return e&&"application/pdf"===e.type}))||(x=void 0!==c.a.navigator.mimeTypes["application/pdf"]));var U={settings:[],"settings-removed":[],"settings-disabled":[]},H=m.a.observable(!1),B=m.a.observable(!1),G=m.a.observable(""),V=m.a.observable(0);B.subscribe(function(e){e&&H()&&H(!1)}),H.subscribe(function(e){e&&B()&&B(!1)});var K=m.a.observableArray([]),q=m.a.computed(function(){return 0<K().length});q.subscribe(function(e){y.toggleClass("rl-modal",e)});var z=m.a.observable(g.KeyState.All),W=m.a.observable(g.KeyState.All),Y=m.a.computed({read:function(){return W()},write:function(e){g.KeyState.Menu!==e&&(g.KeyState.Compose===e?h.a.filter=function(){return E()}:h.a.filter=function(e){if(E()){var t=e.target||e.srcElement,n=t?t.tagName.toUpperCase():"";return!("INPUT"===n||"SELECT"===n||"TEXTAREA"===n||t&&"DIV"===n&&("editorHtmlArea"===t.className||"true"==""+t.contentEditable))}return!1},W(e),A()&&(e=g.KeyState.Menu)),z(e)}});z.subscribe(function(e){h.a.setScope(e)}),A.subscribe(function(e){e?Y(g.KeyState.Menu):g.KeyState.Menu===h.a.getScope()&&Y(W())});var $={__APP__:null,iAjaxErrorCount:0,iTokenErrorCount:0,aBootstrapDropdowns:[],iMessageBodyCacheCount:0,bUnload:!1}},function(e,t,n){"use strict";n.r(t),n.d(t,"ViewType",function(){return O}),n.d(t,"hideLoading",function(){return w}),n.d(t,"createCommand",function(){return T}),n.d(t,"addSettingsViewModel",function(){return C}),n.d(t,"removeSettingsViewModel",function(){return A}),n.d(t,"disableSettingsViewModel",function(){return E}),n.d(t,"routeOff",function(){return F}),n.d(t,"routeOn",function(){return j}),n.d(t,"screen",function(){return N}),n.d(t,"getScreenPopup",function(){return R}),n.d(t,"hideScreenPopup",function(){return I}),n.d(t,"vmRunHook",function(){return L}),n.d(t,"buildViewModel",function(){return P}),n.d(t,"showScreenPopup",function(){return M}),n.d(t,"warmUpScreenPopup",function(){return D}),n.d(t,"isPopupVisible",function(){return _}),n.d(t,"screenOnRoute",function(){return k}),n.d(t,"startScreens",function(){return x}),n.d(t,"setHash",function(){return U}),n.d(t,"commandDecorator",function(){return G}),n.d(t,"command",function(){return G}),n.d(t,"viewDecorator",function(){return H}),n.d(t,"view",function(){return H}),n.d(t,"viewModel",function(){return H}),n.d(t,"popupDecorator",function(){return B}),n.d(t,"popup",function(){return B}),n.d(t,"settingsMenuKeysHandler",function(){return V});n(52),n(48),n(193);var i=n(34),r=n.n(i),o=n(3),s=n.n(o),a=n(8),c=n.n(a),l=n(1),u=n(61),d=n.n(u),p=n(158),f=n.n(p),h=n(0),m=n(38),g=n(6),b=n(2),v=null,y="",S={},O={Popup:"Popups",Left:"Left",Right:"Right",Center:"Center"};function w(){c()("#rl-content").addClass("rl-content-show"),c()("#rl-loading").hide().remove()}function T(e,t){return void 0===t&&(t=!0),Object(b.createCommandLegacy)(null,e,t)}function C(e,t,n,i,o){void 0===o&&(o=!1),e.__rlSettingsData={Label:n,Template:t,Route:i,IsDefault:!!o},g.VIEW_MODELS.settings.push(e)}function A(e){g.VIEW_MODELS["settings-removed"].push(e)}function E(e){g.VIEW_MODELS["settings-disabled"].push(e)}function F(){d.a.changed.active=!1}function j(){d.a.changed.active=!0}function N(e){return""===e||Object(b.isUnd)(S[e])?null:S[e]}function R(e){var t=null;return e&&(t=e).default&&(t=e.default),t}function I(e){var t=R(e);t&&t.__vm&&t.__dom&&t.__vm.modalVisibility(!1)}function L(t,n,i){void 0===i&&(i=null),s.a.each(n.__names,function(e){Object(m.f)(t,[e,n.__vm,i])})}function P(t,e){if(t&&!t.__builded){var n=null,i=new t(e),o=t.__type||"",a=o?c()("#rl-content #rl-"+o.toLowerCase()):null;t.__builded=!0,(t.__vm=i).onShowTrigger=l.a.observable(!1),i.onHideTrigger=l.a.observable(!1),i.viewModelName=t.__name,i.viewModelNames=t.__names,i.viewModelTemplateID=t.__templateID,i.viewModelPosition=t.__type,a&&1===a.length?((n=c()("<div></div>").addClass("rl-view-model").addClass("RL-"+i.viewModelTemplateID).hide()).appendTo(a),i.viewModelDom=n,t.__dom=n,O.Popup===o&&(i.cancelCommand=i.closeCommand=T(function(){I(t)}),i.modalVisibility.subscribe(function(e){e?(i.viewModelDom.show(),i.storeAndSetKeyScope(),g.popupVisibilityNames.push(i.viewModelName),i.viewModelDom.css("z-index",3e3+Object(g.popupVisibilityNames)().length+10),i.onShowTrigger&&i.onShowTrigger(!i.onShowTrigger()),Object(b.delegateRun)(i,"onShowWithDelay",[],500)):(Object(b.delegateRun)(i,"onHide"),Object(b.delegateRun)(i,"onHideWithDelay",[],500),i.onHideTrigger&&i.onHideTrigger(!i.onHideTrigger()),i.restoreKeyScope(),L("view-model-on-hide",t),g.popupVisibilityNames.remove(i.viewModelName),i.viewModelDom.css("z-index",2e3),s.a.delay(function(){return i.viewModelDom.hide()},300))})),L("view-model-pre-build",t,n),l.a.applyBindingAccessorsToNode(n[0],{translatorInit:!0,template:function(){return{name:i.viewModelTemplateID}}},i),Object(b.delegateRun)(i,"onBuild",[n]),i&&O.Popup===o&&i.registerPopupKeyDown(),L("view-model-post-build",t,n)):Object(b.log)("Cannot find view model position: "+o)}return t?t.__vm:null}function M(e,t){void 0===t&&(t=[]);var n=R(e);n&&(P(n),n.__vm&&n.__dom&&(Object(b.delegateRun)(n.__vm,"onBeforeShow",t||[]),n.__vm.modalVisibility(!0),Object(b.delegateRun)(n.__vm,"onShow",t||[]),L("view-model-on-show",n,t||[])))}function D(e){var t=R(e);t&&(P(t),t.__vm&&t.__dom&&Object(b.delegateRun)(t.__vm,"onWarmUp"))}function _(e){var t=R(e);return!(!t||!t.__vm)&&t.__vm.modalVisibility()}function k(e,t){var n=null,i=!1,o=null;""===Object(b.pString)(e)&&(e=y),""!==e&&((n=N(e))||(n=N(y))&&(t=e+"/"+t,e=y),n&&n.__started&&(i=v&&n===v,n.__builded||(n.__builded=!0,Object(b.isNonEmptyArray)(n.viewModels())&&s.a.each(n.viewModels(),function(e){P(e,n)}),Object(b.delegateRun)(n,"onBuild")),s.a.defer(function(){v&&!i&&(Object(b.delegateRun)(v,"onHide"),Object(b.delegateRun)(v,"onHideWithDelay",[],500),v.onHideTrigger&&v.onHideTrigger(!v.onHideTrigger()),Object(b.isNonEmptyArray)(v.viewModels())&&s.a.each(v.viewModels(),function(e){e.__vm&&e.__dom&&O.Popup!==e.__vm.viewModelPosition&&(e.__dom.hide(),e.__vm.viewModelVisibility(!1),Object(b.delegateRun)(e.__vm,"onHide"),Object(b.delegateRun)(e.__vm,"onHideWithDelay",[],500),e.__vm.onHideTrigger&&e.__vm.onHideTrigger(!e.__vm.onHideTrigger()))})),(v=n)&&!i&&(Object(b.delegateRun)(v,"onShow"),v.onShowTrigger&&v.onShowTrigger(!v.onShowTrigger()),Object(m.f)("screen-on-show",[v.screenName(),v]),Object(b.isNonEmptyArray)(v.viewModels())&&s.a.each(v.viewModels(),function(e){e.__vm&&e.__dom&&O.Popup!==e.__vm.viewModelPosition&&(Object(b.delegateRun)(e.__vm,"onBeforeShow"),e.__dom.show(),e.__vm.viewModelVisibility(!0),Object(b.delegateRun)(e.__vm,"onShow"),e.__vm.onShowTrigger&&e.__vm.onShowTrigger(!e.__vm.onShowTrigger()),Object(b.delegateRun)(e.__vm,"onShowWithDelay",[],200),L("view-model-on-show",e))})),(o=n&&n.__cross?n.__cross():null)&&o.parse(t)})))}function x(e){s.a.each(e,function(e){if(e){var t=new e,n=t?t.screenName():"";t&&""!==n&&(""===y&&(y=n),S[n]=t)}}),s.a.each(S,function(e){e&&!e.__started&&e.__start&&(e.__started=!0,e.__start(),Object(m.f)("screen-pre-start",[e.screenName(),e]),Object(b.delegateRun)(e,"onStart"),Object(m.f)("screen-post-start",[e.screenName(),e]))});var t=f.a.create();t.addRoute(/^([a-zA-Z0-9-]*)\/?(.*)$/,k),d.a.initialized.add(t.parse,t),d.a.changed.add(t.parse,t),d.a.init(),s.a.delay(function(){return g.$html.removeClass("rl-started-trigger").addClass("rl-started")},100),s.a.delay(function(){return g.$html.addClass("rl-started-delay")},200)}function U(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1),e="/"===(e="#"===e.substr(0,1)?e.substr(1):e).substr(0,1)?e.substr(1):e;var i=n?"replaceHash":"setHash";t?(d.a.changed.active=!1,d.a[i](e),d.a.changed.active=!0):(d.a.changed.active=!0,d.a[i](e),d.a.setHash(e))}function H(e){var t=e.name,n=e.type,i=e.templateID;return function(e){e&&(t&&(Object(b.isArray)(t)?e.__names=t:e.__names=[t],e.__name=e.__names[0]),n&&(e.__type=n),i&&(e.__templateID=i))}}function B(e){var t=e.name,n=e.templateID;return H({name:t,type:O.Popup,templateID:n})}function G(a){return void 0===a&&(a=!0),function(e,t,n){if(!t||!t.match(/Command$/))throw new Error('name "'+t+'" should end with Command suffix');var i=n.value||n.initializer(),o=Object(b.isFunc)(a)?a:function(){return!!a};return n.value=function(){if(o.call(this,this)){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];i.apply(this,t)}return!1},n.value.__realCanExecute=o,n.value.isCommand=!0,n}}function V(a){return s.a.throttle(function(e,t){var n=t&&"up"===t.shortcut;if(e&&a.length){var i=a.index(r()(a).call(a,".selected"));n&&0<i?i-=1:!n&&i<a.length-1&&(i+=1);var o=a.eq(i).attr("href");o&&U(o,!1,!0)}},h.Magics.Time200ms)}},function(e,t){e.exports=window.jQuery},function(e,t,n){"use strict";n.r(t),n.d(t,"trigger",function(){return S}),n.d(t,"i18n",function(){return O}),n.d(t,"i18nToNodes",function(){return T}),n.d(t,"initNotificationLanguage",function(){return A}),n.d(t,"initOnStartOrLangChange",function(){return E}),n.d(t,"getNotification",function(){return F}),n.d(t,"getNotificationFromResponse",function(){return j}),n.d(t,"getUploadErrorDescByCode",function(){return N}),n.d(t,"reload",function(){return R});n(55),n(144),n(121),n(48),n(56);var i=n(69),o=n.n(i),a=n(4),r=n.n(a),s=n(3),c=n.n(s),l=n(8),u=n.n(l),d=n(1),p=n(0),f=n(2),h=n(6),m=n(60),g=n(15),b=r.a.rainloopI18N||{},v={},y=[[p.Notification.InvalidToken,"NOTIFICATIONS/INVALID_TOKEN"],[p.Notification.InvalidToken,"NOTIFICATIONS/INVALID_TOKEN"],[p.Notification.AuthError,"NOTIFICATIONS/AUTH_ERROR"],[p.Notification.AccessError,"NOTIFICATIONS/ACCESS_ERROR"],[p.Notification.ConnectionError,"NOTIFICATIONS/CONNECTION_ERROR"],[p.Notification.CaptchaError,"NOTIFICATIONS/CAPTCHA_ERROR"],[p.Notification.SocialFacebookLoginAccessDisable,"NOTIFICATIONS/SOCIAL_FACEBOOK_LOGIN_ACCESS_DISABLE"],[p.Notification.SocialTwitterLoginAccessDisable,"NOTIFICATIONS/SOCIAL_TWITTER_LOGIN_ACCESS_DISABLE"],[p.Notification.SocialGoogleLoginAccessDisable,"NOTIFICATIONS/SOCIAL_GOOGLE_LOGIN_ACCESS_DISABLE"],[p.Notification.DomainNotAllowed,"NOTIFICATIONS/DOMAIN_NOT_ALLOWED"],[p.Notification.AccountNotAllowed,"NOTIFICATIONS/ACCOUNT_NOT_ALLOWED"],[p.Notification.AccountTwoFactorAuthRequired,"NOTIFICATIONS/ACCOUNT_TWO_FACTOR_AUTH_REQUIRED"],[p.Notification.AccountTwoFactorAuthError,"NOTIFICATIONS/ACCOUNT_TWO_FACTOR_AUTH_ERROR"],[p.Notification.CouldNotSaveNewPassword,"NOTIFICATIONS/COULD_NOT_SAVE_NEW_PASSWORD"],[p.Notification.CurrentPasswordIncorrect,"NOTIFICATIONS/CURRENT_PASSWORD_INCORRECT"],[p.Notification.NewPasswordShort,"NOTIFICATIONS/NEW_PASSWORD_SHORT"],[p.Notification.NewPasswordWeak,"NOTIFICATIONS/NEW_PASSWORD_WEAK"],[p.Notification.NewPasswordForbidden,"NOTIFICATIONS/NEW_PASSWORD_FORBIDDENT"],[p.Notification.ContactsSyncError,"NOTIFICATIONS/CONTACTS_SYNC_ERROR"],[p.Notification.CantGetMessageList,"NOTIFICATIONS/CANT_GET_MESSAGE_LIST"],[p.Notification.CantGetMessage,"NOTIFICATIONS/CANT_GET_MESSAGE"],[p.Notification.CantDeleteMessage,"NOTIFICATIONS/CANT_DELETE_MESSAGE"],[p.Notification.CantMoveMessage,"NOTIFICATIONS/CANT_MOVE_MESSAGE"],[p.Notification.CantCopyMessage,"NOTIFICATIONS/CANT_MOVE_MESSAGE"],[p.Notification.CantSaveMessage,"NOTIFICATIONS/CANT_SAVE_MESSAGE"],[p.Notification.CantSendMessage,"NOTIFICATIONS/CANT_SEND_MESSAGE"],[p.Notification.InvalidRecipients,"NOTIFICATIONS/INVALID_RECIPIENTS"],[p.Notification.CantSaveFilters,"NOTIFICATIONS/CANT_SAVE_FILTERS"],[p.Notification.CantGetFilters,"NOTIFICATIONS/CANT_GET_FILTERS"],[p.Notification.FiltersAreNotCorrect,"NOTIFICATIONS/FILTERS_ARE_NOT_CORRECT"],[p.Notification.CantCreateFolder,"NOTIFICATIONS/CANT_CREATE_FOLDER"],[p.Notification.CantRenameFolder,"NOTIFICATIONS/CANT_RENAME_FOLDER"],[p.Notification.CantDeleteFolder,"NOTIFICATIONS/CANT_DELETE_FOLDER"],[p.Notification.CantDeleteNonEmptyFolder,"NOTIFICATIONS/CANT_DELETE_NON_EMPTY_FOLDER"],[p.Notification.CantSubscribeFolder,"NOTIFICATIONS/CANT_SUBSCRIBE_FOLDER"],[p.Notification.CantUnsubscribeFolder,"NOTIFICATIONS/CANT_UNSUBSCRIBE_FOLDER"],[p.Notification.CantSaveSettings,"NOTIFICATIONS/CANT_SAVE_SETTINGS"],[p.Notification.CantSavePluginSettings,"NOTIFICATIONS/CANT_SAVE_PLUGIN_SETTINGS"],[p.Notification.DomainAlreadyExists,"NOTIFICATIONS/DOMAIN_ALREADY_EXISTS"],[p.Notification.CantInstallPackage,"NOTIFICATIONS/CANT_INSTALL_PACKAGE"],[p.Notification.CantDeletePackage,"NOTIFICATIONS/CANT_DELETE_PACKAGE"],[p.Notification.InvalidPluginPackage,"NOTIFICATIONS/INVALID_PLUGIN_PACKAGE"],[p.Notification.UnsupportedPluginPackage,"NOTIFICATIONS/UNSUPPORTED_PLUGIN_PACKAGE"],[p.Notification.LicensingServerIsUnavailable,"NOTIFICATIONS/LICENSING_SERVER_IS_UNAVAILABLE"],[p.Notification.LicensingExpired,"NOTIFICATIONS/LICENSING_EXPIRED"],[p.Notification.LicensingBanned,"NOTIFICATIONS/LICENSING_BANNED"],[p.Notification.DemoSendMessageError,"NOTIFICATIONS/DEMO_SEND_MESSAGE_ERROR"],[p.Notification.DemoAccountError,"NOTIFICATIONS/DEMO_ACCOUNT_ERROR"],[p.Notification.AccountAlreadyExists,"NOTIFICATIONS/ACCOUNT_ALREADY_EXISTS"],[p.Notification.AccountDoesNotExist,"NOTIFICATIONS/ACCOUNT_DOES_NOT_EXIST"],[p.Notification.MailServerError,"NOTIFICATIONS/MAIL_SERVER_ERROR"],[p.Notification.InvalidInputArgument,"NOTIFICATIONS/INVALID_INPUT_ARGUMENT"],[p.Notification.UnknownNotification,"NOTIFICATIONS/UNKNOWN_ERROR"],[p.Notification.UnknownError,"NOTIFICATIONS/UNKNOWN_ERROR"]],S=d.a.observable(!1);function O(e,t,n){var i="",o=b[e];if(Object(f.isUnd)(o)&&(o=Object(f.isUnd)(n)?e:n),!Object(f.isUnd)(t)&&!Object(f.isNull)(t))for(i in t)Object(f.has)(t,i)&&(o=o.replace("%"+i+"%",t[i]));return o}var w=function(e){var t=u()(e),n=t.data("i18n");if(n)if("["===n.substr(0,1))switch(n.substr(0,6)){case"[html]":t.html(O(n.substr(6)));break;case"[place":t.attr("placeholder",O(n.substr(13)));break;case"[title":t.attr("title",O(n.substr(7)))}else t.text(O(n))};function T(e,t){void 0===t&&(t=!1),c.a.defer(function(){u()("[data-i18n]",e).each(function(e,t){w(t)}),t&&h.bAnimationSupported&&u()(".i18n-animation[data-i18n]",e).letterfx({fx:"fall fade",backwards:!1,timing:50,fx_duration:"50ms",letter_end:"restore",element_end:"restore"})})}var C=function(){r.a.rainloopI18N&&(b=r.a.rainloopI18N||{},T(r.a.document,!0),Object(m.reload)(),S(!S())),r.a.rainloopI18N=null};function A(){o()(y).call(y,function(e){v[e[0]]=O(e[1])})}function E(e,t){void 0===t&&(t=null),e&&e(),t?S.subscribe(function(){e&&e(),t&&t()}):e&&S.subscribe(e)}function F(e,t,n){return void 0===t&&(t=""),void 0===n&&(n=null),e=r.a.parseInt(e,10)||0,p.Notification.ClientViewError===e&&t?t:(n=n&&r.a.parseInt(n,10)||0,Object(f.isUnd)(v[e])?n&&Object(f.isUnd)(v[n])?v[n]:"":v[e])}function j(e,t){return void 0===t&&(t=p.Notification.UnknownNotification),e&&e.ErrorCode?F(Object(f.pInt)(e.ErrorCode),e.ErrorMessage||""):F(t)}function N(e){var t="";switch(r.a.parseInt(e,10)||0){case p.UploadErrorCode.FileIsTooBig:t=O("UPLOAD/ERROR_FILE_IS_TOO_BIG");break;case p.UploadErrorCode.FilePartiallyUploaded:t=O("UPLOAD/ERROR_FILE_PARTIALLY_UPLOADED");break;case p.UploadErrorCode.FileNoUploaded:t=O("UPLOAD/ERROR_NO_FILE_UPLOADED");break;case p.UploadErrorCode.MissingTempFolder:t=O("UPLOAD/ERROR_MISSING_TEMP_FOLDER");break;case p.UploadErrorCode.FileOnSaveingError:t=O("UPLOAD/ERROR_ON_SAVING_FILE");break;case p.UploadErrorCode.FileType:t=O("UPLOAD/ERROR_FILE_TYPE");break;default:t=O("UPLOAD/ERROR_UNKNOWN")}return t}function R(n,i){var o=Object(f.microtime)();return h.$html.addClass("rl-changing-language"),new r.a.Promise(function(t,e){u.a.ajax({url:Object(g.n)(i,n),dataType:"script",cache:!0}).then(function(){c.a.delay(function(){C();var e=-1<Object(f.inArray)((i||"").toLowerCase(),["ar","ar_sa","he","he_he","ur","ur_ir"]);h.$html.removeClass("rl-changing-language").removeClass("rl-rtl rl-ltr").addClass(e?"rl-rtl":"rl-ltr"),t()},500<Object(f.microtime)()-o?1:500)},function(){h.$html.removeClass("rl-changing-language"),r.a.rainloopI18N=null,e()})})}h.$html.addClass("rl-"+(h.$html.attr("dir")||"ltr"))},function(e,t,n){var i=n(351);e.exports=function(e,t){e.prototype=i(t.prototype),(e.prototype.constructor=e).__proto__=t}},function(e,t,n){"use strict";var i=n(413),s=n.n(i),o=n(18),a=n.n(o),r=n(12),c=n.n(r),l=n(1),u=n(3),d=n.n(u),p=n(5),f=n(0),h=n(25),m=n(2),g=n(14),b=n(60),v=function(){function e(){this.displaySpecSetting=l.a.observable(!0),this.sentFolder=l.a.observable(""),this.draftFolder=l.a.observable(""),this.spamFolder=l.a.observable(""),this.trashFolder=l.a.observable(""),this.archiveFolder=l.a.observable(""),this.namespace="",this.folderList=l.a.observableArray([]),this.folderList.optimized=l.a.observable(!1),this.folderList.error=l.a.observable(""),this.foldersLoading=l.a.observable(!1),this.foldersCreating=l.a.observable(!1),this.foldersDeleting=l.a.observable(!1),this.foldersRenaming=l.a.observable(!1),this.foldersInboxUnreadCount=l.a.observable(0),this.currentFolder=l.a.observable(null).extend({toggleSubscribeProperty:[this,"selected"]}),this.sieveAllowFileintoInbox=!!Object(p.settingsGet)("SieveAllowFileintoInbox"),this.computers(),this.subscribers()}var t=e.prototype;return t.computers=function(){var s=this;this.draftFolderNotEnabled=l.a.computed(function(){return""===s.draftFolder()||h.r===s.draftFolder()}),this.foldersListWithSingleInboxRootFolder=l.a.computed(function(){return!c()(d.a).call(d.a,s.folderList(),function(e){return e&&!e.isSystemFolder()&&e.visible()})}),this.currentFolderFullNameRaw=l.a.computed(function(){return s.currentFolder()?s.currentFolder().fullNameRaw:""}),this.currentFolderFullName=l.a.computed(function(){return s.currentFolder()?s.currentFolder().fullName:""}),this.currentFolderFullNameHash=l.a.computed(function(){return s.currentFolder()?s.currentFolder().fullNameHash:""}),this.foldersChanging=l.a.computed(function(){var e=s.foldersLoading(),t=s.foldersCreating(),n=s.foldersDeleting(),i=s.foldersRenaming();return e||t||n||i}),this.folderListSystemNames=l.a.computed(function(){var e=[Object(g.h)()],t=s.folderList(),n=s.sentFolder(),i=s.draftFolder(),o=s.spamFolder(),a=s.trashFolder(),r=s.archiveFolder();return Object(m.isArray)(t)&&0<t.length&&(""!==n&&h.r!==n&&e.push(n),""!==i&&h.r!==i&&e.push(i),""!==o&&h.r!==o&&e.push(o),""!==a&&h.r!==a&&e.push(a),""!==r&&h.r!==r&&e.push(r)),e}),this.folderListSystem=l.a.computed(function(){return d.a.compact(a()(d.a).call(d.a,s.folderListSystemNames(),function(e){return Object(g.e)(e)}))}),this.folderMenuForMove=l.a.computed(function(){return Object(m.folderListOptionsBuilder)(s.folderListSystem(),s.folderList(),[s.currentFolderFullNameRaw()],null,null,null,null,function(e){return e?e.localName():""})}),this.folderMenuForFilters=l.a.computed(function(){return Object(m.folderListOptionsBuilder)(s.folderListSystem(),s.folderList(),[s.sieveAllowFileintoInbox?"":"INBOX"],[["",""]],null,null,null,function(e){return e?e.localName():""})})},t.subscribers=function(){var e=function(t){return function(){var e=Object(g.e)(t());e&&e.type(f.FolderType.User)}},t=function(n){return function(e){var t=Object(g.e)(e);t&&t.type(n)}};this.sentFolder.subscribe(e(this.sentFolder),this,"beforeChange"),this.draftFolder.subscribe(e(this.draftFolder),this,"beforeChange"),this.spamFolder.subscribe(e(this.spamFolder),this,"beforeChange"),this.trashFolder.subscribe(e(this.trashFolder),this,"beforeChange"),this.archiveFolder.subscribe(e(this.archiveFolder),this,"beforeChange"),this.sentFolder.subscribe(t(f.FolderType.SentItems),this),this.draftFolder.subscribe(t(f.FolderType.Draft),this),this.spamFolder.subscribe(t(f.FolderType.Spam),this),this.trashFolder.subscribe(t(f.FolderType.Trash),this),this.archiveFolder.subscribe(t(f.FolderType.Archive),this)},t.getNextFolderNames=function(){var n=[],i=Object(b.momentNowUnix)(),o=i-300,a=[],r=Object(g.h)();return function t(e){d.a.each(e,function(e){e&&r!==e.fullNameRaw&&e.selectable&&e.existen&&o>e.interval&&(e.isSystemFolder()||e.subScribed()&&e.checkable())&&a.push([e.interval,e.fullNameRaw]),e&&0<e.subFolders().length&&t(e.subFolders())})}(this.folderList()),s()(a).call(a,function(e,t){return e[0]<t[0]?-1:e[0]>t[0]?1:0}),c()(d.a).call(d.a,a,function(e){var t=Object(g.e)(e[1]);return t&&(t.interval=i,n.push(e[1])),5<=n.length}),d.a.uniq(n)},e}();t.a=new v},function(e,t,n){e.exports=n(310)},function(e,t,n){"use strict";n(76),n(75),n(55),n(48),n(94),n(56);var i=n(18),h=n.n(i),o=n(12),m=n.n(o),a=n(34),g=n.n(a),r=n(26),s=n.n(r),c=n(4),l=n.n(c),u=n(3),b=n.n(u),d=n(1),p=n(8),v=n.n(p),y=n(0),S=n(2),O=n(14),f=n(25),w=n(6),T=n(15),C=n(9),A=n(60),E=n(62),F=n(271),j=n(7),N=n(31),R=n(46),I=n(11),L=n(41),P=n(37),M=n(116),D=n(22),_=n(16),k=function(){function e(){this.staticMessage=new F.a,this.messageList=d.a.observableArray([]).extend({rateLimit:0}),this.messageListCount=d.a.observable(0),this.messageListSearch=d.a.observable(""),this.messageListThreadUid=d.a.observable(""),this.messageListPage=d.a.observable(1),this.messageListPageBeforeThread=d.a.observable(1),this.messageListError=d.a.observable(""),this.messageListEndFolder=d.a.observable(""),this.messageListEndSearch=d.a.observable(""),this.messageListEndThreadUid=d.a.observable(""),this.messageListEndPage=d.a.observable(1),this.messageListLoading=d.a.observable(!1),this.messageListIsNotCompleted=d.a.observable(!1),this.messageListCompleteLoadingThrottle=d.a.observable(!1).extend({throttle:200}),this.messageListCompleteLoadingThrottleForAnimation=d.a.observable(!1).extend({specialThrottle:700}),this.messageListDisableAutoSelect=d.a.observable(!1).extend({falseTimeout:500}),this.selectorMessageSelected=d.a.observable(null),this.selectorMessageFocused=d.a.observable(null),this.message=d.a.observable(null),this.message.viewTrigger=d.a.observable(!1),this.messageError=d.a.observable(""),this.messageCurrentLoading=d.a.observable(!1),this.messageLoadingThrottle=d.a.observable(!1).extend({throttle:y.Magics.Time50ms}),this.messageFullScreenMode=d.a.observable(!1),this.messagesBodiesDom=d.a.observable(null),this.messageActiveDom=d.a.observable(null),this.computers(),this.subscribers(),this.onMessageResponse=s()(b.a).call(b.a,this.onMessageResponse,this),this.purgeMessageBodyCacheThrottle=b.a.throttle(this.purgeMessageBodyCache,y.Magics.Time30s)}var t=e.prototype;return t.computers=function(){var i=this;this.messageLoading=d.a.computed(function(){return i.messageCurrentLoading()}),this.messageListEndHash=d.a.computed(function(){return i.messageListEndFolder()+"|"+i.messageListEndSearch()+"|"+i.messageListEndThreadUid()+"|"+i.messageListEndPage()}),this.messageListPageCount=d.a.computed(function(){var e=l.a.Math.ceil(i.messageListCount()/P.a.messagesPerPage());return e<=0?1:e}),this.mainMessageListSearch=d.a.computed({read:this.messageListSearch,write:function(e){Object(j.setHash)(Object(T.o)(I.a.currentFolderFullNameHash(),1,Object(S.trim)(e.toString()),i.messageListThreadUid()))}}),this.messageListCompleteLoading=d.a.computed(function(){var e=i.messageListLoading(),t=i.messageListIsNotCompleted();return e||t}),this.isMessageSelected=d.a.computed(function(){return null!==i.message()}),this.messageListChecked=d.a.computed(function(){return g()(b.a).call(b.a,i.messageList(),function(e){return e.checked()})}).extend({rateLimit:0}),this.hasCheckedMessages=d.a.computed(function(){return 0<i.messageListChecked().length}).extend({rateLimit:0}),this.messageListCheckedOrSelected=d.a.computed(function(){var e=i.messageListChecked(),t=i.selectorMessageSelected(),n=i.selectorMessageFocused();return e.length?b.a.union(e,t?[t]:[]):t?[t]:n?[n]:[]}),this.messageListCheckedOrSelectedUidsWithSubMails=d.a.computed(function(){var t=[];return b.a.each(i.messageListCheckedOrSelected(),function(e){e&&(t.push(e.uid),1<e.threadsLen()&&(t=b.a.union(t,e.threads())))}),t})},t.subscribers=function(){var n=this;this.messageListCompleteLoading.subscribe(function(e){e=!!e,n.messageListCompleteLoadingThrottle(e),n.messageListCompleteLoadingThrottleForAnimation(e)}),this.messageList.subscribe(b.a.debounce(function(e){b.a.each(e,function(e){e&&e.newForAnimation()&&e.newForAnimation(!1)})},y.Magics.Time500ms)),this.message.subscribe(function(e){e?y.Layout.NoPreview===P.a.layout()&&N.a.focusedState(y.Focused.MessageView):(N.a.focusedState(y.Focused.MessageList),n.messageFullScreenMode(!1),n.hideMessageBodies())}),this.messageLoading.subscribe(function(e){n.messageLoadingThrottle(e)}),this.messagesBodiesDom.subscribe(function(e){!e||e instanceof v.a||n.messagesBodiesDom(v()(e))}),this.messageListEndFolder.subscribe(function(e){var t=n.message();t&&e&&e!==t.folderFullNameRaw&&n.message(null)})},t.purgeMessageBodyCache=function(){var t=0,n=w.data.iMessageBodyCacheCount-f.k;if(0<n){var e=this.messagesBodiesDom();e&&(m()(e).call(e,".rl-cache-class").each(function(){var e=v()(this);n>e.data("rl-cache-count")&&(e.addClass("rl-cache-purge"),t+=1)}),0<t&&b.a.delay(function(){return m()(e).call(e,".rl-cache-purge").remove()},y.Magics.Time350ms))}},t.initUidNextAndNewMessages=function(t,e,n){if(Object(O.h)()===t&&Object(S.isNormal)(e)&&""!==e){if(Object(S.isArray)(n)&&0<n.length){b.a.each(n,function(e){Object(O.a)(t,e.Uid)}),M.a.playSoundNotification();var i=n.length;3<i?M.a.displayDesktopNotification(Object(T.r)(),R.a.email(),Object(C.i18n)("MESSAGE_LIST/NEW_MESSAGE_NOTIFICATION",{COUNT:i}),{Folder:"",Uid:""}):b.a.each(n,function(e){M.a.displayDesktopNotification(Object(T.r)(),E.b(E.a(e.From),!1),e.Subject,{Folder:e.Folder,Uid:e.Uid})})}Object(O.s)(t,e)}},t.hideMessageBodies=function(){var e=this.messagesBodiesDom();e&&m()(e).call(e,".b-text-part").hide()},t.removeMessagesFromList=function(e,t,n,i){var o=this;void 0===n&&(n=""),void 0===i&&(i=!1),t=h()(b.a).call(b.a,t,function(e){return Object(S.pInt)(e)});var a=0,r=this.messageList(),s=this.message(),c=I.a.trashFolder(),l=I.a.spamFolder(),u=Object(O.e)(e),d=""===n?null:Object(O.e)(n||""),p=I.a.currentFolderFullNameRaw()===e?g()(b.a).call(b.a,r,function(e){return e&&-1<Object(S.inArray)(Object(S.pInt)(e.uid),t)}):[];if(b.a.each(p,function(e){e&&e.unseen()&&(a+=1)}),u&&!i&&(u.messageCountAll(0<=u.messageCountAll()-t.length?u.messageCountAll()-t.length:0),0<a&&u.messageCountUnread(0<=u.messageCountUnread()-a?u.messageCountUnread()-a:0)),d&&(c!==d.fullNameRaw&&l!==d.fullNameRaw||(a=0),d.messageCountAll(d.messageCountAll()+t.length),0<a&&d.messageCountUnread(d.messageCountUnread()+a),d.actionBlink(!0)),0<p.length&&(i?b.a.each(p,function(e){e.checked(!1)}):(this.messageListIsNotCompleted(!0),b.a.each(p,function(e){s&&s.hash===e.hash&&(s=null,o.message(null)),e.deleted(!0)}),b.a.delay(function(){b.a.each(p,function(e){o.messageList.remove(e)})},y.Magics.Time350ms))),""!==e&&Object(O.q)(e,""),""!==n&&Object(O.q)(n,""),""!==this.messageListThreadUid()&&(r=this.messageList())&&0<r.length&&m()(b.a).call(b.a,r,function(e){return!(!e||!e.deleted()||e.uid!==o.messageListThreadUid())})){var f=m()(b.a).call(b.a,r,function(e){return e&&!e.deleted()});f&&this.messageListThreadUid()!==Object(S.pString)(f.uid)?(this.messageListThreadUid(Object(S.pString)(f.uid)),Object(j.setHash)(Object(T.o)(I.a.currentFolderFullNameHash(),this.messageListPage(),this.messageListSearch(),this.messageListThreadUid()),!0,!0)):f||(1<this.messageListPage()?(this.messageListPage(this.messageListPage()-1),Object(j.setHash)(Object(T.o)(I.a.currentFolderFullNameHash(),this.messageListPage(),this.messageListSearch(),this.messageListThreadUid()),!0,!0)):(this.messageListThreadUid(""),Object(j.setHash)(Object(T.o)(I.a.currentFolderFullNameHash(),this.messageListPageBeforeThread(),this.messageListSearch()),!0,!0)))}},t.initBlockquoteSwitcher=function(e){if(e){var t,n=g()(t=v()("blockquote:not(.rl-bq-switcher)",e)).call(t,function(){return 0===v()(this).parent().closest("blockquote",e).length});n&&0<n.length&&n.each(function(){var e=v()(this),t=e.height();0===t&&(t=Object(S.getRealHeight)(e)),""!==Object(S.trim)(e.text())&&(0===t||100<t)&&(e.addClass("rl-bq-switcher hidden-bq"),v()('<span class="rlBlockquoteSwitcher"><i class="icon-ellipsis" /></span>').insertBefore(e).on("click.rlBlockquoteSwitcher",function(){e.toggleClass("hidden-bq"),Object(S.windowResize)()}).after("<br />").before("<br />"))})}},t.initOpenPgpControls=function(e,t){e&&m()(e)&&m()(e).call(e,".b-plain-openpgp:not(.inited)").each(function(){L.a.initMessageBodyControls(v()(this),t)})},t.setMessage=function(e,t){var n=!1,i=null,o="",a="",r="",s=!1,c=this.messagesBodiesDom(),l=this.selectorMessageSelected(),u=this.message();if(e&&u&&e.Result&&"Object/Message"===e.Result["@Object"]&&u.folderFullNameRaw===e.Result.Folder){var d=u.threads();if(u.uid!==e.Result.Uid&&1<d.length&&-1<Object(S.inArray)(e.Result.Uid,d)&&(u=F.a.newInstanceFromJson(e.Result))&&(u.threads(d),Object(O.n)(u),this.message(this.staticMessage.populateByMessageListItem(u)),u=this.message(),n=!0),u&&u.uid===e.Result.Uid){if(this.messageError(""),u.initUpdateByMessageJson(e.Result),Object(O.b)(u.folderFullNameRaw,u.uid),t||u.initFlagsByJson(e.Result),c=c&&c[0]?c:null){o="rl-mgs-"+u.hash.replace(/[^a-zA-Z0-9]/g,"");var p=m()(c).call(c,"#"+o);if(p&&p[0])u.body=p,u.body&&(w.data.iMessageBodyCacheCount+=1,u.body.data("rl-cache-count",w.data.iMessageBodyCacheCount),u.fetchDataFromDom());else{var f=!1;if(Object(S.isNormal)(e.Result.Html)&&""!==e.Result.Html)f=!0,r=e.Result.Html.toString();else if(Object(S.isNormal)(e.Result.Plain)&&""!==e.Result.Plain)if(f=!1,r=Object(S.plainToHtml)(e.Result.Plain.toString(),!1),(u.isPgpSigned()||u.isPgpEncrypted())&&L.a.capaOpenPGP()){a=Object(S.pString)(e.Result.Plain);var h=/---BEGIN PGP MESSAGE---/.test(a);h||(s=/-----BEGIN PGP SIGNED MESSAGE-----/.test(a)&&/-----BEGIN PGP SIGNATURE-----/.test(a)),w.$div.empty(),r=s&&u.isPgpSigned()?w.$div.append(v()('<pre class="b-plain-openpgp signed"></pre>').text(a)).html():h&&u.isPgpEncrypted()?w.$div.append(v()('<pre class="b-plain-openpgp encrypted"></pre>').text(a)).html():"<pre>"+r+"</pre>",w.$div.empty(),u.isPgpSigned(s),u.isPgpEncrypted(h)}else r="<pre>"+r+"</pre>";else f=!1,r="<pre>"+r+"</pre>";w.data.iMessageBodyCacheCount+=1,(i=v()('<div id="'+o+'" ></div>').hide().addClass("rl-cache-class")).data("rl-cache-count",w.data.iMessageBodyCacheCount),i.html(Object(S.findEmailAndLinks)(r)).addClass("b-text-part "+(f?"html":"plain")),u.isHtml(!!f),u.hasImages(!!e.Result.HasExternals),u.body=i,u.body&&c.append(u.body),u.storeDataInDom(),e.Result.HasInternals&&u.showInternalImages(!0),u.hasImages()&&P.a.showImages()&&u.showExternalImages(!0),this.purgeMessageBodyCacheThrottle()}this.messageActiveDom(u.body),this.hideMessageBodies(),i&&(this.initOpenPgpControls(i,u),this.initBlockquoteSwitcher(i)),u.body.show()}Object(O.n)(u),(u.unseen()||u.hasUnseenSubMessage())&&Object(D.a)().messageListAction(u.folderFullNameRaw,y.MessageSetAction.SetSeen,[u]),n&&(u=this.message(),l&&u&&(u.folderFullNameRaw!==l.folderFullNameRaw||u.uid!==l.uid)?(this.selectorMessageSelected(null),1===this.messageList().length&&this.selectorMessageFocused(null)):!l&&u&&(l=m()(b.a).call(b.a,this.messageList(),function(e){return e&&e.folderFullNameRaw===u.folderFullNameRaw&&e.uid===u.uid}))&&(this.selectorMessageSelected(l),this.selectorMessageFocused(l))),Object(S.windowResize)()}}},t.selectMessage=function(e){e?(this.message(this.staticMessage.populateByMessageListItem(e)),this.populateMessageBody(this.message())):this.message(null)},t.selectMessageByFolderAndUid=function(e,t){e&&t?(this.message(this.staticMessage.populateByMessageListItem(null)),this.message().folderFullNameRaw=e,this.message().uid=t,this.populateMessageBody(this.message())):this.message(null)},t.populateMessageBody=function(e){e&&_.a.message(this.onMessageResponse,e.folderFullNameRaw,e.uid)&&this.messageCurrentLoading(!0)},t.onMessageResponse=function(e,t,n){this.hideMessageBodies(),this.messageCurrentLoading(!1),y.StorageResultType.Success===e&&t&&t.Result?this.setMessage(t,n):y.StorageResultType.Unload===e?(this.message(null),this.messageError("")):y.StorageResultType.Abort!==e&&(this.message(null),this.messageError(t&&t.ErrorCode?Object(C.getNotification)(t.ErrorCode):Object(C.getNotification)(y.Notification.UnknownError)))},t.calculateMessageListHash=function(e){return h()(b.a).call(b.a,e,function(e){return e.hash+"_"+e.threadsLen()+"_"+e.flagHash()}).join("|")},t.setMessageList=function(e,n){if(e&&e.Result&&"Collection/MessageCollection"===e.Result["@Object"]&&e.Result["@Collection"]&&Object(S.isArray)(e.Result["@Collection"])){var i=0,t=!1,o=[],a=Object(A.momentNowUnix)(),r=Object(S.pInt)(e.Result.MessageResultCount),s=Object(S.pInt)(e.Result.Offset),c=Object(O.e)(Object(S.isNormal)(e.Result.Folder)?e.Result.Folder:"");c&&!n&&(c.interval=a,Object(O.q)(e.Result.Folder,e.Result.FolderHash),Object(S.isNormal)(e.Result.MessageCount)&&c.messageCountAll(e.Result.MessageCount),Object(S.isNormal)(e.Result.MessageUnseenCount)&&(Object(S.pInt)(c.messageCountUnread())!==Object(S.pInt)(e.Result.MessageUnseenCount)&&(t=!0),c.messageCountUnread(e.Result.MessageUnseenCount)),this.initUidNextAndNewMessages(c.fullNameRaw,e.Result.UidNext,e.Result.NewMessages)),t&&c&&Object(O.c)(c.fullNameRaw),b.a.each(e.Result["@Collection"],function(e){if(e&&"Object/Message"===e["@Object"]){var t=F.a.newInstanceFromJson(e);t&&(Object(O.l)(t.folderFullNameRaw,t.uid)&&i<=5&&(i+=1,t.newForAnimation(!0)),t.deleted(!1),n?Object(O.n)(t):Object(O.u)(t),o.push(t))}}),this.messageListCount(r),this.messageListSearch(Object(S.isNormal)(e.Result.Search)?e.Result.Search:""),this.messageListPage(l.a.Math.ceil(s/P.a.messagesPerPage()+1)),this.messageListThreadUid(Object(S.isNormal)(e.Result.ThreadUid)?Object(S.pString)(e.Result.ThreadUid):""),this.messageListEndFolder(Object(S.isNormal)(e.Result.Folder)?e.Result.Folder:""),this.messageListEndSearch(this.messageListSearch()),this.messageListEndThreadUid(this.messageListThreadUid()),this.messageListEndPage(this.messageListPage()),this.messageListDisableAutoSelect(!0),this.messageList(o),this.messageListIsNotCompleted(!1),Object(O.d)(),c&&(n||t||P.a.useThreads())&&Object(D.a)().folderInformation(c.fullNameRaw,o)}else this.messageListCount(0),this.messageList([]),this.messageListError(Object(C.getNotification)(e&&e.ErrorCode?e.ErrorCode:y.Notification.CantGetMessageList))},e}();t.a=new k},function(e,t,n){"use strict";n.d(t,"k",function(){return S}),n.d(t,"b",function(){return w}),n.d(t,"m",function(){return T}),n.d(t,"a",function(){return C}),n.d(t,"l",function(){return A}),n.d(t,"d",function(){return E}),n.d(t,"h",function(){return F}),n.d(t,"f",function(){return j}),n.d(t,"p",function(){return N}),n.d(t,"g",function(){return R}),n.d(t,"q",function(){return I}),n.d(t,"i",function(){return L}),n.d(t,"s",function(){return P}),n.d(t,"e",function(){return M}),n.d(t,"r",function(){return D}),n.d(t,"o",function(){return _}),n.d(t,"j",function(){return k}),n.d(t,"t",function(){return x}),n.d(t,"c",function(){return U}),n.d(t,"n",function(){return H}),n.d(t,"u",function(){return B}),n.d(t,"v",function(){return G}),n.d(t,"w",function(){return V});var i=n(12),a=n.n(i),o=n(3),r=n.n(o),s=n(0),c=n(2),l=n(15),u=n(5),d={},p={},f={},h={},m={},g={},b="",v={},y=u.capa(s.Capa.Gravatar);function S(e,t){e=Object(c.trim)(e),t(y&&""!==e?l.h(e):"",e)}function O(e,t){return e+"#"+t}function w(e,t){v[O(e,t)]=!0}function T(e,t){return!0===v[O(e,t)]}function C(e,t){g[O(e,t)]=!0}function A(e,t){return!!g[O(e,t)]&&!(g[O(e,t)]=null)}function E(){g={}}function F(){return""===b?"INBOX":b}function j(e){return""!==e&&p[e]?p[e]:""}function N(e,t){"INBOX"!==(p[e]=t)&&""!==b||(b=t)}function R(e){return""!==e&&f[e]?f[e]:""}function I(e,t){""!==e&&(f[e]=t)}function L(e){return""!==e&&h[e]?h[e]:""}function P(e,t){h[e]=t}function M(e){return""!==e&&d[e]?d[e]:null}function D(e,t){d[e]=t}function _(e){D(e,null)}function k(e,t){return m[e]&&m[e][t]?m[e][t]:null}function x(e,t,n){m[e]||(m[e]={}),m[e][t]=n}function U(e){m[e]={}}function H(n){if(n){var i=n.uid,e=k(n.folderFullNameRaw,i);if(e&&0<e.length&&(n.flagged(!!e[1]),n.isSimpleMessage||(n.unseen(!!e[0]),n.answered(!!e[2]),n.forwarded(!!e[3]),n.isReadReceipt(!!e[4]),n.deletedMark(!!e[5]))),0<n.threads().length){var t=a()(r.a).call(r.a,n.threads(),function(e){if(i===e)return!1;var t=k(n.folderFullNameRaw,e);return t&&0<t.length&&!!t[0]}),o=a()(r.a).call(r.a,n.threads(),function(e){if(i===e)return!1;var t=k(n.folderFullNameRaw,e);return t&&0<t.length&&!!t[1]});n.hasUnseenSubMessage(t&&0<Object(c.pInt)(t)),n.hasFlaggedSubMessage(o&&0<Object(c.pInt)(o))}}}function B(e){e&&x(e.folderFullNameRaw,e.uid,[e.unseen(),e.flagged(),e.answered(),e.forwarded(),e.isReadReceipt(),e.deletedMark()])}function G(e,t,n){Object(c.isArray)(n)&&0<n.length&&x(e,t,n)}function V(e,t,n){var i=0,o=k(e,t);if(Object(c.isArray)(o)&&0<o.length){switch(o[0]&&(i=1),n){case s.MessageSetAction.SetSeen:o[0]=!1;break;case s.MessageSetAction.UnsetSeen:o[0]=!0;break;case s.MessageSetAction.SetFlag:o[1]=!0;break;case s.MessageSetAction.UnsetFlag:o[1]=!1}x(e,t,o)}return i}},function(e,t,n){"use strict";n.d(t,"v",function(){return v}),n.d(t,"E",function(){return y}),n.d(t,"w",function(){return S}),n.d(t,"x",function(){return O}),n.d(t,"y",function(){return w}),n.d(t,"c",function(){return C}),n.d(t,"e",function(){return A}),n.d(t,"g",function(){return E}),n.d(t,"f",function(){return F}),n.d(t,"d",function(){return j}),n.d(t,"G",function(){return R}),n.d(t,"I",function(){return I}),n.d(t,"H",function(){return L}),n.d(t,"b",function(){return P}),n.d(t,"i",function(){return M}),n.d(t,"a",function(){return D}),n.d(t,"q",function(){return _}),n.d(t,"p",function(){return k}),n.d(t,"h",function(){return x}),n.d(t,"J",function(){return U}),n.d(t,"u",function(){return H}),n.d(t,"n",function(){return B}),n.d(t,"l",function(){return G}),n.d(t,"k",function(){return V}),n.d(t,"B",function(){return K}),n.d(t,"C",function(){return q}),n.d(t,"A",function(){return z}),n.d(t,"j",function(){return Y}),n.d(t,"D",function(){return $}),n.d(t,"r",function(){return J}),n.d(t,"s",function(){return X}),n.d(t,"t",function(){return Z}),n.d(t,"F",function(){return Q}),n.d(t,"m",function(){return ee}),n.d(t,"z",function(){return te}),n.d(t,"o",function(){return ne});n(48),n(56);var i=n(4),r=n.n(i),s=n(2),o=n(5),a="./",c="#/",l="./?",u="&q[]=",d=o.appSettingsGet("version"),p=o.appSettingsGet("webPath")||"",f=o.appSettingsGet("webVersionPath")||"rainloop/v/"+d+"/",h=f+"static/",m=!!o.appSettingsGet("adminHostUse"),g=o.appSettingsGet("adminPath")||"admin",b=o.settingsGet("AuthAccountHash")||"0";function v(){b=o.settingsGet("AuthAccountHash")||"0"}function y(){return u}function S(e){return void 0===e&&(e=""),c+Object(s.pString)(e)}function O(){return m?a:l+g}function w(){return a}function T(e,t,n){return n=Object(s.isUnd)(n)?b:n,l+"/Raw/"+u+"/"+n+"/"+e+"/"+u+"/"+t}function C(e,t){return T("Download",e,t)}function A(e,t){return T("View",e,t)}function E(e,t){return T("ViewThumbnail",e,t)}function F(e,t){return T("ViewAsPlain",e,t)}function j(e,t){return T("FramedView",e,t)}function N(e){return l+"/"+e+"/"+u+"/"+b+"/"}function R(){return N("Upload")}function I(){return N("UploadContacts")}function L(){return N("UploadBackground")}function P(){return N("Append")}function M(e){return N("Change")+Object(s.encodeURIComponent)(e)+"/"}function D(e){return N("Ajax")+e}function _(e){return l+"/Raw/"+u+"/"+b+"/ViewAsPlain/"+u+"/"+e}function k(e){return l+"/Raw/"+u+"/"+b+"/Download/"+u+"/"+e}function x(e){return l+"/Raw/0/Avatar/"+Object(s.encodeURIComponent)(e)+"/"}function U(e){return l+"/Raw/"+u+"/"+b+"/UserBackground/"+u+"/"+e}function H(){return l+"/Info"}function B(e,t){return l+"/Lang/0/"+(t?"Admin":"App")+"/"+r.a.encodeURI(e)+"/"+d+"/"}function G(){return l+"/Raw/"+u+"/"+b+"/ContactsVcf/"}function V(){return l+"/Raw/"+u+"/"+b+"/ContactsCsv/"}function K(e){return void 0===e&&(e=!1),l+"SocialGoogle"+(""!==b?"/"+u+"/"+b+"/":"")+(e?"&xauth=1":"")}function q(){return l+"SocialTwitter"+(""!==b?"/"+u+"/"+b+"/":"")}function z(){return l+"SocialFacebook"+(""!==b?"/"+u+"/"+b+"/":"")}function W(e){return h+e}function Y(){return W("css/images/empty-contact.png")}function $(e){return W("sounds/"+e)}function J(){return W("css/images/icom-message-notification.png")}function X(){return W("js/min/openpgp.min.js")}function Z(){return W("js/min/openpgp.worker.min.js")}function Q(e){var t=f;return"@custom"===e.substr(-7)&&(e=Object(s.trim)(e.substring(0,e.length-7)),t=p),t+"themes/"+r.a.encodeURI(e)+"/images/preview.png"}function ee(e){return void 0===e&&(e="INBOX"),c+"mailbox/"+e}function te(e){return void 0===e&&(e=""),c+"settings"+(e?"/"+e:"")}function ne(e,t,n,i){void 0===t&&(t=1),void 0===n&&(n=""),void 0===i&&(i=""),t=Object(s.isNormal)(t)?Object(s.pInt)(t):1,n=Object(s.pString)(n);var o=c+"mailbox/";if(""!==e){var a=Object(s.pInt)(i);o+=r.a.encodeURI(e)+(0<a?"~"+a:"")}return 1<t&&(o=o.replace(/[/]+$/,""),o+="/p"+t),""!==n&&(o=o.replace(/[/]+$/,""),o+="/"+r.a.encodeURI(n)),o}},function(e,t,n){"use strict";n(76);var i=n(30),u=n.n(i),o=n(18),a=n.n(o),r=n(10),s=n.n(r),c=n(3),l=n.n(c),d=n(2),y=n(25),p=n(14),f=n(15),h=n(389),m=n(5),g=n(31),b=n(37),v=n(22),S=function(t){function e(){var e;return(e=t.call(this)||this).oRequests={},e}s()(e,t);var n=e.prototype;return n.folders=function(e){this.defaultRequest(e,"Folders",{SentFolder:m.settingsGet("SentFolder"),DraftFolder:m.settingsGet("DraftFolder"),SpamFolder:m.settingsGet("SpamFolder"),TrashFolder:m.settingsGet("TrashFolder"),ArchiveFolder:m.settingsGet("ArchiveFolder")},null,"",["Folders"])},n.login=function(e,t,n,i,o,a,r,s){this.defaultRequest(e,"Login",{Email:t,Login:n,Password:i,Language:a||"",AdditionalCode:r||"",AdditionalCodeSignMe:s?"1":"0",SignMe:o?"1":"0"})},n.getTwoFactor=function(e){this.defaultRequest(e,"GetTwoFactorInfo")},n.createTwoFactor=function(e){this.defaultRequest(e,"CreateTwoFactorSecret")},n.clearTwoFactor=function(e){this.defaultRequest(e,"ClearTwoFactorInfo")},n.showTwoFactorSecret=function(e){this.defaultRequest(e,"ShowTwoFactorSecret")},n.testTwoFactor=function(e,t){this.defaultRequest(e,"TestTwoFactorInfo",{Code:t})},n.enableTwoFactor=function(e,t){this.defaultRequest(e,"EnableTwoFactor",{Enable:t?"1":"0"})},n.clearTwoFactorInfo=function(e){this.defaultRequest(e,"ClearTwoFactorInfo")},n.contactsSync=function(e){this.defaultRequest(e,"ContactsSync",null,y.d)},n.saveContactsSyncData=function(e,t,n,i,o){this.defaultRequest(e,"SaveContactsSyncData",{Enable:t?"1":"0",Url:n,User:i,Password:o})},n.accountSetup=function(e,t,n,i){void 0===i&&(i=!0),this.defaultRequest(e,"AccountSetup",{Email:t,Password:n,New:i?"1":"0"})},n.accountDelete=function(e,t){this.defaultRequest(e,"AccountDelete",{EmailToDelete:t})},n.accountsAndIdentitiesSortOrder=function(e,t,n){this.defaultRequest(e,"AccountsAndIdentitiesSortOrder",{Accounts:t,Identities:n})},n.identityUpdate=function(e,t,n,i,o,a,r,s){this.defaultRequest(e,"IdentityUpdate",{Id:t,Email:n,Name:i,ReplyTo:o,Bcc:a,Signature:r,SignatureInsertBefore:s?"1":"0"})},n.identityDelete=function(e,t){this.defaultRequest(e,"IdentityDelete",{IdToDelete:t})},n.accountsAndIdentities=function(e){this.defaultRequest(e,"AccountsAndIdentities")},n.accountsCounts=function(e){this.defaultRequest(e,"AccountsCounts")},n.filtersSave=function(e,t,n,i){this.defaultRequest(e,"FiltersSave",{Raw:n,RawIsActive:Object(d.boolToAjax)(i),Filters:a()(l.a).call(l.a,t,function(e){return e.toJson()})})},n.filtersGet=function(e){this.defaultRequest(e,"Filters",{})},n.templates=function(e){this.defaultRequest(e,"Templates",{})},n.templateGetById=function(e,t){this.defaultRequest(e,"TemplateGetByID",{ID:t})},n.templateDelete=function(e,t){this.defaultRequest(e,"TemplateDelete",{IdToDelete:t})},n.templateSetup=function(e,t,n,i){this.defaultRequest(e,"TemplateSetup",{ID:t,Name:n,Body:i})},n.messageList=function(e,t,n,i,o,a,r){void 0===n&&(n=0),void 0===i&&(i=20),void 0===o&&(o=""),void 0===a&&(a=""),void 0===r&&(r=!1),t=Object(d.pString)(t);var s=Object(p.g)(t),c=g.a.threadsAllowed()&&b.a.useThreads(),l=Object(p.h)()===t?Object(p.i)(t):"";return""===s||""!==o&&-1!==u()(o).call(o,"is:")?this.defaultRequest(e,"MessageList",{Folder:t,Offset:n,Limit:i,Search:o,UidNext:l,UseThreads:c?"1":"0",ThreadUid:c?a:""},""===o?y.g:y.m,"",r?[]:["MessageList"]):this.defaultRequest(e,"MessageList",{},""===o?y.g:y.m,"MessageList/"+Object(f.E)()+"/"+h.a([t,n,i,o,g.a.projectHash(),s,l,c?"1":"0",c?a:""].join(String.fromCharCode(0))),r?[]:["MessageList"])},n.messageUploadAttachments=function(e,t){this.defaultRequest(e,"MessageUploadAttachments",{Attachments:t},999e3)},n.message=function(e,t,n){return t=Object(d.pString)(t),n=Object(d.pInt)(n),!!(Object(p.e)(t)&&0<n)&&(this.defaultRequest(e,"Message",{},null,"Message/"+Object(f.E)()+"/"+h.a([t,n,g.a.projectHash(),g.a.threadsAllowed()&&b.a.useThreads()?"1":"0"].join(String.fromCharCode(0))),["Message"]),!0)},n.composeUploadExternals=function(e,t){this.defaultRequest(e,"ComposeUploadExternals",{Externals:t},999e3)},n.composeUploadDrive=function(e,t,n){this.defaultRequest(e,"ComposeUploadDrive",{AccessToken:n,Url:t},999e3)},n.folderInformation=function(e,t,n){void 0===n&&(n=[]);var i=!0,o=[];Object(d.isArray)(n)&&0<n.length&&(i=!1,l.a.each(n,function(t){Object(p.j)(t.folderFullNameRaw,t.uid)||o.push(t.uid),0<t.threads().length&&l.a.each(t.threads(),function(e){Object(p.j)(t.folderFullNameRaw,e)||o.push(e)})}),0<o.length&&(i=!0)),i?this.defaultRequest(e,"FolderInformation",{Folder:t,FlagsUids:Object(d.isArray)(o)?o.join(","):"",UidNext:Object(p.h)()===t?Object(p.i)(t):""}):b.a.useThreads()&&Object(v.a)().reloadFlagsCurrentMessageListAndMessageFromCache()},n.folderInformationMultiply=function(e,t){this.defaultRequest(e,"FolderInformationMultiply",{Folders:t})},n.logout=function(e){this.defaultRequest(e,"Logout")},n.messageSetFlagged=function(e,t,n,i){this.defaultRequest(e,"MessageSetFlagged",{Folder:t,Uids:n.join(","),SetAction:i?"1":"0"})},n.messageSetSeen=function(e,t,n,i){this.defaultRequest(e,"MessageSetSeen",{Folder:t,Uids:n.join(","),SetAction:i?"1":"0"})},n.messageSetSeenToAll=function(e,t,n,i){void 0===i&&(i=null),this.defaultRequest(e,"MessageSetSeenToAll",{Folder:t,SetAction:n?"1":"0",ThreadUids:i?i.join(","):""})},n.saveMessage=function(e,t,n,i,o,a,r,s,c,l,u,d,p,f,h,m,g){this.defaultRequest(e,"SaveMessage",{IdentityID:t,MessageFolder:n,MessageUid:i,DraftFolder:o,To:a,Cc:r,Bcc:s,ReplyTo:c,Subject:l,TextIsHtml:u?"1":"0",Text:d,DraftInfo:f,InReplyTo:h,References:m,MarkAsImportant:g?"1":"0",Attachments:p},y.l)},n.sendReadReceiptMessage=function(e,t,n,i,o,a){this.defaultRequest(e,"SendReadReceiptMessage",{MessageFolder:t,MessageUid:n,ReadReceipt:i,Subject:o,Text:a})},n.sendMessage=function(e,t,n,i,o,a,r,s,c,l,u,d,p,f,h,m,g,b,v){this.defaultRequest(e,"SendMessage",{IdentityID:t,MessageFolder:n,MessageUid:i,SentFolder:o,To:a,Cc:r,Bcc:s,ReplyTo:c,Subject:l,TextIsHtml:u?"1":"0",Text:d,DraftInfo:f,InReplyTo:h,References:m,Dsn:g?"1":"0",ReadReceiptRequest:b?"1":"0",MarkAsImportant:v?"1":"0",Attachments:p},y.n)},n.saveSystemFolders=function(e,t){this.defaultRequest(e,"SystemFoldersUpdate",t)},n.saveSettings=function(e,t){this.defaultRequest(e,"SettingsUpdate",t)},n.saveSettingsHelper=function(n,i,o){var a=this;return function(e){var t;a.saveSettings(o||null,((t={})[n]=i?i(e):e,t))}},n.changePassword=function(e,t,n){this.defaultRequest(e,"ChangePassword",{PrevPassword:t,NewPassword:n})},n.folderClear=function(e,t){this.defaultRequest(e,"FolderClear",{Folder:t})},n.folderSetSubscribe=function(e,t,n){this.defaultRequest(e,"FolderSubscribe",{Folder:t,Subscribe:n?"1":"0"})},n.folderSetCheckable=function(e,t,n){this.defaultRequest(e,"FolderCheckable",{Folder:t,Checkable:n?"1":"0"})},n.messagesMove=function(e,t,n,i,o,a){this.defaultRequest(e,"MessageMove",{FromFolder:t,ToFolder:n,Uids:i.join(","),MarkAsRead:a?"1":"0",Learning:o||""},null,"",["MessageList"])},n.messagesCopy=function(e,t,n,i){this.defaultRequest(e,"MessageCopy",{FromFolder:t,ToFolder:n,Uids:i.join(",")})},n.messagesDelete=function(e,t,n){this.defaultRequest(e,"MessageDelete",{Folder:t,Uids:n.join(",")},null,"",["MessageList"])},n.appDelayStart=function(e){this.defaultRequest(e,"AppDelayStart")},n.quota=function(e){this.defaultRequest(e,"Quota")},n.contacts=function(e,t,n,i){this.defaultRequest(e,"Contacts",{Offset:t,Limit:n,Search:i},null,"",["Contacts"])},n.contactSave=function(e,t,n,i){this.defaultRequest(e,"ContactSave",{RequestUid:t,Uid:Object(d.trim)(n),Properties:i})},n.contactsDelete=function(e,t){this.defaultRequest(e,"ContactsDelete",{Uids:t.join(",")})},n.suggestions=function(e,t,n){this.defaultRequest(e,"Suggestions",{Query:t,Page:n},null,"",["Suggestions"])},n.clearUserBackground=function(e){this.defaultRequest(e,"ClearUserBackground")},n.facebookUser=function(e){this.defaultRequest(e,"SocialFacebookUserInformation")},n.facebookDisconnect=function(e){this.defaultRequest(e,"SocialFacebookDisconnect")},n.twitterUser=function(e){this.defaultRequest(e,"SocialTwitterUserInformation")},n.twitterDisconnect=function(e){this.defaultRequest(e,"SocialTwitterDisconnect")},n.googleUser=function(e){this.defaultRequest(e,"SocialGoogleUserInformation")},n.googleDisconnect=function(e){this.defaultRequest(e,"SocialGoogleDisconnect")},n.socialUsers=function(e){this.defaultRequest(e,"SocialUsers")},e}(n(256).a);t.a=new S},function(e,t,n){var i=n(251);e.exports=function(e,t,n){return t in e?i(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){e.exports=n(330)},function(e,t,n){e.exports=n(355)},function(e,t,n){var l=n(251),u=n(358),d=n(363),p=n(368),f=n(370),h=n(374);e.exports=function(n,i,e,t,o){var a,r,s,c={};return h(a=f(t)).call(a,function(e){c[e]=t[e]}),c.enumerable=!!c.enumerable,c.configurable=!!c.configurable,("value"in c||c.initializer)&&(c.writable=!0),c=p(r=d(s=u(e).call(e)).call(s)).call(r,function(e,t){return t(n,i,e)||e},c),o&&void 0!==c.initializer&&(c.value=c.initializer?c.initializer.call(o):void 0,c.initializer=void 0),void 0===c.initializer&&(l(n,i,c),c=null),c}},function(e,t){e.exports=window.key},function(e,t,n){"use strict";function i(){return n(386).default}n.d(t,"a",function(){return i})},,function(e,t,n){"use strict";n.d(t,"b",function(){return c}),n.d(t,"a",function(){return l});var i=n(3),o=n.n(i),a=n(2),r=n(38),s={};function c(e,t,n){Object(a.isObject)(e)?(n=t||null,t=null,o.a.each(e,function(e,t){c(t,e,n)})):(Object(a.isUnd)(s[e])&&(s[e]=[]),s[e].push([t,n]))}function l(e,t){r.f("rl-pub",[e,t]),Object(a.isUnd)(s[e])||o.a.each(s[e],function(e){e[0]&&e[0].apply(e[1]||null,t||[])})}},function(e,t,n){"use strict";n.d(t,"i",function(){return i}),n.d(t,"j",function(){return o}),n.d(t,"c",function(){return a}),n.d(t,"g",function(){return r}),n.d(t,"m",function(){return s}),n.d(t,"n",function(){return c}),n.d(t,"l",function(){return l}),n.d(t,"d",function(){return u}),n.d(t,"r",function(){return d}),n.d(t,"b",function(){return p}),n.d(t,"h",function(){return f}),n.d(t,"p",function(){return h}),n.d(t,"o",function(){return m}),n.d(t,"k",function(){return g}),n.d(t,"a",function(){return b}),n.d(t,"q",function(){return v}),n.d(t,"f",function(){return y}),n.d(t,"e",function(){return S});var i=20,o=[10,20,30,50,100],a=50,r=3e4,s=3e5,c=3e5,l=2e5,u=2e5,d="__UNUSE__",p="rlcsc",f=143,h=25,m=4190,g=15,b=7,v=10,y="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAYAAABXuSs3AAAHHklEQVRoQ7VZW08bVxCeXRuwIbTGXIwNtBBaqjwgVUiR8lDlbza9qe1DpVZ9aNQ/0KpPeaJK07SpcuEeCEmUAObm21bfrL9lONjexSYrWfbunj37zXdmvpkz9oIgCKTD0Wg0xPd94TDP83Q0zvWa50vzklSrdanVanqf4/D84GBGr+F+Op3S8fqoJxLOdnZgTvsO/nYhenHA+UC7CWF1uXwkb9++ldPTUwVerVbVqFQqpR8YPjQ0JCMjI5LNDijoRgP3PQVu5+5Eor2XGLg7IV4GkIdHJ/LmzRs5ODiIwNbrdR0O0GCcq4Xz4eFhmZyclP7+tDQaIik/BG5XKQn4SwG3zJTLZXn9+rUclI8UHD5YVoDDN8bSzXhONwL48fFxGR4eilzFZT1uFRIB5yT8BqCdnR3Z3d0VP9Un6XRawYJpggVrZBv38ME4XKtUKnLt2jUplUoy1PR/l3U7T6sVSAQcgMAkj8PDQ9ne3pajoyMRL7zeKsYZWHgWYDGmv78/mmdwcFA+mJlSgziHDWrERrsjEXDXegTi1tZW+DLxI2bxIrqFNYTXyDyCFweMAHCwb8e4RnTNuOsqe3t7sra21pTD0Kct666E8XlcZyzw9/RUUXK5nK5oUinUQI6TQ3cynO/v78vq6qrKXCNwlTiJJpyNGc3nZHp6uqV2dwrQWOCtZBDAV1ZWwsQk7f0wiQn5kffbAu/0/KWBYzIC1+XukfGx0RGZmppKlC2tIV0Bh4aDcZW7HhkfH8urLLZL7T2pihvlkMNnz56FiadHxicL41IsFpN41bkxsYxbRdFo9jwB8KdPn14J8KnSpBQKhQs63nPmbCVRcBUAR2Lq1VVmpksyMTFxAXjcEsQybiegESionjx5osCZOeNe1O4+EhCAX7bQSgQcxRHTMgAgcz5+/Dis/hL4uHU3/B4YGNASGHIKxuEql0k+l05AeIAF1vPnz5VxFFmdDlaJrMtZITJeSsXCOTlMunKxjLtMYOKNjQ158eJFuAuKkUOb5sEwgff19SkJUBVkThZUbnXZrtCKBQ6gbnWIkjZpyne3ejAWoGnA7Icz6irvBLgbOMicCM6TkxPx/LAkbXfgWcsazuE2kFRsKD5Z+CiqDumKncpZvieWcS6dDVD8xiYCNflpJdwcdwJOf9airLmVQ7DPzMxIYWLsXGXoVqLt5k0M3K3JUVPDZdbWNzsCp48TPFdvdnZWUz32nDha7bJ63kgAJPzSdRks9/Kf9xMJAQ1gq2NpaUmy2Yz4zar4nQC3xb99AQwCcGzLAAwuhG8YiWvcOKts+r4GOe5nMhm5efOm9lUA3E3vSZJRrKvE0fnPv//Jy5cvo5cTHIPQbSjhOoqq69evS19f6lxDKK4+sVhigZPtKJqbrQeqxd5+WR4+fKgqgT0k2XX3nhiPgETWXFhYkFzuPZ2yVq1GTSOXpE47/VjgNnD4m4GG7/LhsTx69EiwD4Vr2MwIIxgbAH18fKx1yfz8vEogNvGtWnCuhLZa9UTAreVWFsHy/b/+Vrbdl7E5REMQD2jDoUbByty+/ZnU64GkU2HzyJLhktU1cLv8nARgkYS2d3ajAgwG8qU2oLmDZ92CMaOjo7K4uCiZgbDWaRWgnZhPxLhrMUCvr69riwKZk1LHF7XqrWAO9hJxH6ozNzcnCx/PqztZg9mf6SQMscCtm2C5ke4BGMlHWTUp36036AJajDVrFMzBrhhWslQsSrFYiOqVpMriNYIgqFRq2j3FAb/zffT6zuxFXxsNzs3NTXn16lW4gYiW96w1FyedF+83xG/2FNGCRpU4NjamMsn+OZ9xE5RXqdaDdPpib6RWCzuwKF9RxqI2AVNQBwQYJoK0wdBejnqtEikP3pfP51XjUTESl12FqJEKxsEorARYDD44ONTeID7YpsEnrRvQfWAI2e8WfDaTUSIwJ0iBCmFOtOUAHvVMPp/TPwvYFVYFIuP8l+DBgwdaa2Miqwa0GgYwfeMltovbDfh6c1vIgMYcliSsKv4IWFr6VDHxvldvBAH+1sA+cnl5WYOPmmr9ir+1l9I0Cgz0yjhXjfJJ0JROnmezWbl165ayr/5fqwcBNr7IfhjMqKcvESSM4eRcCasQ3bDNObmKPLdGUGpZsN24cUNLBm9zazu4d++e6qpNBFaTuUS26U5dpuR1CxyA7J9ddrMRqlz4pwLLYawymPd++/2PADt2ugcGwq9gCCdhQ96C6xWwa6j1ceuq+I0EhW0i8MAIVJfeL3d/DVD8EKi12P6/2S2jV/EccVB54O/ejz/9HGCpoBBMta5rXMXLu53D1XAwjhXwvvv+h4BAXVe4bOu3O3ChxF08LiZFG3fel199G9CH3fLyqv24NcB44MRhpdK788U3CpyKwsCw590xmfSpzsBt0Fqc3ud3vtZigxWcVZCklVpSiN0w3q5E/h9TGMIUuA3+EQAAAABJRU5ErkJggg==",S="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"},function(e,t,n){e.exports=n(319)},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(17),o=n.n(i),a=n(1),r=n(2),s=n(0),c=n(6),l=function(){function e(){o()(this,"bDisabeCloseOnEsc",!1),o()(this,"sDefaultKeyScope",s.KeyState.None),o()(this,"sCurrentKeyScope",s.KeyState.None),o()(this,"viewModelVisibility",a.a.observable(!1)),o()(this,"modalVisibility",a.a.observable(!1).extend({rateLimit:0})),o()(this,"viewModelName",""),o()(this,"viewModelNames",[]),o()(this,"viewModelDom",null)}var t=e.prototype;return t.storeAndSetKeyScope=function(){this.sCurrentKeyScope=Object(c.keyScope)(),Object(c.keyScope)(this.sDefaultKeyScope)},t.restoreKeyScope=function(){Object(c.keyScope)(this.sCurrentKeyScope)},t.registerPopupKeyDown=function(){var t=this;c.$win.on("keydown",function(e){if(e&&t.modalVisibility&&t.modalVisibility()){if(!t.bDisabeCloseOnEsc&&s.EventKeyCode.Esc===e.keyCode)return Object(r.delegateRun)(t,"cancelCommand"),!1;if(s.EventKeyCode.Backspace===e.keyCode&&!Object(r.inFocus)())return!1}return!0})},t.cancelCommand=function(){},t.closeCommand=function(){},e}()},function(i,e,t){(function(e){var t="object",n=function(e){return e&&e.Math==Math&&e};i.exports=n(typeof globalThis==t&&globalThis)||n(typeof window==t&&window)||n(typeof self==t&&self)||n(typeof e==t&&e)||Function("return this")()}).call(this,t(124))},function(e,t,n){"use strict";var i=n(4),o=n.n(i),a=n(1),r=n(8),s=n.n(r),c=n(5),l=function(){function e(){var e=this;this.google={},this.twitter={},this.facebook={},this.dropbox={},this.google.enabled=a.a.observable(!1),this.google.clientID=a.a.observable(""),this.google.clientSecret=a.a.observable(""),this.google.apiKey=a.a.observable(""),this.google.loading=a.a.observable(!1),this.google.userName=a.a.observable(""),this.google.loggined=a.a.computed(function(){return""!==e.google.userName()}),this.google.capa={},this.google.capa.auth=a.a.observable(!1),this.google.capa.authFast=a.a.observable(!1),this.google.capa.drive=a.a.observable(!1),this.google.capa.preview=a.a.observable(!1),this.google.require={},this.google.require.clientSettings=a.a.computed(function(){return e.google.enabled()&&(e.google.capa.auth()||e.google.capa.drive())}),this.google.require.apiKeySettings=a.a.computed(function(){return e.google.enabled()&&e.google.capa.drive()}),this.facebook.enabled=a.a.observable(!1),this.facebook.appID=a.a.observable(""),this.facebook.appSecret=a.a.observable(""),this.facebook.loading=a.a.observable(!1),this.facebook.userName=a.a.observable(""),this.facebook.supported=a.a.observable(!1),this.facebook.loggined=a.a.computed(function(){return""!==e.facebook.userName()}),this.twitter.enabled=a.a.observable(!1),this.twitter.consumerKey=a.a.observable(""),this.twitter.consumerSecret=a.a.observable(""),this.twitter.loading=a.a.observable(!1),this.twitter.userName=a.a.observable(""),this.twitter.loggined=a.a.computed(function(){return""!==e.twitter.userName()}),this.dropbox.enabled=a.a.observable(!1),this.dropbox.apiKey=a.a.observable("")}var t=e.prototype;return t.populate=function(){this.google.enabled(!!c.settingsGet("AllowGoogleSocial")),this.google.clientID(c.settingsGet("GoogleClientID")),this.google.clientSecret(c.settingsGet("GoogleClientSecret")),this.google.apiKey(c.settingsGet("GoogleApiKey")),this.google.capa.auth(!!c.settingsGet("AllowGoogleSocialAuth")),this.google.capa.authFast(!!c.settingsGet("AllowGoogleSocialAuthFast")),this.google.capa.drive(!!c.settingsGet("AllowGoogleSocialDrive")),this.google.capa.preview(!!c.settingsGet("AllowGoogleSocialPreview")),this.facebook.enabled(!!c.settingsGet("AllowFacebookSocial")),this.facebook.appID(c.settingsGet("FacebookAppID")),this.facebook.appSecret(c.settingsGet("FacebookAppSecret")),this.facebook.supported(!!c.settingsGet("SupportedFacebookSocial")),this.twitter.enabled=a.a.observable(!!c.settingsGet("AllowTwitterSocial")),this.twitter.consumerKey=a.a.observable(c.settingsGet("TwitterConsumerKey")),this.twitter.consumerSecret=a.a.observable(c.settingsGet("TwitterConsumerSecret")),this.dropbox.enabled(!!c.settingsGet("AllowDropboxSocial")),this.dropbox.apiKey(c.settingsGet("DropboxApiKey"))},t.appendDropbox=function(){if(!o.a.Dropbox&&this.dropbox.enabled()&&this.dropbox.apiKey()&&!o.a.document.getElementById("dropboxjs")){var e=o.a.document.createElement("script");e.type="text/javascript",e.src="https://www.dropbox.com/static/api/2/dropins.js",s()(e).attr("id","dropboxjs").attr("data-app-key",this.dropbox.apiKey()),o.a.document.body.appendChild(e)}},e}();t.a=new l},function(e,t,n){e.exports=n(306)},function(e,t,n){"use strict";var i=n(10),o=n.n(i),a=n(1),r=n(0),s=n(6),c=n(2),l=n(5),u=function(n){function e(){var e;(e=n.call(this)||this).currentAudio=a.a.observable(""),e.focusedState=a.a.observable(r.Focused.None);var t=l.appSettingsGet("mobile");return e.focusedState.subscribe(function(e){switch(e){case r.Focused.MessageList:Object(s.keyScope)(r.KeyState.MessageList),t&&Object(s.leftPanelDisabled)(!0);break;case r.Focused.MessageView:Object(s.keyScope)(r.KeyState.MessageView),t&&Object(s.leftPanelDisabled)(!0);break;case r.Focused.FolderList:Object(s.keyScope)(r.KeyState.FolderList),t&&Object(s.leftPanelDisabled)(!1)}}),e.projectHash=a.a.observable(""),e.threadsAllowed=a.a.observable(!1),e.composeInEdit=a.a.observable(!1),e.contactsAutosave=a.a.observable(!1),e.useLocalProxyForExternalImages=a.a.observable(!1),e.contactsIsAllowed=a.a.observable(!1),e.attachmentsActions=a.a.observableArray([]),e.devEmail="",e.devPassword="",e}return o()(e,n),e.prototype.populate=function(){n.prototype.populate.call(this),this.projectHash(l.settingsGet("ProjectHash")),this.contactsAutosave(!!l.settingsGet("ContactsAutosave")),this.useLocalProxyForExternalImages(!!l.settingsGet("UseLocalProxyForExternalImages")),this.contactsIsAllowed(!!l.settingsGet("ContactsIsAllowed"));var e=l.appSettingsGet("attachmentsActions");this.attachmentsActions(Object(c.isNonEmptyArray)(e)?e:[]),this.devEmail=l.settingsGet("DevEmail"),this.devPassword=l.settingsGet("DevPassword")},e}(n(255).a);t.a=new u},function(e,t,n){var i=n(28),o=n(74),a=n(128),r=n(180),s=i.Symbol,c=o("wks");e.exports=function(e){return c[e]||(c[e]=r&&s[e]||(r?s:a)("Symbol."+e))}},function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}},function(e,t,n){e.exports=n(347)},function(e,t,n){"use strict";n.d(t,"a",function(){return p}),n.d(t,"b",function(){return f});var i=n(69),o=n.n(i),a=n(17),r=n.n(a),s=n(8),c=n.n(s),l=n(1),u=n(2),d=n(9),p=function(){function e(){r()(this,"disposable",[])}return e.prototype.dispose=function(){var e;o()(e=this.disposable).call(e,function(e){e&&e.dispose&&e.dispose()})},e}(),f=function(n,e){return void 0===e&&(e=""),{template:e?{element:e}:"<b></b>",viewModel:{createViewModel:function(e,t){return(e=e||{}).element=null,t&&t.element&&(e.component=t,e.element=c()(t.element),Object(d.i18nToNodes)(e.element),!Object(u.isUnd)(e.inline)&&l.a.unwrap(e.inline)&&e.element.css("display","inline-block")),new n(e)}}}}},function(e,t,n){var i=n(44);e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t,n){"use strict";n(135),n(67);var i=n(4),o=n.n(i),a=n(1),r=n(25),s=n(0),c=n(6),l=n(2),u=n(24),d=n(5),p=function(){function e(){this.iAutoLogoutTimer=0,this.layout=a.a.observable(s.Layout.SidePreview).extend({limitedList:[s.Layout.SidePreview,s.Layout.BottomPreview,s.Layout.NoPreview]}),this.editorDefaultType=a.a.observable(s.EditorDefaultType.Html).extend({limitedList:[s.EditorDefaultType.Html,s.EditorDefaultType.Plain,s.EditorDefaultType.HtmlForced,s.EditorDefaultType.PlainForced]}),this.messagesPerPage=a.a.observable(r.i).extend({limitedList:r.j}),this.showImages=a.a.observable(!1),this.useCheckboxesInList=a.a.observable(!0),this.allowDraftAutosave=a.a.observable(!0),this.useThreads=a.a.observable(!1),this.replySameFolder=a.a.observable(!1),this.autoLogout=a.a.observable(s.Magics.Time30mInMin),this.computers(),this.subscribers()}var t=e.prototype;return t.computers=function(){var e=this;this.usePreviewPane=a.a.computed(function(){return s.Layout.NoPreview!==e.layout()})},t.subscribers=function(){this.layout.subscribe(function(e){c.$html.toggleClass("rl-no-preview-pane",s.Layout.NoPreview===e),c.$html.toggleClass("rl-side-preview-pane",s.Layout.SidePreview===e),c.$html.toggleClass("rl-bottom-preview-pane",s.Layout.BottomPreview===e),u.a("layout",[e])})},t.populate=function(){var e=this;this.layout(Object(l.pInt)(d.settingsGet("Layout"))),this.editorDefaultType(d.settingsGet("EditorDefaultType")),this.autoLogout(Object(l.pInt)(d.settingsGet("AutoLogout"))),this.messagesPerPage(d.settingsGet("MPP")),this.showImages(!!d.settingsGet("ShowImages")),this.useCheckboxesInList(!!d.settingsGet("UseCheckboxesInList")),this.allowDraftAutosave(!!d.settingsGet("AllowDraftAutosave")),this.useThreads(!!d.settingsGet("UseThreads")),this.replySameFolder(!!d.settingsGet("ReplySameFolder")),u.b("rl.auto-logout-refresh",function(){o.a.clearTimeout(e.iAutoLogoutTimer),0<e.autoLogout()&&!d.settingsGet("AccountSignMe")&&(e.iAutoLogoutTimer=o.a.setTimeout(function(){u.a("rl.auto-logout")},e.autoLogout()*s.Magics.Time1m))}),u.a("rl.auto-logout-refresh")},e}();t.a=new p},function(e,t,n){"use strict";n.d(t,"a",function(){return d}),n.d(t,"f",function(){return p}),n.d(t,"d",function(){return f}),n.d(t,"e",function(){return h}),n.d(t,"b",function(){return m}),n.d(t,"c",function(){return g}),n.d(t,"g",function(){return b}),n.d(t,"h",function(){return v});var i=n(3),o=n.n(i),a=n(2),r=n(6),s=n(5),c={},l=[],u=[];function d(e,t){Object(a.isFunc)(t)&&(Object(a.isArray)(c[e])||(c[e]=[]),c[e].push(t))}function p(e,t){void 0===t&&(t=[]),Object(a.isArray)(c[e])&&o.a.each(c[e],function(e){e.apply(void 0,t)})}function f(e){return s.settingsGet(e)}function h(e,t,n,i){r.data.__APP__&&r.data.__APP__.remote().defaultRequest(e,"Plugin"+t,n,i)}function m(e,t,n,i){l.push([e,t,n,i])}function g(e,t,n,i){u.push([e,t,n,i])}function b(e){var t=n(7);o.a.each(e?u:l,function(e){t.addSettingsViewModel(e[0],e[1],e[2],e[3])})}function v(e,t){var n=s.settingsGet("Plugins");return(n=n&&!Object(a.isUnd)(n[e])?n[e]:null)?Object(a.isUnd)(n[t])?null:n[t]:null}},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},,function(e,t,i){"use strict";i(76);var n=i(18),l=i.n(n),o=i(30),a=i.n(o),r=i(12),c=i.n(r),s=i(34),u=i.n(s),d=i(1),p=i(3),f=i.n(p),h=i(8),m=i.n(h),g=i(9),b=i(2),v=i(46),y=i(7),S=function(){function s(){var e=this;this.capaOpenPGP=d.a.observable(!1),this.openpgp=null,this.openpgpkeys=d.a.observableArray([]),this.openpgpKeyring=null,this.openpgpkeysPublic=d.a.computed(function(){return u()(f.a).call(f.a,e.openpgpkeys(),function(e){return!(!e||e.isPrivate)})}),this.openpgpkeysPrivate=d.a.computed(function(){return u()(f.a).call(f.a,e.openpgpkeys(),function(e){return!(!e||!e.isPrivate)})})}var e=s.prototype;return e.isSupported=function(){return!!this.openpgp},e.findKeyByHex=function(e,n){return c()(f.a).call(f.a,e,function(e){var t;return n&&e&&(n===e.id||-1<a()(t=e.ids).call(t,n))})},e.findPublicKeyByHex=function(e){return this.findKeyByHex(this.openpgpkeysPublic(),e)},e.findPrivateKeyByHex=function(e){return this.findKeyByHex(this.openpgpkeysPrivate(),e)},e.findPublicKeysByEmail=function(i){return f.a.compact(f.a.flatten(l()(f.a).call(f.a,this.openpgpkeysPublic(),function(e){var t,n=e&&-1<a()(t=e.emails).call(t,i)?e:null;return n?n.getNativeKeys():[null]}),!0))},e.findPublicKeysBySigningKeyIds=function(e){var n=this;return f.a.compact(f.a.flatten(l()(f.a).call(f.a,e,function(e){var t=e&&e.toHex?n.findPublicKeyByHex(e.toHex()):null;return t?t.getNativeKeys():[null]}),!0))},e.findPrivateKeysByEncryptionKeyIds=function(e,t,n){var i=this,o=Object(b.isArray)(e)?f.a.compact(f.a.flatten(l()(f.a).call(f.a,e,function(e){var t=e&&e.toHex?i.findPrivateKeyByHex(e.toHex()):null;return t?n?[t]:t.getNativeKeys():[null]}),!0)):[];return 0===o.length&&Object(b.isNonEmptyArray)(t)&&(o=f.a.uniq(f.a.compact(f.a.flatten(l()(f.a).call(f.a,t,function(e){var t=e?i.findAllPrivateKeysByEmailNotNative(e):null;return t?n?t:f.a.flatten(l()(f.a).call(f.a,t,function(e){return e.getNativeKeys()}),!0):[null]}),!0)),function(e){return e.id})),o},e.findPublicKeyByEmailNotNative=function(n){return c()(f.a).call(f.a,this.openpgpkeysPublic(),function(e){var t;return e&&-1<a()(t=e.emails).call(t,n)})||null},e.findPrivateKeyByEmailNotNative=function(n){return c()(f.a).call(f.a,this.openpgpkeysPrivate(),function(e){var t;return e&&-1<a()(t=e.emails).call(t,n)})||null},e.findAllPublicKeysByEmailNotNative=function(n){return u()(f.a).call(f.a,this.openpgpkeysPublic(),function(e){var t;return e&&-1<a()(t=e.emails).call(t,n)})||null},e.findAllPrivateKeysByEmailNotNative=function(n){return u()(f.a).call(f.a,this.openpgpkeysPrivate(),function(e){var t;return e&&-1<a()(t=e.emails).call(t,n)})||null},e.findPrivateKeyByEmail=function(n,e){var t=null,i=c()(f.a).call(f.a,this.openpgpkeysPrivate(),function(e){var t;return e&&-1<a()(t=e.emails).call(t,n)});if(i)try{(t=i.getNativeKeys()[0]||null)&&t.decrypt(Object(b.pString)(e))}catch(e){t=null}return t},e.findSelfPrivateKey=function(e){return this.findPrivateKeyByEmail(v.a.email(),e)},e.decryptMessage=function(t,e,o){var a=this;if(t&&t.getEncryptionKeyIds){var n=this.findPrivateKeysByEncryptionKeyIds(t.getEncryptionKeyIds(),e,!0);if(n&&0<n.length)return Object(y.showScreenPopup)(i(519),[function(e){e?t.decrypt(e).then(function(n){var i=null;n&&(i=a.findPrivateKeyByHex(e.primaryKey.keyid.toHex()))?a.verifyMessage(n,function(e,t){o(i,n,e||null,t||null)}):o(i,n)},function(){o(null,null)}):o(null,null)},n]),!1}return o(null,null),!1},e.verifyMessage=function(e,t){if(e&&e.getSigningKeyIds){var n=e.getSigningKeyIds();if(n&&0<n.length){var i=this.findPublicKeysBySigningKeyIds(n);if(i&&0<i.length)try{var o=e.verify(i),a=c()(f.a).call(f.a,f.a.isArray(o)?o:[],function(e){return e&&e.valid&&e.keyid});if(a&&a.keyid&&a.keyid&&a.keyid.toHex)return t(this.findPublicKeyByHex(a.keyid.toHex())),!0}catch(e){Object(b.log)(e)}return t(null,n),!1}}return t(null),!1},e.controlsHelper=function(e,t,n,i,o){n?(e.removeClass("error").addClass("success").attr("title",i),t.removeClass("error").addClass("success").attr("title",i)):(e.removeClass("success").addClass("error").attr("title",i),t.removeClass("success").addClass("error").attr("title",i)),Object(b.isUnd)(o)||e.text(Object(b.trim)(o))},s.domControlEncryptedClickHelper=function(s,c,t,n){return function(){var e=null,r=m()(this);if(r.hasClass("success"))return!1;try{e=s.openpgp.message.readArmored(t)}catch(e){Object(b.log)(e)}return e&&e.getText&&e.verify&&e.decrypt?s.decryptMessage(e,n,function(e,t,n,i){if(t)if(n)s.controlsHelper(c,r,!0,Object(g.i18n)("PGP_NOTIFICATIONS/GOOD_SIGNATURE",{USER:n.user+" ("+n.id+")"}),t.getText());else if(e){var o=Object(b.isNonEmptyArray)(i)?i:null,a=o?f.a.compact(l()(f.a).call(f.a,o,function(e){return e&&e.toHex?e.toHex():null})).join(", "):"";s.controlsHelper(c,r,!1,Object(g.i18n)("PGP_NOTIFICATIONS/UNVERIFIRED_SIGNATURE")+(a?" ("+a+")":""),t.getText())}else s.controlsHelper(c,r,!1,Object(g.i18n)("PGP_NOTIFICATIONS/DECRYPTION_ERROR"));else s.controlsHelper(c,r,!1,Object(g.i18n)("PGP_NOTIFICATIONS/DECRYPTION_ERROR"))}):s.controlsHelper(c,r,!1,Object(g.i18n)("PGP_NOTIFICATIONS/DECRYPTION_ERROR")),!1}},s.domControlSignedClickHelper=function(r,s,e){return function(){var o=null,a=m()(this);if(a.hasClass("success")||a.hasClass("error"))return!1;try{o=r.openpgp.cleartext.readArmored(e)}catch(e){Object(b.log)(e)}return o&&o.getText&&o.verify?r.verifyMessage(o,function(e,t){if(e)r.controlsHelper(s,a,!0,Object(g.i18n)("PGP_NOTIFICATIONS/GOOD_SIGNATURE",{USER:e.user+" ("+e.id+")"}),o.getText());else{var n=Object(b.isNonEmptyArray)(t)?t:null,i=n?f.a.compact(l()(f.a).call(f.a,n,function(e){return e&&e.toHex?e.toHex():null})).join(", "):"";r.controlsHelper(s,a,!1,Object(g.i18n)("PGP_NOTIFICATIONS/UNVERIFIRED_SIGNATURE")+(i?" ("+i+")":""))}}):r.controlsHelper(s,a,!1,Object(g.i18n)("PGP_NOTIFICATIONS/DECRYPTION_ERROR")),!1}},e.initMessageBodyControls=function(e,t){if(e&&!e.hasClass("inited")){e.addClass("inited");var n=e.hasClass("encrypted"),i=e.hasClass("signed"),o=t?t.getEmails(["from","to","cc"]):[],a=null;if(n||i){var r=e.text();e.data("openpgp-original",r),n?a=m()('<div class="b-openpgp-control"><i class="icon-lock"></i></div>').attr("title",Object(g.i18n)("MESSAGE/PGP_ENCRYPTED_MESSAGE_DESC")).on("click",s.domControlEncryptedClickHelper(this,e,r,o)):i&&(a=m()('<div class="b-openpgp-control"><i class="icon-lock"></i></div>').attr("title",Object(g.i18n)("MESSAGE/PGP_SIGNED_MESSAGE_DESC")).on("click",s.domControlSignedClickHelper(this,e,r))),a&&e.before(a).before("<div></div>")}}},s}();t.a=new S},function(e,t,n){"use strict";var b=n(77),v=n(234).f,y=n(280),S=n(97),O=n(237),w=n(85),T=n(96),C=function(i){var e=function(e,t,n){if(this instanceof i){switch(arguments.length){case 0:return new i;case 1:return new i(e);case 2:return new i(e,t)}return new i(e,t,n)}return i.apply(this,arguments)};return e.prototype=i.prototype,e};e.exports=function(e,t){var n,i,o,a,r,s,c,l,u=e.target,d=e.global,p=e.stat,f=e.proto,h=d?b:p?b[u]:(b[u]||{}).prototype,m=d?S:S[u]||(S[u]={}),g=m.prototype;for(o in t)n=!y(d?o:u+(p?".":"#")+o,e.forced)&&h&&T(h,o),r=m[o],n&&(s=e.noTargetGet?(l=v(h,o))&&l.value:h[o]),a=n&&s?s:t[o],n&&typeof r==typeof a||(c=e.bind&&n?O(a,b):e.wrap&&n?C(a):f&&"function"==typeof a?O(Function.call,a):a,(e.sham||a&&a.sham||r&&r.sham)&&w(c,"sham",!0),m[o]=c,f&&(T(S,i=u+"Prototype")||w(S,i,{}),S[i][o]=a,e.real&&g&&!g[o]&&w(g,o,a)))}},function(e,t,n){var u=n(28),d=n(90).f,p=n(45),f=n(54),h=n(92),m=n(176),g=n(129);e.exports=function(e,t){var n,i,o,a,r,s=e.target,c=e.global,l=e.stat;if(n=c?u:l?u[s]||h(s,{}):(u[s]||{}).prototype)for(i in t){if(a=t[i],o=e.noTargetGet?(r=d(n,i))&&r.value:n[i],!g(c?i:s+(l?".":"#")+i,e.forced)&&void 0!==o){if(typeof a==typeof o)continue;m(a,o)}(e.sham||o&&o.sham)&&p(a,"sham",!0),f(n,i,a,e)}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,n){var i=n(50),o=n(59),a=n(91);e.exports=i?function(e,t,n){return o.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){"use strict";var i=n(18),o=n.n(i),a=n(1),r=n(3),s=n.n(r),c=n(0),l=n(5),u=function(){function e(){this.email=a.a.observable(""),this.parentEmail=a.a.observable(""),this.signature=a.a.observable(""),this.accounts=a.a.observableArray([]),this.accounts.loading=a.a.observable(!1).extend({throttle:c.Magics.Time100ms}),this.computers()}var t=e.prototype;return t.computers=function(){var e=this;this.accountsEmails=a.a.computed(function(){return s.a.compact(o()(s.a).call(s.a,e.accounts(),function(e){return e?e.email:null}))}),this.accountsUnreadCount=a.a.computed(function(){return 0})},t.populate=function(){this.email(l.settingsGet("Email")),this.parentEmail(l.settingsGet("ParentEmail"))},t.isRootAccount=function(){return""===this.parentEmail()},e}();t.a=new u},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){"use strict";var i=n(43),o=n(112);i({target:"RegExp",proto:!0,forced:/./.exec!==o},{exec:o})},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var i=n(39);e.exports=!i(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var i=n(50),o=n(59).f,a=Function.prototype,r=a.toString,s=/^\s*function ([^ (]*)/;!i||"name"in a||o(a,"name",{configurable:!0,get:function(){try{return r.call(this).match(s)[1]}catch(e){return""}}})},function(e,t,n){var i=n(97);e.exports=function(e){return i[e+"Prototype"]}},function(e,t,n){var s=n(28),i=n(74),c=n(45),l=n(47),u=n(92),o=n(127),a=n(93),r=a.get,d=a.enforce,p=String(o).split("toString");i("inspectSource",function(e){return o.call(e)}),(e.exports=function(e,t,n,i){var o=!!i&&!!i.unsafe,a=!!i&&!!i.enumerable,r=!!i&&!!i.noTargetGet;"function"==typeof n&&("string"!=typeof t||l(n,"name")||c(n,"name",t),d(n).source=p.join("string"==typeof t?t:"")),e!==s?(o?!r&&e[t]&&(a=!0):delete e[t],a?e[t]=n:c(e,t,n)):a?e[t]=n:u(t,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&r(this).source||o.call(this)})},function(e,t,n){var i=n(54),o=n(181),a=Object.prototype;o!==a.toString&&i(a,"toString",o,{unsafe:!0})},function(e,t,n){"use strict";var i=n(132),C=n(36),p=n(120),A=n(72),E=n(80),a=n(51),F=n(150),j=n(133),N=Math.max,R=Math.min,f=Math.floor,h=/\$([$&'`]|\d\d?|<[^>]*>)/g,m=/\$([$&'`]|\d\d?)/g;i("replace",2,function(o,O,w){return[function(e,t){var n=a(this),i=null==e?void 0:e[o];return void 0!==i?i.call(e,n,t):O.call(String(n),e,t)},function(e,t){var n=w(O,e,this,t);if(n.done)return n.value;var i=C(e),o=String(this),a="function"==typeof t;a||(t=String(t));var r=i.global;if(r){var s=i.unicode;i.lastIndex=0}for(var c=[];;){var l=j(i,o);if(null===l)break;if(c.push(l),!r)break;""===String(l[0])&&(i.lastIndex=F(o,A(i.lastIndex),s))}for(var u,d="",p=0,f=0;f<c.length;f++){l=c[f];for(var h=String(l[0]),m=N(R(E(l.index),o.length),0),g=[],b=1;b<l.length;b++)g.push(void 0===(u=l[b])?u:String(u));var v=l.groups;if(a){var y=[h].concat(g,m,o);void 0!==v&&y.push(v);var S=String(t.apply(void 0,y))}else S=T(h,o,m,g,v,t);p<=m&&(d+=o.slice(p,m)+S,p=m+h.length)}return d+o.slice(p)}];function T(a,r,s,c,l,e){var u=s+a.length,d=c.length,t=m;return void 0!==l&&(l=p(l),t=h),O.call(e,t,function(e,t){var n;switch(t.charAt(0)){case"$":return"$";case"&":return a;case"`":return r.slice(0,s);case"'":return r.slice(u);case"<":n=l[t.slice(1,-1)];break;default:var i=+t;if(0===i)return e;if(d<i){var o=f(i/10);return 0===o?e:o<=d?void 0===c[o-1]?t.charAt(1):c[o-1]+t.charAt(1):e}n=c[i-1]}return void 0===n?"":n})}})},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t,n){"use strict";n.d(t,"b",function(){return d}),n.d(t,"a",function(){return p});var i=n(12),o=n.n(i),a=n(3),r=n.n(a),s=n(416),c=n(417),l=o()(r.a).call(r.a,[c.a,s.a],function(e){return e&&e.supported()}),u=l?new l:null;function d(e,t){return!!u&&u.set("p"+e,t)}function p(e){return u?u.get("p"+e):null}},function(e,t,n){var i=n(50),o=n(126),a=n(36),r=n(125),s=Object.defineProperty;t.f=i?s:function(e,t,n){if(a(e),t=r(t,!0),a(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";n.r(t),n.d(t,"momentNow",function(){return g}),n.d(t,"momentNowUnix",function(){return b}),n.d(t,"searchSubtractFormatDateHelper",function(){return v}),n.d(t,"format",function(){return y}),n.d(t,"momentToNode",function(){return S}),n.d(t,"reload",function(){return O});var i=n(4),o=n.n(i),a=n(3),r=n.n(a),s=n(8),c=n.n(s),l=n(98),u=n.n(l),d=n(9),p=null,f=0,h=r.a.debounce(function(){p=u()()},500,!0),m=r.a.debounce(function(){f=u()().unix()},500,!0);function g(){return h(),p||u()()}function b(){return m(),f||0}function v(e){return g().clone().subtract(e,"days").format("YYYY.MM.DD")}function y(e,t){var n=null,i="",o=b();if((n=0<(e=o<(e=0<e?e:0===e?o:0)?o:e)?u.a.unix(e):null)&&1970===n.year()&&(n=null),n)switch(t){case"FROMNOW":i=n.fromNow();break;case"SHORT":i=function(e){var t=g();if(e&&t)switch(!0){case t.diff(e,"hours")<=4:return e.fromNow();case t.format("L")===e.format("L"):return Object(d.i18n)("MESSAGE_LIST/TODAY_AT",{TIME:e.format("LT")});case t.clone().subtract(1,"days").format("L")===e.format("L"):return Object(d.i18n)("MESSAGE_LIST/YESTERDAY_AT",{TIME:e.format("LT")});case t.year()===e.year():return e.format("D MMM.")}return e?e.format("LL"):""}(n);break;case"FULL":i=n.format("LLL");break;default:i=n.format(t)}return i}function S(e){var t,n="",i=c()(e);(t=i.data("moment-time"))&&((n=i.data("moment-format"))&&i.text(y(t,n)),(n=i.data("moment-format-title"))&&i.attr("title",y(t,n)))}function O(){r.a.defer(function(){c()(".moment",o.a.document).each(function(e,t){S(t)})})}},function(e,t){e.exports=window.hasher},function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"c",function(){return o}),n.d(t,"a",function(){return s}),n.d(t,"d",function(){return c});n(76),n(52);var r=n(2),a=n(81);function i(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var i=0,o=0,a=[];if(Object(r.isNonEmptyArray)(e))for(o=e.length;i<o;i++)a.push(e[i].toLine(t,n));return a.join(", ")}function o(e){var t=0,n=0,i=[];if(Object(r.isNonEmptyArray)(e))for(n=e.length;t<n;t++)e[t]&&e[t].email&&""!==e[t].name&&i.push(e[t].email);return i.join(", ")}function s(e){var t=0,n=0,i=null,o=[];if(Object(r.isNonEmptyArray)(e))for(t=0,n=e.length;t<n;t++)(i=a.EmailModel.newInstanceFromJson(e[t]))&&o.push(i);return o}function c(e,t,n){if(e&&0<e.length)for(var i=0,o=e.length;i<o;i++)Object(r.isUnd)(t[e[i].email])&&(t[e[i].email]=!0,n.push(e[i]))}},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(69),o=n.n(i),a=n(17),r=n.n(a),s=n(2),c=function(){function e(e){void 0===e&&(e=""),r()(this,"sModelName",""),r()(this,"disposables",[]),this.sModelName=e||""}var t=e.prototype;return t.regDisposables=function(e){var t=this;Object(s.isArray)(e)?o()(e).call(e,function(e){t.disposables.push(e)}):e&&this.disposables.push(e)},t.onDestroy=function(){Object(s.disposeObject)(this)},e}()},,function(e,t,n){var i=n(109),o=n(28),a=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?a(i[e])||a(o[e]):i[e]&&i[e][t]||o[e]&&o[e][t]}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){var i=n(43),o=n(28),a=n(105),r=[].slice,s=function(o){return function(e,t){var n=2<arguments.length,i=n?r.call(arguments,2):void 0;return o(n?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,t)}};i({global:!0,bind:!0,forced:/MSIE .\./.test(a)},{setTimeout:s(o.setTimeout),setInterval:s(o.setInterval)})},function(e,t,n){var i=n(77),o=n(199),a=n(239),r=n(290),s=i.Symbol,c=o("wks");e.exports=function(e){return c[e]||(c[e]=r&&s[e]||(r?s:a)("Symbol."+e))}},function(e,t,n){e.exports=n(252)},function(e,t,n){"use strict";var i=n(1),o=n(2),a=n(5),r=function(){function e(){this.languages=i.a.observableArray([]),this.languagesAdmin=i.a.observableArray([]),this.language=i.a.observable("").extend({limitedList:this.languages}).extend({reversible:!0}),this.languageAdmin=i.a.observable("").extend({limitedList:this.languagesAdmin}).extend({reversible:!0}),this.userLanguage=i.a.observable(""),this.userLanguageAdmin=i.a.observable("")}return e.prototype.populate=function(){var e=a.appSettingsGet("languages"),t=a.appSettingsGet("languagesAdmin");this.languages(Object(o.isArray)(e)?e:[]),this.languagesAdmin(Object(o.isArray)(t)?t:[]),this.language(a.settingsGet("Language")),this.languageAdmin(a.settingsGet("LanguageAdmin")),this.userLanguage(a.settingsGet("UserLanguage")),this.userLanguageAdmin(a.settingsGet("UserLanguageAdmin"))},e}();t.a=new r},function(e,t,n){var i=n(119),o=n(51);e.exports=function(e){return i(o(e))}},function(e,t,n){var i=n(80),o=Math.min;e.exports=function(e){return 0<e?o(i(e),9007199254740991):0}},function(e,t){e.exports={}},function(e,t,n){var i=n(28),o=n(92),a=n(83),r="__core-js_shared__",s=i[r]||o(r,{});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.1.3",mode:a?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t,n){var i=n(54),o=Date.prototype,a="Invalid Date",r="toString",s=o[r],c=o.getTime;new Date(NaN)+""!=a&&i(o,r,function(){var e=c.call(this);return e==e?s.call(this):a})},function(e,t,n){"use strict";var i=n(43),o=n(119),a=n(71),r=n(275),s=[].join,c=o!=Object,l=r("join",",");i({target:"Array",proto:!0,forced:c||l},{join:function(e){return s.call(a(this),void 0===e?",":e)}})},function(i,e,t){(function(e){var t="object",n=function(e){return e&&e.Math==Math&&e};i.exports=n(typeof globalThis==t&&globalThis)||n(typeof window==t&&window)||n(typeof self==t&&self)||n(typeof e==t&&e)||Function("return this")()}).call(this,t(124))},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},,function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?i:n)(e)}},function(e,t,n){"use strict";n.r(t),n.d(t,"EmailModel",function(){return g}),n.d(t,"default",function(){return g});n(52),n(48),n(56),n(266);var i=n(18),a=n.n(i),o=n(69),r=n.n(o),s=n(30),c=n.n(s),l=n(17),u=n.n(l),d=n(3),p=n.n(d),f=n(160),h=n.n(f),m=n(2),g=function(){function o(e,t,n,i){void 0===e&&(e=""),void 0===t&&(t=""),void 0===n&&(n="none"),void 0===i&&(i=""),u()(this,"email",""),u()(this,"name",""),u()(this,"dkimStatus",""),u()(this,"dkimValue",""),this.email=e,this.name=t,this.dkimStatus=n,this.dkimValue=i,this.clearDuplicateName()}o.newInstanceFromJson=function(e){var t=new o;return t.initByJson(e)?t:null};var e=o.prototype;return e.clear=function(){this.email="",this.name="",this.dkimStatus="none",this.dkimValue=""},e.validate=function(){return""!==this.name||""!==this.email},e.hash=function(e){return void 0===e&&(e=!1),"#"+(e?"":this.name)+"#"+this.email+"#"},e.clearDuplicateName=function(){this.name===this.email&&(this.name="")},e.search=function(e){var t;return-1<c()(t=(this.name+" "+this.email).toLowerCase()).call(t,e.toLowerCase())},e.initByJson=function(e){var t=!1;return e&&"Object/Email"===e["@Object"]&&(this.name=Object(m.trim)(e.Name),this.email=Object(m.trim)(e.Email),this.dkimStatus=Object(m.trim)(e.DkimStatus||""),this.dkimValue=Object(m.trim)(e.DkimValue||""),t=""!==this.email,this.clearDuplicateName()),t},e.toLine=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var i="";return""!==this.email&&(e&&""!==this.name?i=t?'<a href="mailto:'+Object(m.encodeHtml)(this.email)+"?to="+Object(m.encodeHtml)('"'+this.name+'" <'+this.email+">")+'" target="_blank" tabindex="-1">'+Object(m.encodeHtml)(this.name)+"</a>":n?Object(m.encodeHtml)(this.name):this.name:(i=this.email,""!==this.name?t?i=Object(m.encodeHtml)('"'+this.name+'" <')+'<a href="mailto:'+Object(m.encodeHtml)(this.email)+"?to="+Object(m.encodeHtml)('"'+this.name+'" <'+this.email+">")+'" target="_blank" tabindex="-1">'+Object(m.encodeHtml)(i)+"</a>"+Object(m.encodeHtml)(">"):(i='"'+this.name+'" <'+i+">",n&&(i=Object(m.encodeHtml)(i))):t&&(i='<a href="mailto:'+Object(m.encodeHtml)(this.email)+'" target="_blank" tabindex="-1">'+Object(m.encodeHtml)(this.email)+"</a>"))),i},o.splitEmailLine=function(e){var t=h()(e);if(Object(m.isNonEmptyArray)(t)){var n=[],i=!1;return r()(t).call(t,function(e){var t=e.address?new o(e.address.replace(/^[<]+(.*)[>]+$/g,"$1"),e.name||""):null;t&&t.email&&(i=!0),n.push(t?t.toLine(!1):e.name)}),i?n:null}return null},o.parseEmailLine=function(e){var t=h()(e);return Object(m.isNonEmptyArray)(t)?p.a.compact(a()(p.a).call(p.a,t,function(e){return e.address?new o(e.address.replace(/^[<]+(.*)[>]+$/g,"$1"),e.name||""):null})):[]},e.parse=function(e){if(""===(e=Object(m.trim)(e)))return!1;var t=h()(e);return!(!Object(m.isNonEmptyArray)(t)||!t[0])&&(this.name=t[0].name||"",this.email=t[0].address||"",this.clearDuplicateName(),!0)},o}()},function(e,t,n){"use strict";n(48),n(56),n(135);var i=n(17),o=n.n(i),a=n(4),r=n.n(a),s=n(6),c=n(15),l=n(24),u=n(2),d=function(){function e(){var e=this;if(o()(this,"notificator",null),o()(this,"player",null),o()(this,"supported",!1),o()(this,"supportedMp3",!1),o()(this,"supportedOgg",!1),o()(this,"supportedWav",!1),o()(this,"supportedNotification",!1),this.player=this.createNewObject(),this.supported=!(s.bMobileDevice||s.bSafari||!this.player||!this.player.play),this.supported&&this.player&&this.player.canPlayType&&(this.supportedMp3=""!==this.player.canPlayType("audio/mpeg;").replace(/no/,""),this.supportedWav=""!==this.player.canPlayType('audio/wav; codecs="1"').replace(/no/,""),this.supportedOgg=""!==this.player.canPlayType('audio/ogg; codecs="vorbis"').replace(/no/,""),this.supportedNotification=this.supported&&this.supportedMp3),this.player&&(this.supportedMp3||this.supportedOgg||this.supportedWav)||(this.supported=!1,this.supportedMp3=!1,this.supportedOgg=!1,this.supportedWav=!1,this.supportedNotification=!1),this.supported&&this.player){var t=function(){return e.stop()};this.player.addEventListener("ended",t),this.player.addEventListener("error",t),l.b("audio.api.stop",t)}}var t=e.prototype;return t.createNewObject=function(){try{var e=r.a.Audio?new r.a.Audio:null;return e&&e.canPlayType&&e.pause&&e.play&&(e.preload="none",e.loop=!1,e.autoplay=!1,e.muted=!1),e}catch(e){}return null},t.paused=function(){return!this.supported||!!this.player.paused},t.stop=function(){this.supported&&this.player.pause&&this.player.pause(),l.a("audio.stop")},t.pause=function(){this.stop()},t.clearName=function(e,t){return void 0===e&&(e=""),void 0===t&&(t=""),e=Object(u.trim)(e),t&&"."+t===e.toLowerCase().substr(-1*(t.length+1))&&(e=Object(u.trim)(e.substr(0,e.length-4))),""===e?"audio":e},t.playMp3=function(e,t){this.supported&&this.supportedMp3&&(this.player.src=e,this.player.play(),l.a("audio.start",[this.clearName(t,"mp3"),"mp3"]))},t.playOgg=function(e,t){this.supported&&this.supportedOgg&&(this.player.src=e,this.player.play(),t=this.clearName(t,"oga"),t=this.clearName(t,"ogg"),l.a("audio.start",[t,"ogg"]))},t.playWav=function(e,t){this.supported&&this.supportedWav&&(this.player.src=e,this.player.play(),l.a("audio.start",[this.clearName(t,"wav"),"wav"]))},t.playNotification=function(){this.supported&&this.supportedMp3&&(this.notificator||(this.notificator=this.createNewObject(),this.notificator.src=c.D("new-mail.mp3")),this.notificator&&this.notificator.play&&this.notificator.play())},e}();t.a=new d},function(e,t){e.exports=!1},function(e,t,n){var i=n(57);e.exports=!i(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(84),o=n(134),a=n(151);e.exports=i?function(e,t,n){return o.f(e,t,a(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){"use strict";n.d(t,"a",function(){return p});var i=n(12),o=n.n(i),a=n(33),r=n.n(a),s=n(10),c=n.n(s),l=n(1),u=n(2),d=n(0),p=function(i){function e(e){var t,n;((t=i.call(this)||this).value=e.value||"",t.size=e.size||0,t.label=e.label||"",t.preLabel=e.preLabel||"",t.enable=!!Object(u.isUnd)(e.enable)||e.enable,t.trigger=e.trigger&&e.trigger.subscribe?e.trigger:null,t.placeholder=e.placeholder||"",t.labeled=!Object(u.isUnd)(e.label),t.preLabeled=!Object(u.isUnd)(e.preLabel),t.triggered=!Object(u.isUnd)(e.trigger)&&!!t.trigger,t.classForTrigger=l.a.observable(""),t.className=l.a.computed(function(){var e=l.a.unwrap(t.size);return(0<e?"span"+e:"")+(t.trigger?" "+Object(u.trim)("settings-saved-trigger-input "+t.classForTrigger()):"")}),!Object(u.isUnd)(e.width)&&e.element)&&o()(n=e.element).call(n,"input,select,textarea").css("width",e.width);return t.disposable.push(t.className),t.trigger&&(t.setTriggerState(t.trigger()),t.disposable.push(t.trigger.subscribe(t.setTriggerState,r()(t)))),t}return c()(e,i),e.prototype.setTriggerState=function(e){switch(Object(u.pInt)(e)){case d.SaveSettingsStep.TrueResult:this.classForTrigger("success");break;case d.SaveSettingsStep.FalseResult:this.classForTrigger("error");break;default:this.classForTrigger("")}},e}(n(35).a)},,function(e,t,n){"use strict";n(67);var i=n(10),o=n.n(i),a=n(4),r=n.n(a),s=n(390),c=function(t){function e(){var e;return(e=t.call(this)||this).foldersTimeout=0,e}o()(e,t);var n=e.prototype;return n.foldersReload=function(e){return this.abort("Folders").postRequest("Folders",e).then(function(e){return s.a.foldersList(e.Result),s.a.foldersAdditionalParameters(e.Result),!0})},n.foldersReloadWithTimeout=function(e){var t=this;this.setTrigger(e,!0),r.a.clearTimeout(this.foldersTimeout),this.foldersTimeout=r.a.setTimeout(function(){t.foldersReload(e)},500)},n.folderDelete=function(e,t){return this.postRequest("FolderDelete",t,{Folder:e})},n.folderCreate=function(e,t,n){return this.postRequest("FolderCreate",n,{Folder:e,Parent:t})},n.folderRename=function(e,t,n){return this.postRequest("FolderRename",n,{Folder:e,NewFolderName:t})},n.attachmentsActions=function(e,t,n){return this.postRequest("AttachmentsActions",n,{Do:e,Hashes:t})},n.welcomeClose=function(){return this.postRequest("WelcomeClose")},e}(n(419).a);t.a=new c},,function(e,t,n){var i=n(50),o=n(161),a=n(91),r=n(71),s=n(125),c=n(47),l=n(126),u=Object.getOwnPropertyDescriptor;t.f=i?u:function(e,t){if(e=r(e),t=s(t,!0),l)try{return u(e,t)}catch(e){}if(c(e,t))return a(!o.f.call(e,t),e[t])}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var i=n(28),o=n(45);e.exports=function(t,n){try{o(i,t,n)}catch(e){i[t]=n}return n}},function(e,t,n){var i,o,a,r=n(175),s=n(28),c=n(44),l=n(45),u=n(47),d=n(108),p=n(103),f=s.WeakMap;if(r){var h=new f,m=h.get,g=h.has,b=h.set;i=function(e,t){return b.call(h,e,t),t},o=function(e){return m.call(h,e)||{}},a=function(e){return g.call(h,e)}}else{var v=d("state");p[v]=!0,i=function(e,t){return l(e,v,t),t},o=function(e){return u(e,v)?e[v]:{}},a=function(e){return u(e,v)}}e.exports={set:i,get:o,has:a,enforce:function(e){return a(e)?o(e):i(e,{})},getterFor:function(n){return function(e){var t;if(!c(e)||(t=o(e)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return t}}}},function(e,t,n){"use strict";var i=n(54),o=n(36),a=n(39),r=n(166),s="toString",c=RegExp.prototype,l=c[s],u=a(function(){return"/a/b"!=l.call({source:"a",flags:"b"})}),d=l.name!=s;(u||d)&&i(RegExp.prototype,s,function(){var e=o(this),t=String(e.source),n=e.flags;return"/"+t+"/"+String(void 0===n&&e instanceof RegExp&&!("flags"in c)?r.call(e):n)},{unsafe:!0})},function(e,t,n){var i=n(194),o=n(196);e.exports=function(e){return i(o(e))}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t){e.exports={}},function(e,t){e.exports=window.moment},function(e,t){e.exports=window.progressJs},function(e,t,n){"use strict";var i=n(18),o=n.n(i),a=n(3),r=n.n(a),s=n(1);t.a=new function(){var e=this;this.identities=s.a.observableArray([]),this.identities.loading=s.a.observable(!1).extend({throttle:100}),this.identitiesIDS=s.a.computed(function(){return r.a.compact(o()(r.a).call(r.a,e.identities(),function(e){return e?e.id:null}))})}},function(e,t,n){"use strict";var i=n(1),o=n(0),a=n(5),r=function(){function e(){this.contacts=i.a.observableArray([]),this.contacts.loading=i.a.observable(!1).extend({throttle:o.Magics.Time200ms}),this.contacts.importing=i.a.observable(!1).extend({throttle:o.Magics.Time200ms}),this.contacts.syncing=i.a.observable(!1).extend({throttle:o.Magics.Time200ms}),this.contacts.exportingVcf=i.a.observable(!1).extend({throttle:o.Magics.Time200ms}),this.contacts.exportingCsv=i.a.observable(!1).extend({throttle:o.Magics.Time200ms}),this.allowContactsSync=i.a.observable(!1),this.enableContactsSync=i.a.observable(!1),this.contactsSyncUrl=i.a.observable(""),this.contactsSyncUser=i.a.observable(""),this.contactsSyncPass=i.a.observable("")}return e.prototype.populate=function(){this.allowContactsSync(!!a.settingsGet("ContactsSyncIsAllowed")),this.enableContactsSync(!!a.settingsGet("EnableContactsSync")),this.contactsSyncUrl(a.settingsGet("ContactsSyncUrl")),this.contactsSyncUser(a.settingsGet("ContactsSyncUser")),this.contactsSyncPass(a.settingsGet("ContactsSyncPassword"))},e}();t.a=new r},function(e,t,n){var i=n(28),o=n(44),a=i.document,r=o(a)&&o(a.createElement);e.exports=function(e){return r?a.createElement(e):{}}},function(e,t){e.exports={}},function(e,t,n){var a=n(66);e.exports=function(i,o,e){if(a(i),void 0===o)return i;switch(e){case 0:return function(){return i.call(o)};case 1:return function(e){return i.call(o,e)};case 2:return function(e,t){return i.call(o,e,t)};case 3:return function(e,t,n){return i.call(o,e,t,n)}}return function(){return i.apply(o,arguments)}}},function(e,t,n){var i=n(65);e.exports=i("navigator","userAgent")||""},function(e,t,n){"use strict";var o=n(66),i=function(e){var n,i;this.promise=new e(function(e,t){if(void 0!==n||void 0!==i)throw TypeError("Bad Promise constructor");n=e,i=t}),this.resolve=o(n),this.reject=o(i)};e.exports.f=function(e){return new i(e)}},function(e,t,n){"use strict";n.d(t,"a",function(){return o});n(55),n(121);var i=n(4),a=n.n(i);function o(i,o){if(void 0===o&&(o=!1),!a.a.Promise||!a.a.Promise.all)throw new Error("Promises are not available your environment.");if(!i)throw new Error("src should not be empty.");return new a.a.Promise(function(e,t){var n=a.a.document.createElement("script");n.onload=function(){e(i)},n.onerror=function(){t(new Error(i))},n.async=!0===o,n.src=i,a.a.document.body.appendChild(n)})}},function(e,t,n){var i=n(74),o=n(128),a=i("keys");e.exports=function(e){return a[e]||(a[e]=o(e))}},function(e,t,n){e.exports=n(28)},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){var i=n(59).f,o=n(47),a=n(32)("toStringTag");e.exports=function(e,t,n){e&&!o(e=n?e:e.prototype,a)&&i(e,a,{configurable:!0,value:t})}},function(e,t,n){"use strict";var i,o,r=n(166),s=RegExp.prototype.exec,c=String.prototype.replace,a=s,l=(i=/a/,o=/b*/g,s.call(i,"a"),s.call(o,"a"),0!==i.lastIndex||0!==o.lastIndex),u=void 0!==/()??/.exec("")[1];(l||u)&&(a=function(e){var t,n,i,o,a=this;return u&&(n=new RegExp("^"+a.source+"$(?!\\s)",r.call(a))),l&&(t=a.lastIndex),i=s.call(a,e),l&&i&&(a.lastIndex=a.global?i.index+i[0].length:t),u&&i&&1<i.length&&c.call(i[0],n,function(){for(o=1;o<arguments.length-2;o++)void 0===arguments[o]&&(i[o]=void 0)}),i}),e.exports=a},function(e,t,n){var i=n(198),o=Math.min;e.exports=function(e){return 0<e?o(i(e),9007199254740991):0}},function(e,t,n){e.exports=n(282)},function(e,t,n){"use strict";var i=n(1),o=n(2),a=n(5),r=function(){function e(){this.themes=i.a.observableArray([]),this.themeBackgroundName=i.a.observable(""),this.themeBackgroundHash=i.a.observable(""),this.theme=i.a.observable("").extend({limitedList:this.themes})}return e.prototype.populate=function(){var e=a.appSettingsGet("themes");this.themes(Object(o.isArray)(e)?e:[]),this.theme(a.settingsGet("Theme")),this.themeBackgroundName(a.settingsGet("UserBackgroundName")),this.themeBackgroundHash(a.settingsGet("UserBackgroundHash"))},e}();t.a=new r},function(e,t,n){"use strict";n(67);var i=n(4),s=n.n(i),o=n(1),c=n(0),l=n(24),a=n(82),r=n(5),u=function(){function e(){var i=this;this.enableSoundNotification=o.a.observable(!1),this.soundNotificationIsSupported=o.a.observable(!1),this.allowDesktopNotification=o.a.observable(!1),this.desktopNotificationPermissions=o.a.computed(function(){i.allowDesktopNotification();var e=c.DesktopNotification.NotSupported,t=i.notificationClass();if(t&&t.permission)switch(t.permission.toLowerCase()){case"granted":e=c.DesktopNotification.Allowed;break;case"denied":e=c.DesktopNotification.Denied;break;case"default":e=c.DesktopNotification.NotAllowed}else s.a.webkitNotifications&&s.a.webkitNotifications.checkPermission&&(e=s.a.webkitNotifications.checkPermission());return e}).extend({notify:"always"}),this.enableDesktopNotification=o.a.computed({read:function(){return i.allowDesktopNotification()&&c.DesktopNotification.Allowed===i.desktopNotificationPermissions()},write:function(e){if(e){var t=i.notificationClass(),n=i.desktopNotificationPermissions();t&&c.DesktopNotification.Allowed===n?i.allowDesktopNotification(!0):t&&c.DesktopNotification.NotAllowed===n?t.requestPermission(function(){i.allowDesktopNotification.valueHasMutated(),c.DesktopNotification.Allowed===i.desktopNotificationPermissions()?i.allowDesktopNotification()?i.allowDesktopNotification.valueHasMutated():i.allowDesktopNotification(!0):i.allowDesktopNotification()?i.allowDesktopNotification(!1):i.allowDesktopNotification.valueHasMutated()}):i.allowDesktopNotification(!1)}else i.allowDesktopNotification(!1)}}).extend({notify:"always"}),this.enableDesktopNotification.valueHasMutated||(this.enableDesktopNotification.valueHasMutated=function(){i.allowDesktopNotification.valueHasMutated()}),this.computers(),this.initNotificationPlayer()}var t=e.prototype;return t.computers=function(){var e=this;this.isDesktopNotificationSupported=o.a.computed(function(){return c.DesktopNotification.NotSupported!==e.desktopNotificationPermissions()}),this.isDesktopNotificationDenied=o.a.computed(function(){return c.DesktopNotification.NotSupported===e.desktopNotificationPermissions()||c.DesktopNotification.Denied===e.desktopNotificationPermissions()})},t.initNotificationPlayer=function(){a.a&&a.a.supportedNotification?this.soundNotificationIsSupported(!0):(this.enableSoundNotification(!1),this.soundNotificationIsSupported(!1))},t.playSoundNotification=function(e){a.a&&a.a.supportedNotification&&(e||this.enableSoundNotification())&&a.a.playNotification()},t.displayDesktopNotification=function(e,t,n,i){if(this.enableDesktopNotification()){var o=this.notificationClass(),a=o?new o(t,{body:n,icon:e}):null;a&&(a.show&&a.show(),i&&(a.onclick=function(){s.a.focus(),i.Folder&&i.Uid&&l.a("mailbox.message.show",[i.Folder,i.Uid])}),s.a.setTimeout((r=a,function(){r.cancel?r.cancel():r.close&&r.close()}),c.Magics.Time7s))}var r},t.populate=function(){this.enableSoundNotification(!!r.settingsGet("SoundNotification")),this.enableDesktopNotification(!!r.settingsGet("DesktopNotifications"))},t.notificationClass=function(){return s.a.Notification&&s.a.Notification.requestPermission?s.a.Notification:null},e}();t.a=new u},,,function(e,t,n){var i=n(39),o=n(49),a="".split;e.exports=i(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==o(e)?a.call(e,""):Object(e)}:Object},function(e,t,n){var i=n(51);e.exports=function(e){return Object(i(e))}},function(e,t,n){"use strict";var i,o,a,r=n(43),s=n(83),c=n(28),l=n(109),u=n(184),d=n(111),p=n(185),f=n(44),h=n(66),m=n(186),g=n(49),b=n(141),v=n(190),y=n(142),S=n(131).set,O=n(191),w=n(165),T=n(192),C=n(106),A=n(143),E=n(105),F=n(93),j=n(129),N=n(32)("species"),R="Promise",I=F.get,L=F.set,P=F.getterFor(R),M=c[R],D=c.TypeError,_=c.document,k=c.process,x=c.fetch,U=k&&k.versions,H=U&&U.v8||"",B=C.f,G=B,V="process"==g(k),K=!!(_&&_.createEvent&&c.dispatchEvent),q="unhandledrejection",z=j(R,function(){var e=M.resolve(1),t=function(){},n=(e.constructor={})[N]=function(e){e(t,t)};return!((V||"function"==typeof PromiseRejectionEvent)&&(!s||e.finally)&&e.then(t)instanceof n&&0!==H.indexOf("6.6")&&-1===E.indexOf("Chrome/66"))}),W=z||!v(function(e){M.all(e).catch(function(){})}),Y=function(e){var t;return!(!f(e)||"function"!=typeof(t=e.then))&&t},$=function(d,p,f){if(!p.notified){p.notified=!0;var h=p.reactions;O(function(){for(var e=p.value,t=1==p.state,n=0;h.length>n;){var i,o,a,r=h[n++],s=t?r.ok:r.fail,c=r.resolve,l=r.reject,u=r.domain;try{s?(t||(2===p.rejection&&Q(d,p),p.rejection=1),!0===s?i=e:(u&&u.enter(),i=s(e),u&&(u.exit(),a=!0)),i===r.promise?l(D("Promise-chain cycle")):(o=Y(i))?o.call(i,c,l):c(i)):l(e)}catch(e){u&&!a&&u.exit(),l(e)}}p.reactions=[],p.notified=!1,f&&!p.rejection&&X(d,p)})}},J=function(e,t,n){var i,o;K?((i=_.createEvent("Event")).promise=t,i.reason=n,i.initEvent(e,!1,!0),c.dispatchEvent(i)):i={promise:t,reason:n},(o=c["on"+e])?o(i):e===q&&T("Unhandled promise rejection",n)},X=function(n,i){S.call(c,function(){var e,t=i.value;if(Z(i)&&(e=A(function(){V?k.emit("unhandledRejection",t,n):J(q,n,t)}),i.rejection=V||Z(i)?2:1,e.error))throw e.value})},Z=function(e){return 1!==e.rejection&&!e.parent},Q=function(e,t){S.call(c,function(){V?k.emit("rejectionHandled",e):J("rejectionhandled",e,t.value)})},ee=function(t,n,i,o){return function(e){t(n,i,e,o)}},te=function(e,t,n,i){t.done||(t.done=!0,i&&(t=i),t.value=n,t.state=2,$(e,t,!0))},ne=function(n,i,e,t){if(!i.done){i.done=!0,t&&(i=t);try{if(n===e)throw D("Promise can't be resolved itself");var o=Y(e);o?O(function(){var t={done:!1};try{o.call(e,ee(ne,n,t,i),ee(te,n,t,i))}catch(e){te(n,t,e,i)}}):(i.value=e,i.state=1,$(n,i,!1))}catch(e){te(n,{done:!1},e,i)}}};z&&(M=function(e){m(this,M,R),h(e),i.call(this);var t=I(this);try{e(ee(ne,this,t),ee(te,this,t))}catch(e){te(this,t,e)}},(i=function(e){L(this,{type:R,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=u(M.prototype,{then:function(e,t){var n=P(this),i=B(y(this,M));return i.ok="function"!=typeof e||e,i.fail="function"==typeof t&&t,i.domain=V?k.domain:void 0,n.parent=!0,n.reactions.push(i),0!=n.state&&$(this,n,!1),i.promise},catch:function(e){return this.then(void 0,e)}}),o=function(){var e=new i,t=I(e);this.promise=e,this.resolve=ee(ne,e,t),this.reject=ee(te,e,t)},C.f=B=function(e){return e===M||e===a?new o(e):G(e)},s||"function"!=typeof x||r({global:!0,enumerable:!0,forced:!0},{fetch:function(e){return w(M,x.apply(c,arguments))}})),r({global:!0,wrap:!0,forced:z},{Promise:M}),d(M,R,!1,!0),p(R),a=l[R],r({target:R,stat:!0,forced:z},{reject:function(e){var t=B(this);return t.reject.call(void 0,e),t.promise}}),r({target:R,stat:!0,forced:s||z},{resolve:function(e){return w(s&&this===a?M:this,e)}}),r({target:R,stat:!0,forced:W},{all:function(e){var s=this,t=B(s),c=t.resolve,l=t.reject,n=A(function(){var i=h(s.resolve),o=[],a=0,r=1;b(e,function(e){var t=a++,n=!1;o.push(void 0),r++,i.call(s,e).then(function(e){n||(n=!0,o[t]=e,--r||c(o))},l)}),--r||c(o)});return n.error&&l(n.value),t.promise},race:function(e){var n=this,i=B(n),o=i.reject,t=A(function(){var t=h(n.resolve);b(e,function(e){t.call(n,e).then(i.resolve,o)})});return t.error&&o(t.value),i.promise}})},function(e,t,n){var i=n(196);e.exports=function(e){return Object(i(e))}},function(e,t,c){"use strict";c.r(t),c.d(t,"ComposePopupView",function(){return pe}),c.d(t,"default",function(){return pe});c(76),c(75),c(52),c(55),c(48),c(94),c(56),c(168),c(169),c(135),c(67);var n,i,o,a,r,s,l,u,d,p,f=c(19),h=c.n(f),m=c(12),g=c.n(m),b=c(30),v=c.n(b),y=c(18),S=c.n(y),O=c(26),w=c.n(O),T=c(34),C=c.n(T),A=c(33),E=c.n(A),F=c(10),j=c.n(F),N=c(20),R=c.n(N),I=c(4),L=c.n(I),P=c(3),M=c.n(P),D=c(8),_=c.n(D),k=c(1),x=c(21),U=c.n(x),H=c(172),B=c.n(H),G=c(0),V=c(2),K=c(25),q=c(6),z=c(15),W=c(9),Y=c(60),$=c(14),J=c(204),X=c(31),Z=c(37),Q=c(100),ee=c(46),te=c(11),ne=c(41),ie=c(13),oe=c(29),ae=c(16),re=c(5),se=c(24),ce=c(262),le=c(22),ue=c(7),de=c(27),pe=(n=Object(ue.popup)({name:"View/Popup/Compose",templateID:"PopupsCompose"}),i=Object(ue.command)(function(e){return e.canBeSentOrSaved()}),o=Object(ue.command)(function(e){return e.canBeSentOrSaved()}),a=Object(ue.command)(function(e){return e.isDraftFolderMessage()}),r=Object(ue.command)(function(e){return e.canBeSentOrSaved()}),s=Object(ue.command)(function(e){return e.allowContacts}),l=Object(ue.command)(function(e){return e.dropboxEnabled()}),u=Object(ue.command)(function(e){return e.driveEnabled()}),n((p=function(e){function n(){var t;t=e.call(this)||this;var n=function(e,t,n,i){if(t&&e&&t[n]()&&(i||e[n]())){var o=t[n](),a=Object(V.trim)(e[n]()).split(/[,]/);a=C()(M.a).call(M.a,a,function(e){return(e=Object(V.trim)(e))&&Object(V.trim)(o)!==e}),i&&a.push(o),e[n](a.join(","))}};return t.oLastMessage=null,t.oEditor=null,t.aDraftInfo=null,t.sInReplyTo="",t.bFromDraft=!1,t.sReferences="",t.sLastFocusedField="to",t.resizerTrigger=w()(M.a).call(M.a,t.resizerTrigger,E()(t)),t.allowContacts=!!X.a.contactsIsAllowed(),t.allowFolders=!!re.capa(G.Capa.Folders),t.bSkipNextHide=!1,t.composeInEdit=X.a.composeInEdit,t.editorDefaultType=Z.a.editorDefaultType,t.capaOpenPGP=ne.a.capaOpenPGP,t.identitiesDropdownTrigger=k.a.observable(!1),t.to=k.a.observable(""),t.to.focused=k.a.observable(!1),t.cc=k.a.observable(""),t.cc.focused=k.a.observable(!1),t.bcc=k.a.observable(""),t.bcc.focused=k.a.observable(!1),t.replyTo=k.a.observable(""),t.replyTo.focused=k.a.observable(!1),k.a.computed(function(){switch(!0){case t.to.focused():t.sLastFocusedField="to";break;case t.cc.focused():t.sLastFocusedField="cc";break;case t.bcc.focused():t.sLastFocusedField="bcc"}}).extend({notify:"always"}),t.subject=k.a.observable(""),t.subject.focused=k.a.observable(!1),t.isHtml=k.a.observable(!1),t.requestDsn=k.a.observable(!1),t.requestReadReceipt=k.a.observable(!1),t.markAsImportant=k.a.observable(!1),t.sendError=k.a.observable(!1),t.sendSuccessButSaveError=k.a.observable(!1),t.savedError=k.a.observable(!1),t.sendButtonSuccess=k.a.computed(function(){return!t.sendError()&&!t.sendSuccessButSaveError()}),t.sendErrorDesc=k.a.observable(""),t.savedErrorDesc=k.a.observable(""),t.sendError.subscribe(function(e){e||t.sendErrorDesc("")}),t.savedError.subscribe(function(e){e||t.savedErrorDesc("")}),t.sendSuccessButSaveError.subscribe(function(e){e||t.savedErrorDesc("")}),t.savedTime=k.a.observable(0),t.savedTimeText=k.a.computed(function(){return 0<t.savedTime()?Object(W.i18n)("COMPOSE/SAVED_TIME",{TIME:Object(Y.format)(t.savedTime()-1,"LT")}):""}),t.emptyToError=k.a.observable(!1),t.emptyToErrorTooltip=k.a.computed(function(){return t.emptyToError()?Object(W.i18n)("COMPOSE/EMPTY_TO_ERROR_DESC"):""}),t.attachmentsInProcessError=k.a.observable(!1),t.attachmentsInErrorError=k.a.observable(!1),t.attachmentsErrorTooltip=k.a.computed(function(){var e="";switch(!0){case t.attachmentsInProcessError():e=Object(W.i18n)("COMPOSE/ATTACHMENTS_UPLOAD_ERROR_DESC");break;case t.attachmentsInErrorError():e=Object(W.i18n)("COMPOSE/ATTACHMENTS_ERROR_DESC")}return e}),t.showCc=k.a.observable(!1),t.showBcc=k.a.observable(!1),t.showReplyTo=k.a.observable(!1),t.cc.subscribe(function(e){!1===t.showCc()&&0<e.length&&t.showCc(!0)}),t.bcc.subscribe(function(e){!1===t.showBcc()&&0<e.length&&t.showBcc(!0)}),t.replyTo.subscribe(function(e){!1===t.showReplyTo()&&0<e.length&&t.showReplyTo(!0)}),t.draftFolder=k.a.observable(""),t.draftUid=k.a.observable(""),t.sending=k.a.observable(!1),t.saving=k.a.observable(!1),t.attachments=k.a.observableArray([]),t.attachmentsInProcess=k.a.computed(function(){return C()(M.a).call(M.a,t.attachments(),function(e){return e&&!e.complete()})}),t.attachmentsInReady=k.a.computed(function(){return C()(M.a).call(M.a,t.attachments(),function(e){return e&&e.complete()})}),t.attachmentsInError=k.a.computed(function(){return C()(M.a).call(M.a,t.attachments(),function(e){return e&&""!==e.error()})}),t.attachmentsCount=k.a.computed(function(){return t.attachments().length}),t.attachmentsInErrorCount=k.a.computed(function(){return t.attachmentsInError().length}),t.attachmentsInProcessCount=k.a.computed(function(){return t.attachmentsInProcess().length}),t.isDraftFolderMessage=k.a.computed(function(){return""!==t.draftFolder()&&""!==t.draftUid()}),t.attachmentsPlace=k.a.observable(!1),t.attachments.subscribe(t.resizerTrigger),t.attachmentsPlace.subscribe(t.resizerTrigger),t.attachmentsInErrorCount.subscribe(function(e){0===e&&t.attachmentsInErrorError(!1)}),t.composeUploaderButton=k.a.observable(null),t.composeUploaderDropPlace=k.a.observable(null),t.dragAndDropEnabled=k.a.observable(!1),t.dragAndDropOver=k.a.observable(!1).extend({throttle:1}),t.dragAndDropVisible=k.a.observable(!1).extend({throttle:1}),t.attacheMultipleAllowed=k.a.observable(!1),t.addAttachmentEnabled=k.a.observable(!1),t.composeEditorArea=k.a.observable(null),t.identities=Q.a.identities,t.identitiesOptions=k.a.computed(function(){return S()(M.a).call(M.a,Q.a.identities(),function(e){return{item:e,optValue:e.id(),optText:e.formattedName()}})}),t.currentIdentity=k.a.observable(t.identities()[0]?t.identities()[0]:null),t.currentIdentity.extend({toggleSubscribe:[E()(t),function(e){n(E()(t),e,"bcc"),n(E()(t),e,"replyTo")},function(e){n(E()(t),e,"bcc",!0),n(E()(t),e,"replyTo",!0)}]}),t.currentIdentityView=k.a.computed(function(){var e=t.currentIdentity();return e?e.formattedName():"unknown"}),t.to.subscribe(function(e){t.emptyToError()&&0<e.length&&t.emptyToError(!1)}),t.attachmentsInProcess.subscribe(function(e){t.attachmentsInProcessError()&&Object(V.isArray)(e)&&0===e.length&&t.attachmentsInProcessError(!1)}),t.resizer=k.a.observable(!1).extend({throttle:50}),t.resizer.subscribe(function(){t.oEditor&&t.oEditor.resize()}),t.canBeSentOrSaved=k.a.computed(function(){return!t.sending()&&!t.saving()}),t.sendMessageResponse=w()(M.a).call(M.a,t.sendMessageResponse,E()(t)),t.saveMessageResponse=w()(M.a).call(M.a,t.saveMessageResponse,E()(t)),se.b("interval.2m",function(){!t.modalVisibility()||te.a.draftFolderNotEnabled()||!Z.a.allowDraftAutosave()||t.isEmptyForm(!1)||t.saving()||t.sending()||t.savedError()||t.saveCommand()}),t.showCc.subscribe(t.resizerTrigger),t.showBcc.subscribe(t.resizerTrigger),t.showReplyTo.subscribe(t.resizerTrigger),t.dropboxEnabled=oe.a.dropbox.enabled,t.dropboxApiKey=oe.a.dropbox.apiKey,t.driveEnabled=k.a.observable(q.bXMLHttpRequestSupported&&!!re.settingsGet("AllowGoogleSocial")&&!!re.settingsGet("AllowGoogleSocialDrive")&&!!re.settingsGet("GoogleClientID")&&!!re.settingsGet("GoogleApiKey")),t.driveVisible=k.a.observable(!1),t.driveCallback=w()(M.a).call(M.a,t.driveCallback,E()(t)),t.onMessageUploadAttachments=w()(M.a).call(M.a,t.onMessageUploadAttachments,E()(t)),t.bDisabeCloseOnEsc=!0,t.sDefaultKeyScope=G.KeyState.Compose,t.tryToClosePopup=M.a.debounce(w()(M.a).call(M.a,t.tryToClosePopup,E()(t)),G.Magics.Time200ms),t.emailsSource=w()(M.a).call(M.a,t.emailsSource,E()(t)),t.autosaveFunction=w()(M.a).call(M.a,t.autosaveFunction,E()(t)),t.iTimer=0,t}j()(n,e);var t=n.prototype;return t.sendCommand=function(){var e=Object(V.trim)(this.to()),t=Object(V.trim)(this.cc()),n=Object(V.trim)(this.bcc()),i=te.a.sentFolder();if(this.attachmentsInProcessError(!1),this.attachmentsInErrorError(!1),this.emptyToError(!1),0<this.attachmentsInProcess().length?(this.attachmentsInProcessError(!0),this.attachmentsPlace(!0)):0<this.attachmentsInError().length&&(this.attachmentsInErrorError(!0),this.attachmentsPlace(!0)),""===e&&""===t&&""===n&&this.emptyToError(!0),!this.emptyToError()&&!this.attachmentsInErrorError()&&!this.attachmentsInProcessError())if(Z.a.replySameFolder()&&Object(V.isArray)(this.aDraftInfo)&&3===this.aDraftInfo.length&&Object(V.isNormal)(this.aDraftInfo[2])&&0<this.aDraftInfo[2].length&&(i=this.aDraftInfo[2]),this.allowFolders||(i=K.r),""===i)Object(ue.showScreenPopup)(c(267),[G.SetSystemFoldersNotification.Sent]);else{if(this.sendError(!1),this.sending(!0),Object(V.isArray)(this.aDraftInfo)&&3===this.aDraftInfo.length){var o=Object($.j)(this.aDraftInfo[2],this.aDraftInfo[1]);o&&("forward"===this.aDraftInfo[0]?o[3]=!0:o[2]=!0,Object($.t)(this.aDraftInfo[2],this.aDraftInfo[1],o),Object(le.a)().reloadFlagsCurrentMessageListAndMessageFromCache(),Object($.q)(this.aDraftInfo[2],""))}i=K.r===i?"":i,Object($.q)(this.draftFolder(),""),Object($.q)(i,""),ae.a.sendMessage(this.sendMessageResponse,this.currentIdentity()?this.currentIdentity().id():"",this.draftFolder(),this.draftUid(),i,e,this.cc(),this.bcc(),this.replyTo(),this.subject(),!!this.oEditor&&this.oEditor.isHtml(),this.oEditor?this.oEditor.getData(!0):"",this.prepearAttachmentsForSendOrSave(),this.aDraftInfo,this.sInReplyTo,this.sReferences,this.requestDsn(),this.requestReadReceipt(),this.markAsImportant())}},t.saveCommand=function(){return!!this.allowFolders&&(te.a.draftFolderNotEnabled()?Object(ue.showScreenPopup)(c(267),[G.SetSystemFoldersNotification.Draft]):(this.savedError(!1),this.saving(!0),this.autosaveStart(),Object($.q)(te.a.draftFolder(),""),ae.a.saveMessage(this.saveMessageResponse,this.currentIdentity()?this.currentIdentity().id():"",this.draftFolder(),this.draftUid(),te.a.draftFolder(),this.to(),this.cc(),this.bcc(),this.replyTo(),this.subject(),!!this.oEditor&&this.oEditor.isHtml(),this.oEditor?this.oEditor.getData(!0):"",this.prepearAttachmentsForSendOrSave(),this.aDraftInfo,this.sInReplyTo,this.sReferences,this.markAsImportant())),!0)},t.deleteCommand=function(){var e=this,t=c(218);!Object(ue.isPopupVisible)(t)&&this.modalVisibility()&&Object(ue.showScreenPopup)(t,[Object(W.i18n)("POPUPS_ASK/DESC_WANT_DELETE_MESSAGES"),function(){e.modalVisibility()&&(Object(le.a)().deleteMessagesFromFolderWithoutCheck(e.draftFolder(),[e.draftUid()]),Object(ue.hideScreenPopup)(n))}])},t.skipCommand=function(){this.bSkipNextHide=!0,!this.modalVisibility()||this.saving()||this.sending()||te.a.draftFolderNotEnabled()||!Z.a.allowDraftAutosave()||this.saveCommand(),this.tryToClosePopup()},t.contactsCommand=function(){var e=this;this.allowContacts&&(this.skipCommand(),M.a.delay(function(){Object(ue.showScreenPopup)(c(404),[!0,e.sLastFocusedField])},G.Magics.Time200ms))},t.dropboxCommand=function(){var t=this;return L.a.Dropbox&&L.a.Dropbox.choose({success:function(e){e&&e[0]&&e[0].link&&t.addDropboxAttachment(e[0])},linkType:"direct",multiselect:!1}),!0},t.driveCommand=function(){return this.driveOpenPopup(),!0},t.autosaveFunction=function(){!this.modalVisibility()||te.a.draftFolderNotEnabled()||!Z.a.allowDraftAutosave()||this.isEmptyForm(!1)||this.saving()||this.sending()||this.savedError()||this.saveCommand(),this.autosaveStart()},t.autosaveStart=function(){L.a.clearTimeout(this.iTimer),this.iTimer=L.a.setTimeout(this.autosaveFunction,G.Magics.Time1m)},t.autosaveStop=function(){L.a.clearTimeout(this.iTimer)},t.emailsSource=function(e,t){Object(le.a)().getAutocomplete(e.term,function(e){t(S()(M.a).call(M.a,e,function(e){return e.toLine(!1)}))})},t.openOpenPgpPopup=function(){var e=this;ne.a.capaOpenPGP()&&this.oEditor&&!this.oEditor.isHtml()&&Object(ue.showScreenPopup)(c(523),[function(t){e.editor(function(e){e.setPlain(t)})},this.oEditor.getData(!1),this.currentIdentity(),this.to(),this.cc(),this.bcc()])},t.reloadDraftFolder=function(){var e=te.a.draftFolder();""!==e&&K.r!==e&&(Object($.q)(e,""),te.a.currentFolderFullNameRaw()===e?Object(le.a)().reloadMessageList(!0):Object(le.a)().folderInformation(e))},t.findIdentityByMessage=function(e,t){var n=1e3,i=null,o=Q.a.identities(),a={},r=function(e){e&&e.email&&a[e.email]&&(!i||n>a[e.email][1])&&(i=a[e.email][0],n=a[e.email][1])};if(M.a.each(o,function(e,t){a[e.email()]=[e,t]}),t)switch(e){case G.ComposeType.Empty:break;case G.ComposeType.Reply:case G.ComposeType.ReplyAll:case G.ComposeType.Forward:case G.ComposeType.ForwardAsAttachment:M.a.each(M.a.union(t.to,t.cc,t.bcc),r),i||M.a.each(t.deliveredTo,r);break;case G.ComposeType.Draft:M.a.each(M.a.union(t.from,t.replyTo),r)}return i||o[0]||null},t.selectIdentity=function(e){e&&e.item&&(this.currentIdentity(e.item),this.setSignatureFromIdentity(e.item))},t.sendMessageResponse=function(e,t){var n=!1,i="";this.sending(!1),G.StorageResultType.Success===e&&t&&t.Result&&(n=!0,this.modalVisibility()&&Object(V.delegateRun)(this,"closeCommand")),this.modalVisibility()&&!n&&(t&&G.Notification.CantSaveMessage===t.ErrorCode?(this.sendSuccessButSaveError(!0),this.savedErrorDesc(Object(V.trim)(Object(W.i18n)("COMPOSE/SAVED_ERROR_ON_SEND")))):(i=Object(W.getNotification)(t&&t.ErrorCode?t.ErrorCode:G.Notification.CantSendMessage,t&&t.ErrorMessage?t.ErrorMessage:""),this.sendError(!0),this.sendErrorDesc(i||Object(W.getNotification)(G.Notification.CantSendMessage)))),this.reloadDraftFolder()},t.saveMessageResponse=function(e,t){var n=!1;if(this.saving(!1),G.StorageResultType.Success===e&&t&&t.Result&&t.Result.NewFolder&&t.Result.NewUid){if(n=!0,this.bFromDraft){var i=ie.a.message();i&&this.draftFolder()===i.folderFullNameRaw&&this.draftUid()===i.uid&&ie.a.message(null)}this.draftFolder(t.Result.NewFolder),this.draftUid(t.Result.NewUid),this.savedTime(L.a.Math.round((new L.a.Date).getTime()/1e3)),this.bFromDraft&&Object($.q)(this.draftFolder(),"")}n||(this.savedError(!0),this.savedErrorDesc(Object(W.getNotification)(G.Notification.CantSaveMessage))),this.reloadDraftFolder()},t.onHide=function(){this.autosaveStop(),this.bSkipNextHide||(X.a.composeInEdit(!1),this.reset()),this.bSkipNextHide=!1,this.to.focused(!1),Object(ue.routeOn)()},t.editor=function(e){var t=this;e&&(!this.oEditor&&this.composeEditorArea()?this.oEditor=new J.HtmlEditor(this.composeEditorArea(),null,function(){e(t.oEditor),t.resizerTrigger()},function(e){t.isHtml(!!e)}):this.oEditor&&(e(this.oEditor),this.resizerTrigger()))},t.converSignature=function(t){var e=10,n="",i=[],o=/{{MOMENT:([^}]+)}}/g;if(t=t.replace(/[\r]/g,""),""!==(n=this.oLastMessage?this.emailArrayToStringLineHelper(this.oLastMessage.from,!0):"")&&(t=t.replace(/{{FROM-FULL}}/g,n),-1===v()(n).call(n," ")&&0<v()(n).call(n,"@")&&(n=n.replace(/@[\S]+/,"")),t=t.replace(/{{FROM}}/g,n)),t=(t=(t=(t=t.replace(/[\s]{1,2}{{FROM}}/g,"{{FROM}}")).replace(/[\s]{1,2}{{FROM-FULL}}/g,"{{FROM-FULL}}")).replace(/{{FROM}}/g,"")).replace(/{{FROM-FULL}}/g,""),-1<v()(t).call(t,"{{DATE}}")&&(t=t.replace(/{{DATE}}/g,Object(Y.format)(0,"llll"))),-1<v()(t).call(t,"{{TIME}}")&&(t=t.replace(/{{TIME}}/g,Object(Y.format)(0,"LT"))),-1<v()(t).call(t,"{{MOMENT:"))try{for(var a=null;null!==(a=o.exec(t))&&(a&&a[0]&&a[1]&&i.push([a[0],a[1]]),0!=(e-=1)););i&&0<i.length&&M.a.each(i,function(e){t=t.replace(e[0],Object(Y.format)(0,e[1]))}),t=t.replace(/{{MOMENT:[^}]+}}/g,"")}catch(e){}return t},t.setSignatureFromIdentity=function(i){var o=this;i&&this.editor(function(e){var t=!1,n=i.signature();""!==n&&":HTML:"===n.substr(0,6)&&(t=!0,n=n.substr(6)),e.setSignature(o.converSignature(n),t,!!i.signatureInsertBefore())})},t.onShow=function(e,t,n,i,o,a,r){var s=this;Object(ue.routeOff)(),this.autosaveStart(),X.a.composeInEdit()?(e=e||G.ComposeType.Empty,G.ComposeType.Empty!==e?Object(ue.showScreenPopup)(c(218),[Object(W.i18n)("COMPOSE/DISCARD_UNSAVED_DATA"),function(){s.initOnShow(e,t,n,i,o,a,r)},null,null,null,!1]):(this.addEmailsTo(this.to,n),this.addEmailsTo(this.cc,i),this.addEmailsTo(this.bcc,o),Object(V.isNormal)(a)&&""!==a&&""===this.subject()&&this.subject(a))):this.initOnShow(e,t,n,i,o,a,r)},t.onWarmUp=function(){this.modalVisibility&&!this.modalVisibility()&&this.editor(function(e){return e.modeToggle(!1)})},t.addEmailsTo=function(e,t){if(Object(V.isNonEmptyArray)(t)){var n=Object(V.trim)(e()),i=M.a.uniq(M.a.compact(S()(M.a).call(M.a,t,function(e){return e?e.toLine(!1):null})));e(n+(""===n?"":", ")+Object(V.trim)(i.join(", ")))}},t.emailArrayToStringLineHelper=function(e,t){return t=!!t,S()(M.a).call(M.a,e,function(e){return e.toLine(t)}).join(", ")},t.initOnShow=function(e,t,n,i,o,a,r){var s=this;X.a.composeInEdit(!0);var c="",l="",u="",d="",p="",f="",h="",m=null,g=null,b=null,v={},y=ee.a.email(),S=e||G.ComposeType.Empty;if((t=t||null)&&Object(V.isNormal)(t)&&(b=Object(V.isArray)(t)&&1===t.length?t[0]:Object(V.isArray)(t)?null:t),this.oLastMessage=b,null!==y&&(v[y]=!0),this.reset(),(m=this.findIdentityByMessage(S,b))&&(v[m.email()]=!0),Object(V.isNonEmptyArray)(n)&&this.to(this.emailArrayToStringLineHelper(n)),Object(V.isNonEmptyArray)(i)&&this.cc(this.emailArrayToStringLineHelper(i)),Object(V.isNonEmptyArray)(o)&&this.bcc(this.emailArrayToStringLineHelper(o)),""!==S&&b){d=Object(Y.format)(b.dateTimeStampInUTC(),"FULL"),p=b.subject(),g=b.aDraftInfo;var O=_()(b.body).clone();O&&(Object(V.clearBqSwitcher)(O),f=O.html());var w=null;switch(S){case G.ComposeType.Empty:break;case G.ComposeType.Reply:this.to(this.emailArrayToStringLineHelper(b.replyEmails(v))),this.subject(Object(V.replySubjectAdd)("Re",p)),this.prepearMessageAttachments(b,S),this.aDraftInfo=["reply",b.uid,b.folderFullNameRaw],this.sInReplyTo=b.sMessageId,this.sReferences=Object(V.trim)(this.sInReplyTo+" "+b.sReferences);break;case G.ComposeType.ReplyAll:w=b.replyAllEmails(v),this.to(this.emailArrayToStringLineHelper(w[0])),this.cc(this.emailArrayToStringLineHelper(w[1])),this.subject(Object(V.replySubjectAdd)("Re",p)),this.prepearMessageAttachments(b,S),this.aDraftInfo=["reply",b.uid,b.folderFullNameRaw],this.sInReplyTo=b.sMessageId,this.sReferences=Object(V.trim)(this.sInReplyTo+" "+b.references());break;case G.ComposeType.Forward:case G.ComposeType.ForwardAsAttachment:this.subject(Object(V.replySubjectAdd)("Fwd",p)),this.prepearMessageAttachments(b,S),this.aDraftInfo=["forward",b.uid,b.folderFullNameRaw],this.sInReplyTo=b.sMessageId,this.sReferences=Object(V.trim)(this.sInReplyTo+" "+b.sReferences);break;case G.ComposeType.Draft:this.to(this.emailArrayToStringLineHelper(b.to)),this.cc(this.emailArrayToStringLineHelper(b.cc)),this.bcc(this.emailArrayToStringLineHelper(b.bcc)),this.replyTo(this.emailArrayToStringLineHelper(b.replyTo)),this.bFromDraft=!0,this.draftFolder(b.folderFullNameRaw),this.draftUid(b.uid),this.subject(p),this.prepearMessageAttachments(b,S),this.aDraftInfo=Object(V.isNonEmptyArray)(g)&&3===g.length?g:null,this.sInReplyTo=b.sInReplyTo,this.sReferences=b.sReferences;break;case G.ComposeType.EditAsNew:this.to(this.emailArrayToStringLineHelper(b.to)),this.cc(this.emailArrayToStringLineHelper(b.cc)),this.bcc(this.emailArrayToStringLineHelper(b.bcc)),this.replyTo(this.emailArrayToStringLineHelper(b.replyTo)),this.subject(p),this.prepearMessageAttachments(b,S),this.aDraftInfo=Object(V.isNonEmptyArray)(g)&&3===g.length?g:null,this.sInReplyTo=b.sInReplyTo,this.sReferences=b.sReferences}switch(S){case G.ComposeType.Reply:case G.ComposeType.ReplyAll:c=b.fromToLine(!1,!0),h=Object(W.i18n)("COMPOSE/REPLY_MESSAGE_TITLE",{DATETIME:d,EMAIL:c}),f="<br /><br />"+h+":<br /><br /><blockquote>"+Object(V.trim)(f)+"</blockquote>";break;case G.ComposeType.Forward:c=b.fromToLine(!1,!0),l=b.toToLine(!1,!0),u=b.ccToLine(!1,!0),f="<br /><br />"+Object(W.i18n)("COMPOSE/FORWARD_MESSAGE_TOP_TITLE")+"<br />"+Object(W.i18n)("COMPOSE/FORWARD_MESSAGE_TOP_FROM")+": "+c+"<br />"+Object(W.i18n)("COMPOSE/FORWARD_MESSAGE_TOP_TO")+": "+l+(0<u.length?"<br />"+Object(W.i18n)("COMPOSE/FORWARD_MESSAGE_TOP_CC")+": "+u:"")+"<br />"+Object(W.i18n)("COMPOSE/FORWARD_MESSAGE_TOP_SENT")+": "+Object(V.encodeHtml)(d)+"<br />"+Object(W.i18n)("COMPOSE/FORWARD_MESSAGE_TOP_SUBJECT")+": "+Object(V.encodeHtml)(p)+"<br /><br />"+Object(V.trim)(f)+"<br /><br />";break;case G.ComposeType.ForwardAsAttachment:f=""}this.editor(function(e){e.setHtml(f,!1),(G.EditorDefaultType.PlainForced===s.editorDefaultType()||!b.isHtml()&&G.EditorDefaultType.HtmlForced!==s.editorDefaultType())&&e.modeToggle(!1),m&&G.ComposeType.Draft!==S&&G.ComposeType.EditAsNew!==S&&s.setSignatureFromIdentity(m),s.setFocusInPopup()})}else G.ComposeType.Empty===S?(this.subject(Object(V.isNormal)(a)?""+a:""),f=Object(V.isNormal)(r)?""+r:"",this.editor(function(e){e.setHtml(f,!1),G.EditorDefaultType.Html!==s.editorDefaultType()&&G.EditorDefaultType.HtmlForced!==s.editorDefaultType()&&e.modeToggle(!1),m&&s.setSignatureFromIdentity(m),s.setFocusInPopup()})):Object(V.isNonEmptyArray)(t)?(M.a.each(t,function(e){s.addMessageAsAttachment(e)}),this.editor(function(e){e.setHtml("",!1),G.EditorDefaultType.Html!==s.editorDefaultType()&&G.EditorDefaultType.HtmlForced!==s.editorDefaultType()&&e.modeToggle(!1),m&&G.ComposeType.Draft!==S&&G.ComposeType.EditAsNew!==S&&s.setSignatureFromIdentity(m),s.setFocusInPopup()})):this.setFocusInPopup();var T=this.getAttachmentsDownloadsForUpload();Object(V.isNonEmptyArray)(T)&&ae.a.messageUploadAttachments(this.onMessageUploadAttachments,T),m&&this.currentIdentity(m),this.resizerTrigger()},t.onMessageUploadAttachments=function(e,t){var i=this;G.StorageResultType.Success===e&&t&&t.Result?this.viewModelVisibility()||M.a.each(t.Result,function(e,t){var n=i.getAttachmentById(e);n&&(n.tempName(t),n.waiting(!1).uploading(!1).complete(!0))}):this.setMessageAttachmentFailedDownloadText()},t.setFocusInPopup=function(){var e=this;q.bMobileDevice||M.a.delay(function(){""===e.to()?e.to.focused(!0):e.oEditor&&(e.to.focused()||e.oEditor.focus())},G.Magics.Time100ms)},t.onShowWithDelay=function(){this.resizerTrigger()},t.tryToClosePopup=function(){var e=this,t=c(218);!Object(ue.isPopupVisible)(t)&&this.modalVisibility()&&(this.bSkipNextHide||this.isEmptyForm()&&!this.draftUid()?Object(V.delegateRun)(this,"closeCommand"):Object(ue.showScreenPopup)(t,[Object(W.i18n)("POPUPS_ASK/DESC_WANT_CLOSE_THIS_WINDOW"),function(){e.modalVisibility()&&Object(V.delegateRun)(e,"closeCommand")}]))},t.onBuild=function(){var e=this;this.initUploader(),U()("ctrl+q, command+q, ctrl+w, command+w",G.KeyState.Compose,V.noopFalse),U()("`",G.KeyState.Compose,function(){return!(e.oEditor&&!e.oEditor.hasFocus()&&!Object(V.inFocus)())||(e.identitiesDropdownTrigger(!0),!1)}),U()("ctrl+`",G.KeyState.Compose,function(){return e.identitiesDropdownTrigger(!0),!1}),U()("esc, ctrl+down, command+down",G.KeyState.Compose,function(){return e.skipCommand(),!1}),this.allowFolders&&U()("ctrl+s, command+s",G.KeyState.Compose,function(){return e.saveCommand(),!1}),re.appSettingsGet("allowCtrlEnterOnCompose")&&U()("ctrl+enter, command+enter",G.KeyState.Compose,function(){return e.sendCommand(),!1}),U()("shift+esc",G.KeyState.Compose,function(){return e.modalVisibility()&&e.tryToClosePopup(),!1}),se.b("window.resize.real",this.resizerTrigger),se.b("window.resize.real",M.a.debounce(this.resizerTrigger,G.Magics.Time50ms)),oe.a.appendDropbox(),this.driveEnabled()&&_.a.getScript("https://apis.google.com/js/api.js",function(){L.a.gapi&&e.driveVisible(!0)}),L.a.setInterval(function(){e.modalVisibility()&&e.oEditor&&e.oEditor.resize()},G.Magics.Time5s)},t.driveCallback=function(t,e){var n=this;if(e&&L.a.XMLHttpRequest&&L.a.google&&e[L.a.google.picker.Response.ACTION]===L.a.google.picker.Action.PICKED&&e[L.a.google.picker.Response.DOCUMENTS]&&e[L.a.google.picker.Response.DOCUMENTS][0]&&e[L.a.google.picker.Response.DOCUMENTS][0].id){var o=new L.a.XMLHttpRequest;o.open("GET","https://www.googleapis.com/drive/v2/files/"+e[L.a.google.picker.Response.DOCUMENTS][0].id),o.setRequestHeader("Authorization","Bearer "+t),o.addEventListener("load",function(){if(o&&o.responseText){var i=L.a.JSON.parse(o.responseText),e=function(e,t,n){e&&e.exportLinks&&(e.exportLinks[t]?(i.downloadUrl=e.exportLinks[t],i.title=e.title+"."+n,i.mimeType=t):e.exportLinks["application/pdf"]&&(i.downloadUrl=e.exportLinks["application/pdf"],i.title=e.title+".pdf",i.mimeType="application/pdf"))};if(i&&!i.downloadUrl&&i.mimeType&&i.exportLinks)switch(i.mimeType.toString().toLowerCase()){case"application/vnd.google-apps.document":e(i,"application/vnd.openxmlformats-officedocument.wordprocessingml.document","docx");break;case"application/vnd.google-apps.spreadsheet":e(i,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","xlsx");break;case"application/vnd.google-apps.drawing":e(i,"image/png","png");break;case"application/vnd.google-apps.presentation":e(i,"application/vnd.openxmlformats-officedocument.presentationml.presentation","pptx");break;default:e(i,"application/pdf","pdf")}i&&i.downloadUrl&&n.addDriveAttachment(i,t)}}),o.send()}},t.driveCreatePiker=function(e){var t=this;L.a.gapi&&e&&e.access_token&&L.a.gapi.load("picker",{callback:function(){L.a.google&&L.a.google.picker&&(new L.a.google.picker.PickerBuilder).addView(L.a.google.picker.ViewId.DOCS).setAppId(re.settingsGet("GoogleClientID")).setOAuthToken(e.access_token).setCallback(w()(M.a).call(M.a,t.driveCallback,t,e.access_token)).enableFeature(L.a.google.picker.Feature.NAV_HIDDEN).build().setVisible(!0)}})},t.driveOpenPopup=function(){var n=this;L.a.gapi&&L.a.gapi.load("auth",{callback:function(){var e=L.a.gapi.auth.getToken(),t=function(e){if(!e||e.error)return!1;var t=L.a.gapi.auth.getToken();return t&&n.driveCreatePiker(t),!0};e?n.driveCreatePiker(e):L.a.gapi.auth.authorize({client_id:re.settingsGet("GoogleClientID"),scope:"https://www.googleapis.com/auth/drive.readonly",immediate:!0},function(e){t(e)||L.a.gapi.auth.authorize({client_id:re.settingsGet("GoogleClientID"),scope:"https://www.googleapis.com/auth/drive.readonly",immediate:!1},t)})}})},t.getAttachmentById=function(t){return g()(M.a).call(M.a,this.attachments(),function(e){return e&&t===e.id})},t.cancelAttachmentHelper=function(t,n){var i=this;return function(){var e=g()(M.a).call(M.a,i.attachments(),function(e){return e&&e.id===t});e&&(i.attachments.remove(e),Object(V.delegateRunOnDestroy)(e),n&&n.cancel(t))}},t.initUploader=function(){var s=this;if(this.composeUploaderButton()){var c={},a=Object(V.pInt)(re.settingsGet("AttachmentLimit")),r=new B.a({action:Object(z.G)(),name:"uploader",queueSize:2,multipleSizeLimit:50,clickElement:this.composeUploaderButton(),dragAndDropElement:this.composeUploaderDropPlace()});r?(r.on("onDragEnter",function(){s.dragAndDropOver(!0)}).on("onDragLeave",function(){s.dragAndDropOver(!1)}).on("onBodyDragEnter",function(){s.attachmentsPlace(!0),s.dragAndDropVisible(!0)}).on("onBodyDragLeave",function(){s.dragAndDropVisible(!1)}).on("onProgress",function(e,t,n){var i=c[e];i||(i=s.getAttachmentById(e))&&(c[e]=i),i&&i.progress(L.a.Math.floor(t/n*100))}).on("onSelect",function(e,t){s.dragAndDropOver(!1);var n=Object(V.isUnd)(t.FileName)?"":t.FileName.toString(),i=Object(V.isNormal)(t.Size)?Object(V.pInt)(t.Size):null,o=new ce.a(e,n,i);return o.cancel=s.cancelAttachmentHelper(e,r),s.attachments.push(o),s.attachmentsPlace(!0),!(0<i&&0<a&&a<i)||(o.waiting(!1).uploading(!0).complete(!0).error(Object(W.i18n)("UPLOAD/ERROR_FILE_IS_TOO_BIG")),!1)}).on("onStart",function(e){var t=c[e];t||(t=s.getAttachmentById(e))&&(c[e]=t),t&&t.waiting(!1).uploading(!0).complete(!1)}).on("onComplete",function(e,t,n){var i=s.getAttachmentById(e),o=n&&n.Result&&n.Result.ErrorCode?n.Result.ErrorCode:null,a=t&&n&&n.Result&&n.Result.Attachment?n.Result.Attachment:null,r="";null!==o?r=Object(W.getUploadErrorDescByCode)(o):a||(r=Object(W.i18n)("UPLOAD/ERROR_UNKNOWN")),i&&(""!==r&&0<r.length?i.waiting(!1).uploading(!1).complete(!0).error(r):a&&(i.waiting(!1).uploading(!1).complete(!0),i.initByUploadJson(a)),Object(V.isUnd)(c[e])&&delete c[e])}),this.addAttachmentEnabled(!0).dragAndDropEnabled(r.isDragAndDropSupported())):this.addAttachmentEnabled(!1).dragAndDropEnabled(!1)}},t.prepearAttachmentsForSendOrSave=function(){var t={};return M.a.each(this.attachmentsInReady(),function(e){e&&""!==e.tempName()&&e.enabled()&&(t[e.tempName()]=[e.fileName(),e.isInline?"1":"0",e.CID,e.contentLocation])}),t},t.addMessageAsAttachment=function(e){if(e){var t=e.subject();t=".eml"===t.substr(-4).toLowerCase()?t:t+".eml";var n=new ce.a(e.requestHash,t,e.size());n.fromMessage=!0,n.cancel=this.cancelAttachmentHelper(e.requestHash),n.waiting(!1).uploading(!0).complete(!0),this.attachments.push(n)}},t.addAttachmentHelper=function(e,t,n){var i=new ce.a(e,t,n);return i.fromMessage=!1,i.cancel=this.cancelAttachmentHelper(e),i.waiting(!1).uploading(!0).complete(!1),this.attachments.push(i),this.attachmentsPlace(!0),i},t.addDropboxAttachment=function(e){var t=Object(V.pInt)(re.settingsGet("AttachmentLimit")),n=e.bytes,i=this.addAttachmentHelper(e.link,e.name,n);return 0<n&&0<t&&t<n?(i.uploading(!1).complete(!0),i.error(Object(W.i18n)("UPLOAD/ERROR_FILE_IS_TOO_BIG")),!1):(ae.a.composeUploadExternals(function(e,t){var n=!1;i.uploading(!1).complete(!0),G.StorageResultType.Success===e&&t&&t.Result&&t.Result[i.id]&&(n=!0,i.tempName(t.Result[i.id])),n||i.error(Object(W.getUploadErrorDescByCode)(G.UploadErrorCode.FileNoUploaded))},[e.link]),!0)},t.addDriveAttachment=function(e,t){var n=Object(V.pInt)(re.settingsGet("AttachmentLimit")),i=e.fileSize?Object(V.pInt)(e.fileSize):0,o=this.addAttachmentHelper(e.downloadUrl,e.title,i);return 0<i&&0<n&&n<i?(o.uploading(!1).complete(!0),o.error(Object(W.i18n)("UPLOAD/ERROR_FILE_IS_TOO_BIG")),!1):(ae.a.composeUploadDrive(function(e,t){var n=!1;o.uploading(!1).complete(!0),G.StorageResultType.Success===e&&t&&t.Result&&t.Result[o.id]&&(n=!0,o.tempName(t.Result[o.id][0]),o.size(Object(V.pInt)(t.Result[o.id][1]))),n||o.error(Object(W.getUploadErrorDescByCode)(G.UploadErrorCode.FileNoUploaded))},e.downloadUrl,t),!0)},t.prepearMessageAttachments=function(e,i){var o=this;if(e)if(G.ComposeType.ForwardAsAttachment===i)this.addMessageAsAttachment(e);else{var t=e.attachments();M.a.each(Object(V.isNonEmptyArray)(t)?t:[],function(e){var t=!1;switch(i){case G.ComposeType.Reply:case G.ComposeType.ReplyAll:t=e.isLinked;break;case G.ComposeType.Forward:case G.ComposeType.Draft:case G.ComposeType.EditAsNew:t=!0}if(t){var n=new ce.a(e.download,e.fileName,e.estimatedSize,e.isInline,e.isLinked,e.cid,e.contentLocation);n.fromMessage=!0,n.cancel=o.cancelAttachmentHelper(e.download),n.waiting(!1).uploading(!0).complete(!1),o.attachments.push(n)}})}},t.removeLinkedAttachments=function(){var e=g()(M.a).call(M.a,this.attachments(),function(e){return e&&e.isLinked});e&&(this.attachments.remove(e),Object(V.delegateRunOnDestroy)(e))},t.setMessageAttachmentFailedDownloadText=function(){M.a.each(this.attachments(),function(e){e&&e.fromMessage&&e.waiting(!1).uploading(!1).complete(!0).error(Object(W.getUploadErrorDescByCode)(G.UploadErrorCode.FileNoUploaded))})},t.isEmptyForm=function(e){void 0===e&&(e=!0);var t=e?0===this.attachments().length:0===this.attachmentsInReady().length;return 0===this.to().length&&0===this.cc().length&&0===this.bcc().length&&0===this.replyTo().length&&0===this.subject().length&&t&&(!this.oEditor||""===this.oEditor.getData())},t.reset=function(){this.to(""),this.cc(""),this.bcc(""),this.replyTo(""),this.subject(""),this.requestDsn(!1),this.requestReadReceipt(!1),this.markAsImportant(!1),this.attachmentsPlace(!1),this.aDraftInfo=null,this.sInReplyTo="",this.bFromDraft=!1,this.sReferences="",this.sendError(!1),this.sendSuccessButSaveError(!1),this.savedError(!1),this.savedTime(0),this.emptyToError(!1),this.attachmentsInProcessError(!1),this.showCc(!1),this.showBcc(!1),this.showReplyTo(!1),Object(V.delegateRunOnDestroy)(this.attachments()),this.attachments([]),this.dragAndDropOver(!1),this.dragAndDropVisible(!1),this.draftFolder(""),this.draftUid(""),this.sending(!1),this.saving(!1),this.oEditor&&this.oEditor.clear(!1)},t.getAttachmentsDownloadsForUpload=function(){return S()(M.a).call(M.a,C()(M.a).call(M.a,this.attachments(),function(e){return e&&""===e.tempName()}),function(e){return e.id})},t.resizerTrigger=function(){this.resizer(!this.resizer())},n}(de.a),R()(p.prototype,"sendCommand",[i],h()(p.prototype,"sendCommand"),p.prototype),R()(p.prototype,"saveCommand",[o],h()(p.prototype,"saveCommand"),p.prototype),R()(p.prototype,"deleteCommand",[a],h()(p.prototype,"deleteCommand"),p.prototype),R()(p.prototype,"skipCommand",[r],h()(p.prototype,"skipCommand"),p.prototype),R()(p.prototype,"contactsCommand",[s],h()(p.prototype,"contactsCommand"),p.prototype),R()(p.prototype,"dropboxCommand",[l],h()(p.prototype,"dropboxCommand"),p.prototype),R()(p.prototype,"driveCommand",[u],h()(p.prototype,"driveCommand"),p.prototype),d=p))||d)},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){var o=n(44);e.exports=function(e,t){if(!o(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!o(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!o(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!o(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var i=n(50),o=n(39),a=n(102);e.exports=!i&&!o(function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(74);e.exports=i("native-function-to-string",Function.toString)},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+i).toString(36)}},function(e,t,n){var i=n(39),o=/#|\.prototype\./,a=function(e,t){var n=s[r(e)];return n==l||n!=c&&("function"==typeof t?i(t):!!t)},r=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=a.data={},c=a.NATIVE="N",l=a.POLYFILL="P";e.exports=a},function(e,t,n){var o=n(49),a=n(32)("toStringTag"),r="Arguments"==o(function(){return arguments}());e.exports=function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),a))?n:r?o(t):"Object"==(i=o(t))&&"function"==typeof t.callee?"Arguments":i}},function(e,t,n){var i,o,a,r=n(28),s=n(39),c=n(49),l=n(104),u=n(140),d=n(102),p=r.location,f=r.setImmediate,h=r.clearImmediate,m=r.process,g=r.MessageChannel,b=r.Dispatch,v=0,y={},S="onreadystatechange",O=function(e){if(y.hasOwnProperty(e)){var t=y[e];delete y[e],t()}},w=function(e){return function(){O(e)}},T=function(e){O(e.data)},C=function(e){r.postMessage(e+"",p.protocol+"//"+p.host)};f&&h||(f=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return y[++v]=function(){("function"==typeof e?e:Function(e)).apply(void 0,t)},i(v),v},h=function(e){delete y[e]},"process"==c(m)?i=function(e){m.nextTick(w(e))}:b&&b.now?i=function(e){b.now(w(e))}:g?(a=(o=new g).port2,o.port1.onmessage=T,i=l(a.postMessage,a,1)):!r.addEventListener||"function"!=typeof postMessage||r.importScripts||s(C)?i=S in d("script")?function(e){u.appendChild(d("script"))[S]=function(){u.removeChild(this),O(e)}}:function(e){setTimeout(w(e),0)}:(i=C,r.addEventListener("message",T,!1))),e.exports={set:f,clear:h}},function(e,t,n){"use strict";var d=n(45),p=n(54),f=n(39),h=n(32),m=n(112),g=h("species"),b=!f(function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")}),v=!f(function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]});e.exports=function(n,e,t,i){var o=h(n),a=!f(function(){var e={};return e[o]=function(){return 7},7!=""[n](e)}),r=a&&!f(function(){var e=!1,t=/a/;return t.exec=function(){return e=!0,null},"split"===n&&(t.constructor={},t.constructor[g]=function(){return t}),t[o](""),!e});if(!a||!r||"replace"===n&&!b||"split"===n&&!v){var s=/./[o],c=t(o,""[n],function(e,t,n,i,o){return t.exec===m?a&&!o?{done:!0,value:s.call(t,n,i)}:{done:!0,value:e.call(n,t,i)}:{done:!1}}),l=c[0],u=c[1];p(String.prototype,n,l),p(RegExp.prototype,o,2==e?function(e,t){return u.call(e,this,t)}:function(e){return u.call(e,this)}),i&&d(RegExp.prototype[o],"sham",!0)}}},function(e,t,n){var o=n(49),a=n(112);e.exports=function(e,t){var n=e.exec;if("function"==typeof n){var i=n.call(e,t);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==o(e))throw TypeError("RegExp#exec called on incompatible receiver");return a.call(e,t)}},function(e,t,n){var i=n(84),o=n(235),a=n(152),r=n(197),s=Object.defineProperty;t.f=i?s:function(e,t,n){if(a(e),t=r(t,!0),a(n),o)try{return s(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e}},function(e,t,n){"use strict";var i=n(43),o=n(231);i({target:"String",proto:!0,forced:n(232)("sub")},{sub:function(){return o(this,"sub","","")}})},function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n(69),o=n.n(i),a=n(26),r=n.n(a),s=n(17),c=n.n(s),l=n(3),u=n.n(l),d=n(158),p=n.n(d),f=n(2),h=function(){function e(e,t){void 0===t&&(t=[]),c()(this,"oCross",null),c()(this,"sScreenName",void 0),c()(this,"aViewModels",void 0),this.sScreenName=e,this.aViewModels=Object(f.isArray)(t)?t:[]}var t=e.prototype;return t.viewModels=function(){return this.aViewModels},t.screenName=function(){return this.sScreenName},t.routes=function(){return null},t.__cross=function(){return this.oCross},t.__start=function(){var t=null,n=null,e=this.routes();Object(f.isNonEmptyArray)(e)&&(n=r()(u.a).call(u.a,this.onRoute||f.noop,this),t=p.a.create(),o()(e).call(e,function(e){e&&t&&(t.addRoute(e[0],n).rules=e[1])}),this.oCross=t)},e}()},function(e,t,n){e.exports=n(324)},function(e,t){e.exports=window.ssm},function(e,t,n){var r=n(47),s=n(71),c=n(162).indexOf,l=n(103);e.exports=function(e,t){var n,i=s(e),o=0,a=[];for(n in i)!r(l,n)&&r(i,n)&&a.push(n);for(;t.length>o;)r(i,n=t[o++])&&(~c(a,n)||a.push(n));return a}},function(e,t,n){var i=n(65);e.exports=i("document","documentElement")},function(e,t,n){var p=n(36),f=n(187),h=n(72),m=n(104),g=n(188),b=n(189),v=function(e,t){this.stopped=e,this.result=t};(e.exports=function(e,t,n,i,o){var a,r,s,c,l,u,d=m(t,n,i?2:1);if(o)a=e;else{if("function"!=typeof(r=g(e)))throw TypeError("Target is not iterable");if(f(r)){for(s=0,c=h(e.length);s<c;s++)if((l=i?d(p(u=e[s])[0],u[1]):d(e[s]))&&l instanceof v)return l;return new v(!1)}a=r.call(e)}for(;!(u=a.next()).done;)if((l=b(a,d,u.value,i))&&l instanceof v)return l;return new v(!1)}).stop=function(e){return new v(!0,e)}},function(e,t,n){var o=n(36),a=n(66),r=n(32)("species");e.exports=function(e,t){var n,i=o(e).constructor;return void 0===i||null==(n=o(i)[r])?t:a(n)}},function(e,t){e.exports=function(e){try{return{error:!1,value:e()}}catch(e){return{error:!0,value:e}}}},function(e,t,n){var i=n(43),o=n(229);i({global:!0,forced:parseInt!=o},{parseInt:o})},function(e,t,n){"use strict";var i=n(57);e.exports=function(e,t){var n=[][e];return!n||!i(function(){n.call(null,t||function(){throw 1},1)})}},function(e,t,n){"use strict";n.d(t,"d",function(){return r}),n.d(t,"c",function(){return h}),n.d(t,"e",function(){return m}),n.d(t,"b",function(){return g}),n.d(t,"a",function(){return b});n(75),n(52),n(55),n(144),n(94),n(67);var i=n(4),o=n.n(i),a="__rlA";function r(e){var t=!1;try{t=e in o.a&&o.a[e]&&o.a[e].setItem}catch(e){}if(t){var n=o.a[e],i="testLocalStorage_"+o.a.Math.random();try{if(n.setItem(i,i),i===n.getItem(i))return n.removeItem(i),!0}catch(e){}}return!1}var s=r("sessionStorage")&&o.a.sessionStorage||null,c=o.a.top||o.a||null,l=function(e){var t=null;if(s)t=s.getItem(e)||null;else if(c&&o.a.JSON){var n=c.name&&"{"===c.name.toString().substr(0,1)?o.a.JSON.parse(c.name.toString()):null;t=n&&n[e]||null}return t},u=function(e,t){if(s)s.setItem(e,t);else if(c&&o.a.JSON){var n=c.name&&"{"===c.name.toString().substr(0,1)?o.a.JSON.parse(c.name.toString()):null;(n=n||{})[e]=t,c.name=o.a.JSON.stringify(n)}},d=function(){return o.a.Math.round((new o.a.Date).getTime()/1e3)},p=function(){return u("__rlT",d())},f=function(){var e=l("__rlT",0);return e&&o.a.parseInt(e,10)||0};function h(){return l(a)}function m(){var e="AuthAccountHash",t=o.a.__rlah_data();u(a,t&&t[e]?t[e]:""),p()}function g(){u(a,""),p()}function b(){return d()>f()+36e5&&(g(),!0)}o.a.setInterval(p,6e4)},,function(e,t,n){var i=n(36),o=n(221),a=n(110),r=n(103),s=n(140),c=n(102),l=n(108)("IE_PROTO"),u="prototype",d=function(){},p=function(){var e,t=c("iframe"),n=a.length;for(t.style.display="none",s.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),p=e.F;n--;)delete p[u][a[n]];return p()};e.exports=Object.create||function(e,t){var n;return null!==e?(d[u]=i(e),n=new d,d[u]=null,n[l]=e):n=p(),void 0===t?n:o(n,t)},r[l]=!0},function(e,t,n){var i=n(47),o=n(120),a=n(108),r=n(224),s=a("IE_PROTO"),c=Object.prototype;e.exports=r?Object.getPrototypeOf:function(e){return e=o(e),i(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},function(e,t,n){"use strict";var i=n(182).charAt;e.exports=function(e,t,n){return t+(n?i(e,t).length:1)}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){var i=n(78);e.exports=function(e){if(!i(e))throw TypeError(String(e)+" is not an object");return e}},function(e,t){e.exports={}},function(e,t,n){var i=n(195);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(57),o=n(68)("species");e.exports=function(t){return!i(function(){var e=[];return(e.constructor={})[o]=function(){return{foo:1}},1!==e[t](Boolean).foo})}},function(e,t,n){var S=n(237),O=n(194),w=n(122),T=n(113),C=n(249),A=[].push,i=function(f){var h=1==f,m=2==f,g=3==f,b=4==f,v=6==f,y=5==f||v;return function(e,t,n,i){for(var o,a,r=w(e),s=O(r),c=S(t,n,3),l=T(s.length),u=0,d=i||C,p=h?d(e,l):m?d(e,0):void 0;u<l;u++)if((y||u in s)&&(a=c(o=s[u],u,r),f))if(h)p[u]=a;else if(a)switch(f){case 3:return!0;case 5:return o;case 6:return u;case 2:A.call(p,o)}else if(b)return!1;return v?-1:g||b?b:p}};e.exports={forEach:i(0),map:i(1),filter:i(2),some:i(3),every:i(4),find:i(5),findIndex:i(6)}},function(e,t,n){e.exports=n(302)},function(e,t){e.exports=window.crossroads},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=n(10),o=n.n(i),a=n(1),r=n(2),s=function(n){function e(e){var t;return void 0===e&&(e={}),(t=n.call(this)||this).value=e.value,!Object(r.isUnd)(t.value)&&t.value.subscribe||(t.value=a.a.observable(!Object(r.isUnd)(t.value)&&!!t.value)),t.enable=e.enable,!Object(r.isUnd)(t.enable)&&t.enable.subscribe||(t.enable=a.a.observable(!!Object(r.isUnd)(t.enable)||!!t.enable)),t.disable=e.disable,!Object(r.isUnd)(t.disable)&&t.disable.subscribe||(t.disable=a.a.observable(!Object(r.isUnd)(t.disable)&&!!t.disable)),t.label=e.label||"",t.inline=!Object(r.isUnd)(e.inline)&&e.inline,t.readOnly=!Object(r.isUnd)(e.readOnly)&&!!e.readOnly,t.inverted=!Object(r.isUnd)(e.inverted)&&!!e.inverted,t.labeled=!Object(r.isUnd)(e.label),t.labelAnimated=!!e.labelAnimated,t}return o()(e,n),e.prototype.click=function(){this.readOnly||!this.enable()||this.disable()||this.value(!this.value())},e}(n(35).a)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}();function p(e){var t=new a(e).tokenize(),n=[],i=[],o=[];return t.forEach(function(e){"operator"!==e.type||","!==e.value&&";"!==e.value?i.push(e):(i.length&&n.push(i),i=[])}),i.length&&n.push(i),n.forEach(function(e){(e=function(e){for(var t=!1,n="text",i=void 0,o=[],a={address:[],comment:[],group:[],text:[]},r=0,s=e.length;r<s;r++){var c=e[r];if("operator"===c.type)switch(c.value){case"<":n="address";break;case"(":n="comment";break;case":":n="group",t=!0;break;default:n="text"}else c.value&&a[n].push(c.value)}!a.text.length&&a.comment.length&&(a.text=a.comment,a.comment=[]);if(t)a.text=a.text.join(" "),o.push({name:a.text||i&&i.name,group:a.group.length?p(a.group.join(",")):[]});else{if(!a.address.length&&a.text.length){for(var l=a.text.length-1;0<=l;l--)if(a.text[l].match(/^[^@\s]+@[^@\s]+$/)){a.address=a.text.splice(l,1);break}var u=function(e){return a.address.length?e:(a.address=[e.trim()]," ")};if(!a.address.length)for(var d=a.text.length-1;0<=d&&(a.text[d]=a.text[d].replace(/\s*\b[^@\s]+@[^@\s]+\b\s*/,u).trim(),!a.address.length);d--);}if(!a.text.length&&a.comment.length&&(a.text=a.comment,a.comment=[]),1<a.address.length&&(a.text=a.text.concat(a.address.splice(1))),a.text=a.text.join(" "),a.address=a.address.join(" "),!a.address&&t)return[];(i={address:a.address||a.text||"",name:a.text||a.address||""}).address===i.name&&((i.address||"").match(/@/)?i.name="":i.address=""),o.push(i)}return o}(e)).length&&(o=o.concat(e))}),o}t.default=p;var o={'"':'"',"(":")","<":">",",":"",":":";",";":""},a=function(){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this.str=(e||"").toString(),this.operatorCurrent="",this.operatorExpecting="",this.node=null,this.escaped=!1,this.list=[]}return i(t,[{key:"tokenize",value:function(){for(var e=void 0,t=[],n=0,i=this.str.length;n<i;n++)e=this.str.charAt(n),this.checkChar(e);return this.list.forEach(function(e){e.value=(e.value||"").toString().trim(),e.value&&t.push(e)}),t}},{key:"checkChar",value:function(e){if((e in o||"\\"===e)&&this.escaped)this.escaped=!1;else{if(this.operatorExpecting&&e===this.operatorExpecting)return this.node={type:"operator",value:e},this.list.push(this.node),this.node=null,this.operatorExpecting="",void(this.escaped=!1);if(!this.operatorExpecting&&e in o)return this.node={type:"operator",value:e},this.list.push(this.node),this.node=null,this.operatorExpecting=o[e],void(this.escaped=!1)}this.escaped||"\\"!==e?(this.node||(this.node={type:"text",value:""},this.list.push(this.node)),this.escaped&&"\\"!==e&&(this.node.value+="\\"),this.node.value+=e,this.escaped=!1):this.escaped=!0}}]),t}()},function(e,t,n){"use strict";var i={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,a=o&&!i.call({1:2},1);t.f=a?function(e){var t=o(this,e);return!!t&&t.enumerable}:i},function(e,t,n){var c=n(71),l=n(72),u=n(179),i=function(s){return function(e,t,n){var i,o=c(e),a=l(o.length),r=u(n,a);if(s&&t!=t){for(;r<a;)if((i=o[r++])!=i)return!0}else for(;r<a;r++)if((s||r in o)&&o[r]===t)return s||r||0;return!s&&-1}};e.exports={includes:i(!0),indexOf:i(!1)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){"use strict";var i,o,a,r=n(149),s=n(45),c=n(47),l=n(32),u=n(83),d=l("iterator"),p=!1;[].keys&&("next"in(a=[].keys())?(o=r(r(a)))!==Object.prototype&&(i=o):p=!0),null==i&&(i={}),u||c(i,d)||s(i,d,function(){return this}),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:p}},function(e,t,n){var i=n(36),o=n(44),a=n(106);e.exports=function(e,t){if(i(e),o(t)&&t.constructor===e)return t;var n=a.f(e);return(0,n.resolve)(t),n.promise}},function(e,t,n){"use strict";var i=n(36);e.exports=function(){var e=i(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(e,t,n){"use strict";var i=n(132),d=n(222),y=n(36),p=n(51),S=n(142),O=n(150),w=n(72),T=n(133),f=n(112),o=n(39),h=[].push,C=Math.min,A=4294967295,E=!o(function(){return!RegExp(A,"y")});i("split",2,function(o,g,b){var v;return v="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||1<".".split(/()()/).length||"".split(/.?/).length?function(e,t){var n=String(p(this)),i=void 0===t?A:t>>>0;if(0===i)return[];if(void 0===e)return[n];if(!d(e))return g.call(n,e,i);for(var o,a,r,s=[],c=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),l=0,u=new RegExp(e.source,c+"g");(o=f.call(u,n))&&!(l<(a=u.lastIndex)&&(s.push(n.slice(l,o.index)),1<o.length&&o.index<n.length&&h.apply(s,o.slice(1)),r=o[0].length,l=a,s.length>=i));)u.lastIndex===o.index&&u.lastIndex++;return l===n.length?!r&&u.test("")||s.push(""):s.push(n.slice(l)),s.length>i?s.slice(0,i):s}:"0".split(void 0,0).length?function(e,t){return void 0===e&&0===t?[]:g.call(this,e,t)}:g,[function(e,t){var n=p(this),i=null==e?void 0:e[o];return void 0!==i?i.call(e,n,t):v.call(String(n),e,t)},function(e,t){var n=b(v,e,this,t,v!==g);if(n.done)return n.value;var i=y(e),o=String(this),a=S(i,RegExp),r=i.unicode,s=(i.ignoreCase?"i":"")+(i.multiline?"m":"")+(i.unicode?"u":"")+(E?"y":"g"),c=new a(E?i:"^(?:"+i.source+")",s),l=void 0===t?A:t>>>0;if(0===l)return[];if(0===o.length)return null===T(c,o)?[o]:[];for(var u=0,d=0,p=[];d<o.length;){c.lastIndex=E?d:0;var f,h=T(c,E?o:o.slice(d));if(null===h||(f=C(w(c.lastIndex+(E?0:d)),o.length))===u)d=O(o,d,r);else{if(p.push(o.slice(u,d)),p.length===l)return p;for(var m=1;m<=h.length-1;m++)if(p.push(h[m]),p.length===l)return p;d=u=f}}return p.push(o.slice(u)),p}]},!E)},function(e,t,n){"use strict";var i=n(43),o=n(231);i({target:"String",proto:!0,forced:n(232)("link")},{link:function(e){return o(this,"a","href",e)}})},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(String(e)+" is not a function");return e}},function(e,t,n){var o=n(195),a=n(68)("toStringTag"),r="Arguments"==o(function(){return arguments}());e.exports=function(e){var t,n,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),a))?n:r?o(t):"Object"==(i=o(t))&&"function"==typeof t.callee?"Arguments":i}},function(e,t){e.exports=window.Jua},function(e,t,n){"use strict";n(52);var i=n(18),o=n.n(i),a=n(1),r=n(3),s=n.n(r),c=function(){function e(){this.templates=a.a.observableArray([]),this.templates.loading=a.a.observable(!1).extend({throttle:100}),this.templatesNames=a.a.observableArray([]).extend({throttle:1e3}),this.templatesNames.skipFirst=!0,this.subscribers()}return e.prototype.subscribers=function(){var t=this;this.templates.subscribe(function(e){t.templatesNames(s.a.compact(o()(s.a).call(s.a,e,function(e){return e?e.name:null})))})},e}();t.a=new c},function(e,t,n){"use strict";n.d(t,"c",function(){return v}),n.d(t,"d",function(){return y}),n.d(t,"b",function(){return S}),n.d(t,"a",function(){return O});n(48),n(56),n(168);var i=n(10),o=n.n(i),a=n(18),r=n.n(a),s=n(4),c=n.n(s),l=n(3),u=n.n(l),d=n(1),p=n(0),f=n(6),h=n(2),m=n(15),g=n(63),b=n(82),v=u.a.memoize(function(e,t){e=Object(h.trim)(e).toLowerCase(),t=Object(h.trim)(t).toLowerCase();var n=p.FileType.Unknown,i=t.split("/");switch(!0){case"image"===i[0]||-1<Object(h.inArray)(e,["png","jpg","jpeg","gif","bmp"]):n=p.FileType.Image;break;case"audio"===i[0]||-1<Object(h.inArray)(e,["mp3","ogg","oga","wav"]):n=p.FileType.Audio;break;case"video"===i[0]||-1<Object(h.inArray)(e,["mkv","avi"]):n=p.FileType.Video;break;case-1<Object(h.inArray)(e,["php","js","css"]):n=p.FileType.Code;break;case"eml"===e||-1<Object(h.inArray)(t,["message/delivery-status","message/rfc822"]):n=p.FileType.Eml;break;case"text"===i[0]&&"html"!==i[1]||-1<Object(h.inArray)(e,["txt","log"]):n=p.FileType.Text;break;case"text/html"===t||-1<Object(h.inArray)(e,["html"]):n=p.FileType.Html;break;case-1<Object(h.inArray)(i[1],["zip","7z","tar","rar","gzip","bzip","bzip2","x-zip","x-7z","x-rar","x-tar","x-gzip","x-bzip","x-bzip2","x-zip-compressed","x-7z-compressed","x-rar-compressed"])||-1<Object(h.inArray)(e,["zip","7z","tar","rar","gzip","bzip","bzip2"]):n=p.FileType.Archive;break;case-1<Object(h.inArray)(i[1],["pdf","x-pdf"])||-1<Object(h.inArray)(e,["pdf"]):n=p.FileType.Pdf;break;case-1<Object(h.inArray)(t,["application/pgp-signature","application/pgp-keys"])||-1<Object(h.inArray)(e,["asc","pem","ppk"]):n=p.FileType.Certificate;break;case-1<Object(h.inArray)(t,["application/pkcs7-signature"])||-1<Object(h.inArray)(e,["p7s"]):n=p.FileType.CertificateBin;break;case-1<Object(h.inArray)(i[1],["rtf","msword","vnd.msword","vnd.openxmlformats-officedocument.wordprocessingml.document","vnd.openxmlformats-officedocument.wordprocessingml.template","vnd.ms-word.document.macroEnabled.12","vnd.ms-word.template.macroEnabled.12"]):n=p.FileType.WordText;break;case-1<Object(h.inArray)(i[1],["excel","ms-excel","vnd.ms-excel","vnd.openxmlformats-officedocument.spreadsheetml.sheet","vnd.openxmlformats-officedocument.spreadsheetml.template","vnd.ms-excel.sheet.macroEnabled.12","vnd.ms-excel.template.macroEnabled.12","vnd.ms-excel.addin.macroEnabled.12","vnd.ms-excel.sheet.binary.macroEnabled.12"]):n=p.FileType.Sheet;break;case-1<Object(h.inArray)(i[1],["powerpoint","ms-powerpoint","vnd.ms-powerpoint","vnd.openxmlformats-officedocument.presentationml.presentation","vnd.openxmlformats-officedocument.presentationml.template","vnd.openxmlformats-officedocument.presentationml.slideshow","vnd.ms-powerpoint.addin.macroEnabled.12","vnd.ms-powerpoint.presentation.macroEnabled.12","vnd.ms-powerpoint.template.macroEnabled.12","vnd.ms-powerpoint.slideshow.macroEnabled.12"]):n=p.FileType.Presentation}return n}),y=u.a.memoize(function(e){var t="",n="icon-file";switch(e){case p.FileType.Text:case p.FileType.Eml:case p.FileType.WordText:n="icon-file-text";break;case p.FileType.Html:case p.FileType.Code:n="icon-file-code";break;case p.FileType.Image:n="icon-file-image";break;case p.FileType.Audio:n="icon-file-music";break;case p.FileType.Video:n="icon-file-movie";break;case p.FileType.Archive:n="icon-file-zip";break;case p.FileType.Certificate:case p.FileType.CertificateBin:n="icon-file-certificate";break;case p.FileType.Sheet:n="icon-file-excel";break;case p.FileType.Presentation:n="icon-file-chart-graph";break;case p.FileType.Pdf:t="pdf",n="icon-none"}return[n,t]}),S=function(e){var t="",n=[];if(Object(h.isNonEmptyArray)(e)&&(t="icon-attachment",(n=u.a.uniq(u.a.compact(r()(u.a).call(u.a,e,function(e){return e?v(Object(h.getFileExtension)(e[0]),e[1]):""}))))&&1===n.length&&n[0]))switch(n[0]){case p.FileType.Text:case p.FileType.WordText:t="icon-file-text";break;case p.FileType.Html:case p.FileType.Code:t="icon-file-code";break;case p.FileType.Image:t="icon-file-image";break;case p.FileType.Audio:t="icon-file-music";break;case p.FileType.Video:t="icon-file-movie";break;case p.FileType.Archive:t="icon-file-zip";break;case p.FileType.Certificate:case p.FileType.CertificateBin:t="icon-file-certificate";break;case p.FileType.Sheet:t="icon-file-excel";break;case p.FileType.Presentation:t="icon-file-chart-graph"}return t},O=function(t){function n(){var e;return(e=t.call(this,"AttachmentModel")||this).checked=d.a.observable(!1),e.mimeType="",e.fileName="",e.fileNameExt="",e.fileType=p.FileType.Unknown,e.estimatedSize=0,e.friendlySize="",e.isInline=!1,e.isLinked=!1,e.isThumbnail=!1,e.cid="",e.cidWithOutTags="",e.contentLocation="",e.download="",e.folder="",e.uid="",e.mimeIndex="",e.framed=!1,e}o()(n,t),n.newInstanceFromJson=function(e){var t=new n;return t.initByJson(e)?t:null};var e=n.prototype;return e.initByJson=function(e){var t=!1;return e&&"Object/Attachment"===e["@Object"]&&(this.mimeType=Object(h.trim)((e.MimeType||"").toLowerCase()),this.fileName=Object(h.trim)(e.FileName),this.estimatedSize=Object(h.pInt)(e.EstimatedSize),this.isInline=!!e.IsInline,this.isLinked=!!e.IsLinked,this.isThumbnail=!!e.IsThumbnail,this.cid=e.CID,this.contentLocation=e.ContentLocation,this.download=e.Download,this.folder=e.Folder,this.uid=e.Uid,this.mimeIndex=e.MimeIndex,this.framed=!!e.Framed,this.friendlySize=Object(h.friendlySize)(this.estimatedSize),this.cidWithOutTags=this.cid.replace(/^<+/,"").replace(/>+$/,""),this.fileNameExt=Object(h.getFileExtension)(this.fileName),this.fileType=v(this.fileNameExt,this.mimeType),t=!0),t},e.isImage=function(){return p.FileType.Image===this.fileType},e.isMp3=function(){return p.FileType.Audio===this.fileType&&"mp3"===this.fileNameExt},e.isOgg=function(){return p.FileType.Audio===this.fileType&&("oga"===this.fileNameExt||"ogg"===this.fileNameExt)},e.isWav=function(){return p.FileType.Audio===this.fileType&&"wav"===this.fileNameExt},e.hasThumbnail=function(){return this.isThumbnail},e.isText=function(){return p.FileType.Text===this.fileType||p.FileType.Eml===this.fileType||p.FileType.Certificate===this.fileType||p.FileType.Html===this.fileType||p.FileType.Code===this.fileType},e.isPdf=function(){return p.FileType.Pdf===this.fileType},e.isFramed=function(){return this.framed&&f.data.__APP__&&f.data.__APP__.googlePreviewSupported()&&!(this.isPdf()&&f.bAllowPdfPreview)&&!this.isText()&&!this.isImage()},e.hasPreview=function(){return this.isImage()||this.isPdf()&&f.bAllowPdfPreview||this.isText()||this.isFramed()},e.hasPreplay=function(){return b.a.supportedMp3&&this.isMp3()||b.a.supportedOgg&&this.isOgg()||b.a.supportedWav&&this.isWav()},e.linkDownload=function(){return Object(m.c)(this.download)},e.linkPreview=function(){return Object(m.e)(this.download)},e.linkThumbnail=function(){return this.hasThumbnail()?Object(m.g)(this.download):""},e.linkThumbnailPreviewStyle=function(){var e=this.linkThumbnail();return""===e?"":"background:url("+e+")"},e.linkFramed=function(){return Object(m.d)(this.download)},e.linkPreviewAsPlain=function(){return Object(m.f)(this.download)},e.linkPreviewMain=function(){var e="";switch(!0){case this.isImage():case this.isPdf()&&f.bAllowPdfPreview:e=this.linkPreview();break;case this.isText():e=this.linkPreviewAsPlain();break;case this.isFramed():e=this.linkFramed()}return e},e.generateTransferDownloadUrl=function(){var e=this.linkDownload();return"http"!==e.substr(0,4)&&(e=c.a.location.protocol+"//"+c.a.location.host+c.a.location.pathname+e),this.mimeType+":"+this.fileName+":"+e},e.eventDragStart=function(e,t){var n=t.originalEvent||t;return e&&n&&n.dataTransfer&&n.dataTransfer.setData&&n.dataTransfer.setData("DownloadURL",this.generateTransferDownloadUrl()),!0},e.iconClass=function(){return y(this.fileType)[0]},e.iconText=function(){return y(this.fileType)[1]},n}(g.a)},function(e,t,n){var i=n(28),o=n(127),a=i.WeakMap;e.exports="function"==typeof a&&/native code/.test(o.call(a))},function(e,t,n){var s=n(47),c=n(177),l=n(90),u=n(59);e.exports=function(e,t){for(var n=c(t),i=u.f,o=l.f,a=0;a<n.length;a++){var r=n[a];s(e,r)||i(e,r,o(t,r))}}},function(e,t,n){var i=n(65),o=n(178),a=n(163),r=n(36);e.exports=i("Reflect","ownKeys")||function(e){var t=o.f(r(e)),n=a.f;return n?t.concat(n(e)):t}},function(e,t,n){var i=n(139),o=n(110).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,o)}},function(e,t,n){var i=n(80),o=Math.max,a=Math.min;e.exports=function(e,t){var n=i(e);return n<0?o(n+t,0):a(n,t)}},function(e,t,n){var i=n(39);e.exports=!!Object.getOwnPropertySymbols&&!i(function(){return!String(Symbol())})},function(e,t,n){"use strict";var i=n(130),o={};o[n(32)("toStringTag")]="z",e.exports="[object z]"!==String(o)?function(){return"[object "+i(this)+"]"}:o.toString},function(e,t,n){var c=n(80),l=n(51),i=function(s){return function(e,t){var n,i,o=String(l(e)),a=c(t),r=o.length;return a<0||r<=a?s?"":void 0:(n=o.charCodeAt(a))<55296||56319<n||a+1===r||(i=o.charCodeAt(a+1))<56320||57343<i?s?o.charAt(a):n:s?o.slice(a,a+2):i-56320+(n-55296<<10)+65536}};e.exports={codeAt:i(!1),charAt:i(!0)}},function(e,t,n){"use strict";var i=n(71),o=n(213),a=n(73),r=n(93),s=n(214),c="Array Iterator",l=r.set,u=r.getterFor(c);e.exports=s(Array,"Array",function(e,t){l(this,{type:c,target:i(e),index:0,kind:t})},function(){var e=u(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?{value:e.target=void 0,done:!0}:"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}},"values"),a.Arguments=a.Array,o("keys"),o("values"),o("entries")},function(e,t,n){var o=n(54);e.exports=function(e,t,n){for(var i in t)o(e,i,t[i],n);return e}},function(e,t,n){"use strict";var i=n(65),o=n(59),a=n(32),r=n(50),s=a("species");e.exports=function(e){var t=i(e),n=o.f;r&&t&&!t[s]&&n(t,s,{configurable:!0,get:function(){return this}})}},function(e,t){e.exports=function(e,t,n){if(!(e instanceof t))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return e}},function(e,t,n){var i=n(32),o=n(73),a=i("iterator"),r=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||r[a]===e)}},function(e,t,n){var i=n(130),o=n(73),a=n(32)("iterator");e.exports=function(e){if(null!=e)return e[a]||e["@@iterator"]||o[i(e)]}},function(e,t,n){var a=n(36);e.exports=function(t,e,n,i){try{return i?e(a(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&a(o.call(t)),e}}},function(e,t,n){var o=n(32)("iterator"),a=!1;try{var i=0,r={next:function(){return{done:!!i++}},return:function(){a=!0}};r[o]=function(){return this},Array.from(r,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!a)return!1;var n=!1;try{var i={};i[o]=function(){return{next:function(){return{done:n=!0}}}},e(i)}catch(e){}return n}},function(e,t,n){var i,o,a,r,s,c,l,u=n(28),d=n(90).f,p=n(49),f=n(131).set,h=n(105),m=u.MutationObserver||u.WebKitMutationObserver,g=u.process,b=u.Promise,v="process"==p(g),y=d(u,"queueMicrotask"),S=y&&y.value;S||(i=function(){var e,t;for(v&&(e=g.domain)&&e.exit();o;){t=o.fn,o=o.next;try{t()}catch(e){throw o?r():a=void 0,e}}a=void 0,e&&e.enter()},r=v?function(){g.nextTick(i)}:m&&!/(iphone|ipod|ipad).*applewebkit/i.test(h)?(s=!0,c=document.createTextNode(""),new m(i).observe(c,{characterData:!0}),function(){c.data=s=!s}):b&&b.resolve?(l=b.resolve(void 0),function(){l.then(i)}):function(){f.call(u,i)}),e.exports=S||function(e){var t={fn:e,next:void 0};a&&(a.next=t),o||(o=t,r()),a=t}},function(e,t,n){var i=n(28);e.exports=function(e,t){var n=i.console;n&&n.error&&(1===arguments.length?n.error(e):n.error(e,t))}},function(e,t,n){"use strict";var i=n(132),d=n(36),p=n(72),o=n(51),f=n(150),h=n(133);i("match",1,function(i,l,u){return[function(e){var t=o(this),n=null==e?void 0:e[i];return void 0!==n?n.call(e,t):new RegExp(e)[i](String(t))},function(e){var t=u(l,e,this);if(t.done)return t.value;var n=d(e),i=String(this);if(!n.global)return h(n,i);for(var o,a=n.unicode,r=[],s=n.lastIndex=0;null!==(o=h(n,i));){var c=String(o[0]);""===(r[s]=c)&&(n.lastIndex=f(i,p(n.lastIndex),a)),s++}return 0===s?null:r}]})},function(e,t,n){var i=n(57),o=n(195),a="".split;e.exports=i(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return"String"==o(e)?a.call(e,""):Object(e)}:Object},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t){e.exports=function(e){if(null==e)throw TypeError("Can't call method on "+e);return e}},function(e,t,n){var o=n(78);e.exports=function(e,t){if(!o(e))return e;var n,i;if(t&&"function"==typeof(n=e.toString)&&!o(i=n.call(e)))return i;if("function"==typeof(n=e.valueOf)&&!o(i=n.call(e)))return i;if(!t&&"function"==typeof(n=e.toString)&&!o(i=n.call(e)))return i;throw TypeError("Can't convert object to primitive value")}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(0<e?i:n)(e)}},function(e,t,n){var i=n(77),o=n(286),a=n(200),r="__core-js_shared__",s=i[r]||o(r,{});(e.exports=function(e,t){return s[e]||(s[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.1.3",mode:a?"pure":"global",copyright:"© 2019 Denis Pushkarev (zloirock.ru)"})},function(e,t){e.exports=!0},function(e,t,n){var i=n(199),o=n(239),a=i("keys");e.exports=function(e){return a[e]||(a[e]=o(e))}},function(e,t){e.exports={}},function(e,t,n){"use strict";n.r(t);var i=n(10),o=n.n(i),a=n(35),r=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t}(n(159).a);t.default=Object(a.b)(r,"CheckboxComponent")},function(e,t,n){"use strict";n.r(t),n.d(t,"HtmlEditor",function(){return g}),n.d(t,"default",function(){return g});n(48),n(193),n(56),n(67);var i=n(26),o=n.n(i),a=n(17),r=n.n(a),s=n(4),c=n.n(s),l=n(3),u=n.n(l),d=n(8),p=n.n(d),f=n(6),h=n(0),m=n(5),g=function(){function e(e,t,n,i){void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=null),r()(this,"editor",void 0),r()(this,"blurTimer",0),r()(this,"__resizable",!1),r()(this,"__inited",!1),r()(this,"onBlur",null),r()(this,"onReady",null),r()(this,"onModeChange",null),r()(this,"element",void 0),r()(this,"$element",void 0),r()(this,"resize",void 0),this.onBlur=t,this.onReady=n,this.onModeChange=i,this.element=e,this.$element=p()(e),this.resize=u.a.throttle(o()(u.a).call(u.a,this.resizeEditor,this),100),this.init()}var t=e.prototype;return t.runOnBlur=function(){this.onBlur&&this.onBlur()},t.blurTrigger=function(){var e=this;this.onBlur&&(c.a.clearTimeout(this.blurTimer),this.blurTimer=c.a.setTimeout(function(){e.runOnBlur()},h.Magics.Time200ms))},t.focusTrigger=function(){this.onBlur&&c.a.clearTimeout(this.blurTimer)},t.isHtml=function(){return!!this.editor&&"wysiwyg"===this.editor.mode},t.clearCachedSignature=function(){this.editor&&this.editor.execCommand("insertSignature",{clearCache:!0})},t.setSignature=function(e,t,n){void 0===n&&(n=!1),this.editor&&this.editor.execCommand("insertSignature",{isHtml:t,insertBefore:n,signature:e})},t.checkDirty=function(){return!!this.editor&&this.editor.checkDirty()},t.resetDirty=function(){this.editor&&this.editor.resetDirty()},t.getData=function(e){void 0===e&&(e=!1);var t="";if(this.editor)try{t="plain"===this.editor.mode&&this.editor.plugins.plain&&this.editor.__plain?this.editor.__plain.getRawData():e?'<div data-html-editor-font-wrapper="true" style="font-family: arial, sans-serif; font-size: 13px;">'+this.editor.getData()+"</div>":this.editor.getData()}catch(e){}return t},t.getDataWithHtmlMark=function(e){return void 0===e&&(e=!1),(this.isHtml()?":HTML:":"")+this.getData(e)},t.modeToggle=function(e,t){if(this.editor){try{e?"plain"===this.editor.mode&&this.editor.setMode("wysiwyg"):"wysiwyg"===this.editor.mode&&this.editor.setMode("plain")}catch(e){}t&&this.resize()}},t.setHtmlOrPlain=function(e,t){":HTML:"===e.substr(0,6)?this.setHtml(e.substr(6),t):this.setPlain(e,t)},t.setHtml=function(e,t){if(this.editor&&this.__inited){this.clearCachedSignature(),this.modeToggle(!0),e=e.replace(/<p[^>]*><\/p>/gi,"");try{this.editor.setData(e)}catch(e){}t&&this.focus()}},t.replaceHtml=function(e,t){if(this.editor&&this.__inited&&"wysiwyg"===this.editor.mode)try{this.editor.setData(this.editor.getData().replace(e,t))}catch(e){}},t.setPlain=function(e,t){if(this.editor&&this.__inited){if(this.clearCachedSignature(),this.modeToggle(!1),"plain"===this.editor.mode&&this.editor.plugins.plain&&this.editor.__plain)this.editor.__plain.setRawData(e);else try{this.editor.setData(e)}catch(e){}t&&this.focus()}},t.init=function(){var o=this;if(this.element&&!this.editor){var e=function(){var e=f.htmlEditorDefaultConfig,t=m.settingsGet("Language"),n=!!m.appSettingsGet("allowHtmlEditorSourceButton"),i=!!m.appSettingsGet("allowHtmlEditorBitiButtons");!n&&i||e.toolbarGroups.__cfgInited||(e.toolbarGroups.__cfgInited=!0,n&&(e.removeButtons=e.removeButtons.replace(",Source","")),i||(e.removePlugins+=(e.removePlugins?",":"")+"bidi")),e.enterMode=c.a.CKEDITOR.ENTER_BR,e.shiftEnterMode=c.a.CKEDITOR.ENTER_P,e.language=f.htmlEditorLangsMap[(t||"en").toLowerCase()]||"en",c.a.CKEDITOR.env&&(c.a.CKEDITOR.env.isCompatible=!0),o.editor=c.a.CKEDITOR.appendTo(o.element,e),o.editor.on("key",function(e){return!e||!e.data||h.EventKeyCode.Tab!==e.data.keyCode}),o.editor.on("blur",function(){o.blurTrigger()}),o.editor.on("mode",function(){o.blurTrigger(),o.onModeChange&&o.onModeChange("plain"!==o.editor.mode)}),o.editor.on("focus",function(){o.focusTrigger()}),c.a.FileReader&&o.editor.on("drop",function(e){if(0<e.data.dataTransfer.getFilesCount()){var t=e.data.dataTransfer.getFile(0);if(t&&c.a.FileReader&&e.data.dataTransfer.id&&t.type&&t.type.match(/^image/i)){var n="[img="+e.data.dataTransfer.id+"]",i=new c.a.FileReader;i.onloadend=function(){i.result&&o.replaceHtml(n,'<img src="'+i.result+'" />')},i.readAsDataURL(t),e.data.dataTransfer.setData("text/html",n)}}}),o.editor.on("instanceReady",function(){o.editor.removeMenuItem&&(o.editor.removeMenuItem("cut"),o.editor.removeMenuItem("copy"),o.editor.removeMenuItem("paste")),o.__resizable=!0,o.__inited=!0,o.resize(),o.onReady&&o.onReady()})};c.a.CKEDITOR?e():c.a.__initEditor=e}},t.focus=function(){if(this.editor)try{this.editor.focus()}catch(e){}},t.hasFocus=function(){if(this.editor)try{return!!this.editor.focusManager.hasFocus}catch(e){}return!1},t.blur=function(){if(this.editor)try{this.editor.focusManager.blur(!0)}catch(e){}},t.resizeEditor=function(){if(this.editor&&this.__resizable)try{this.editor.resize(this.$element.width(),this.$element.innerHeight())}catch(e){}},t.setReadOnly=function(e){if(this.editor)try{this.editor.setReadOnly(!!e)}catch(e){}},t.clear=function(e){this.setHtml("",e)},e}()},function(e,t,n){e.exports=n(276)},function(e,t,n){e.exports=n(314)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(4),o=n.n(i).a.Opentip||{};o.styles=o.styles||{},o.styles.rainloop={extends:"standard",fixed:!0,target:!0,delay:.2,hideDelay:0,hideEffect:"fade",hideEffectDuration:.2,showEffect:"fade",showEffectDuration:.2,showOn:"mouseover click",removeElementsOnHide:!0,background:"#fff",shadow:!1,borderColor:"#999",borderRadius:2,borderWidth:1},o.styles.rainloopTip={extends:"rainloop",delay:.4,group:"rainloopTips"},o.styles.rainloopErrorTip={extends:"rainloop",className:"rainloopErrorTip"}},function(S,e,O){!function(e,t){"use strict";var n,a,r,s,p,l,c,i,u,f,h,b,U,H,B,G,d,o,m,g,V,K,v,y;try{n=O(98)}catch(e){}S.exports=(r="function"==typeof(a=n),s=!!window.addEventListener,p=window.document,l=window.setTimeout,c=function(e,t,n,i){s?e.addEventListener(t,n,!!i):e.attachEvent("on"+t,n)},i=function(e,t,n,i){s?e.removeEventListener(t,n,!!i):e.detachEvent("on"+t,n)},u=function(e,t){return-1!==(" "+e.className+" ").indexOf(" "+t+" ")},f=function(e,t){u(e,t)||(e.className=""===e.className?t:e.className+" "+t)},h=function(e,t){var n;e.className=(n=(" "+e.className+" ").replace(" "+t+" "," ")).trim?n.trim():n.replace(/^\s+|\s+$/g,"")},g={field:null,bound:void 0,ariaLabel:"Use the arrow keys to pick a date",position:"bottom left",reposition:!0,format:"YYYY-MM-DD",toString:null,parse:null,defaultDate:null,setDefaultDate:!(m=function(e){return e.month<0&&(e.year-=Math.ceil(Math.abs(e.month)/12),e.month+=12),11<e.month&&(e.year+=Math.floor(Math.abs(e.month)/12),e.month-=12),e}),firstDay:0,formatStrict:!(o=function(e,t,n){var i;p.createEvent?((i=p.createEvent("HTMLEvents")).initEvent(t,!0,!1),i=d(i,n),e.dispatchEvent(i)):p.createEventObject&&(i=p.createEventObject(),i=d(i,n),e.fireEvent("on"+t,i))}),minDate:null,maxDate:null,yearRange:10,showWeekNumber:!(d=function(e,t,n){var i,o;for(i in t)(o=void 0!==e[i])&&"object"==typeof t[i]&&null!==t[i]&&void 0===t[i].nodeName?U(t[i])?n&&(e[i]=new Date(t[i].getTime())):b(t[i])?n&&(e[i]=t[i].slice(0)):e[i]=d({},t[i],n):!n&&o||(e[i]=t[i]);return e}),pickWholeWeek:!(G=function(e,t){return e.getTime()===t.getTime()}),minYear:0,maxYear:9999,minMonth:void 0,maxMonth:void 0,startRange:null,endRange:null,isRTL:!(B=function(e){U(e)&&e.setHours(0,0,0,0)}),yearSuffix:"",showMonthAfterYear:!(H=function(e,t){return[31,(n=e,n%4==0&&n%100!=0||n%400==0?29:28),31,30,31,30,31,31,30,31,30,31][t];var n}),showDaysInNextAndPreviousMonths:!(U=function(e){return/Date/.test(Object.prototype.toString.call(e))&&!isNaN(e.getTime())}),enableSelectionDaysInNextAndPreviousMonths:!(b=function(e){return/Array/.test(Object.prototype.toString.call(e))}),numberOfMonths:1,mainCalendar:"left",container:void 0,blurFieldOnSelect:!0,i18n:{previousMonth:"Previous Month",nextMonth:"Next Month",months:["January","February","March","April","May","June","July","August","September","October","November","December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},theme:null,events:[],onSelect:null,onOpen:null,onClose:null,onDraw:null,keyboardInput:!0},V=function(e,t,n){for(t+=e.firstDay;7<=t;)t-=7;return n?e.i18n.weekdaysShort[t]:e.i18n.weekdays[t]},K=function(e){var t=[],n="false";if(e.isEmpty){if(!e.showDaysInNextAndPreviousMonths)return'<td class="is-empty"></td>';t.push("is-outside-current-month"),e.enableSelectionDaysInNextAndPreviousMonths||t.push("is-selection-disabled")}return e.isDisabled&&t.push("is-disabled"),e.isToday&&t.push("is-today"),e.isSelected&&(t.push("is-selected"),n="true"),e.hasEvent&&t.push("has-event"),e.isInRange&&t.push("is-inrange"),e.isStartRange&&t.push("is-startrange"),e.isEndRange&&t.push("is-endrange"),'<td data-day="'+e.day+'" class="'+t.join(" ")+'" aria-selected="'+n+'"><button class="pika-button pika-day" type="button" data-pika-year="'+e.year+'" data-pika-month="'+e.month+'" data-pika-day="'+e.day+'">'+e.day+"</button></td>"},v=function(e,t,n,i,o,a){var r,s,c,l,u,d=e._o,p=n===d.minYear,f=n===d.maxYear,h='<div id="'+a+'" class="pika-title" role="heading" aria-live="assertive">',m=!0,g=!0;for(c=[],r=0;r<12;r++)c.push('<option value="'+(n===o?r-t:12+r-t)+'"'+(r===i?' selected="selected"':"")+(p&&r<d.minMonth||f&&r>d.maxMonth?'disabled="disabled"':"")+">"+d.i18n.months[r]+"</option>");for(l='<div class="pika-label">'+d.i18n.months[i]+'<select class="pika-select pika-select-month" tabindex="-1">'+c.join("")+"</select></div>",s=b(d.yearRange)?(r=d.yearRange[0],d.yearRange[1]+1):(r=n-d.yearRange,1+n+d.yearRange),c=[];r<s&&r<=d.maxYear;r++)r>=d.minYear&&c.push('<option value="'+r+'"'+(r===n?' selected="selected"':"")+">"+r+"</option>");return u='<div class="pika-label">'+n+d.yearSuffix+'<select class="pika-select pika-select-year" tabindex="-1">'+c.join("")+"</select></div>",d.showMonthAfterYear?h+=u+l:h+=l+u,p&&(0===i||d.minMonth>=i)&&(m=!1),f&&(11===i||d.maxMonth<=i)&&(g=!1),0===t&&(h+='<button class="pika-prev'+(m?"":" is-disabled")+'" type="button">'+d.i18n.previousMonth+"</button>"),t===e._o.numberOfMonths-1&&(h+='<button class="pika-next'+(g?"":" is-disabled")+'" type="button">'+d.i18n.nextMonth+"</button>"),h+="</div>"},(y=function(e){var i=this,o=i.config(e);i._onMouseDown=function(e){if(i._v){var t=(e=e||window.event).target||e.srcElement;if(t)if(u(t,"is-disabled")||(!u(t,"pika-button")||u(t,"is-empty")||u(t.parentNode,"is-disabled")?u(t,"pika-prev")?i.prevMonth():u(t,"pika-next")&&i.nextMonth():(i.setDate(new Date(t.getAttribute("data-pika-year"),t.getAttribute("data-pika-month"),t.getAttribute("data-pika-day"))),o.bound&&l(function(){i.hide(),o.blurFieldOnSelect&&o.field&&o.field.blur()},100))),u(t,"pika-select"))i._c=!0;else{if(!e.preventDefault)return e.returnValue=!1;e.preventDefault()}}},i._onChange=function(e){var t=(e=e||window.event).target||e.srcElement;t&&(u(t,"pika-select-month")?i.gotoMonth(t.value):u(t,"pika-select-year")&&i.gotoYear(t.value))},i._onKeyChange=function(e){if(e=e||window.event,i.isVisible())switch(e.keyCode){case 13:case 27:o.field&&o.field.blur();break;case 37:e.preventDefault(),i.adjustDate("subtract",1);break;case 38:i.adjustDate("subtract",7);break;case 39:i.adjustDate("add",1);break;case 40:i.adjustDate("add",7)}},i._onInputChange=function(e){var t;e.firedBy!==i&&(t=o.parse?o.parse(o.field.value,o.format):r?(t=a(o.field.value,o.format,o.formatStrict))&&t.isValid()?t.toDate():null:new Date(Date.parse(o.field.value)),U(t)&&i.setDate(t),i._v||i.show())},i._onInputFocus=function(){i.show()},i._onInputClick=function(){i.show()},i._onInputBlur=function(){var e=p.activeElement;do{if(u(e,"pika-single"))return}while(e=e.parentNode);i._c||(i._b=l(function(){i.hide()},50)),i._c=!1},i._onClick=function(e){var t=(e=e||window.event).target||e.srcElement,n=t;if(t){!s&&u(t,"pika-select")&&(t.onchange||(t.setAttribute("onchange","return;"),c(t,"change",i._onChange)));do{if(u(n,"pika-single")||n===o.trigger)return}while(n=n.parentNode);i._v&&t!==o.trigger&&n!==o.trigger&&i.hide()}},i.el=p.createElement("div"),i.el.className="pika-single"+(o.isRTL?" is-rtl":"")+(o.theme?" "+o.theme:""),c(i.el,"mousedown",i._onMouseDown,!0),c(i.el,"touchend",i._onMouseDown,!0),c(i.el,"change",i._onChange),o.keyboardInput&&c(p,"keydown",i._onKeyChange),o.field&&(o.container?o.container.appendChild(i.el):o.bound?p.body.appendChild(i.el):o.field.parentNode.insertBefore(i.el,o.field.nextSibling),c(o.field,"change",i._onInputChange),o.defaultDate||(r&&o.field.value?o.defaultDate=a(o.field.value,o.format).toDate():o.defaultDate=new Date(Date.parse(o.field.value)),o.setDefaultDate=!0));var t=o.defaultDate;U(t)?o.setDefaultDate?i.setDate(t,!0):i.gotoDate(t):i.gotoDate(new Date),o.bound?(this.hide(),i.el.className+=" is-bound",c(o.trigger,"click",i._onInputClick),c(o.trigger,"focus",i._onInputFocus),c(o.trigger,"blur",i._onInputBlur)):this.show()}).prototype={config:function(e){this._o||(this._o=d({},g,!0));var t=d(this._o,e,!0);t.isRTL=!!t.isRTL,t.field=t.field&&t.field.nodeName?t.field:null,t.theme="string"==typeof t.theme&&t.theme?t.theme:null,t.bound=!!(void 0!==t.bound?t.field&&t.bound:t.field),t.trigger=t.trigger&&t.trigger.nodeName?t.trigger:t.field,t.disableWeekends=!!t.disableWeekends,t.disableDayFn="function"==typeof t.disableDayFn?t.disableDayFn:null;var n=parseInt(t.numberOfMonths,10)||1;if(t.numberOfMonths=4<n?4:n,U(t.minDate)||(t.minDate=!1),U(t.maxDate)||(t.maxDate=!1),t.minDate&&t.maxDate&&t.maxDate<t.minDate&&(t.maxDate=t.minDate=!1),t.minDate&&this.setMinDate(t.minDate),t.maxDate&&this.setMaxDate(t.maxDate),b(t.yearRange)){var i=(new Date).getFullYear()-10;t.yearRange[0]=parseInt(t.yearRange[0],10)||i,t.yearRange[1]=parseInt(t.yearRange[1],10)||i}else t.yearRange=Math.abs(parseInt(t.yearRange,10))||g.yearRange,100<t.yearRange&&(t.yearRange=100);return t},toString:function(e){return e=e||this._o.format,U(this._d)?this._o.toString?this._o.toString(this._d,e):r?a(this._d).format(e):this._d.toDateString():""},getMoment:function(){return r?a(this._d):null},setMoment:function(e,t){r&&a.isMoment(e)&&this.setDate(e.toDate(),t)},getDate:function(){return U(this._d)?new Date(this._d.getTime()):null},setDate:function(e,t){if(!e)return this._d=null,this._o.field&&(this._o.field.value="",o(this._o.field,"change",{firedBy:this})),this.draw();if("string"==typeof e&&(e=new Date(Date.parse(e))),U(e)){var n=this._o.minDate,i=this._o.maxDate;U(n)&&e<n?e=n:U(i)&&i<e&&(e=i),this._d=new Date(e.getTime()),B(this._d),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString(),o(this._o.field,"change",{firedBy:this})),t||"function"!=typeof this._o.onSelect||this._o.onSelect.call(this,this.getDate())}},gotoDate:function(e){var t=!0;if(U(e)){if(this.calendars){var n=new Date(this.calendars[0].year,this.calendars[0].month,1),i=new Date(this.calendars[this.calendars.length-1].year,this.calendars[this.calendars.length-1].month,1),o=e.getTime();i.setMonth(i.getMonth()+1),i.setDate(i.getDate()-1),t=o<n.getTime()||i.getTime()<o}t&&(this.calendars=[{month:e.getMonth(),year:e.getFullYear()}],"right"===this._o.mainCalendar&&(this.calendars[0].month+=1-this._o.numberOfMonths)),this.adjustCalendars()}},adjustDate:function(e,t){var n,i=this.getDate()||new Date,o=24*parseInt(t)*60*60*1e3;"add"===e?n=new Date(i.valueOf()+o):"subtract"===e&&(n=new Date(i.valueOf()-o)),this.setDate(n)},adjustCalendars:function(){this.calendars[0]=m(this.calendars[0]);for(var e=1;e<this._o.numberOfMonths;e++)this.calendars[e]=m({month:this.calendars[0].month+e,year:this.calendars[0].year});this.draw()},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(e){isNaN(e)||(this.calendars[0].month=parseInt(e,10),this.adjustCalendars())},nextMonth:function(){this.calendars[0].month++,this.adjustCalendars()},prevMonth:function(){this.calendars[0].month--,this.adjustCalendars()},gotoYear:function(e){isNaN(e)||(this.calendars[0].year=parseInt(e,10),this.adjustCalendars())},setMinDate:function(e){e instanceof Date?(B(e),this._o.minDate=e,this._o.minYear=e.getFullYear(),this._o.minMonth=e.getMonth()):(this._o.minDate=g.minDate,this._o.minYear=g.minYear,this._o.minMonth=g.minMonth,this._o.startRange=g.startRange),this.draw()},setMaxDate:function(e){e instanceof Date?(B(e),this._o.maxDate=e,this._o.maxYear=e.getFullYear(),this._o.maxMonth=e.getMonth()):(this._o.maxDate=g.maxDate,this._o.maxYear=g.maxYear,this._o.maxMonth=g.maxMonth,this._o.endRange=g.endRange),this.draw()},setStartRange:function(e){this._o.startRange=e},setEndRange:function(e){this._o.endRange=e},draw:function(e){if(this._v||e){var t,n=this._o,i=n.minYear,o=n.maxYear,a=n.minMonth,r=n.maxMonth,s="";this._y<=i&&(this._y=i,!isNaN(a)&&this._m<a&&(this._m=a)),this._y>=o&&(this._y=o,!isNaN(r)&&this._m>r&&(this._m=r)),t="pika-title-"+Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,2);for(var c=0;c<n.numberOfMonths;c++)s+='<div class="pika-lendar">'+v(this,c,this.calendars[c].year,this.calendars[c].month,this.calendars[0].year,t)+this.render(this.calendars[c].year,this.calendars[c].month,t)+"</div>";this.el.innerHTML=s,n.bound&&"hidden"!==n.field.type&&l(function(){n.trigger.focus()},1),"function"==typeof this._o.onDraw&&this._o.onDraw(this),n.bound&&n.field.setAttribute("aria-label",n.ariaLabel)}},adjustPosition:function(){var e,t,n,i,o,a,r,s,c,l,u,d;if(!this._o.container){if(this.el.style.position="absolute",t=e=this._o.trigger,n=this.el.offsetWidth,i=this.el.offsetHeight,o=window.innerWidth||p.documentElement.clientWidth,a=window.innerHeight||p.documentElement.clientHeight,r=window.pageYOffset||p.body.scrollTop||p.documentElement.scrollTop,d=u=!0,"function"==typeof e.getBoundingClientRect)s=(l=e.getBoundingClientRect()).left+window.pageXOffset,c=l.bottom+window.pageYOffset;else for(s=t.offsetLeft,c=t.offsetTop+t.offsetHeight;t=t.offsetParent;)s+=t.offsetLeft,c+=t.offsetTop;(this._o.reposition&&o<s+n||-1<this._o.position.indexOf("right")&&0<s-n+e.offsetWidth)&&(s=s-n+e.offsetWidth,u=!1),(this._o.reposition&&a+r<c+i||-1<this._o.position.indexOf("top")&&0<c-i-e.offsetHeight)&&(c=c-i-e.offsetHeight,d=!1),this.el.style.left=s+"px",this.el.style.top=c+"px",f(this.el,u?"left-aligned":"right-aligned"),f(this.el,d?"bottom-aligned":"top-aligned"),h(this.el,u?"right-aligned":"left-aligned"),h(this.el,d?"top-aligned":"bottom-aligned")}},render:function(e,t,n){var i=this._o,o=new Date,a=H(e,t),r=new Date(e,t,1).getDay(),s=[],c=[];B(o),0<i.firstDay&&(r-=i.firstDay)<0&&(r+=7);for(var l=0===t?11:t-1,u=11===t?0:t+1,d=0===t?e-1:e,p=11===t?e+1:e,f=H(d,l),h=a+r,m=h;7<m;)m-=7;h+=7-m;for(var g,b,v,y,S,O,w,T,C=!1,A=0,E=0;A<h;A++){var F=new Date(e,t,A-r+1),j=!!U(this._d)&&G(F,this._d),N=G(F,o),R=-1!==i.events.indexOf(F.toDateString()),I=A<r||a+r<=A,L=A-r+1,P=t,M=e,D=i.startRange&&G(i.startRange,F),_=i.endRange&&G(i.endRange,F),k=i.startRange&&i.endRange&&i.startRange<F&&F<i.endRange;I&&(M=A<r?(L=f+L,P=l,d):(L-=a,P=u,p));var x={day:L,month:P,year:M,hasEvent:R,isSelected:j,isToday:N,isDisabled:i.minDate&&F<i.minDate||i.maxDate&&F>i.maxDate||i.disableWeekends&&(0===(w=F.getDay())||6===w)||i.disableDayFn&&i.disableDayFn(F),isEmpty:I,isStartRange:D,isEndRange:_,isInRange:k,showDaysInNextAndPreviousMonths:i.showDaysInNextAndPreviousMonths,enableSelectionDaysInNextAndPreviousMonths:i.enableSelectionDaysInNextAndPreviousMonths};i.pickWholeWeek&&j&&(C=!0),c.push(K(x)),7==++E&&(i.showWeekNumber&&c.unshift((v=A-r,y=t,S=e,O=void 0,O=new Date(S,0,1),'<td class="pika-week">'+Math.ceil(((new Date(S,y,v)-O)/864e5+O.getDay()+1)/7)+"</td>")),s.push((g=c,b=i.isRTL,'<tr class="pika-row'+(i.pickWholeWeek?" pick-whole-week":"")+(C?" is-selected":"")+'">'+(b?g.reverse():g).join("")+"</tr>")),E=0,C=!(c=[]))}return T=s,'<table cellpadding="0" cellspacing="0" class="pika-table" role="grid" aria-labelledby="'+n+'">'+function(e){var t,n=[];for(e.showWeekNumber&&n.push("<th></th>"),t=0;t<7;t++)n.push('<th scope="col"><abbr title="'+V(e,t)+'">'+V(e,t,!0)+"</abbr></th>");return"<thead><tr>"+(e.isRTL?n.reverse():n).join("")+"</tr></thead>"}(i)+"<tbody>"+T.join("")+"</tbody></table>"},isVisible:function(){return this._v},show:function(){this.isVisible()||(this._v=!0,this.draw(),h(this.el,"is-hidden"),this._o.bound&&(c(p,"click",this._onClick),this.adjustPosition()),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var e=this._v;!1!==e&&(this._o.bound&&i(p,"click",this._onClick),this.el.style.position="static",this.el.style.left="auto",this.el.style.top="auto",f(this.el,"is-hidden"),this._v=!1,void 0!==e&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){var e=this._o;this.hide(),i(this.el,"mousedown",this._onMouseDown,!0),i(this.el,"touchend",this._onMouseDown,!0),i(this.el,"change",this._onChange),e.keyboardInput&&i(p,"keydown",this._onKeyChange),e.field&&(i(e.field,"change",this._onInputChange),e.bound&&(i(e.trigger,"click",this._onInputClick),i(e.trigger,"focus",this._onInputFocus),i(e.trigger,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},y)}()},function(e,t){e.exports=window.Autolinker},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i={eml:"message/rfc822",mime:"message/rfc822",txt:"text/plain",text:"text/plain",def:"text/plain",list:"text/plain",in:"text/plain",ini:"text/plain",log:"text/plain",sql:"text/plain",cfg:"text/plain",conf:"text/plain",asc:"text/plain",rtx:"text/richtext",vcard:"text/vcard",vcf:"text/vcard",htm:"text/html",html:"text/html",csv:"text/csv",ics:"text/calendar",ifb:"text/calendar",xml:"text/xml",json:"application/json",swf:"application/x-shockwave-flash",hlp:"application/winhlp",wgt:"application/widget",chm:"application/vnd.ms-htmlhelp",p10:"application/pkcs10",p7c:"application/pkcs7-mime",p7m:"application/pkcs7-mime",p7s:"application/pkcs7-signature",torrent:"application/x-bittorrent",js:"application/javascript",pl:"text/perl",css:"text/css",asp:"text/asp",php:"application/x-httpd-php",php3:"application/x-httpd-php",php4:"application/x-httpd-php",php5:"application/x-httpd-php",phtml:"application/x-httpd-php",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",jpe:"image/jpeg",jfif:"image/jpeg",gif:"image/gif",bmp:"image/bmp",cgm:"image/cgm",ief:"image/ief",ico:"image/x-icon",tif:"image/tiff",tiff:"image/tiff",svg:"image/svg+xml",svgz:"image/svg+xml",djv:"image/vnd.djvu",djvu:"image/vnd.djvu",webp:"image/webp",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",exe:"application/x-msdownload",dll:"application/x-msdownload",scr:"application/x-msdownload",com:"application/x-msdownload",bat:"application/x-msdownload",msi:"application/x-msdownload",cab:"application/vnd.ms-cab-compressed",gz:"application/x-gzip",tgz:"application/x-gzip",bz:"application/x-bzip",bz2:"application/x-bzip2",deb:"application/x-debian-package",psf:"application/x-font-linux-psf",otf:"application/x-font-otf",pcf:"application/x-font-pcf",snf:"application/x-font-snf",ttf:"application/x-font-ttf",ttc:"application/x-font-ttf",mp3:"audio/mpeg",amr:"audio/amr",aac:"audio/x-aac",aif:"audio/x-aiff",aifc:"audio/x-aiff",aiff:"audio/x-aiff",wav:"audio/x-wav",wma:"audio/x-ms-wma",wax:"audio/x-ms-wax",midi:"audio/midi",mp4a:"audio/mp4",ogg:"audio/ogg",weba:"audio/webm",ra:"audio/x-pn-realaudio",ram:"audio/x-pn-realaudio",rmp:"audio/x-pn-realaudio-plugin",m3u:"audio/x-mpegurl",flv:"video/x-flv",qt:"video/quicktime",mov:"video/quicktime",wmv:"video/windows-media",avi:"video/x-msvideo",mpg:"video/mpeg",mpeg:"video/mpeg",mpe:"video/mpeg",m1v:"video/mpeg",m2v:"video/mpeg","3gp":"video/3gpp","3g2":"video/3gpp2",h261:"video/h261",h263:"video/h263",h264:"video/h264",jpgv:"video/jpgv",mp4:"video/mp4",mp4v:"video/mp4",mpg4:"video/mp4",ogv:"video/ogg",webm:"video/webm",m4v:"video/x-m4v",asf:"video/x-ms-asf",asx:"video/x-ms-asf",wm:"video/x-ms-wm",wmx:"video/x-ms-wmx",wvx:"video/x-ms-wvx",movie:"video/x-sgi-movie",pdf:"application/pdf",psd:"image/vnd.adobe.photoshop",ai:"application/postscript",eps:"application/postscript",ps:"application/postscript",doc:"application/msword",dot:"application/msword",rtf:"application/rtf",xls:"application/vnd.ms-excel",ppt:"application/vnd.ms-powerpoint",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",odt:"application/vnd.oasis.opendocument.text",ods:"application/vnd.oasis.opendocument.spreadsheet"}},function(e,t,n){"use strict";var i=n(1),o=n(0);t.a=new function(){this.capa=i.a.observable(""),this.modules=i.a.observable({}),this.filters=i.a.observableArray([]),this.filters.loading=i.a.observable(!1).extend({throttle:o.Magics.Time200ms}),this.filters.saving=i.a.observable(!1).extend({throttle:o.Magics.Time200ms}),this.raw=i.a.observable("")}},function(e,t,n){var i=n(139),o=n(110);e.exports=Object.keys||function(e){return i(e,o)}},function(e,t,n){var i=n(32),o=n(148),a=n(45),r=i("unscopables"),s=Array.prototype;null==s[r]&&a(s,r,o(null)),e.exports=function(e){s[r][e]=!0}},function(e,t,n){"use strict";var b=n(43),v=n(223),y=n(149),S=n(215),O=n(111),w=n(45),T=n(54),i=n(32),C=n(83),A=n(73),o=n(164),E=o.IteratorPrototype,F=o.BUGGY_SAFARI_ITERATORS,j=i("iterator"),N="values",R=function(){return this};e.exports=function(e,t,n,i,o,a,r){v(n,t,i);var s,c,l,u=function(e){if(e===o&&m)return m;if(!F&&e in f)return f[e];switch(e){case"keys":case N:case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",p=!1,f=e.prototype,h=f[j]||f["@@iterator"]||o&&f[o],m=!F&&h||u(o),g="Array"==t&&f.entries||h;if(g&&(s=y(g.call(new e)),E!==Object.prototype&&s.next&&(C||y(s)===E||(S?S(s,E):"function"!=typeof s[j]&&w(s,j,R)),O(s,d,!0,!0),C&&(A[d]=R))),o==N&&h&&h.name!==N&&(p=!0,m=function(){return h.call(this)}),C&&!r||f[j]===m||w(f,j,m),A[t]=m,o)if(c={values:u(N),keys:a?m:u("keys"),entries:u("entries")},r)for(l in c)!F&&!p&&l in f||T(f,l,c[l]);else b({target:t,proto:!0,forced:F||p},c);return c}},function(e,t,n){var o=n(36),a=n(225);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n,i=!1,e={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(e,[]),i=e instanceof Array}catch(e){}return function(e,t){return o(e),a(t),i?n.call(e,t):e.__proto__=t,e}}():void 0)},function(e,t,n){n(217);var i=n(299),o=n(77),a=n(85),r=n(153),s=n(68)("toStringTag");for(var c in i){var l=o[c],u=l&&l.prototype;u&&!u[s]&&a(u,s,c),r[c]=r.Array}},function(e,t,n){"use strict";var i=n(95),o=n(238),a=n(153),r=n(283),s=n(287),c="Array Iterator",l=r.set,u=r.getterFor(c);e.exports=s(Array,"Array",function(e,t){l(this,{type:c,target:i(e),index:0,kind:t})},function(){var e=u(this),t=e.target,n=e.kind,i=e.index++;return!t||i>=t.length?{value:e.target=void 0,done:!0}:"keys"==n?{value:i,done:!1}:"values"==n?{value:t[i],done:!1}:{value:[i,t[i]],done:!1}},"values"),a.Arguments=a.Array,o("keys"),o("values"),o("entries")},function(e,t,n){"use strict";n.r(t),n.d(t,"AskPopupView",function(){return h}),n.d(t,"default",function(){return h});var i,o=n(10),a=n.n(o),r=n(1),s=n(21),c=n.n(s),l=n(0),u=n(2),d=n(9),p=n(7),f=n(27),h=Object(p.popup)({name:"View/Popup/Ask",templateID:"PopupsAsk"})(i=function(t){function e(){var e;return(e=t.call(this)||this).askDesc=r.a.observable(""),e.yesButton=r.a.observable(""),e.noButton=r.a.observable(""),e.yesFocus=r.a.observable(!1),e.noFocus=r.a.observable(!1),e.fYesAction=null,e.fNoAction=null,e.bFocusYesOnShow=!0,e.bDisabeCloseOnEsc=!0,e.sDefaultKeyScope=l.KeyState.PopupAsk,e}a()(e,t);var n=e.prototype;return n.clearPopup=function(){this.askDesc(""),this.yesButton(Object(d.i18n)("POPUPS_ASK/BUTTON_YES")),this.noButton(Object(d.i18n)("POPUPS_ASK/BUTTON_NO")),this.yesFocus(!1),this.noFocus(!1),this.fYesAction=null,this.fNoAction=null},n.yesClick=function(){this.cancelCommand(),Object(u.isFunc)(this.fYesAction)&&this.fYesAction.call(null)},n.noClick=function(){this.cancelCommand(),Object(u.isFunc)(this.fNoAction)&&this.fNoAction.call(null)},n.onShow=function(e,t,n,i,o,a){void 0===t&&(t=null),void 0===n&&(n=null),void 0===i&&(i=""),void 0===o&&(o=""),void 0===a&&(a=!0),this.clearPopup(),this.fYesAction=t||null,this.fNoAction=n||null,this.askDesc(e||""),i&&this.yesButton(i),o&&this.noButton(o),this.bFocusYesOnShow=!!a},n.onShowWithDelay=function(){this.bFocusYesOnShow&&this.yesFocus(!0)},n.onBuild=function(){var e=this;c()("tab, shift+tab, right, left",l.KeyState.PopupAsk,function(){return e.yesFocus()?e.noFocus(!0):e.yesFocus(!0),!1}),c()("esc",l.KeyState.PopupAsk,function(){return e.noClick(),!1})},e}(f.a))||i},function(e,t,n){"use strict";var i=n(4),o=n.n(i),a=n(1),r=n(0),s=function(){function e(){var n=this;this.quota=a.a.observable(0),this.usage=a.a.observable(0),this.percentage=a.a.computed(function(){var e=n.quota(),t=n.usage();return 0<e?o.a.Math.ceil(t/e*100):0})}return e.prototype.populateData=function(e,t){this.quota(e*r.Magics.BitLength1024),this.usage(t*r.Magics.BitLength1024)},e}();t.a=new s},function(e,t){e.exports=window.ifvisible},function(e,t,n){var i=n(50),r=n(59),s=n(36),c=n(212);e.exports=i?Object.defineProperties:function(e,t){s(e);for(var n,i=c(t),o=i.length,a=0;a<o;)r.f(e,n=i[a++],t[n]);return e}},function(e,t,n){var i=n(44),o=n(49),a=n(32)("match");e.exports=function(e){var t;return i(e)&&(void 0!==(t=e[a])?!!t:"RegExp"==o(e))}},function(e,t,n){"use strict";var o=n(164).IteratorPrototype,a=n(148),r=n(91),s=n(111),c=n(73),l=function(){return this};e.exports=function(e,t,n){var i=t+" Iterator";return e.prototype=a(o,{next:r(1,n)}),s(e,i,!1,!0),c[i]=l,e}},function(e,t,n){var i=n(39);e.exports=!i(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},function(e,t,n){var i=n(44);e.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){var i=n(28),o=n(227),a=n(183),r=n(45),s=n(32),c=s("iterator"),l=s("toStringTag"),u=a.values;for(var d in o){var p=i[d],f=p&&p.prototype;if(f){if(f[c]!==u)try{r(f,c,u)}catch(e){f[c]=u}if(f[l]||r(f,l,d),o[d])for(var h in a)if(f[h]!==a[h])try{r(f,h,a[h])}catch(e){f[h]=a[h]}}}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},,function(e,t,n){var i=n(28),o=n(230).trim,a=n(167),r=i.parseInt,s=/^[+-]?0[Xx]/,c=8!==r(a+"08")||22!==r(a+"0x16");e.exports=c?function(e,t){var n=o(String(e));return r(n,t>>>0||(s.test(n)?16:10))}:r},function(e,t,n){var i=n(51),o="["+n(167)+"]",a=RegExp("^"+o+o+"*"),r=RegExp(o+o+"*$"),s=function(n){return function(e){var t=String(i(e));return 1&n&&(t=t.replace(a,"")),2&n&&(t=t.replace(r,"")),t}};e.exports={start:s(1),end:s(2),trim:s(3)}},function(e,t,n){var r=n(51),s=/"/g;e.exports=function(e,t,n,i){var o=String(r(e)),a="<"+t;return""!==n&&(a+=" "+n+'="'+String(i).replace(s,"&quot;")+'"'),a+">"+o+"</"+t+">"}},function(e,t,n){var i=n(39);e.exports=function(t){return i(function(){var e=""[t]('"');return e!==e.toLowerCase()||3<e.split('"').length})}},function(e,t,n){var i=n(277),o=Array.prototype;e.exports=function(e){var t=e.reduce;return e===o||e instanceof Array&&t===o.reduce?i:t}},function(e,t,n){var i=n(84),o=n(279),a=n(151),r=n(95),s=n(197),c=n(96),l=n(235),u=Object.getOwnPropertyDescriptor;t.f=i?u:function(e,t){if(e=r(e),t=s(t,!0),l)try{return u(e,t)}catch(e){}if(c(e,t))return a(!o.f.call(e,t),e[t])}},function(e,t,n){var i=n(84),o=n(57),a=n(236);e.exports=!i&&!o(function(){return 7!=Object.defineProperty(a("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(77),o=n(78),a=i.document,r=o(a)&&o(a.createElement);e.exports=function(e){return r?a.createElement(e):{}}},function(e,t,n){var a=n(170);e.exports=function(i,o,e){if(a(i),void 0===o)return i;switch(e){case 0:return function(){return i.call(o)};case 1:return function(e){return i.call(o,e)};case 2:return function(e,t){return i.call(o,e,t)};case 3:return function(e,t,n){return i.call(o,e,t,n)}}return function(){return i.apply(o,arguments)}}},function(e,t){e.exports=function(){}},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol("+String(void 0===e?"":e)+")_"+(++n+i).toString(36)}},function(e,t,n){"use strict";var i,o,a,r=n(241),s=n(85),c=n(96),l=n(68),u=n(200),d=l("iterator"),p=!1;[].keys&&("next"in(a=[].keys())?(o=r(r(a)))!==Object.prototype&&(i=o):p=!0),null==i&&(i={}),u||c(i,d)||s(i,d,function(){return this}),e.exports={IteratorPrototype:i,BUGGY_SAFARI_ITERATORS:p}},function(e,t,n){var i=n(96),o=n(122),a=n(201),r=n(289),s=a("IE_PROTO"),c=Object.prototype;e.exports=r?Object.getPrototypeOf:function(e){return e=o(e),i(e,s)?e[s]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?c:null}},function(e,t,n){var i=n(152),o=n(291),a=n(246),r=n(202),s=n(293),c=n(236),l=n(201)("IE_PROTO"),u="prototype",d=function(){},p=function(){var e,t=c("iframe"),n=a.length;for(t.style.display="none",s.appendChild(t),t.src=String("javascript:"),(e=t.contentWindow.document).open(),e.write("<script>document.F=Object<\/script>"),e.close(),p=e.F;n--;)delete p[u][a[n]];return p()};e.exports=Object.create||function(e,t){var n;return null!==e?(d[u]=i(e),n=new d,d[u]=null,n[l]=e):n=p(),void 0===t?n:o(n,t)},r[l]=!0},function(e,t,n){var i=n(292),o=n(246);e.exports=Object.keys||function(e){return i(e,o)}},function(e,t,n){var c=n(95),l=n(113),u=n(245),i=function(s){return function(e,t,n){var i,o=c(e),a=l(o.length),r=u(n,a);if(s&&t!=t){for(;r<a;)if((i=o[r++])!=i)return!0}else for(;r<a;r++)if((s||r in o)&&o[r]===t)return s||r||0;return!s&&-1}};e.exports={includes:i(!0),indexOf:i(!1)}},function(e,t,n){var i=n(198),o=Math.max,a=Math.min;e.exports=function(e,t){var n=i(e);return n<0?o(n+t,0):a(n,t)}},function(e,t){e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},function(e,t,n){var a=n(134).f,r=n(85),s=n(96),c=n(295),l=n(68)("toStringTag"),u=c!=={}.toString;e.exports=function(e,t,n,i){if(e){var o=n?e:e.prototype;s(o,l)||a(o,l,{configurable:!0,value:t}),i&&u&&r(o,"toString",c)}}},function(e,t,n){"use strict";var o=n(197),a=n(134),r=n(151);e.exports=function(e,t,n){var i=o(t);i in e?a.f(e,i,r(0,n)):e[i]=n}},function(e,t,n){var i=n(78),o=n(154),a=n(68)("species");e.exports=function(e,t){var n;return o(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!o(n.prototype)?i(n)&&null===(n=n[a])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},function(e,t,n){e.exports=n(334)},function(e,t,n){n(216);var i=n(341),o=n(171),a=Array.prototype,r={DOMTokenList:!0,NodeList:!0};e.exports=function(e){var t=e.forEach;return e===a||e instanceof Array&&t===a.forEach||r.hasOwnProperty(o(e))?i:t}},function(e,t,n){"use strict";n.r(t),n.d(t,"LanguagesPopupView",function(){return h}),n.d(t,"default",function(){return h});var i,o=n(18),a=n.n(o),r=n(10),s=n.n(r),c=n(3),l=n.n(c),u=n(1),d=n(2),p=n(7),f=n(27),h=Object(p.popup)({name:"View/Popup/Languages",templateID:"PopupsLanguages"})(i=function(t){function e(){var e;return(e=t.call(this)||this).fLang=null,e.userLanguage=u.a.observable(""),e.langs=u.a.observableArray([]),e.languages=u.a.computed(function(){var t=e.userLanguage();return a()(l.a).call(l.a,e.langs(),function(e){return{key:e,user:e===t,selected:u.a.observable(!1),fullName:Object(d.convertLangName)(e)}})}),e.langs.subscribe(function(){e.setLanguageSelection()}),e}s()(e,t);var n=e.prototype;return n.languageTooltipName=function(e){var t=Object(d.convertLangName)(e,!0);return Object(d.convertLangName)(e,!1)===t?"":t},n.setLanguageSelection=function(){var t=this.fLang?u.a.unwrap(this.fLang):"";l.a.each(this.languages(),function(e){e.selected(e.key===t)})},n.onBeforeShow=function(){this.fLang=null,this.userLanguage(""),this.langs([])},n.onShow=function(e,t,n){this.fLang=e,this.userLanguage(n||""),this.langs(t)},n.changeLanguage=function(e){this.fLang&&this.fLang(e),this.cancelCommand()},e}(f.a))||i},function(e,t,n){"use strict";n(67);var i=n(4),o=n.n(i),a=n(2),r=n(6),s=n(0),c=n(38),l=n(9),u=n(81);t.a=function(t){r.data.__APP__=t,r.$win.on("keydown",a.killCtrlACtrlS).on("unload",function(){r.data.bUnload=!0}),r.$html.addClass(r.bMobileDevice?"mobile":"no-mobile").on("click.dropdown.data-api",a.detectDropdownVisibility);var e=o.a.rl||{};e.i18n=l.i18n,e.createCommand=a.createCommandLegacy,e.addSettingsViewModel=c.b,e.addSettingsViewModelForAdmin=c.c,e.addHook=c.a,e.settingsGet=c.d,e.pluginSettingsGet=c.h,e.pluginRemoteRequest=c.e,e.EmailModel=u.EmailModel,e.Enums=s,o.a.rl=e,o.a.__APP_BOOT=function(e){Object(a.domReady)(function(){o.a.setTimeout(function(){o.a.rainloopTEMPLATES&&o.a.rainloopTEMPLATES[0]?(o.a.document.getElementById("rl-templates").innerHTML=o.a.rainloopTEMPLATES[0],o.a.setTimeout(function(){r.$html.removeClass("no-js rl-booted-trigger").addClass("rl-booted"),t.bootstart()},s.Magics.Time10ms)):e(),o.a.__APP_BOOT=null},s.Magics.Time10ms)})}}},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(1),o=n(6),a=n(5),r=function(){function e(){this.allowLanguagesOnSettings=i.a.observable(!0),this.allowLanguagesOnLogin=i.a.observable(!0),this.newMoveToFolder=i.a.observable(!0),this.interfaceAnimation=i.a.observable(!0),this.interfaceAnimation.subscribe(function(e){var t=o.bMobileDevice||!e;o.$html.toggleClass("rl-anim",!t).toggleClass("no-rl-anim",t)}),this.interfaceAnimation.valueHasMutated(),this.prem=i.a.observable(!1),this.community=i.a.observable(!0)}return e.prototype.populate=function(){this.allowLanguagesOnLogin(!!a.settingsGet("AllowLanguagesOnLogin")),this.allowLanguagesOnSettings(!!a.settingsGet("AllowLanguagesOnSettings")),this.newMoveToFolder(!!a.settingsGet("NewMoveToFolder")),this.interfaceAnimation(!!a.settingsGet("InterfaceAnimation")),this.prem(!!a.settingsGet("PremType")),this.community(!!a.settingsGet("Community"))},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(75);var i=n(4),u=n.n(i),o=n(3),d=n.n(o),a=n(8),p=n.n(a),s=n(25),c=n(0),f=n(2),l=n(6),h=n(15),m=n(38),g=n(5),r=function(){function e(){this.oRequests={}}var t=e.prototype;return t.defaultResponse=function(e,t,n,i,o,a){var r=function(){c.StorageResultType.Success!==n&&l.data.bUnload&&(n=c.StorageResultType.Unload),c.StorageResultType.Success===n&&i&&!i.Result?(i&&-1<Object(f.inArray)(i.ErrorCode,[c.Notification.AuthError,c.Notification.AccessError,c.Notification.ConnectionError,c.Notification.DomainNotAllowed,c.Notification.AccountNotAllowed,c.Notification.MailServerError,c.Notification.UnknownNotification,c.Notification.UnknownError])&&(l.data.iAjaxErrorCount+=1),i&&c.Notification.InvalidToken===i.ErrorCode&&(l.data.iTokenErrorCount+=1),s.q<l.data.iTokenErrorCount&&l.data.__APP__&&l.data.__APP__.loginAndLogoutReload&&l.data.__APP__.loginAndLogoutReload(!1,!0),(i.ClearAuth||i.Logout||s.a<l.data.iAjaxErrorCount)&&l.data.__APP__&&l.data.__APP__.clearClientSideToken&&(l.data.__APP__.clearClientSideToken(),!i.ClearAuth&&l.data.__APP__.loginAndLogoutReload&&l.data.__APP__.loginAndLogoutReload(!1,!0))):c.StorageResultType.Success===n&&i&&i.Result&&(l.data.iAjaxErrorCount=0,l.data.iTokenErrorCount=0),Object(m.f)("ajax-default-response",[t,c.StorageResultType.Success===n?i:null,n,o,a]),e&&e(n,c.StorageResultType.Success===n?i:null,o,t,a)};switch(n){case"success":n=c.StorageResultType.Success;break;case"abort":n=c.StorageResultType.Abort;break;default:n=c.StorageResultType.Error}c.StorageResultType.Error===n?d.a.delay(r,300):r()},t.ajaxRequest=function(i,o,e,t,n){var a=this;void 0===e&&(e=2e4),void 0===t&&(t=""),void 0===n&&(n=[]);var r,s=""===t,c=(new u.a.Date).getTime();(r=(o=o||{}).Action||"")&&0<n.length&&d.a.each(n,function(e){a.oRequests[e]&&(a.oRequests[e].__aborted=!0,a.oRequests[e].abort&&a.oRequests[e].abort(),a.oRequests[e]=null)}),s&&(o.XToken=g.appSettingsGet("token"));var l=p.a.ajax({type:s?"POST":"GET",url:Object(h.a)(t),async:!0,dataType:"json",data:s?o:{},headers:{},timeout:e,global:!0});return l.always(function(e,t){var n=!1;e&&e.Time&&(n=Object(f.pInt)(e.Time)>(new u.a.Date).getTime()-c),r&&a.oRequests[r]&&(a.oRequests[r].__aborted&&(t="abort"),a.oRequests[r]=null),a.defaultResponse(i,r,t,e,n,o)}),r&&0<n.length&&-1<Object(f.inArray)(r,n)&&(this.oRequests[r]&&(this.oRequests[r].__aborted=!0,this.oRequests[r].abort&&this.oRequests[r].abort(),this.oRequests[r]=null),this.oRequests[r]=l),l.catch(console.log),l},t.defaultRequest=function(e,t,n,i,o,a){return(n=n||{}).Action=t,o=Object(f.pString)(o),Object(m.f)("ajax-default-request",[t,n,o]),this.ajaxRequest(e,n,Object(f.isUnd)(i)?s.g:Object(f.pInt)(i),o,a)},t.noop=function(e){this.defaultRequest(e,"Noop")},t.jsError=function(e,t,n,i,o,a,r){this.defaultRequest(e,"JsError",{Message:t,FileName:n,LineNo:i,Location:o,HtmlCapa:a,TimeOnPage:r})},t.jsInfo=function(e,t,n,i){void 0===i&&(i=!1),this.defaultRequest(e,"JsInfo",{Type:t,Data:n,IsError:i?"1":"0"})},t.getPublicKey=function(e){this.defaultRequest(e,"GetPublicKey")},t.jsVersion=function(e,t){this.defaultRequest(e,"Version",{Version:t})},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n(12),s=n.n(i),o=n(10),a=n.n(o),r=n(3),c=n.n(r),l=n(8),u=n.n(l),d=n(1),p=n(6),f=n(2),h=n(15),m=n(7),g=function(n){function e(e){var t;return(t=n.call(this,"settings",e)||this).menu=d.a.observableArray([]),t.oCurrentSubScreen=null,t.oViewModelPlace=null,t.setupSettings(),t}a()(e,n);var t=e.prototype;return t.setupSettings=function(e){void 0===e&&(e=null),e&&e()},t.onRoute=function(t){var e=this,n=null,i=null,o=null,a=null;if((i=s()(c.a).call(c.a,p.VIEW_MODELS.settings,function(e){return e&&e.__rlSettingsData&&t===e.__rlSettingsData.Route}))&&(s()(c.a).call(c.a,p.VIEW_MODELS["settings-removed"],function(e){return e&&e===i})&&(i=null),i&&s()(c.a).call(c.a,p.VIEW_MODELS["settings-disabled"],function(e){return e&&e===i})&&(i=null)),i){if(i.__builded&&i.__vm)n=i.__vm;else if((o=this.oViewModelPlace)&&1===o.length){n=new i,(a=u()("<div></div>").addClass("rl-settings-view-model").hide()).appendTo(o),n.viewModelDom=a,n.__rlSettingsData=i.__rlSettingsData,i.__dom=a,i.__builded=!0,i.__vm=n;var r={name:i.__rlSettingsData.Template};d.a.applyBindingAccessorsToNode(a[0],{translatorInit:!0,template:function(){return r}},n),Object(f.delegateRun)(n,"onBuild",[a])}else Object(f.log)("Cannot find sub settings view model position: SettingsSubScreen");n&&c.a.defer(function(){e.oCurrentSubScreen&&(Object(f.delegateRun)(e.oCurrentSubScreen,"onHide"),e.oCurrentSubScreen.viewModelDom.hide()),e.oCurrentSubScreen=n,e.oCurrentSubScreen&&(Object(f.delegateRun)(e.oCurrentSubScreen,"onBeforeShow"),e.oCurrentSubScreen.viewModelDom.show(),Object(f.delegateRun)(e.oCurrentSubScreen,"onShow"),Object(f.delegateRun)(e.oCurrentSubScreen,"onShowWithDelay",[],200),c.a.each(e.menu(),function(e){e.selected(n&&n.__rlSettingsData&&e.route===n.__rlSettingsData.Route)}),u()("#rl-content .b-settings .b-content .content").scrollTop(0)),Object(f.windowResize)()})}else Object(m.setHash)(Object(h.z)(),!1,!0)},t.onHide=function(){this.oCurrentSubScreen&&this.oCurrentSubScreen.viewModelDom&&(Object(f.delegateRun)(this.oCurrentSubScreen,"onHide"),this.oCurrentSubScreen.viewModelDom.hide())},t.onBuild=function(){var e=this;c.a.each(p.VIEW_MODELS.settings,function(t){t&&t.__rlSettingsData&&!s()(c.a).call(c.a,p.VIEW_MODELS["settings-removed"],function(e){return e&&e===t})&&e.menu.push({route:t.__rlSettingsData.Route,label:t.__rlSettingsData.Label,selected:d.a.observable(!1),disabled:!!s()(c.a).call(c.a,p.VIEW_MODELS["settings-disabled"],function(e){return e&&e===t})})}),this.oViewModelPlace=u()("#rl-content #rl-settings-subscreen")},t.routes=function(){var e=s()(c.a).call(c.a,p.VIEW_MODELS.settings,function(e){return e&&e.__rlSettingsData&&e.__rlSettingsData.IsDefault}),n=e&&e.__rlSettingsData?e.__rlSettingsData.Route:"general",t={subname:/^(.*)$/,normalize_:function(e,t){return t.subname=Object(f.isUnd)(t.subname)?n:Object(f.pString)(t.subname),[t.subname]}};return[["{subname}/",t],["{subname}",t],["",t]]},e}(n(136).a)},function(e,t,i){"use strict";i.d(t,"a",function(){return N});i(75),i(55),i(94),i(135);var n=i(30),o=i.n(n),a=i(10),r=i.n(a),s=i(4),c=i.n(s),l=i(8),u=i.n(l),d=i(3),p=i.n(d),f=i(1),h=i(21),m=i.n(h),g=i(138),b=i.n(g),v=i(6),y=i(2),S=i(0),O=i(15),w=i(9),T=i(24),C=i(5),A=i(70),E=i(115),F=i(29),j=i(7),N=function(e){function t(n){var i;return(i=e.call(this)||this).googlePreviewSupportedCache=null,i.isLocalAutocomplete=!0,i.iframe=null,i.lastErrorTime=0,i.iframe=u()('<iframe class="internal-hiddden" />').appendTo("body"),v.$win.on("error",function(e){if(e&&e.originalEvent&&e.originalEvent.message&&-1===Object(y.inArray)(e.originalEvent.message,["Script error.","Uncaught Error: Error calling method on NPObject."])){var t=Object(y.timestamp)();if(i.lastErrorTime>=t)return;i.lastErrorTime=t,n.jsError(y.noop,e.originalEvent.message,e.originalEvent.filename,e.originalEvent.lineno,c.a.location&&c.a.location.toString?c.a.location.toString():"",v.$html.attr("class"),Object(y.microtime)()-v.startMicrotime)}}),v.$win.on("resize",function(){T.a("window.resize")}),T.b("window.resize",p.a.throttle(function(){var e=v.$win.height(),t=v.$win.height();v.$win.__sizes[0]===e&&v.$win.__sizes[1]===t||(v.$win.__sizes[0]=e,v.$win.__sizes[1]=t,T.a("window.resize.real"))},S.Magics.Time50ms)),v.$doc.on("keydown",function(e){e&&e.ctrlKey&&v.$html.addClass("rl-ctrl-key-pressed")}).on("keyup",function(e){e&&!e.ctrlKey&&v.$html.removeClass("rl-ctrl-key-pressed")}),v.$doc.on("mousemove keypress click",p.a.debounce(function(){T.a("rl.auto-logout-refresh")},S.Magics.Time5s)),m()("esc, enter",S.KeyState.All,function(){Object(y.detectDropdownVisibility)()}),i}r()(t,e);var n=t.prototype;return n.remote=function(){return null},n.data=function(){return null},n.getApplicationConfiguration=function(e,t){return this.applicationConfiguration[e]||t},n.download=function(e){if(v.sUserAgent&&(-1<o()(v.sUserAgent).call(v.sUserAgent,"chrome")||-1<o()(v.sUserAgent).call(v.sUserAgent,"chrome"))){var t=c.a.document.createElement("a");if(t.href=e,c.a.document&&c.a.document.createEvent){var n=c.a.document.createEvent.MouseEvents;if(n&&n.initEvent&&t.dispatchEvent)return n.initEvent("click",!0,!0),t.dispatchEvent(n),!0}}return v.bMobileDevice?(c.a.open(e,"_self"),c.a.focus()):this.iframe.attr("src",e),!0},n.googlePreviewSupported=function(){return null===this.googlePreviewSupportedCache&&(this.googlePreviewSupportedCache=!!C.settingsGet("AllowGoogleSocial")&&!!C.settingsGet("AllowGoogleSocialPreview")),this.googlePreviewSupportedCache},n.setWindowTitle=function(e){e=Object(y.isNormal)(e)&&0<e.length?""+e:"",C.settingsGet("Title")&&(e+=(e?" - ":"")+C.settingsGet("Title")),c.a.document.title=e+" ...",c.a.document.title=e},n.redirectToAdminPanel=function(){p.a.delay(function(){c.a.location.href=Object(O.x)()},S.Magics.Time100ms)},n.clearClientSideToken=function(){c.a.__rlah_clear&&c.a.__rlah_clear()},n.setClientSideToken=function(e){c.a.__rlah_set&&(c.a.__rlah_set(e),C.settingsSet("AuthAccountHash",e),Object(O.v)())},n.loginAndLogoutReload=function(e,t,n){void 0===e&&(e=!1),void 0===t&&(t=!1),void 0===n&&(n=!1);var i=!!C.appSettingsGet("inIframe"),o=Object(y.pString)(C.appSettingsGet("customLogoutLink"));t&&this.clearClientSideToken(),t&&n&&c.a.close&&c.a.close(),o=o||(e?Object(O.x)():Object(O.y)()),t&&c.a.location.href!==o?p.a.delay(function(){i&&c.a.parent?c.a.parent.location.href=o:c.a.location.href=o,v.$win.trigger("rl.tooltips.diactivate")},S.Magics.Time100ms):(Object(j.routeOff)(),Object(j.setHash)(Object(O.w)(),!0),Object(j.routeOff)(),p.a.delay(function(){i&&c.a.parent?c.a.parent.location.reload():c.a.location.reload(),v.$win.trigger("rl.tooltips.diactivate")},S.Magics.Time100ms))},n.historyBack=function(){c.a.history.back()},n.bootstart=function(){T.a("rl.bootstart");var e=C.appSettingsGet("mobile");f.a.components.register("SaveTrigger",i(378).default),f.a.components.register("Input",i(379).default),f.a.components.register("Select",i(380).default),f.a.components.register("Radio",i(381).default),f.a.components.register("TextArea",i(382).default),f.a.components.register("Date",i(383).default),f.a.components.register("x-script",i(384).default),C.appSettingsGet("materialDesign")&&v.bAnimationSupported?f.a.components.register("Checkbox",i(385).default):f.a.components.register("Checkbox",i(203).default),f.a.components.register("CheckboxSimple",i(203).default),Object(w.initOnStartOrLangChange)(w.initNotificationLanguage),p.a.delay(y.windowResizeCallback,S.Magics.Time1s),T.b("ssm.mobile-enter",function(){Object(v.leftPanelDisabled)(!0)}),T.b("ssm.mobile-leave",function(){Object(v.leftPanelDisabled)(!1)}),e?(v.$html.addClass("ssm-state-mobile").addClass("rl-mobile"),T.a("ssm.mobile-enter")):(v.$html.addClass("rl-desktop"),b.a.addState({id:"mobile",query:"(max-width: 767px)",onEnter:function(){v.$html.addClass("ssm-state-mobile"),T.a("ssm.mobile-enter")},onLeave:function(){v.$html.removeClass("ssm-state-mobile"),T.a("ssm.mobile-leave")}}),b.a.addState({id:"tablet",query:"(min-width: 768px) and (max-width: 999px)",onEnter:function(){v.$html.addClass("ssm-state-tablet")},onLeave:function(){v.$html.removeClass("ssm-state-tablet")}}),b.a.addState({id:"desktop",query:"(min-width: 1000px) and (max-width: 1400px)",onEnter:function(){v.$html.addClass("ssm-state-desktop")},onLeave:function(){v.$html.removeClass("ssm-state-desktop")}}),b.a.addState({id:"desktop-large",query:"(min-width: 1401px)",onEnter:function(){v.$html.addClass("ssm-state-desktop-large")},onLeave:function(){v.$html.removeClass("ssm-state-desktop-large")}})),v.leftPanelDisabled.subscribe(function(e){v.$html.toggleClass("rl-left-panel-disabled",e),v.$html.toggleClass("rl-left-panel-enabled",!e)}),v.leftPanelType.subscribe(function(e){v.$html.toggleClass("rl-left-panel-none","none"===e),v.$html.toggleClass("rl-left-panel-short","short"===e)}),v.leftPanelDisabled.valueHasMutated(),A.a.populate(),E.a.populate(),F.a.populate()},t}(i(259).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return i});var i=function(){function e(){}return e.prototype.bootstart=function(){},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return b});n(183),n(55),n(226);var i=n(26),o=n.n(i),a=n(18),r=n.n(a),s=n(114),c=n.n(s),l=n(33),u=n.n(l),d=n(10),p=n.n(d),f=n(3),h=n.n(f),m=n(1),g=n(2),b=function(n){function e(e){var t;return(t=n.call(this)||this).values=m.a.observableArray([]),t.value=e.value,!Object(g.isUnd)(t.value)&&t.value.subscribe||(t.value=m.a.observable("")),t.inline=!Object(g.isUnd)(e.inline)&&e.inline,t.readOnly=!Object(g.isUnd)(e.readOnly)&&!!e.readOnly,c()(e)&&c()(t).call(t,r()(h.a).call(h.a,c()(e),function(e,t){return{label:e,value:t}})),t.click=o()(h.a).call(h.a,t.click,u()(t)),t}return p()(e,n),e.prototype.click=function(e){!this.readOnly&&e&&this.value(e.value)},e}(n(35).a)},function(e,t,n){e.exports=n(520)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(10),o=n.n(i),l=n(1),u=n(2),a=n(174),r=function(c){function e(e,t,n,i,o,a,r){var s;return void 0===n&&(n=null),void 0===i&&(i=!1),void 0===o&&(o=!1),void 0===a&&(a=""),void 0===r&&(r=""),(s=c.call(this,"ComposeAttachmentModel")||this).id=e,s.isInline=!!i,s.isLinked=!!o,s.CID=a,s.contentLocation=r,s.fromMessage=!1,s.fileName=l.a.observable(t),s.size=l.a.observable(n),s.tempName=l.a.observable(""),s.progress=l.a.observable(0),s.error=l.a.observable(""),s.waiting=l.a.observable(!0),s.uploading=l.a.observable(!1),s.enabled=l.a.observable(!0),s.complete=l.a.observable(!1),s.progressText=l.a.computed(function(){var e=s.progress();return 0===e?"":(98<e?100:e)+"%"}),s.progressStyle=l.a.computed(function(){var e=s.progress();return 0===e?"":"width:"+(98<e?100:e)+"%"}),s.title=l.a.computed(function(){var e=s.error();return""!==e?e:s.fileName()}),s.friendlySize=l.a.computed(function(){var e=s.size();return null===e?"":Object(u.friendlySize)(e)}),s.mimeType=l.a.computed(function(){return Object(u.mimeContentType)(s.fileName())}),s.fileExt=l.a.computed(function(){return Object(u.getFileExtension)(s.fileName())}),s.regDisposables([s.progressText,s.progressStyle,s.title,s.friendlySize,s.mimeType,s.fileExt]),s}o()(e,c);var t=e.prototype;return t.initByUploadJson=function(e){var t=!1;return e&&(this.fileName(e.Name),this.size(Object(u.isUnd)(e.Size)?0:Object(u.pInt)(e.Size)),this.tempName(Object(u.isUnd)(e.TempName)?"":e.TempName),t=!(this.isInline=!1)),t},t.iconClass=function(){return Object(a.d)(Object(a.c)(this.fileExt(),this.mimeType()))[0]},t.iconText=function(){return Object(a.d)(Object(a.c)(this.fileExt(),this.mimeType()))[1]},e}(n(63).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(10),o=n.n(i),s=n(1),c=n(0),l=n(2),u=n(9),a=function(r){function e(e,t,n,i,o){var a;return void 0===e&&(e=c.ContactPropertyType.Unknown),void 0===t&&(t=""),void 0===n&&(n=""),void 0===i&&(i=!1),void 0===o&&(o=""),(a=r.call(this,"ContactPropertyModel")||this).type=s.a.observable(Object(l.pInt)(e)),a.typeStr=s.a.observable(Object(l.pString)(t)),a.focused=s.a.observable(!!i),a.value=s.a.observable(Object(l.pString)(n)),a.placeholder=s.a.observable(o),a.placeholderValue=s.a.computed(function(){var e=a.placeholder();return e?Object(u.i18n)(e):""}),a.largeValue=s.a.computed(function(){return c.ContactPropertyType.Note===a.type()}),a.regDisposables([a.placeholderValue,a.largeValue]),a}return o()(e,r),e}(n(63).a)},,function(e,t,n){"use strict";var i=n(43),o=n(337).filter;i({target:"Array",proto:!0,forced:!n(340)("filter")},{filter:function(e){return o(this,e,1<arguments.length?arguments[1]:void 0)}})},function(e,t,n){"use strict";var i=n(132),c=n(36),o=n(51),l=n(345),u=n(133);i("search",1,function(i,r,s){return[function(e){var t=o(this),n=null==e?void 0:e[i];return void 0!==n?n.call(e,t):new RegExp(e)[i](String(t))},function(e){var t=s(r,e,this);if(t.done)return t.value;var n=c(e),i=String(this),o=n.lastIndex;l(o,0)||(n.lastIndex=0);var a=u(n,i);return l(n.lastIndex,o)||(n.lastIndex=o),null===a?-1:a.index}]})},function(e,t,n){"use strict";n.r(t),n.d(t,"FolderSystemPopupView",function(){return v}),n.d(t,"default",function(){return v});var i,o=n(10),a=n.n(o),r=n(3),s=n.n(r),c=n(1),l=n(0),u=n(25),d=n(2),p=n(9),f=n(11),h=n(5),m=n(16),g=n(7),b=n(27),v=Object(g.popup)({name:"View/Popup/FolderSystem",templateID:"PopupsFolderSystem"})(i=function(o){function e(){var e;(e=o.call(this)||this).sChooseOnText="",e.sUnuseText="",Object(p.initOnStartOrLangChange)(function(){e.sChooseOnText=Object(p.i18n)("POPUPS_SYSTEM_FOLDERS/SELECT_CHOOSE_ONE"),e.sUnuseText=Object(p.i18n)("POPUPS_SYSTEM_FOLDERS/SELECT_UNUSE_NAME")}),e.notification=c.a.observable(""),e.folderSelectList=c.a.computed(function(){return Object(d.folderListOptionsBuilder)([],f.a.folderList(),f.a.folderListSystemNames(),[["",e.sChooseOnText],[u.r,e.sUnuseText]],null,null,null,null,null,!0)}),e.sentFolder=f.a.sentFolder,e.draftFolder=f.a.draftFolder,e.spamFolder=f.a.spamFolder,e.trashFolder=f.a.trashFolder,e.archiveFolder=f.a.archiveFolder;var t=function(){h.settingsSet("SentFolder",f.a.sentFolder()),h.settingsSet("DraftFolder",f.a.draftFolder()),h.settingsSet("SpamFolder",f.a.spamFolder()),h.settingsSet("TrashFolder",f.a.trashFolder()),h.settingsSet("ArchiveFolder",f.a.archiveFolder())},n=s.a.debounce(function(){t(),m.a.saveSystemFolders(d.noop,{SentFolder:f.a.sentFolder(),DraftFolder:f.a.draftFolder(),SpamFolder:f.a.spamFolder(),TrashFolder:f.a.trashFolder(),ArchiveFolder:f.a.archiveFolder(),NullFolder:"NullFolder"})},l.Magics.Time1s),i=function(){t(),n()};return f.a.sentFolder.subscribe(i),f.a.draftFolder.subscribe(i),f.a.spamFolder.subscribe(i),f.a.trashFolder.subscribe(i),f.a.archiveFolder.subscribe(i),e.defautOptionsAfterRender=d.defautOptionsAfterRender,e}return a()(e,o),e.prototype.onShow=function(e){void 0===e&&(e=l.SetSystemFoldersNotification.None);var t="";switch(e){case l.SetSystemFoldersNotification.Sent:t=Object(p.i18n)("POPUPS_SYSTEM_FOLDERS/NOTIFICATION_SENT");break;case l.SetSystemFoldersNotification.Draft:t=Object(p.i18n)("POPUPS_SYSTEM_FOLDERS/NOTIFICATION_DRAFTS");break;case l.SetSystemFoldersNotification.Spam:t=Object(p.i18n)("POPUPS_SYSTEM_FOLDERS/NOTIFICATION_SPAM");break;case l.SetSystemFoldersNotification.Trash:t=Object(p.i18n)("POPUPS_SYSTEM_FOLDERS/NOTIFICATION_TRASH");break;case l.SetSystemFoldersNotification.Archive:t=Object(p.i18n)("POPUPS_SYSTEM_FOLDERS/NOTIFICATION_ARCHIVE")}this.notification(t)},e}(b.a))||i},function(e,t,n){"use strict";n.d(t,"a",function(){return u});n(55),n(121);var i=n(69),o=n.n(i),a=n(17),r=n.n(a),s=n(4),c=n.n(s),l=n(2),u=function(){function e(){r()(this,"oPromisesStack",{})}var t=e.prototype;return t.func=function(e){return e(),this},t.fastResolve=function(e){return c.a.Promise.resolve(e)},t.fastReject=function(e){return c.a.Promise.reject(e)},t.setTrigger=function(e,t){var n;e&&(t=!!t,o()(n=Object(l.isArray)(e)?e:[e]).call(n,function(e){e&&e(t)}))},e}()},function(e,t,i){"use strict";i.d(t,"a",function(){return C});i(135);var n=i(26),o=i.n(n),a=i(33),r=i.n(a),s=i(10),c=i.n(s),l=i(3),u=i.n(l),d=i(1),p=i(21),f=i.n(p),h=i(31),m=i(46),g=i(13),b=i(0),v=i(2),y=i(15),S=i(24),O=i(5),w=i(22),T=i(7),C=function(t){function e(){var e;return(e=t.call(this)||this).logoImg=Object(v.trim)(O.settingsGet("UserLogo")),e.logoTitle=Object(v.trim)(O.settingsGet("UserLogoTitle")),e.mobile=!!O.appSettingsGet("mobile"),e.mobileDevice=!!O.appSettingsGet("mobileDevice"),e.allowSettings=!!O.capa(b.Capa.Settings),e.allowHelp=!!O.capa(b.Capa.Help),e.currentAudio=h.a.currentAudio,e.accountEmail=m.a.email,e.accounts=m.a.accounts,e.accountsUnreadCount=m.a.accountsUnreadCount,e.accountMenuDropdownTrigger=d.a.observable(!1),e.capaAdditionalAccounts=d.a.observable(O.capa(b.Capa.AdditionalAccounts)),e.addAccountClick=o()(u.a).call(u.a,e.addAccountClick,r()(e)),S.b("audio.stop",function(){return h.a.currentAudio("")}),S.b("audio.start",function(e){return h.a.currentAudio(e)}),e}c()(e,t);var n=e.prototype;return n.stopPlay=function(){S.a("audio.api.stop")},n.accountClick=function(e,t){return e&&t&&!Object(v.isUnd)(t.which)&&1===t.which&&(m.a.accounts.loading(!0),u.a.delay(function(){return m.a.accounts.loading(!1)},b.Magics.Time1s)),!0},n.emailTitle=function(){return m.a.email()},n.settingsClick=function(){O.capa(b.Capa.Settings)&&Object(T.setHash)(Object(y.z)())},n.settingsHelp=function(){O.capa(b.Capa.Help)&&Object(T.showScreenPopup)(i(403))},n.addAccountClick=function(){this.capaAdditionalAccounts()&&Object(T.showScreenPopup)(i(376))},n.logoutClick=function(){Object(w.a)().logout()},n.onBuild=function(){var e=this;f()("`",[b.KeyState.MessageList,b.KeyState.MessageView,b.KeyState.Settings],function(){e.viewModelVisibility()&&(g.a.messageFullScreenMode(!1),e.accountMenuDropdownTrigger(!0))}),f()("shift+/",[b.KeyState.MessageList,b.KeyState.MessageView,b.KeyState.Settings],function(){return!e.viewModelVisibility()||(Object(T.showScreenPopup)(i(403)),!1)})},e}(i(27).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return S});n(75),n(55),n(94);var i=n(12),f=n.n(i),o=n(26),s=n.n(o),a=n(34),h=n.n(a),r=n(17),m=n.n(r),c=n(8),l=n.n(c),u=n(3),g=n.n(u),d=n(21),p=n.n(d),b=n(1),v=n(0),y=n(2),S=function(){function e(e,t,n,i,o,a,r){var c=this;m()(this,"list",void 0),m()(this,"listChecked",void 0),m()(this,"isListChecked",void 0),m()(this,"focusedItem",void 0),m()(this,"selectedItem",void 0),m()(this,"itemSelectedThrottle",void 0),m()(this,"selectedItemUseCallback",!0),m()(this,"iSelectNextHelper",0),m()(this,"iFocusedNextHelper",0),m()(this,"oContentVisible",void 0),m()(this,"oContentScrollable",void 0),m()(this,"sItemSelector",void 0),m()(this,"sItemSelectedSelector",void 0),m()(this,"sItemCheckedSelector",void 0),m()(this,"sItemFocusedSelector",void 0),m()(this,"sLastUid",""),m()(this,"oCallbacks",{}),this.list=e,this.listChecked=b.a.computed(function(){return h()(g.a).call(g.a,c.list(),function(e){return e.checked()})}).extend({rateLimit:0}),this.isListChecked=b.a.computed(function(){return 0<c.listChecked().length}),this.focusedItem=n||b.a.observable(null),this.selectedItem=t||b.a.observable(null),this.itemSelectedThrottle=g.a.debounce(s()(g.a).call(g.a,this.itemSelected,this),300),this.listChecked.subscribe(function(e){0<e.length?null===c.selectedItem()?c.selectedItem.valueHasMutated&&c.selectedItem.valueHasMutated():c.selectedItem(null):c.autoSelect()&&c.focusedItem()&&c.selectedItem(c.focusedItem())},this),this.selectedItem.subscribe(function(e){e?(c.isListChecked()&&g.a.each(c.listChecked(),function(e){e.checked(!1)}),c.selectedItemUseCallback&&c.itemSelectedThrottle(e)):c.selectedItemUseCallback&&c.itemSelected(null)},this),this.selectedItem=this.selectedItem.extend({toggleSubscribeProperty:[this,"selected"]}),this.focusedItem=this.focusedItem.extend({toggleSubscribeProperty:[null,"focused"]}),this.sItemSelector=i,this.sItemSelectedSelector=o,this.sItemCheckedSelector=a,this.sItemFocusedSelector=r,this.focusedItem.subscribe(function(e){e&&(c.sLastUid=c.getItemUid(e))},this);var l=[],u=[],d=null,p=null;this.list.subscribe(function(e){Object(y.isArray)(e)&&g.a.each(e,function(e){if(e){var t=c.getItemUid(e);l.push(t),e.checked()&&u.push(t),null===d&&e.focused()&&(d=t),null===p&&e.selected()&&(p=t)}})},this,"beforeChange"),this.list.subscribe(function(e){var t=null,n=!1,i=d,o=!1,a=!1,r=0,s=[];c.selectedItemUseCallback=!1,c.focusedItem(null),c.selectedItem(null),Object(y.isArray)(e)&&(r=u.length,g.a.each(e,function(e){var t=c.getItemUid(e);s.push(t),null!==d&&d===t&&(c.focusedItem(e),d=null),0<r&&-1<Object(y.inArray)(t,u)&&(o=!0,e.checked(!0),r-=1),o||null===p||p!==t||(a=!0,c.selectedItem(e),p=null)}),c.selectedItemUseCallback=!0,o||a||!c.autoSelect()||(c.focusedItem()?c.selectedItem(c.focusedItem()):0<e.length&&(null!==i&&(n=!1,(i=f()(g.a).call(g.a,l,function(e){return n&&-1<Object(y.inArray)(e,s)?e:(i===e&&(n=!0),!1)}))&&(t=f()(g.a).call(g.a,e,function(e){return i===c.getItemUid(e)}))),c.selectedItem(t||null),c.focusedItem(c.selectedItem()))),(0!==c.iSelectNextHelper||0!==c.iFocusedNextHelper)&&0<e.length&&!c.focusedItem()&&(t=null,0!==c.iFocusedNextHelper&&(t=e[-1===c.iFocusedNextHelper?e.length-1:0]||null),t||0===c.iSelectNextHelper||(t=e[-1===c.iSelectNextHelper?e.length-1:0]||null),t&&(0!==c.iSelectNextHelper&&c.selectedItem(t||null),c.focusedItem(t||null),c.scrollToFocused(),g.a.delay(function(){return c.scrollToFocused()},100)),c.iSelectNextHelper=0,c.iFocusedNextHelper=0)),l=[],u=[],p=d=null})}var t=e.prototype;return t.itemSelected=function(e){this.isListChecked()?e||(this.oCallbacks.onItemSelect||y.noop)(e||null):e&&(this.oCallbacks.onItemSelect||y.noop)(e)},t.goDown=function(e){this.newSelectPosition(v.EventKeyCode.Down,!1,e)},t.goUp=function(e){this.newSelectPosition(v.EventKeyCode.Up,!1,e)},t.unselect=function(){this.selectedItem(null),this.focusedItem(null)},t.init=function(e,t,n){var i=this;void 0===n&&(n="all"),this.oContentVisible=e,this.oContentScrollable=t,this.oContentVisible&&this.oContentScrollable&&(l()(this.oContentVisible).on("selectstart",function(e){e&&e.preventDefault&&e.preventDefault()}).on("click",this.sItemSelector,function(e){i.actionClick(b.a.dataFor(e.currentTarget),e)}).on("click",this.sItemCheckedSelector,function(e){var t=b.a.dataFor(e.currentTarget);t&&(e&&e.shiftKey?i.actionClick(t,e):(i.focusedItem(t),t.checked(!t.checked())))}),p()("enter",n,function(){return!(i.focusedItem()&&!i.focusedItem().selected())||(i.actionClick(i.focusedItem()),!1)}),p()("ctrl+up, command+up, ctrl+down, command+down",n,function(){return!1}),p()("up, shift+up, down, shift+down, home, end, pageup, pagedown, insert, space",n,function(e,t){if(e&&t&&t.shortcut){var n=0;switch(t.shortcut){case"up":case"shift+up":n=v.EventKeyCode.Up;break;case"down":case"shift+down":n=v.EventKeyCode.Down;break;case"insert":n=v.EventKeyCode.Insert;break;case"space":n=v.EventKeyCode.Space;break;case"home":n=v.EventKeyCode.Home;break;case"end":n=v.EventKeyCode.End;break;case"pageup":n=v.EventKeyCode.PageUp;break;case"pagedown":n=v.EventKeyCode.PageDown}if(0<n)return i.newSelectPosition(n,p.a.shift),!1}return!0}))},t.autoSelect=function(){return!!(this.oCallbacks.onAutoSelect||y.noopTrue)()},t.doUpUpOrDownDown=function(e){(this.oCallbacks.onUpUpOrDownDown||y.noopTrue)(!!e)},t.getItemUid=function(e){var t="",n=this.oCallbacks.onItemGetUid||null;return n&&e&&(t=n(e)),t.toString()},t.newSelectPosition=function(t,e,n){var i=0,o=!1,a=!1,r=null,s=this.list(),c=s?s.length:0,l=this.focusedItem();if(0<c)if(l){if(l)if(v.EventKeyCode.Down===t||v.EventKeyCode.Up===t||v.EventKeyCode.Insert===t||v.EventKeyCode.Space===t)g.a.each(s,function(e){if(!a)switch(t){case v.EventKeyCode.Up:l===e?a=!0:r=e;break;case v.EventKeyCode.Down:case v.EventKeyCode.Insert:o?(r=e,a=!0):l===e&&(o=!0)}}),r||v.EventKeyCode.Down!==t&&v.EventKeyCode.Up!==t||this.doUpUpOrDownDown(v.EventKeyCode.Up===t);else if(v.EventKeyCode.Home===t||v.EventKeyCode.End===t)v.EventKeyCode.Home===t?r=s[0]:v.EventKeyCode.End===t&&(r=s[s.length-1]);else if(v.EventKeyCode.PageDown===t){for(;i<c;i++)if(l===s[i]){r=s[i=c-1<(i+=10)?c-1:i];break}}else if(v.EventKeyCode.PageUp===t)for(i=c;0<=i;i--)if(l===s[i]){r=s[i=(i-=10)<0?0:i];break}}else v.EventKeyCode.Down===t||v.EventKeyCode.Insert===t||v.EventKeyCode.Space===t||v.EventKeyCode.Home===t||v.EventKeyCode.PageUp===t?r=s[0]:v.EventKeyCode.Up!==t&&v.EventKeyCode.End!==t&&v.EventKeyCode.PageDown!==t||(r=s[s.length-1]);r?(this.focusedItem(r),l&&(e?v.EventKeyCode.Up!==t&&v.EventKeyCode.Down!==t||l.checked(!l.checked()):v.EventKeyCode.Insert!==t&&v.EventKeyCode.Space!==t||l.checked(!l.checked())),!this.autoSelect()&&!n||this.isListChecked()||v.EventKeyCode.Space===t||this.selectedItem(r),this.scrollToFocused()):l&&((!e||v.EventKeyCode.Up!==t&&v.EventKeyCode.Down!==t)&&v.EventKeyCode.Insert!==t&&v.EventKeyCode.Space!==t||l.checked(!l.checked()),this.focusedItem(l))},t.scrollToFocused=function(){if(!this.oContentVisible||!this.oContentScrollable)return!1;var e=this.list(),t=l()(this.sItemFocusedSelector,this.oContentScrollable),n=t.position(),i=this.oContentVisible.height(),o=t.outerHeight();return e&&e[0]&&e[0].focused()?(this.oContentScrollable.scrollTop(0),!0):!(!n||!(n.top<0||n.top+o>i))&&(this.oContentScrollable.scrollTop(n.top<0?this.oContentScrollable.scrollTop()+n.top-20:this.oContentScrollable.scrollTop()+n.top-i+o+20),!0)},t.scrollToTop=function(e){return void 0===e&&(e=!1),!(!this.oContentVisible||!this.oContentScrollable)&&(e||this.oContentScrollable.scrollTop()<50?this.oContentScrollable.scrollTop(0):this.oContentScrollable.stop().animate({scrollTop:0},200),!0)},t.eventClickFunction=function(e,t){var n=0,i=0,o=!1,a=!1,r=[],s=!1,c=null,l="",u=this.getItemUid(e);if(t&&t.shiftKey&&""!==u&&""!==this.sLastUid&&u!==this.sLastUid)for(r=this.list(),s=e.checked(),n=0,i=r.length;n<i;n++)c=r[n],o=!1,(l=this.getItemUid(c))!==this.sLastUid&&l!==u||(o=!0),o&&(a=!a),(a||o)&&c.checked(s);this.sLastUid=""===u?"":u},t.actionClick=function(e,t){if(void 0===t&&(t=null),e){var n=!0;t&&(!t.shiftKey||t.ctrlKey||t.metaKey||t.altKey?!t.ctrlKey&&!t.metaKey||t.shiftKey||t.altKey||(n=!1,this.focusedItem(e),this.selectedItem()&&e!==this.selectedItem()&&this.selectedItem().checked(!0),e.checked(!e.checked())):(n=!1,""===this.sLastUid&&(this.sLastUid=this.getItemUid(e)),e.checked(!e.checked()),this.eventClickFunction(e,t),this.focusedItem(e))),n&&this.selectMessageItem(e)}},t.on=function(e,t){this.oCallbacks[e]=t},t.selectMessageItem=function(e){this.focusedItem(e),this.selectedItem(e),this.scrollToFocused()},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return M});n(76),n(48),n(56);var i=n(12),o=n.n(i),a=n(157),r=n.n(a),s=n(205),c=n.n(s),l=n(18),u=n.n(l),d=n(10),p=n.n(d),f=n(3),h=n.n(f),m=n(8),g=n.n(m),b=n(1),v=n(98),y=n.n(v),S=n(414),O=n.n(S),w=n(415),T=n.n(w),C=n(0),A=n(9),E=n(25),F=n(2),j=n(6),N=n(15),R=n(11),I=n(41),L=n(62),P=n(174),M=function(t){function n(){var e;return(e=t.call(this,"MessageModel")||this).folderFullNameRaw="",e.uid="",e.hash="",e.requestHash="",e.subject=b.a.observable(""),e.subjectPrefix=b.a.observable(""),e.subjectSuffix=b.a.observable(""),e.size=b.a.observable(0),e.dateTimeStampInUTC=b.a.observable(0),e.priority=b.a.observable(C.MessagePriority.Normal),e.proxy=!1,e.fromEmailString=b.a.observable(""),e.fromClearEmailString=b.a.observable(""),e.toEmailsString=b.a.observable(""),e.toClearEmailsString=b.a.observable(""),e.senderEmailsString=b.a.observable(""),e.senderClearEmailsString=b.a.observable(""),e.emails=[],e.from=[],e.to=[],e.cc=[],e.bcc=[],e.replyTo=[],e.deliveredTo=[],e.unsubsribeLinks=[],e.newForAnimation=b.a.observable(!1),e.deleted=b.a.observable(!1),e.deletedMark=b.a.observable(!1),e.unseen=b.a.observable(!1),e.flagged=b.a.observable(!1),e.answered=b.a.observable(!1),e.forwarded=b.a.observable(!1),e.isReadReceipt=b.a.observable(!1),e.focused=b.a.observable(!1),e.selected=b.a.observable(!1),e.checked=b.a.observable(!1),e.hasAttachments=b.a.observable(!1),e.attachmentsSpecData=b.a.observableArray([]),e.attachmentIconClass=b.a.computed(function(){return Object(P.b)(e.hasAttachments()?e.attachmentsSpecData():[])}),e.body=null,e.isHtml=b.a.observable(!1),e.hasImages=b.a.observable(!1),e.attachments=b.a.observableArray([]),e.isPgpSigned=b.a.observable(!1),e.isPgpEncrypted=b.a.observable(!1),e.pgpSignedVerifyStatus=b.a.observable(C.SignedVerifyStatus.None),e.pgpSignedVerifyUser=b.a.observable(""),e.priority=b.a.observable(C.MessagePriority.Normal),e.readReceipt=b.a.observable(""),e.aDraftInfo=[],e.sMessageId="",e.sInReplyTo="",e.sReferences="",e.hasUnseenSubMessage=b.a.observable(!1),e.hasFlaggedSubMessage=b.a.observable(!1),e.threads=b.a.observableArray([]),e.threadsLen=b.a.computed(function(){return e.threads().length}),e.isImportant=b.a.computed(function(){return C.MessagePriority.High===e.priority()}),e.regDisposables([e.attachmentIconClass,e.threadsLen,e.isImportant]),e}p()(n,t),n.newInstanceFromJson=function(e){var t=new n;return t.initByJson(e)?t:null};var e=n.prototype;return e.clear=function(){this.folderFullNameRaw="",this.uid="",this.hash="",this.requestHash="",this.subject(""),this.subjectPrefix(""),this.subjectSuffix(""),this.size(0),this.dateTimeStampInUTC(0),this.priority(C.MessagePriority.Normal),this.proxy=!1,this.fromEmailString(""),this.fromClearEmailString(""),this.toEmailsString(""),this.toClearEmailsString(""),this.senderEmailsString(""),this.senderClearEmailsString(""),this.emails=[],this.from=[],this.to=[],this.cc=[],this.bcc=[],this.replyTo=[],this.deliveredTo=[],this.unsubsribeLinks=[],this.newForAnimation(!1),this.deleted(!1),this.deletedMark(!1),this.unseen(!1),this.flagged(!1),this.answered(!1),this.forwarded(!1),this.isReadReceipt(!1),this.selected(!1),this.checked(!1),this.hasAttachments(!1),this.attachmentsSpecData([]),this.body=null,this.isHtml(!1),this.hasImages(!1),this.attachments([]),this.isPgpSigned(!1),this.isPgpEncrypted(!1),this.pgpSignedVerifyStatus(C.SignedVerifyStatus.None),this.pgpSignedVerifyUser(""),this.priority(C.MessagePriority.Normal),this.readReceipt(""),this.aDraftInfo=[],this.sMessageId="",this.sInReplyTo="",this.sReferences="",this.threads([]),this.hasUnseenSubMessage(!1),this.hasFlaggedSubMessage(!1)},e.getEmails=function(e){var n=this;return h.a.compact(h.a.uniq(u()(h.a).call(h.a,c()(h.a).call(h.a,e,function(e,t){return r()(e).call(e,n[t])},[]),function(e){return e?e.email:""})))},e.getRecipientsEmails=function(){return this.getEmails(["to","cc"])},e.friendlySize=function(){return Object(F.friendlySize)(this.size())},e.computeSenderEmail=function(){var e=R.a.sentFolder(),t=R.a.draftFolder();this.senderEmailsString(this.folderFullNameRaw===e||this.folderFullNameRaw===t?this.toEmailsString():this.fromEmailString()),this.senderClearEmailsString(this.folderFullNameRaw===e||this.folderFullNameRaw===t?this.toClearEmailsString():this.fromClearEmailString())},e.initByJson=function(e){var t=!1,n=C.MessagePriority.Normal;return e&&"Object/Message"===e["@Object"]&&(n=Object(F.pInt)(e.Priority),this.priority(-1<Object(F.inArray)(n,[C.MessagePriority.High,C.MessagePriority.Low])?n:C.MessagePriority.Normal),this.folderFullNameRaw=e.Folder,this.uid=e.Uid,this.hash=e.Hash,this.requestHash=e.RequestHash,this.proxy=!!e.ExternalProxy,this.size(Object(F.pInt)(e.Size)),this.from=Object(L.a)(e.From),this.to=Object(L.a)(e.To),this.cc=Object(L.a)(e.Cc),this.bcc=Object(L.a)(e.Bcc),this.replyTo=Object(L.a)(e.ReplyTo),this.deliveredTo=Object(L.a)(e.DeliveredTo),this.unsubsribeLinks=Object(F.isNonEmptyArray)(e.UnsubsribeLinks)?e.UnsubsribeLinks:[],this.subject(e.Subject),Object(F.isArray)(e.SubjectParts)?(this.subjectPrefix(e.SubjectParts[0]),this.subjectSuffix(e.SubjectParts[1])):(this.subjectPrefix(""),this.subjectSuffix(this.subject())),this.dateTimeStampInUTC(Object(F.pInt)(e.DateTimeStampInUTC)),this.hasAttachments(!!e.HasAttachments),this.attachmentsSpecData(Object(F.isArray)(e.AttachmentsSpecData)?e.AttachmentsSpecData:[]),this.fromEmailString(Object(L.b)(this.from,!0)),this.fromClearEmailString(Object(L.c)(this.from)),this.toEmailsString(Object(L.b)(this.to,!0)),this.toClearEmailsString(Object(L.c)(this.to)),this.threads(Object(F.isArray)(e.Threads)?e.Threads:[]),this.initFlagsByJson(e),this.computeSenderEmail(),t=!0),t},e.initUpdateByMessageJson=function(e){var t=!1,n=C.MessagePriority.Normal;return e&&"Object/Message"===e["@Object"]&&(n=Object(F.pInt)(e.Priority),this.priority(-1<Object(F.inArray)(n,[C.MessagePriority.High,C.MessagePriority.Low])?n:C.MessagePriority.Normal),this.aDraftInfo=e.DraftInfo,this.sMessageId=e.MessageId,this.sInReplyTo=e.InReplyTo,this.sReferences=e.References,this.proxy=!!e.ExternalProxy,I.a.capaOpenPGP()&&(this.isPgpSigned(!!e.PgpSigned),this.isPgpEncrypted(!!e.PgpEncrypted)),this.hasAttachments(!!e.HasAttachments),this.attachmentsSpecData(Object(F.isArray)(e.AttachmentsSpecData)?e.AttachmentsSpecData:[]),this.foundedCIDs=Object(F.isArray)(e.FoundedCIDs)?e.FoundedCIDs:[],this.attachments(this.initAttachmentsFromJson(e.Attachments)),this.readReceipt(e.ReadReceipt||""),this.computeSenderEmail(),t=!0),t},e.initAttachmentsFromJson=function(e){var t=0,n=0,i=null,o=[];if(e&&"Collection/AttachmentCollection"===e["@Object"]&&Object(F.isNonEmptyArray)(e["@Collection"]))for(t=0,n=e["@Collection"].length;t<n;t++)(i=P.a.newInstanceFromJson(e["@Collection"][t]))&&(""!==i.cidWithOutTags&&0<this.foundedCIDs.length&&0<=Object(F.inArray)(i.cidWithOutTags,this.foundedCIDs)&&(i.isLinked=!0),o.push(i));return o},e.hasUnsubsribeLinks=function(){return this.unsubsribeLinks&&0<this.unsubsribeLinks.length},e.getFirstUnsubsribeLink=function(){return this.unsubsribeLinks&&0<this.unsubsribeLinks.length&&this.unsubsribeLinks[0]||""},e.initFlagsByJson=function(e){var t=!1;return e&&"Object/Message"===e["@Object"]&&(this.unseen(!e.IsSeen),this.flagged(!!e.IsFlagged),this.answered(!!e.IsAnswered),this.forwarded(!!e.IsForwarded),this.isReadReceipt(!!e.IsReadReceipt),this.deletedMark(!!e.IsDeleted),t=!0),t},e.fromToLine=function(e,t){return void 0===t&&(t=!1),Object(L.b)(this.from,e,t)},e.fromDkimData=function(){var e=["none",""];return Object(F.isNonEmptyArray)(this.from)&&1===this.from.length&&this.from[0]&&this.from[0].dkimStatus&&(e=[this.from[0].dkimStatus,this.from[0].dkimValue||""]),e},e.toToLine=function(e,t){return void 0===t&&(t=!1),Object(L.b)(this.to,e,t)},e.ccToLine=function(e,t){return void 0===t&&(t=!1),Object(L.b)(this.cc,e,t)},e.bccToLine=function(e,t){return void 0===t&&(t=!1),Object(L.b)(this.bcc,e,t)},e.replyToToLine=function(e,t){return void 0===t&&(t=!1),Object(L.b)(this.replyTo,e,t)},e.lineAsCss=function(){return O()({deleted:this.deleted(),"deleted-mark":this.deletedMark(),selected:this.selected(),checked:this.checked(),flagged:this.flagged(),unseen:this.unseen(),answered:this.answered(),forwarded:this.forwarded(),focused:this.focused(),important:this.isImportant(),withAttachments:this.hasAttachments(),new:this.newForAnimation(),emptySubject:""===this.subject(),hasUnseenSubMessage:this.hasUnseenSubMessage(),hasFlaggedSubMessage:this.hasFlaggedSubMessage()})},e.hasVisibleAttachments=function(){return!!o()(h.a).call(h.a,this.attachments(),function(e){return!e.isLinked})},e.findAttachmentByCid=function(t){var e=null,n=this.attachments();return Object(F.isNonEmptyArray)(n)&&(t=t.replace(/^<+/,"").replace(/>+$/,""),e=o()(h.a).call(h.a,n,function(e){return t===e.cidWithOutTags})),e||null},e.findAttachmentByContentLocation=function(t){var e=null,n=this.attachments();return Object(F.isNonEmptyArray)(n)&&(e=o()(h.a).call(h.a,n,function(e){return t===e.contentLocation})),e||null},e.messageId=function(){return this.sMessageId},e.inReplyTo=function(){return this.sInReplyTo},e.references=function(){return this.sReferences},e.fromAsSingleEmail=function(){return Object(F.isArray)(this.from)&&this.from[0]?this.from[0].email:""},e.viewLink=function(){return Object(N.q)(this.requestHash)},e.downloadLink=function(){return Object(N.p)(this.requestHash)},e.replyEmails=function(e,t){void 0===t&&(t=!1);var n=[],i=Object(F.isUnd)(e)?{}:e;return Object(L.d)(this.replyTo,i,n),0===n.length&&Object(L.d)(this.from,i,n),0!==n.length||t?n:this.replyEmails({},!0)},e.replyAllEmails=function(e,t){void 0===t&&(t=!1);var n=[],i=[],o=Object(F.isUnd)(e)?{}:e;return Object(L.d)(this.replyTo,o,n),0===n.length&&Object(L.d)(this.from,o,n),Object(L.d)(this.to,o,n),Object(L.d)(this.cc,o,i),0!==n.length||t?[n,i]:[this.replyAllEmails({},!0)[0],i]},e.textBodyToString=function(){return this.body?this.body.html():""},e.attachmentsToStringLine=function(){var e=u()(h.a).call(h.a,this.attachments(),function(e){return e.fileName+" ("+e.friendlySize+")"});return e&&0<e.length?e.join(", "):""},e.viewPopupMessage=function(e){void 0===e&&(e=!1),this.showLazyExternalImagesInBody();var t=this.dateTimeStampInUTC()||0,n=this.ccToLine(!1),i=0<t?y.a.unix(t):null;Object(F.previewMessage)({title:this.subject(),subject:this.subject(),date:i?i.format("LLL"):"",fromCreds:this.fromToLine(!1),toLabel:Object(A.i18n)("MESSAGE/LABEL_TO"),toCreds:this.toToLine(!1),ccClass:n?"":"rl-preview-hide",ccLabel:Object(A.i18n)("MESSAGE/LABEL_CC"),ccCreds:n},this.body,this.isHtml(),e)},e.printMessage=function(){this.viewPopupMessage(!0)},e.generateUid=function(){return this.folderFullNameRaw+"/"+this.uid},e.populateByMessageListItem=function(e){return e&&(this.folderFullNameRaw=e.folderFullNameRaw,this.uid=e.uid,this.hash=e.hash,this.requestHash=e.requestHash,this.subject(e.subject())),this.subjectPrefix(this.subjectPrefix()),this.subjectSuffix(this.subjectSuffix()),e&&(this.size(e.size()),this.dateTimeStampInUTC(e.dateTimeStampInUTC()),this.priority(e.priority()),this.proxy=e.proxy,this.fromEmailString(e.fromEmailString()),this.fromClearEmailString(e.fromClearEmailString()),this.toEmailsString(e.toEmailsString()),this.toClearEmailsString(e.toClearEmailsString()),this.emails=e.emails,this.from=e.from,this.to=e.to,this.cc=e.cc,this.bcc=e.bcc,this.replyTo=e.replyTo,this.deliveredTo=e.deliveredTo,this.unsubsribeLinks=e.unsubsribeLinks,this.unseen(e.unseen()),this.flagged(e.flagged()),this.answered(e.answered()),this.forwarded(e.forwarded()),this.isReadReceipt(e.isReadReceipt()),this.deletedMark(e.deletedMark()),this.priority(e.priority()),this.selected(e.selected()),this.checked(e.checked()),this.hasAttachments(e.hasAttachments()),this.attachmentsSpecData(e.attachmentsSpecData())),this.body=null,this.aDraftInfo=[],this.sMessageId="",this.sInReplyTo="",this.sReferences="",e&&this.threads(e.threads()),this.computeSenderEmail(),this},e.showLazyExternalImagesInBody=function(){this.body&&g()(".lazy.lazy-inited[data-original]",this.body).each(function(){g()(this).attr("src",g()(this).attr("data-original")).removeAttr("data-original").removeAttr("data-loaded")})},e.lozad=function(){T()("img.lazy:not(.lazy-inited)",{threshold:.4,load:function(e){e.src=E.e,g()(e).addClass("lazy-inited").attr("src",e.dataset.original).removeAttr("data-loaded").removeAttr("data-original").css({opacity:.3}).animate({opacity:1},500)}}).observe()},e.showExternalImages=function(t){if(void 0===t&&(t=!1),this.body&&this.body.data("rl-has-images")){this.hasImages(!1),this.body.data("rl-has-images",!1);var n=this.proxy?"data-x-additional-src":"data-x-src";g()("["+n+"]",this.body).each(function(){var e=g()(this);t&&e.is("img")?e.addClass("lazy").attr("data-original",e.attr(n)).removeAttr("data-loaded"):e.attr("src",e.attr(n)).removeAttr("data-loaded")}),n=this.proxy?"data-x-additional-style-url":"data-x-style-url",g()("["+n+"]",this.body).each(function(){var e=g()(this),t=Object(F.trim)(e.attr("style"));t=""===t?"":";"===t.substr(-1)?t+" ":t+"; ",e.attr("style",t+e.attr(n))}),t&&(this.lozad(),j.$win.resize()),Object(F.windowResize)(500)}},e.showInternalImages=function(n){var e=this;if(void 0===n&&(n=!1),this.body&&!this.body.data("rl-init-internal-images")){this.body.data("rl-init-internal-images",!0);var o=this;g()("[data-x-src-cid]",this.body).each(function(){var e=g()(this),t=o.findAttachmentByCid(e.attr("data-x-src-cid"));t&&t.download&&(n&&e.is("img")?e.addClass("lazy").attr("data-original",t.linkPreview()):e.attr("src",t.linkPreview()))}),g()("[data-x-src-location]",this.body).each(function(){var e=g()(this),t=o.findAttachmentByContentLocation(e.attr("data-x-src-location"));t||(t=o.findAttachmentByCid(e.attr("data-x-src-location"))),t&&t.download&&(n&&e.is("img")?e.addClass("lazy").attr("data-original",t.linkPreview()):e.attr("src",t.linkPreview()))}),g()("[data-x-style-cid]",this.body).each(function(){var e="",t="",n=g()(this),i=o.findAttachmentByCid(n.attr("data-x-style-cid"));i&&i.linkPreview&&""!==(t=n.attr("data-x-style-cid-name"))&&(e=""===(e=Object(F.trim)(n.attr("style")))?"":";"===e.substr(-1)?e+" ":e+"; ",n.attr("style",e+t+": url('"+i.linkPreview()+"')"))}),n&&h.a.delay(function(){return e.lozad()},300),Object(F.windowResize)(500)}},e.storeDataInDom=function(){this.body&&(this.body.data("rl-is-html",!!this.isHtml()),this.body.data("rl-has-images",!!this.hasImages()))},e.fetchDataFromDom=function(){this.body&&(this.isHtml(!!this.body.data("rl-is-html")),this.hasImages(!!this.body.data("rl-has-images")))},e.replacePlaneTextBody=function(e){this.body&&this.body.html(e).addClass("b-text-part plain")},e.flagHash=function(){return[this.deleted(),this.deletedMark(),this.unseen(),this.flagged(),this.answered(),this.forwarded(),this.isReadReceipt()].join(",")},n}(n(63).a)},function(i,o,a){var r,s;!function(e){if(void 0===(s="function"==typeof(r=e)?r.call(o,a,o,i):r)||(i.exports=s),!0,i.exports=e(),!!0){var t=window.Cookies,n=window.Cookies=e();n.noConflict=function(){return window.Cookies=t,n}}}(function(){function m(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}return function e(f){function h(e,t,n){var i;if("undefined"!=typeof document){if(1<arguments.length){if("number"==typeof(n=m({path:"/"},h.defaults,n)).expires){var o=new Date;o.setMilliseconds(o.getMilliseconds()+864e5*n.expires),n.expires=o}n.expires=n.expires?n.expires.toUTCString():"";try{i=JSON.stringify(t),/^[\{\[]/.test(i)&&(t=i)}catch(e){}t=f.write?f.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=(e=(e=encodeURIComponent(String(e))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var a="";for(var r in n)n[r]&&(a+="; "+r,!0!==n[r]&&(a+="="+n[r]));return document.cookie=e+"="+t+a}e||(i={});for(var s=document.cookie?document.cookie.split("; "):[],c=/(%[0-9A-Z]{2})+/g,l=0;l<s.length;l++){var u=s[l].split("="),d=u.slice(1).join("=");this.json||'"'!==d.charAt(0)||(d=d.slice(1,-1));try{var p=u[0].replace(c,decodeURIComponent);if(d=f.read?f.read(d,p):f(d,p)||d.replace(c,decodeURIComponent),this.json)try{d=JSON.parse(d)}catch(e){}if(e===p){i=d;break}e||(i[p]=d)}catch(e){}}return i}}return(h.set=h).get=function(e){return h.call(h,e)},h.getJSON=function(){return h.apply({json:!0},[].slice.call(arguments))},h.defaults={},h.remove=function(e,t){h(e,"",m(t,{expires:-1}))},h.withConverter=e,h}(function(){})})},,,function(e,t,n){"use strict";var i=n(39);e.exports=function(e,t){var n=[][e];return!n||!i(function(){n.call(null,t||function(){throw 1},1)})}},function(e,t,n){e.exports=n(233)},function(e,t,n){n(278);var i=n(53);e.exports=i("Array").reduce},function(e,t,n){"use strict";var i=n(42),o=n(281).left;i({target:"Array",proto:!0,forced:n(145)("reduce")},{reduce:function(e){return o(this,e,arguments.length,1<arguments.length?arguments[1]:void 0)}})},function(e,t,n){"use strict";var i={}.propertyIsEnumerable,o=Object.getOwnPropertyDescriptor,a=o&&!i.call({1:2},1);t.f=a?function(e){var t=o(this,e);return!!t&&t.enumerable}:i},function(e,t,n){var i=n(57),o=/#|\.prototype\./,a=function(e,t){var n=s[r(e)];return n==l||n!=c&&("function"==typeof t?i(t):!!t)},r=a.normalize=function(e){return String(e).replace(o,".").toLowerCase()},s=a.data={},c=a.NATIVE="N",l=a.POLYFILL="P";e.exports=a},function(e,t,n){var u=n(170),d=n(122),p=n(194),f=n(113),i=function(l){return function(e,t,n,i){u(t);var o=d(e),a=p(o),r=f(o.length),s=l?r-1:0,c=l?-1:1;if(n<2)for(;;){if(s in a){i=a[s],s+=c;break}if(s+=c,l?s<0:r<=s)throw TypeError("Reduce of empty array with no initial value")}for(;l?0<=s:s<r;s+=c)s in a&&(i=t(i,a[s],s,o));return i}};e.exports={left:i(!1),right:i(!0)}},function(e,t,n){n(216);var i=n(300),o=n(171),a=Array.prototype,r={DOMTokenList:!0,NodeList:!0};e.exports=function(e){var t=e.values;return e===a||e instanceof Array&&t===a.values||r.hasOwnProperty(o(e))?i:t}},function(e,t,n){var i,o,a,r=n(284),s=n(77),c=n(78),l=n(85),u=n(96),d=n(201),p=n(202),f=s.WeakMap;if(r){var h=new f,m=h.get,g=h.has,b=h.set;i=function(e,t){return b.call(h,e,t),t},o=function(e){return m.call(h,e)||{}},a=function(e){return g.call(h,e)}}else{var v=d("state");p[v]=!0,i=function(e,t){return l(e,v,t),t},o=function(e){return u(e,v)?e[v]:{}},a=function(e){return u(e,v)}}e.exports={set:i,get:o,has:a,enforce:function(e){return a(e)?o(e):i(e,{})},getterFor:function(n){return function(e){var t;if(!c(e)||(t=o(e)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return t}}}},function(e,t,n){var i=n(77),o=n(285),a=i.WeakMap;e.exports="function"==typeof a&&/native code/.test(o.call(a))},function(e,t,n){var i=n(199);e.exports=i("native-function-to-string",Function.toString)},function(e,t,n){var i=n(77),o=n(85);e.exports=function(t,n){try{o(i,t,n)}catch(e){i[t]=n}return n}},function(e,t,n){"use strict";var b=n(42),v=n(288),y=n(241),S=n(296),O=n(247),w=n(85),T=n(298),i=n(68),C=n(200),A=n(153),o=n(240),E=o.IteratorPrototype,F=o.BUGGY_SAFARI_ITERATORS,j=i("iterator"),N="values",R=function(){return this};e.exports=function(e,t,n,i,o,a,r){v(n,t,i);var s,c,l,u=function(e){if(e===o&&m)return m;if(!F&&e in f)return f[e];switch(e){case"keys":case N:case"entries":return function(){return new n(this,e)}}return function(){return new n(this)}},d=t+" Iterator",p=!1,f=e.prototype,h=f[j]||f["@@iterator"]||o&&f[o],m=!F&&h||u(o),g="Array"==t&&f.entries||h;if(g&&(s=y(g.call(new e)),E!==Object.prototype&&s.next&&(C||y(s)===E||(S?S(s,E):"function"!=typeof s[j]&&w(s,j,R)),O(s,d,!0,!0),C&&(A[d]=R))),o==N&&h&&h.name!==N&&(p=!0,m=function(){return h.call(this)}),C&&!r||f[j]===m||w(f,j,m),A[t]=m,o)if(c={values:u(N),keys:a?m:u("keys"),entries:u("entries")},r)for(l in c)!F&&!p&&l in f||T(f,l,c[l]);else b({target:t,proto:!0,forced:F||p},c);return c}},function(e,t,n){"use strict";var o=n(240).IteratorPrototype,a=n(242),r=n(151),s=n(247),c=n(153),l=function(){return this};e.exports=function(e,t,n){var i=t+" Iterator";return e.prototype=a(o,{next:r(1,n)}),s(e,i,!1,!0),c[i]=l,e}},function(e,t,n){var i=n(57);e.exports=!i(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype})},function(e,t,n){var i=n(57);e.exports=!!Object.getOwnPropertySymbols&&!i(function(){return!String(Symbol())})},function(e,t,n){var i=n(84),r=n(134),s=n(152),c=n(243);e.exports=i?Object.defineProperties:function(e,t){s(e);for(var n,i=c(t),o=i.length,a=0;a<o;)r.f(e,n=i[a++],t[n]);return e}},function(e,t,n){var r=n(96),s=n(95),c=n(244).indexOf,l=n(202);e.exports=function(e,t){var n,i=s(e),o=0,a=[];for(n in i)!r(l,n)&&r(i,n)&&a.push(n);for(;t.length>o;)r(i,n=t[o++])&&(~c(a,n)||a.push(n));return a}},function(e,t,n){var i=n(294);e.exports=i("document","documentElement")},function(e,t,n){var i=n(97),o=n(77),a=function(e){return"function"==typeof e?e:void 0};e.exports=function(e,t){return arguments.length<2?a(i[e])||a(o[e]):i[e]&&i[e][t]||o[e]&&o[e][t]}},function(e,t,n){"use strict";var i=n(171),o={};o[n(68)("toStringTag")]="z",e.exports="[object z]"!==String(o)?function(){return"[object "+i(this)+"]"}:o.toString},function(e,t,n){var o=n(152),a=n(297);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var n,i=!1,e={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(e,[]),i=e instanceof Array}catch(e){}return function(e,t){return o(e),a(t),i?n.call(e,t):e.__proto__=t,e}}():void 0)},function(e,t,n){var i=n(78);e.exports=function(e){if(!i(e)&&null!==e)throw TypeError("Can't set "+String(e)+" as a prototype");return e}},function(e,t,n){var o=n(85);e.exports=function(e,t,n,i){i&&i.enumerable?e[t]=n:o(e,t,n)}},function(e,t){e.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},function(e,t,n){e.exports=n(301)},function(e,t,n){n(217);var i=n(53);e.exports=i("Array").values},function(e,t,n){e.exports=n(303)},function(e,t,n){var i=n(304),o=Array.prototype;e.exports=function(e){var t=e.concat;return e===o||e instanceof Array&&t===o.concat?i:t}},function(e,t,n){n(305);var i=n(53);e.exports=i("Array").concat},function(e,t,n){"use strict";var i=n(42),o=n(57),a=n(154),r=n(78),l=n(122),u=n(113),d=n(248),p=n(249),s=n(155),c=n(68)("isConcatSpreadable"),f=9007199254740991,h="Maximum allowed index exceeded",m=!o(function(){var e=[];return e[c]=!1,e.concat()[0]!==e}),g=s("concat"),b=function(e){if(!r(e))return!1;var t=e[c];return void 0!==t?!!t:a(e)};i({target:"Array",proto:!0,forced:!m||!g},{concat:function(e){var t,n,i,o,a,r=l(this),s=p(r,0),c=0;for(t=-1,i=arguments.length;t<i;t++)if(a=-1===t?r:arguments[t],b(a)){if(o=u(a.length),f<c+o)throw TypeError(h);for(n=0;n<o;n++,c++)n in a&&d(s,c,a[n])}else{if(f<=c)throw TypeError(h);d(s,c++,a)}return s.length=c,s}})},function(e,t,n){e.exports=n(307)},function(e,t,n){var i=n(308),o=Array.prototype;e.exports=function(e){var t=e.indexOf;return e===o||e instanceof Array&&t===o.indexOf?i:t}},function(e,t,n){n(309);var i=n(53);e.exports=i("Array").indexOf},function(e,t,n){"use strict";var i=n(42),o=n(244).indexOf,a=n(145),r=[].indexOf,s=!!r&&1/[1].indexOf(1,-0)<0,c=a("indexOf");i({target:"Array",proto:!0,forced:s||c},{indexOf:function(e){return s?r.apply(this,arguments)||0:o(this,e,1<arguments.length?arguments[1]:void 0)}})},function(e,t,n){e.exports=n(311)},function(e,t,n){var i=n(312),o=Array.prototype;e.exports=function(e){var t=e.find;return e===o||e instanceof Array&&t===o.find?i:t}},function(e,t,n){n(313);var i=n(53);e.exports=i("Array").find},function(e,t,n){"use strict";var i=n(42),o=n(156).find,a=n(238),r=!0;"find"in[]&&Array(1).find(function(){r=!1}),i({target:"Array",proto:!0,forced:r},{find:function(e){return o(this,e,1<arguments.length?arguments[1]:void 0)}}),a("find")},function(e,t,n){e.exports=n(315)},function(e,t,n){var i=n(316),o=Array.prototype;e.exports=function(e){var t=e.lastIndexOf;return e===o||e instanceof Array&&t===o.lastIndexOf?i:t}},function(e,t,n){n(317);var i=n(53);e.exports=i("Array").lastIndexOf},function(e,t,n){var i=n(42),o=n(318);i({target:"Array",proto:!0,forced:o!==[].lastIndexOf},{lastIndexOf:o})},function(e,t,n){"use strict";var o=n(95),a=n(198),r=n(113),i=n(145),s=Math.min,c=[].lastIndexOf,l=!!c&&1/[1].lastIndexOf(1,-0)<0,u=i("lastIndexOf");e.exports=l||u?function(e){if(l)return c.apply(this,arguments)||0;var t=o(this),n=r(t.length),i=n-1;for(1<arguments.length&&(i=s(i,a(arguments[1]))),i<0&&(i=n+i);0<=i;i--)if(i in t&&t[i]===e)return i||0;return-1}:c},function(e,t,n){e.exports=n(320)},function(e,t,n){var i=n(321),o=Function.prototype;e.exports=function(e){var t=e.bind;return e===o||e instanceof Function&&t===o.bind?i:t}},function(e,t,n){n(322);var i=n(53);e.exports=i("Function").bind},function(e,t,n){n(42)({target:"Function",proto:!0},{bind:n(323)})},function(e,t,n){"use strict";var a=n(170),r=n(78),s=[].slice,c={};e.exports=Function.bind||function(t){var n=a(this),i=s.call(arguments,1),o=function(){var e=i.concat(s.call(arguments));return this instanceof o?function(e,t,n){if(!(t in c)){for(var i=[],o=0;o<t;o++)i[o]="a["+o+"]";c[t]=Function("C,a","return new C("+i.join(",")+")")}return c[t](e,n)}(n,e.length,e):n.apply(t,e)};return r(n.prototype)&&(o.prototype=n.prototype),o}},function(e,t,n){e.exports=n(325)},function(e,t,n){var i=n(326),o=String.prototype;e.exports=function(e){var t=e.trim;return"string"==typeof e||e===o||e instanceof String&&t===o.trim?i:t}},function(e,t,n){n(327);var i=n(53);e.exports=i("String").trim},function(e,t,n){"use strict";var i=n(42),o=n(328).trim;i({target:"String",proto:!0,forced:n(329)("trim")},{trim:function(){return o(this)}})},function(e,t,n){var i=n(196),o="["+n(250)+"]",a=RegExp("^"+o+o+"*"),r=RegExp(o+o+"*$"),s=function(n){return function(e){var t=String(i(e));return 1&n&&(t=t.replace(a,"")),2&n&&(t=t.replace(r,"")),t}};e.exports={start:s(1),end:s(2),trim:s(3)}},function(e,t,n){var i=n(57),o=n(250);e.exports=function(e){return i(function(){return!!o[e]()||"​᠎"!="​᠎"[e]()||o[e].name!==e})}},function(e,t,n){e.exports=n(331)},function(e,t,n){var i=n(332),o=Array.prototype;e.exports=function(e){var t=e.map;return e===o||e instanceof Array&&t===o.map?i:t}},function(e,t,n){n(333);var i=n(53);e.exports=i("Array").map},function(e,t,n){"use strict";var i=n(42),o=n(156).map;i({target:"Array",proto:!0,forced:!n(155)("map")},{map:function(e){return o(this,e,1<arguments.length?arguments[1]:void 0)}})},function(e,t,n){e.exports=n(335)},function(e,t,n){n(336);var i=n(97).Object,o=e.exports=function(e,t,n){return i.defineProperty(e,t,n)};i.defineProperty.sham&&(o.sham=!0)},function(e,t,n){var i=n(42),o=n(84);i({target:"Object",stat:!0,forced:!o,sham:!o},{defineProperty:n(134).f})},function(e,t,n){var S=n(104),O=n(119),w=n(120),T=n(72),C=n(338),A=[].push,i=function(f){var h=1==f,m=2==f,g=3==f,b=4==f,v=6==f,y=5==f||v;return function(e,t,n,i){for(var o,a,r=w(e),s=O(r),c=S(t,n,3),l=T(s.length),u=0,d=i||C,p=h?d(e,l):m?d(e,0):void 0;u<l;u++)if((y||u in s)&&(a=c(o=s[u],u,r),f))if(h)p[u]=a;else if(a)switch(f){case 3:return!0;case 5:return o;case 6:return u;case 2:A.call(p,o)}else if(b)return!1;return v?-1:g||b?b:p}};e.exports={forEach:i(0),map:i(1),filter:i(2),some:i(3),every:i(4),find:i(5),findIndex:i(6)}},function(e,t,n){var i=n(44),o=n(339),a=n(32)("species");e.exports=function(e,t){var n;return o(e)&&("function"!=typeof(n=e.constructor)||n!==Array&&!o(n.prototype)?i(n)&&null===(n=n[a])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===t?0:t)}},function(e,t,n){var i=n(49);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(39),o=n(32)("species");e.exports=function(t){return!i(function(){var e=[];return(e.constructor={})[o]=function(){return{foo:1}},1!==e[t](Boolean).foo})}},function(e,t,n){e.exports=n(342)},function(e,t,n){n(343);var i=n(53);e.exports=i("Array").forEach},function(e,t,n){"use strict";var i=n(42),o=n(344);i({target:"Array",proto:!0,forced:[].forEach!=o},{forEach:o})},function(e,t,n){"use strict";var i=n(156).forEach,o=n(145);e.exports=o("forEach")?function(e){return i(this,e,1<arguments.length?arguments[1]:void 0)}:[].forEach},function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}},function(e,t,n){"use strict";n.r(t),t.default='<html>\n<head>\n\t<meta charset="utf-8" />\n\t<meta name="viewport" content="user-scalable=no" />\n\t<meta name="apple-mobile-web-app-capable" content="yes" />\n\t<meta name="robots" content="noindex, nofollow, noodp" />\n\t<title>{{title}}</title>\n\t<style>\nhtml, body {\n\tbackground-color: #fff;\n\tfont-size: 13px;\n\tfont-family: arial, sans-serif;\n\tmargin: 0;\n\tpadding: 0;\n}\n\na {color: blue; text-decoration: underline}\na:visited {color: #609}\na:active {color: red}\nblockquote {border-left: 2px solid black; margin: 0; padding: 0px 10px}\n\npre {\n\tmargin: 0px;\n\tpadding: 0px;\n\tfont-family: Monaco, Menlo, Consolas, \'Courier New\', monospace;\n\tbackground: #fff;\n\tborder: none;\n\twhite-space: pre-wrap;\n\tword-wrap: break-word;\n\tword-break: break-all;\n}\n\n.body-wrp {\n\tpadding: 10px;\n}\n\n.body-wrp.html pre {\n\tfont-family: Monaco, Menlo, Consolas, \'Courier New\', monospace;\n\twhite-space: pre-wrap;\n\tword-wrap: break-word;\n\tword-break: normal;\n}\n\n.body-wrp.plain {\n\tpadding: 15px;\n\twhite-space: pre-wrap;\n\tfont-family: Monaco, Menlo, Consolas, \'Courier New\', monospace;\n}\n\n.body-wrp.plain pre {\n\tmargin: 0px;\n\tpadding: 0px;\n\tbackground: #fff;\n\tborder: none;\n\tfont-family: Monaco, Menlo, Consolas, \'Courier New\', monospace;\n\twhite-space: pre-wrap;\n\tword-wrap: break-word;\n\tword-break: normal;\n}\n\n.body-wrp.plain blockquote {\n\tborder-left: 2px solid blue;\n\tcolor: blue;\n}\n\n.body-wrp.plain blockquote blockquote {\n\tborder-left: 2px solid green;\n\tcolor: green;\n}\n\n.body-wrp.plain blockquote blockquote blockquote {\n\tborder-left: 2px solid red;\n\tcolor: red;\n}\n.rl-preview-subject {\n\tfont-size: 16px;\n\tfont-weight: bold;\n\tpadding: 15px;\n}\n.rl-preview-creds-from, .rl-preview-creds-to, .rl-preview-creds-cc {\n\tfont-size: 12px;\n\tpadding: 5px 15px;\n}\n.rl-preview-date {\n\tfloat: right;\n\tfont-size: 12px;\n\tpadding: 10px 15px;\n}\n.rl-preview-section {\n\tpadding: 0;\n\tmargin: 0;\n\tborder-bottom: 1px solid #ccc;\n}\n.rl-preview-hide {\n\tdisplay: none;\n}\n\t</style>\n</head>\n<body>\n\t<div class="rl-preview-section">\n\t\t<div class="rl-preview-subject">{{subject}}</div>\n\t</div>\n\t<div class="rl-preview-section">\n\t\t<div class="rl-preview-date">{{date}}</div>\n\t\t<div class="rl-preview-creds-from">{{fromCreds}}</div>\n\t\t<div class="rl-preview-creds-to">{{toLabel}}: {{toCreds}}</div>\n\t\t<div class="rl-preview-creds-cc {{ccClass}}">{{ccLabel}}: {{ccCreds}}</div>\n\t</div>\n\t<div class="body-wrp {{bodyClass}}">{{html}}</div>\n</body>\n</html>'},function(e,t,n){e.exports=n(348)},function(e,t,n){var i=n(349),o=Array.prototype;e.exports=function(e){var t=e.filter;return e===o||e instanceof Array&&t===o.filter?i:t}},function(e,t,n){n(350);var i=n(53);e.exports=i("Array").filter},function(e,t,n){"use strict";var i=n(42),o=n(156).filter;i({target:"Array",proto:!0,forced:!n(155)("filter")},{filter:function(e){return o(this,e,1<arguments.length?arguments[1]:void 0)}})},function(e,t,n){e.exports=n(352)},function(e,t,n){e.exports=n(353)},function(e,t,n){n(354);var i=n(97).Object;e.exports=function(e,t){return i.create(e,t)}},function(e,t,n){n(42)({target:"Object",stat:!0,sham:!n(84)},{create:n(242)})},function(e,t,n){e.exports=n(356)},function(e,t,n){n(357);var i=n(97).Object,o=e.exports=function(e,t){return i.getOwnPropertyDescriptor(e,t)};i.getOwnPropertyDescriptor.sham&&(o.sham=!0)},function(e,t,n){var i=n(42),o=n(57),a=n(95),r=n(234).f,s=n(84),c=o(function(){r(1)});i({target:"Object",stat:!0,forced:!s||c,sham:!s},{getOwnPropertyDescriptor:function(e,t){return r(a(e),t)}})},function(e,t,n){e.exports=n(359)},function(e,t,n){e.exports=n(360)},function(e,t,n){var i=n(361),o=Array.prototype;e.exports=function(e){var t=e.slice;return e===o||e instanceof Array&&t===o.slice?i:t}},function(e,t,n){n(362);var i=n(53);e.exports=i("Array").slice},function(e,t,n){"use strict";var i=n(42),l=n(78),u=n(154),d=n(245),p=n(113),f=n(95),h=n(248),o=n(155),m=n(68)("species"),g=[].slice,b=Math.max;i({target:"Array",proto:!0,forced:!o("slice")},{slice:function(e,t){var n,i,o,a=f(this),r=p(a.length),s=d(e,r),c=d(void 0===t?r:t,r);if(u(a)&&("function"!=typeof(n=a.constructor)||n!==Array&&!u(n.prototype)?l(n)&&null===(n=n[m])&&(n=void 0):n=void 0,n===Array||void 0===n))return g.call(a,s,c);for(i=new(void 0===n?Array:n)(b(c-s,0)),o=0;s<c;s++,o++)s in a&&h(i,o,a[s]);return i.length=o,i}})},function(e,t,n){e.exports=n(364)},function(e,t,n){e.exports=n(365)},function(e,t,n){var i=n(366),o=Array.prototype;e.exports=function(e){var t=e.reverse;return e===o||e instanceof Array&&t===o.reverse?i:t}},function(e,t,n){n(367);var i=n(53);e.exports=i("Array").reverse},function(e,t,n){"use strict";var i=n(42),o=n(154),a=[].reverse,r=[1,2];i({target:"Array",proto:!0,forced:String(r)===String(r.reverse())},{reverse:function(){return o(this)&&(this.length=this.length),a.call(this)}})},function(e,t,n){e.exports=n(369)},function(e,t,n){e.exports=n(233)},function(e,t,n){e.exports=n(371)},function(e,t,n){e.exports=n(372)},function(e,t,n){n(373);var i=n(97);e.exports=i.Object.keys},function(e,t,n){var i=n(42),o=n(122),a=n(243);i({target:"Object",stat:!0,forced:n(57)(function(){a(1)})},{keys:function(e){return a(o(e))}})},function(e,t,n){e.exports=n(375)},function(e,t,n){e.exports=n(252)},function(e,t,n){"use strict";n.r(t),n.d(t,"AccountPopupView",function(){return O}),n.d(t,"default",function(){return O});var i,o,a,r,s=n(19),c=n.n(s),l=n(10),u=n.n(l),d=n(20),p=n.n(d),f=n(1),h=n(0),m=n(2),g=n(9),b=n(16),v=n(22),y=n(7),S=n(27),O=(i=Object(y.popup)({name:"View/Popup/Account",templateID:"PopupsAccount"}),o=Object(y.command)(function(e){return!e.submitRequest()}),i((r=function(t){function e(){var e;return(e=t.call(this)||this).isNew=f.a.observable(!0),e.email=f.a.observable(""),e.password=f.a.observable(""),e.emailError=f.a.observable(!1),e.passwordError=f.a.observable(!1),e.email.subscribe(function(){e.emailError(!1)}),e.password.subscribe(function(){e.passwordError(!1)}),e.submitRequest=f.a.observable(!1),e.submitError=f.a.observable(""),e.submitErrorAdditional=f.a.observable(""),e.emailFocus=f.a.observable(!1),e}u()(e,t);var n=e.prototype;return n.addAccountCommand=function(){var n=this;return this.emailError(""===Object(m.trim)(this.email())),this.passwordError(""===Object(m.trim)(this.password())),!this.emailError()&&!this.passwordError()&&(this.submitRequest(!0),b.a.accountSetup(function(e,t){n.submitRequest(!1),h.StorageResultType.Success===e&&t?t.Result?(Object(v.a)().accountsAndIdentities(),n.cancelCommand()):(n.submitError(t.ErrorCode?Object(g.getNotification)(t.ErrorCode):Object(g.getNotification)(h.Notification.UnknownError)),t.ErrorMessageAdditional&&n.submitErrorAdditional(t.ErrorMessageAdditional)):(n.submitError(Object(g.getNotification)(h.Notification.UnknownError)),n.submitErrorAdditional(""))},this.email(),this.password(),this.isNew()),!0)},n.clearPopup=function(){this.isNew(!0),this.email(""),this.password(""),this.emailError(!1),this.passwordError(!1),this.submitRequest(!1),this.submitError(""),this.submitErrorAdditional("")},n.onShow=function(e){this.clearPopup(),e&&e.canBeEdit()&&(this.isNew(!1),this.email(e.email))},n.onShowWithDelay=function(){this.emailFocus(!0)},e}(S.a),p()(r.prototype,"addAccountCommand",[o],c()(r.prototype,"addAccountCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";n.r(t),n.d(t,"IdentityPopupView",function(){return w}),n.d(t,"default",function(){return w});n(52);var i,o,a,r,s=n(19),c=n.n(s),l=n(10),u=n.n(l),d=n(20),p=n.n(d),f=n(1),h=n(0),m=n(6),g=n(2),b=n(9),v=n(16),y=n(22),S=n(7),O=n(27),w=(i=Object(S.popup)({name:"View/Popup/Identity",templateID:"PopupsIdentity"}),o=Object(S.command)(function(e){return!e.submitRequest()}),i((r=function(e){function t(){var t;return(t=e.call(this)||this).id="",t.edit=f.a.observable(!1),t.owner=f.a.observable(!1),t.email=f.a.observable("").validateEmail(),t.email.focused=f.a.observable(!1),t.name=f.a.observable(""),t.name.focused=f.a.observable(!1),t.replyTo=f.a.observable("").validateSimpleEmail(),t.replyTo.focused=f.a.observable(!1),t.bcc=f.a.observable("").validateSimpleEmail(),t.bcc.focused=f.a.observable(!1),t.signature=f.a.observable(""),t.signatureInsertBefore=f.a.observable(!1),t.showBcc=f.a.observable(!1),t.showReplyTo=f.a.observable(!1),t.submitRequest=f.a.observable(!1),t.submitError=f.a.observable(""),t.bcc.subscribe(function(e){!1===t.showBcc()&&0<e.length&&t.showBcc(!0)}),t.replyTo.subscribe(function(e){!1===t.showReplyTo()&&0<e.length&&t.showReplyTo(!0)}),t}u()(t,e);var n=t.prototype;return n.addOrEditIdentityCommand=function(){var n=this;return this.signature&&this.signature.__fetchEditorValue&&this.signature.__fetchEditorValue(),this.email.hasError()||this.email.hasError(""===Object(g.trim)(this.email())),this.email.hasError()?(this.owner()||this.email.focused(!0),!1):this.replyTo.hasError()?(this.replyTo.focused(!0),!1):this.bcc.hasError()?(this.bcc.focused(!0),!1):(this.submitRequest(!0),v.a.identityUpdate(function(e,t){n.submitRequest(!1),h.StorageResultType.Success===e&&t?t.Result?(Object(y.a)().accountsAndIdentities(),n.cancelCommand()):t.ErrorCode&&n.submitError(Object(b.getNotification)(t.ErrorCode)):n.submitError(Object(b.getNotification)(h.Notification.UnknownError))},this.id,this.email(),this.name(),this.replyTo(),this.bcc(),this.signature(),this.signatureInsertBefore()),!0)},n.clearPopup=function(){this.id="",this.edit(!1),this.owner(!1),this.name(""),this.email(""),this.replyTo(""),this.bcc(""),this.signature(""),this.signatureInsertBefore(!1),this.email.hasError(!1),this.replyTo.hasError(!1),this.bcc.hasError(!1),this.showBcc(!1),this.showReplyTo(!1),this.submitRequest(!1),this.submitError("")},n.onShow=function(e){this.clearPopup(),e?(this.edit(!0),this.id=e.id()||"",this.name(e.name()),this.email(e.email()),this.replyTo(e.replyTo()),this.bcc(e.bcc()),this.signature(e.signature()),this.signatureInsertBefore(e.signatureInsertBefore()),this.owner(""===this.id)):this.id=Object(g.fakeMd5)()},n.onShowWithDelay=function(){this.owner()||m.bMobileDevice||this.email.focused(!0)},n.onHideWithDelay=function(){this.clearPopup()},t}(O.a),p()(r.prototype,"addOrEditIdentityCommand",[o],c()(r.prototype,"addOrEditIdentityCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";n.r(t);var i=n(12),l=n.n(i),o=n(33),a=n.n(o),r=n(10),s=n.n(r),u=n(2),d=n(0),c=n(35),p=function(n){function e(e){var t;return(t=n.call(this)||this).element=e.element||null,t.value=e.value&&e.value.subscribe?e.value:null,t.element&&(t.value?(t.element.css("display","inline-block"),e.verticalAlign&&t.element.css("vertical-align",e.verticalAlign),t.setState(t.value()),t.disposable.push(t.value.subscribe(t.setState,a()(t)))):t.element.hide()),t}return s()(e,n),e.prototype.setState=function(e){var t,n,i,o,a,r,s,c;switch(Object(u.pInt)(e)){case d.SaveSettingsStep.TrueResult:l()(t=l()(n=this.element).call(n,".animated,.error").hide().removeClass("visible").end()).call(t,".success").show().addClass("visible");break;case d.SaveSettingsStep.FalseResult:l()(i=l()(o=this.element).call(o,".animated,.success").hide().removeClass("visible").end()).call(i,".error").show().addClass("visible");break;case d.SaveSettingsStep.Animate:l()(a=l()(r=this.element).call(r,".error,.success").hide().removeClass("visible").end()).call(a,".animated").show().addClass("visible");break;case d.SaveSettingsStep.Idle:default:l()(s=l()(c=this.element).call(c,".animated").hide().end()).call(s,".error,.success").removeClass("visible")}},e}(c.a);t.default=Object(c.b)(p,"SaveTriggerComponent")},function(e,t,n){"use strict";n.r(t);var i=n(10),o=n.n(i),a=n(35),r=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t}(n(86).a);t.default=Object(a.b)(r,"InputComponent")},function(e,t,n){"use strict";n.r(t);var i=n(10),o=n.n(i),a=n(9),r=n(2),s=n(35),c=function(n){function e(e){var t;return(t=n.call(this,e)||this).options=e.options||"",t.optionsText=e.optionsText||null,t.optionsValue=e.optionsValue||null,t.optionsCaption=e.optionsCaption||null,t.optionsCaption&&(t.optionsCaption=Object(a.i18n)(t.optionsCaption)),t.defautOptionsAfterRender=r.defautOptionsAfterRender,t}return o()(e,n),e}(n(86).a);t.default=Object(s.b)(c,"SelectComponent")},function(e,t,n){"use strict";n.r(t);var i=n(10),o=n.n(i),a=n(35),r=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t}(n(260).a);t.default=Object(a.b)(r,"RadioComponent")},function(e,t,n){"use strict";n.r(t);var i=n(10),o=n.n(i),a=n(2),r=n(35),s=n(86),c=function(n){function e(e){var t;return(t=n.call(this,e)||this).rows=e.rows||5,t.spellcheck=!Object(a.isUnd)(e.spellcheck)&&!!e.spellcheck,t}return o()(e,n),e}(s.a);t.default=Object(r.b)(c,"TextAreaComponent")},function(e,t,n){"use strict";n.r(t);var i=n(10),o=n.n(i),a=n(35),r=function(e){function t(){return e.apply(this,arguments)||this}return o()(t,e),t}(n(86).a);t.default=Object(a.b)(r,"DateComponent")},function(e,t,n){"use strict";n.r(t);n(48),n(56);var i=n(10),o=n.n(i),a=n(8),r=n.n(a),s=n(35),c=function(i){function e(e){var t;if(t=i.call(this)||this,e.component&&e.component.templateNodes&&e.element&&e.element[0]&&e.element[0].outerHTML){var n=e.element[0].outerHTML;(n=n?n.replace(/<x-script/i,"<script").replace(/<b><\/b><\/x-script>/i,"<\/script>"):"")?(e.element.text(""),e.element.replaceWith(r()(n).text(e.component.templateNodes[0]&&e.component.templateNodes[0].nodeValue?e.component.templateNodes[0].nodeValue:""))):e.element.remove()}return t}return o()(e,i),e}(s.a);t.default=Object(s.b)(c,"ScriptComponent")},function(e,t,n){"use strict";n.r(t);var i=n(26),o=n.n(i),a=n(33),r=n.n(a),s=n(10),c=n.n(s),l=n(3),u=n.n(l),d=n(1),p=n(35),f=function(n){function e(e){var t;return(t=n.call(this,e)||this).animationBox=d.a.observable(!1).extend({falseTimeout:200}),t.animationCheckmark=d.a.observable(!1).extend({falseTimeout:200}),t.animationBoxSetTrue=o()(u.a).call(u.a,t.animationBoxSetTrue,r()(t)),t.animationCheckmarkSetTrue=o()(u.a).call(u.a,t.animationCheckmarkSetTrue,r()(t)),t.disposable.push(t.value.subscribe(function(e){t.triggerAnimation(e)},r()(t))),t}c()(e,n);var t=e.prototype;return t.animationBoxSetTrue=function(){this.animationBox(!0)},t.animationCheckmarkSetTrue=function(){this.animationCheckmark(!0)},t.triggerAnimation=function(e){e?(this.animationBoxSetTrue(),u.a.delay(this.animationCheckmarkSetTrue,200)):(this.animationCheckmarkSetTrue(),u.a.delay(this.animationBoxSetTrue,200))},e}(n(159).a);t.default=Object(p.b)(f,"CheckboxMaterialDesignComponent")},function(e,t,c){"use strict";c.r(t);c(75),c(52),c(55),c(94),c(135),c(67);var n=c(12),s=c.n(n),i=c(18),l=c.n(i),o=c(26),a=c.n(o),r=c(33),u=c.n(r),d=c(10),p=c.n(d),f=c(4),h=c.n(f),m=c(3),g=c.n(m),b=c(8),v=c.n(b),y=c(99),S=c.n(y),O=c(2),w=c(0),T=c(6),C=c(25),A=c(38),E=c(60),F=c(14),j=c(15),N=c(24),R=c(9),I=c(29),L=c(31),P=c(37),M=c(116),D=c(46),_=c(101),k=c(100),x=c(173),U=c(11),H=c(41),B=c(13),G=c(219),V=c(58),K=c(5),q=c(146),z=c(16),W=c(88),Y=c(81),$=c(420),J=c(421),X=c(422),Z=c(423),Q=c(424),ee=c(426),te=c(432),ne=c(7),ie=function(t){function e(){var n;return(n=t.call(this,z.a)||this).moveCache={},n.quotaDebounce=g.a.debounce(n.quota,w.Magics.Time30s),n.moveOrDeleteResponseHelper=a()(g.a).call(g.a,n.moveOrDeleteResponseHelper,u()(n)),n.messagesMoveTrigger=g.a.debounce(n.messagesMoveTrigger,500),h.a.setInterval(function(){return N.a("interval.30s")},w.Magics.Time30s),h.a.setInterval(function(){return N.a("interval.1m")},w.Magics.Time1m),h.a.setInterval(function(){return N.a("interval.2m")},w.Magics.Time2m),h.a.setInterval(function(){return N.a("interval.3m")},w.Magics.Time3m),h.a.setInterval(function(){return N.a("interval.5m")},w.Magics.Time5m),h.a.setInterval(function(){return N.a("interval.10m")},w.Magics.Time10m),h.a.setInterval(function(){return N.a("interval.15m")},w.Magics.Time15m),h.a.setInterval(function(){return N.a("interval.20m")},w.Magics.Time20m),h.a.setTimeout(function(){return h.a.setInterval(function(){return N.a("interval.2m-after5m")},w.Magics.Time2m)},w.Magics.Time5m),h.a.setTimeout(function(){return h.a.setInterval(function(){return N.a("interval.5m-after5m")},w.Magics.Time5m)},w.Magics.Time5m),h.a.setTimeout(function(){return h.a.setInterval(function(){return N.a("interval.10m-after5m")},w.Magics.Time10m)},w.Magics.Time5m),v.a.wakeUp(function(){Object(q.a)()&&n.reload(),z.a.jsVersion(function(e,t){w.StorageResultType.Success===e&&t&&!t.Result&&n.reload()},K.appSettingsGet("version"))},{},w.Magics.Time60m),Object(q.a)()&&n.reload(),K.settingsGet("UserBackgroundHash")&&g.a.delay(function(){v()("#rl-bg").attr("style","background-image: none !important;").backstretch(Object(j.J)(K.settingsGet("UserBackgroundHash")),{fade:T.bAnimationSupported?w.Magics.Time1s:0,centeredX:!0,centeredY:!0}).removeAttr("style")},w.Magics.Time1s),n.socialUsers=a()(g.a).call(g.a,n.socialUsers,u()(n)),n}p()(e,t);var n=e.prototype;return n.remote=function(){return z.a},n.reload=function(){h.a.parent&&K.appSettingsGet("inIframe")?h.a.parent.location.reload():h.a.location.reload()},n.reloadFlagsCurrentMessageListAndMessageFromCache=function(){g.a.each(B.a.messageList(),function(e){Object(F.n)(e)}),Object(F.n)(B.a.message())},n.reloadMessageList=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var n=(B.a.messageListPage()-1)*P.a.messagesPerPage();t&&Object(F.q)(U.a.currentFolderFullNameRaw(),""),e&&(B.a.messageListPage(1),B.a.messageListPageBeforeThread(1),n=0,Object(ne.setHash)(Object(j.o)(U.a.currentFolderFullNameHash(),B.a.messageListPage(),B.a.messageListSearch(),B.a.messageListThreadUid()),!0,!0)),B.a.messageListLoading(!0),z.a.messageList(function(e,t,n){w.StorageResultType.Success===e&&t&&t.Result?(B.a.messageListError(""),B.a.messageListLoading(!1),B.a.setMessageList(t,n)):w.StorageResultType.Unload===e?(B.a.messageListError(""),B.a.messageListLoading(!1)):w.StorageResultType.Abort!==e&&(B.a.messageList([]),B.a.messageListLoading(!1),B.a.messageListError(t&&t.ErrorCode?Object(R.getNotification)(t.ErrorCode):Object(R.i18n)("NOTIFICATIONS/CANT_GET_MESSAGE_LIST")))},U.a.currentFolderFullNameRaw(),n,P.a.messagesPerPage(),B.a.messageListSearch(),B.a.messageListThreadUid())},n.recacheInboxMessageList=function(){z.a.messageList(O.noop,Object(F.h)(),0,P.a.messagesPerPage(),"","",!0)},n.contactsSync=function(n){var i=_.a.contacts;return!(i.importing()||i.syncing()||!_.a.enableContactsSync()||!_.a.allowContactsSync())&&(i.syncing(!0),z.a.contactsSync(function(e,t){i.syncing(!1),n&&n(e,t)}),!0)},n.messagesMoveTrigger=function(){var o=this,a=U.a.trashFolder(),r=U.a.spamFolder();g.a.each(this.moveCache,function(e){var t=r===e.To,n=a===e.To,i=!t&&r===e.From&&Object(F.h)()===e.To;z.a.messagesMove(o.moveOrDeleteResponseHelper,e.From,e.To,e.Uid,t?"SPAM":i?"HAM":"",t||n)}),this.moveCache={}},n.messagesMoveHelper=function(e,t,n){var i="$$"+e+"$$"+t+"$$";this.moveCache[i]||(this.moveCache[i]={From:e,To:t,Uid:[]}),this.moveCache[i].Uid=g.a.union(this.moveCache[i].Uid,n),this.messagesMoveTrigger()},n.messagesCopyHelper=function(e,t,n){z.a.messagesCopy(this.moveOrDeleteResponseHelper,e,t,n)},n.messagesDeleteHelper=function(e,t){z.a.messagesDelete(this.moveOrDeleteResponseHelper,e,t)},n.moveOrDeleteResponseHelper=function(e,t){w.StorageResultType.Success===e&&U.a.currentFolder()&&(t&&Object(O.isArray)(t.Result)&&2===t.Result.length?Object(F.q)(t.Result[0],t.Result[1]):(Object(F.q)(U.a.currentFolderFullNameRaw(),""),t&&-1<Object(O.inArray)(t.ErrorCode,[w.Notification.CantMoveMessage,w.Notification.CantCopyMessage])&&h.a.alert(Object(R.getNotification)(t.ErrorCode))),this.reloadMessageList(0===B.a.messageList().length),this.quotaDebounce())},n.deleteMessagesFromFolderWithoutCheck=function(e,t){this.messagesDeleteHelper(e,t),B.a.removeMessagesFromList(e,t)},n.deleteMessagesFromFolder=function(e,t,n,i){var o=this,a=null,r=null;switch(e){case w.FolderType.Spam:a=Object(F.e)(U.a.spamFolder()),r=w.SetSystemFoldersNotification.Spam;break;case w.FolderType.NotSpam:a=Object(F.e)(Object(F.h)());break;case w.FolderType.Trash:a=Object(F.e)(U.a.trashFolder()),r=w.SetSystemFoldersNotification.Trash;break;case w.FolderType.Archive:a=Object(F.e)(U.a.archiveFolder()),r=w.SetSystemFoldersNotification.Archive}(i=!!Object(O.isUnd)(i)||!!i)&&(w.FolderType.Spam===e&&C.r===U.a.spamFolder()||w.FolderType.Trash===e&&C.r===U.a.trashFolder()||w.FolderType.Archive===e&&C.r===U.a.archiveFolder())&&(i=!1),!a&&i?Object(ne.showScreenPopup)(c(267),[r]):i&&(w.FolderType.Trash!==e||t!==U.a.spamFolder()&&t!==U.a.trashFolder())?a&&(this.messagesMoveHelper(t,a.fullNameRaw,n),B.a.removeMessagesFromList(t,n,a.fullNameRaw)):Object(ne.showScreenPopup)(c(218),[Object(R.i18n)("POPUPS_ASK/DESC_WANT_DELETE_MESSAGES"),function(){o.messagesDeleteHelper(t,n),B.a.removeMessagesFromList(t,n)}])},n.moveMessagesToFolder=function(e,t,n,i){if(e!==n&&Object(O.isArray)(t)&&0<t.length){var o=Object(F.e)(e),a=Object(F.e)(n);if(o&&a)return!Object(O.isUnd)(i)&&i?this.messagesCopyHelper(o.fullNameRaw,a.fullNameRaw,t):this.messagesMoveHelper(o.fullNameRaw,a.fullNameRaw,t),B.a.removeMessagesFromList(o.fullNameRaw,t,a.fullNameRaw,i),!0}return!1},n.foldersReload=function(e){void 0===e&&(e=null);var t=W.a.foldersReload(U.a.foldersLoading);e&&t.then(function(e){return!!e}).then(e).catch(function(){g.a.delay(function(){e&&e(!1)},1)})},n.foldersPromisesActionHelper=function(e,t){W.a.abort("Folders").fastResolve(!0).then(function(){return e}).then(function(){W.a.foldersReloadWithTimeout(U.a.foldersLoading)},function(e){U.a.folderList.error(Object(R.getNotification)(e,"",t)),W.a.foldersReloadWithTimeout(U.a.foldersLoading)})},n.reloadOpenPgpKeys=function(){if(H.a.capaOpenPGP()){var r=[],s=new Y.EmailModel,e=H.a.openpgpKeyring,t=e?e.getAllKeys():[];g.a.each(t,function(e,t){if(e&&e.primaryKey){var n=[],i=[],o=e.getPrimaryUser(),a=o&&o.user?o.user.userId.userid:e.users&&e.users[0]?e.users[0].userId.userid:"";e.users&&g.a.each(e.users,function(e){e.userId&&(s.clear(),s.parse(e.userId.userid),s.validate()&&(n.push(s.email),i.push(e.userId.userid)))}),n.length&&r.push(new Z.a(t,e.primaryKey.getFingerprint(),e.primaryKey.getKeyId().toHex().toLowerCase(),g.a.uniq(g.a.compact(l()(g.a).call(g.a,e.getKeyIds(),function(e){return e&&e.toHex?e.toHex():null}))),i,n,e.isPrivate(),e.armor(),a))}}),Object(O.delegateRunOnDestroy)(H.a.openpgpkeys()),H.a.openpgpkeys(r)}},n.accountsCounts=function(){return!1},n.accountsAndIdentities=function(a){var r=this;D.a.accounts.loading(!0),k.a.identities.loading(!0),z.a.accountsAndIdentities(function(e,t){if(D.a.accounts.loading(!1),k.a.identities.loading(!1),w.StorageResultType.Success===e&&t.Result){var n={},i=D.a.email(),o=K.settingsGet("ParentEmail");o=""===o?i:o,Object(O.isArray)(t.Result.Accounts)&&(g.a.each(D.a.accounts(),function(e){n[e.email]=e.count()}),Object(O.delegateRunOnDestroy)(D.a.accounts()),D.a.accounts(l()(g.a).call(g.a,t.Result.Accounts,function(e){return new $.a(e,e!==o,n[e]||0)}))),!Object(O.isUnd)(a)&&a&&(g.a.delay(function(){return r.accountsCounts()},5e3),N.b("interval.10m-after5m",function(){return r.accountsCounts()})),Object(O.isArray)(t.Result.Identities)&&(Object(O.delegateRunOnDestroy)(k.a.identities()),k.a.identities(l()(g.a).call(g.a,t.Result.Identities,function(e){var t=Object(O.pString)(e.Id),n=Object(O.pString)(e.Email),i=new J.a(t,n);return i.name(Object(O.pString)(e.Name)),i.replyTo(Object(O.pString)(e.ReplyTo)),i.bcc(Object(O.pString)(e.Bcc)),i.signature(Object(O.pString)(e.Signature)),i.signatureInsertBefore(!!e.SignatureInsertBefore),i})))}})},n.templates=function(){x.a.templates.loading(!0),z.a.templates(function(e,t){x.a.templates.loading(!1),w.StorageResultType.Success===e&&t.Result&&Object(O.isArray)(t.Result.Templates)&&(Object(O.delegateRunOnDestroy)(x.a.templates()),x.a.templates(g.a.compact(l()(g.a).call(g.a,t.Result.Templates,function(e){var t=new X.a;return t.parse(e)?t:null}))))})},n.quota=function(){z.a.quota(function(e,t){w.StorageResultType.Success===e&&t&&t.Result&&Object(O.isArray)(t.Result)&&1<t.Result.length&&Object(O.isPosNumeric)(t.Result[0],!0)&&Object(O.isPosNumeric)(t.Result[1],!0)&&G.a.populateData(Object(O.pInt)(t.Result[1]),Object(O.pInt)(t.Result[0]))})},n.folderInformation=function(e,t){var c=this;""!==Object(O.trim)(e)&&z.a.folderInformation(function(e,t){if(w.StorageResultType.Success===e&&t&&t.Result&&t.Result.Hash&&t.Result.Folder){var n="",i=!1,o=!1,a=Object(F.e)(t.Result.Folder);if(a){if(a.interval=Object(E.momentNowUnix)(),t.Result.Hash&&Object(F.q)(t.Result.Folder,t.Result.Hash),Object(O.isNormal)(t.Result.MessageCount)&&a.messageCountAll(t.Result.MessageCount),Object(O.isNormal)(t.Result.MessageUnseenCount)&&(Object(O.pInt)(a.messageCountUnread())!==Object(O.pInt)(t.Result.MessageUnseenCount)&&(o=!0),a.messageCountUnread(t.Result.MessageUnseenCount)),o&&Object(F.c)(a.fullNameRaw),t.Result.Flags){for(n in t.Result.Flags)if(Object(O.has)(t.Result.Flags,n)){i=!0;var r=t.Result.Flags[n];Object(F.v)(a.fullNameRaw,n.toString(),[!r.IsSeen,!!r.IsFlagged,!!r.IsAnswered,!!r.IsForwarded,!!r.IsReadReceipt])}i&&c.reloadFlagsCurrentMessageListAndMessageFromCache()}B.a.initUidNextAndNewMessages(a.fullNameRaw,t.Result.UidNext,t.Result.NewMessages);var s=Object(F.g)(t.Result.Folder);(t.Result.Hash!==s||""===s||o)&&(a.fullNameRaw===U.a.currentFolderFullNameRaw()?c.reloadMessageList():Object(F.h)()===a.fullNameRaw&&c.recacheInboxMessageList())}}},e,t)},n.folderInformationMultiply=function(n){var r=this;void 0===n&&(n=!1);var e=U.a.getNextFolderNames();Object(O.isNonEmptyArray)(e)&&z.a.folderInformationMultiply(function(e,t){if(w.StorageResultType.Success===e&&t&&t.Result&&t.Result.List&&Object(O.isNonEmptyArray)(t.Result.List)){var a=Object(E.momentNowUnix)();g.a.each(t.Result.List,function(e){var t=Object(F.g)(e.Folder),n=Object(F.e)(e.Folder),i=!1;if(n)if(n.interval=a,e.Hash&&Object(F.q)(e.Folder,e.Hash),Object(O.isNormal)(e.MessageCount)&&n.messageCountAll(e.MessageCount),Object(O.isNormal)(e.MessageUnseenCount)&&(Object(O.pInt)(n.messageCountUnread())!==Object(O.pInt)(e.MessageUnseenCount)&&(i=!0),n.messageCountUnread(e.MessageUnseenCount)),i&&Object(F.c)(n.fullNameRaw),e.Hash!==t||""===t)n.fullNameRaw===U.a.currentFolderFullNameRaw()&&r.reloadMessageList();else if(i&&n.fullNameRaw===U.a.currentFolderFullNameRaw()){var o=B.a.messageList();Object(O.isNonEmptyArray)(o)&&r.folderInformation(n.fullNameRaw,o)}}),n&&g.a.delay(function(){return r.folderInformationMultiply(!0)},2e3)}},e)},n.messageListAction=function(t,n,e){var i,o=null,a=0;if(!Object(O.isUnd)(e)&&e||(e=B.a.messageListChecked()),i=g.a.uniq(g.a.compact(l()(g.a).call(g.a,e,function(e){return e&&e.uid?e.uid:null}))),""!==t&&0<i.length){switch(n){case w.MessageSetAction.SetSeen:g.a.each(i,function(e){a+=Object(F.w)(t,e,n)}),(o=Object(F.e)(t))&&o.messageCountUnread(o.messageCountUnread()-a),z.a.messageSetSeen(O.noop,t,i,!0);break;case w.MessageSetAction.UnsetSeen:g.a.each(i,function(e){a+=Object(F.w)(t,e,n)}),(o=Object(F.e)(t))&&o.messageCountUnread(o.messageCountUnread()-a+i.length),z.a.messageSetSeen(O.noop,t,i,!1);break;case w.MessageSetAction.SetFlag:g.a.each(i,function(e){Object(F.w)(t,e,n)}),z.a.messageSetFlagged(O.noop,t,i,!0);break;case w.MessageSetAction.UnsetFlag:g.a.each(i,function(e){Object(F.w)(t,e,n)}),z.a.messageSetFlagged(O.noop,t,i,!1)}this.reloadFlagsCurrentMessageListAndMessageFromCache(),B.a.message.viewTrigger(!B.a.message.viewTrigger())}},n.googleConnect=function(){h.a.open(Object(j.B)(),"Google","left=200,top=100,width=650,height=600,menubar=no,status=no,resizable=yes,scrollbars=yes")},n.twitterConnect=function(){h.a.open(Object(j.C)(),"Twitter","left=200,top=100,width=650,height=350,menubar=no,status=no,resizable=yes,scrollbars=yes")},n.facebookConnect=function(){h.a.open(Object(j.A)(),"Facebook","left=200,top=100,width=650,height=335,menubar=no,status=no,resizable=yes,scrollbars=yes")},n.socialUsers=function(e){void 0===e&&(e=!1),!0===e&&(I.a.google.loading(!0),I.a.facebook.loading(!0),I.a.twitter.loading(!0)),z.a.socialUsers(function(e,t){w.StorageResultType.Success===e&&t&&t.Result?(I.a.google.userName(t.Result.Google||""),I.a.facebook.userName(t.Result.Facebook||""),I.a.twitter.userName(t.Result.Twitter||"")):(I.a.google.userName(""),I.a.facebook.userName(""),I.a.twitter.userName("")),I.a.google.loading(!1),I.a.facebook.loading(!1),I.a.twitter.loading(!1)})},n.googleDisconnect=function(){I.a.google.loading(!0),z.a.googleDisconnect(this.socialUsers)},n.facebookDisconnect=function(){I.a.facebook.loading(!0),z.a.facebookDisconnect(this.socialUsers)},n.twitterDisconnect=function(){I.a.twitter.loading(!0),z.a.twitterDisconnect(this.socialUsers)},n.getAutocomplete=function(e,n){z.a.suggestions(function(e,t){w.StorageResultType.Success===e&&t&&Object(O.isArray)(t.Result)?n(g.a.compact(l()(g.a).call(g.a,t.Result,function(e){return e&&e[0]?new Y.EmailModel(e[0],e[1]):null}))):w.StorageResultType.Abort!==e&&n([])},e)},n.setExpandedFolder=function(e,t){var n=V.a(w.ClientSideKeyName.ExpandedFolders);Object(O.isArray)(n)||(n=[]),n=t?(n.push(e),g.a.uniq(n)):g.a.without(n,e),V.b(w.ClientSideKeyName.ExpandedFolders,n)},n.initHorizontalLayoutResizer=function(n){var i=null,o=null,a=function(e){e&&(i&&i.attr("style","height:"+e+"px"),o&&o.attr("style","top:"+(55+e)+"px"))},r={helper:"ui-resizable-helper-h",minHeight:200,maxHeight:500,handles:"s",create:function(e){var t;e&&e.target&&s()(t=v()(e.target)).call(t,".ui-resizable-handle").on("mousedown",function(){T.$html.addClass("rl-resizer")}).on("mouseup",function(){T.$html.removeClass("rl-resizer")})},resize:g.a.debounce(function(){T.$html.addClass("rl-resizer")},500,!0),start:function(){T.$html.addClass("rl-resizer")},stop:function(e,t){T.$html.removeClass("rl-resizer"),t&&t.size&&t.size.height&&(V.b(n,t.size.height),a(t.size.height),Object(O.windowResize)())}},t=function(e){if(e)i&&i.hasClass("ui-resizable")&&i.resizable("destroy").removeAttr("style"),o&&o.removeAttr("style");else if(T.$html.hasClass("rl-bottom-preview-pane")){i=v()(".b-message-list-wrapper"),o=v()(".b-message-view-wrapper"),i.hasClass("ui-resizable")||i.resizable(r);var t=Object(O.pInt)(V.a(n))||300;a(200<t?t:200)}};t(!1),N.b("layout",function(e){t(w.Layout.BottomPreview!==e)})},n.initVerticalLayoutResizer=function(n){var i=v()("#rl-left"),o=v()("#rl-right"),e=V.a(n)||null,a=function(e){e&&(Object(T.leftPanelWidth)(e),T.$html.removeClass("rl-resizer"),i.css({width:e+"px"}),o.css({left:e+"px"}))},t=function(e){if(e)i.resizable("disable"),a(60);else{i.resizable("enable");var t=Object(O.pInt)(V.a(n))||155;a(155<t?t:155)}},r=g.a.debounce(function(){T.$html.addClass("rl-resizer")},500,!0);null!==e&&a(155<e?e:155),i.resizable({helper:"ui-resizable-helper-w",minWidth:155,maxWidth:w.Magics.Size350px,handles:"e",create:function(e){var t;e&&e.target&&s()(t=v()(e.target)).call(t,".ui-resizable-handle").on("mousedown",function(){T.$html.addClass("rl-resizer")}).on("mouseup",function(){T.$html.removeClass("rl-resizer")})},resize:r,start:function(){T.$html.addClass("rl-resizer")},stop:function(e,t){T.$html.removeClass("rl-resizer"),t&&t.size&&t.size.width&&(V.b(n,t.size.width),Object(T.leftPanelWidth)(t.size.width),o.css({left:t.size.width+"px"}),i.css({position:"",top:"",left:"",height:""}))}}),N.b("left-panel.off",function(){t(!0)}),N.b("left-panel.on",function(){t(!1)})},n.logout=function(){var e=this;z.a.logout(function(){e.loginAndLogoutReload(!1,!0,K.settingsGet("ParentEmail")&&0<K.settingsGet("ParentEmail").length)})},n.bootstartTwoFactorScreen=function(){Object(ne.showScreenPopup)(c(407),[!0])},n.bootstartWelcomePopup=function(e){Object(ne.showScreenPopup)(c(530),[e])},n.bootstartLoginScreen=function(){T.$html.removeClass("rl-user-auth").addClass("rl-user-no-auth");var e=Object(O.pString)(K.appSettingsGet("customLoginLink"));e?(Object(ne.routeOff)(),Object(ne.setHash)(Object(j.w)(),!0),Object(ne.routeOff)(),g.a.defer(function(){h.a.location.href=e})):(Object(ne.startScreens)([Q.a]),Object(A.f)("rl-start-login-screens"),N.a("rl.bootstart-login-screens"))},n.bootend=function(){S.a&&S.a.set(100).end(),Object(ne.hideLoading)()},n.bootstart=function(){var n=this;t.prototype.bootstart.call(this),L.a.populate(),P.a.populate(),M.a.populate(),D.a.populate(),_.a.populate();var i=Object(O.pInt)(K.settingsGet("ContactsSyncInterval")),e=K.appSettingsGet("jsHash"),o=Object(O.pString)(K.settingsGet("StartupUrl")),a=K.settingsGet("AllowGoogleSocial"),r=K.settingsGet("AllowFacebookSocial"),s=K.settingsGet("AllowTwitterSocial");S.a&&S.a.set(90),T.leftPanelDisabled.subscribe(function(e){N.a("left-panel."+(e?"off":"on"))}),this.setWindowTitle(""),K.settingsGet("Auth")?(T.$html.addClass("rl-user-auth"),K.capa(w.Capa.TwoFactor)&&K.capa(w.Capa.TwoFactorForce)&&K.settingsGet("RequireTwoFactor")?(this.bootend(),this.bootstartTwoFactorScreen()):(this.setWindowTitle(Object(R.i18n)("TITLES/LOADING")),this.foldersReload(function(e){if(n.bootend(),e){if(""!==o&&(Object(ne.routeOff)(),Object(ne.setHash)(Object(j.w)(o),!0),Object(ne.routeOn)()),O.jassl&&h.a.crypto&&h.a.crypto.getRandomValues&&K.capa(w.Capa.OpenPGP)){var t=function(e){if(H.a.openpgp=e,h.a.Worker)try{H.a.openpgp.initWorker({path:Object(j.t)()})}catch(e){Object(O.log)(e)}H.a.openpgpKeyring=new e.Keyring,H.a.capaOpenPGP(!0),N.a("openpgp.init"),n.reloadOpenPgpKeys()};h.a.openpgp?t(h.a.openpgp):Object(O.jassl)(Object(j.s)()).then(function(){h.a.openpgp&&t(h.a.openpgp)})}else H.a.capaOpenPGP(!1);Object(ne.startScreens)([ee.a,K.capa(w.Capa.Settings)?te.a:null]),(a||r||s)&&n.socialUsers(!0),N.b("interval.2m",function(){return n.folderInformation(Object(F.h)())}),N.b("interval.3m",function(){var e=U.a.currentFolderFullNameRaw();Object(F.h)()!==e&&n.folderInformation(e)}),N.b("interval.2m-after5m",function(){return n.folderInformationMultiply()}),N.b("interval.15m",function(){return n.quota()}),N.b("interval.20m",function(){return n.foldersReload()}),i=(i=5<=i?i:20)<=320?i:320,g.a.delay(function(){return n.contactsSync()},w.Magics.Time10s),g.a.delay(function(){return n.folderInformationMultiply(!0)},w.Magics.Time2s),h.a.setInterval(function(){return n.contactsSync()},6e4*i+5e3),n.accountsAndIdentities(!0),g.a.delay(function(){var e=U.a.currentFolderFullNameRaw();Object(F.h)()!==e&&n.folderInformation(e)},1e3),g.a.delay(function(){return n.quota()},5e3),g.a.delay(function(){return z.a.appDelayStart(O.noop)},35e3),N.b("rl.auto-logout",function(){return n.logout()}),Object(A.f)("rl-start-user-screens"),N.a("rl.bootstart-user-screens"),K.settingsGet("WelcomePageUrl")&&g.a.delay(function(){return n.bootstartWelcomePopup(K.settingsGet("WelcomePageUrl"))},1e3),K.settingsGet("AccountSignMe")&&h.a.navigator.registerProtocolHandler&&K.capa(w.Capa.Composer)&&g.a.delay(function(){try{h.a.navigator.registerProtocolHandler("mailto",h.a.location.protocol+"//"+h.a.location.host+h.a.location.pathname+"?mailto&to=%s",""+(K.settingsGet("Title")||"RainLoop"))}catch(e){}K.settingsGet("MailToEmail")&&Object(O.mailToHelper)(K.settingsGet("MailToEmail"),c(123))},500),T.bMobileDevice||g.a.defer(function(){return n.initVerticalLayoutResizer(w.ClientSideKeyName.FolderListSize)})}else n.logout()}))):(this.bootend(),this.bootstartLoginScreen()),a&&(h.a["rl_"+e+"_google_service"]=function(){I.a.google.loading(!0),n.socialUsers()}),r&&(h.a["rl_"+e+"_facebook_service"]=function(){I.a.facebook.loading(!0),n.socialUsers()}),s&&(h.a["rl_"+e+"_twitter_service"]=function(){I.a.twitter.loading(!0),n.socialUsers()}),N.b("interval.1m",function(){return Object(E.reload)()}),Object(A.f)("rl-start-screens"),N.a("rl.bootstart-end")},e}(c(258).a);t.default=new ie},,,function(e,t,n){"use strict";n.d(t,"a",function(){return o});n(48),n(56);var i=n(30),l=n.n(i),u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",d={urlsafe_encode:function(e){return d.encode(e).replace(/[+]/g,"-").replace(/[\/]/g,"_").replace(/[=]/g,"")},encode:function(e){var t,n,i,o,a,r,s,c="",l=0;for(e=d._utf8_encode(e);l<e.length;)o=(t=e.charCodeAt(l++))>>2,a=(3&t)<<4|(n=e.charCodeAt(l++))>>4,r=(15&n)<<2|(i=e.charCodeAt(l++))>>6,s=63&i,isNaN(n)?r=s=64:isNaN(i)&&(s=64),c=c+u.charAt(o)+u.charAt(a)+u.charAt(r)+u.charAt(s);return c},decode:function(e){var t,n,i,o,a,r,s="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)t=l()(u).call(u,e.charAt(c++))<<2|(o=l()(u).call(u,e.charAt(c++)))>>4,n=(15&o)<<4|(a=l()(u).call(u,e.charAt(c++)))>>2,i=(3&a)<<6|(r=l()(u).call(u,e.charAt(c++))),s+=String.fromCharCode(t),64!==a&&(s+=String.fromCharCode(n)),64!==r&&(s+=String.fromCharCode(i));return d._utf8_decode(s)},_utf8_encode:function(e){for(var t="",n=0,i=(e=e.replace(/\r\n/g,"\n")).length,o=0;n<i;n++)(o=e.charCodeAt(n))<128?t+=String.fromCharCode(o):(127<o&&o<2048?t+=String.fromCharCode(o>>6|192):(t+=String.fromCharCode(o>>12|224),t+=String.fromCharCode(o>>6&63|128)),t+=String.fromCharCode(63&o|128));return t},_utf8_decode:function(e){for(var t="",n=0,i=0,o=0,a=0;n<e.length;)(i=e.charCodeAt(n))<128?(t+=String.fromCharCode(i),n++):191<i&&i<224?(o=e.charCodeAt(n+1),t+=String.fromCharCode((31&i)<<6|63&o),n+=2):(o=e.charCodeAt(n+1),a=e.charCodeAt(n+2),t+=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a),n+=3);return t}},o=(d.decode,d.encode,d.urlsafe_encode)},function(e,t,n){"use strict";var i=n(30),o=n.n(i),a=n(10),r=n.n(a),s=n(3),c=n.n(s),l=n(25),u=n(2),d=n(0),p=n(14),f=n(5),h=n(58),m=n(31),g=n(11),b=n(16),v=n(418),y=function(e){function t(){return e.apply(this,arguments)||this}r()(t,e);var n=t.prototype;return n.isFolderExpanded=function(e,t){return t&&Object(u.isArray)(t)&&-1!==o()(c.a).call(c.a,t,e)},n.normalizeFolder=function(e){return""===e||l.r===e||null!==p.e(e)?e:""},n.folderResponseParseRec=function(n,e,i){var o=this,a=g.a.displaySpecSetting(),r=[];return c.a.each(e,function(e){if(e){var t=p.e(e.FullNameRaw);t||(t=v.a.newInstanceFromJson(e))&&(p.r(e.FullNameRaw,t),p.p(t.fullNameHash,e.FullNameRaw,t)),t&&(a?t.checkable(!!e.Checkable):t.checkable(!0),t.collapsed(!o.isFolderExpanded(t.fullNameHash,i)),e.Extended&&(e.Extended.Hash&&p.q(t.fullNameRaw,e.Extended.Hash),Object(u.isNormal)(e.Extended.MessageCount)&&t.messageCountAll(e.Extended.MessageCount),Object(u.isNormal)(e.Extended.MessageUnseenCount)&&t.messageCountUnread(e.Extended.MessageUnseenCount)),e.SubFolders&&"Collection/FolderCollection"===e.SubFolders["@Object"]&&e.SubFolders["@Collection"]&&Object(u.isArray)(e.SubFolders["@Collection"])&&t.subFolders(o.folderResponseParseRec(n,e.SubFolders["@Collection"],i)),r.push(t))}}),r},n.foldersList=function(e){if(e&&"Collection/FolderCollection"===e["@Object"]&&e["@Collection"]&&Object(u.isArray)(e["@Collection"])){var t=h.a(d.ClientSideKeyName.ExpandedFolders),n=Object(u.pInt)(e.CountRec),i=Object(u.pInt)(f.appSettingsGet("folderSpecLimit"));i=100<i?100:i<10?10:i,g.a.displaySpecSetting(n<=0||i<n),g.a.folderList(this.folderResponseParseRec(Object(u.isUnd)(e.Namespace)?"":e.Namespace,e["@Collection"],t))}},n.foldersAdditionalParameters=function(e){if(e&&e&&"Collection/FolderCollection"===e["@Object"]&&e["@Collection"]&&Object(u.isArray)(e["@Collection"])){Object(u.isUnd)(e.Namespace)||(g.a.namespace=e.Namespace),m.a.threadsAllowed(!!f.appSettingsGet("useImapThread")&&e.IsThreadsSupported&&!0),g.a.folderList.optimized(!!e.Optimized);var t=!1;e.SystemFolders&&""==""+f.settingsGet("SentFolder")+f.settingsGet("DraftFolder")+f.settingsGet("SpamFolder")+f.settingsGet("TrashFolder")+f.settingsGet("ArchiveFolder")+f.settingsGet("NullFolder")&&(f.settingsSet("SentFolder",e.SystemFolders[d.ServerFolderType.SENT]||null),f.settingsSet("DraftFolder",e.SystemFolders[d.ServerFolderType.DRAFTS]||null),f.settingsSet("SpamFolder",e.SystemFolders[d.ServerFolderType.JUNK]||null),f.settingsSet("TrashFolder",e.SystemFolders[d.ServerFolderType.TRASH]||null),f.settingsSet("ArchiveFolder",e.SystemFolders[d.ServerFolderType.ALL]||null),t=!0),g.a.sentFolder(this.normalizeFolder(f.settingsGet("SentFolder"))),g.a.draftFolder(this.normalizeFolder(f.settingsGet("DraftFolder"))),g.a.spamFolder(this.normalizeFolder(f.settingsGet("SpamFolder"))),g.a.trashFolder(this.normalizeFolder(f.settingsGet("TrashFolder"))),g.a.archiveFolder(this.normalizeFolder(f.settingsGet("ArchiveFolder"))),t&&b.a.saveSystemFolders(u.noop,{SentFolder:g.a.sentFolder(),DraftFolder:g.a.draftFolder(),SpamFolder:g.a.spamFolder(),TrashFolder:g.a.trashFolder(),ArchiveFolder:g.a.archiveFolder(),NullFolder:"NullFolder"}),h.b(d.ClientSideKeyName.FoldersLashHash,e.FoldersHash)}},t}(n(268).a);t.a=new y},function(e,t,n){"use strict";n.d(t,"a",function(){return S});n(76),n(52),n(48),n(56);var i=n(18),o=n.n(i),a=n(30),r=n.n(a),s=n(12),c=n.n(s),l=n(10),u=n.n(l),d=n(3),p=n.n(d),f=n(1),h=n(0),m=n(2),g=n(9),b=n(14),v=n(46),y=n(392),S=function(e){function t(){var o;(o=e.call(this,"FilterModel")||this).enabled=f.a.observable(!0),o.id="",o.name=f.a.observable(""),o.name.error=f.a.observable(!1),o.name.focused=f.a.observable(!1),o.conditions=f.a.observableArray([]),o.conditionsType=f.a.observable(h.FilterRulesType.Any),o.actionValue=f.a.observable(""),o.actionValue.error=f.a.observable(!1),o.actionValueSecond=f.a.observable(""),o.actionValueThird=f.a.observable(""),o.actionValueFourth=f.a.observable(""),o.actionValueFourth.error=f.a.observable(!1),o.actionMarkAsRead=f.a.observable(!1),o.actionKeep=f.a.observable(!0),o.actionNoStop=f.a.observable(!1),o.actionType=f.a.observable(h.FiltersAction.MoveTo),o.actionType.subscribe(function(){o.actionValue(""),o.actionValue.error(!1),o.actionValueSecond(""),o.actionValueThird(""),o.actionValueFourth(""),o.actionValueFourth.error(!1)});return o.nameSub=f.a.computed(function(){var e,t,n="",i=o.actionValue();switch(o.actionType()){case h.FiltersAction.MoveTo:n=Object(g.i18n)("SETTINGS_FILTERS/SUBNAME_MOVE_TO",{FOLDER:(e=i,t=Object(b.e)(e),t?t.fullName.replace("."===t.delimiter?/\./:/[\\/]+/," / "):e)});break;case h.FiltersAction.Forward:n=Object(g.i18n)("SETTINGS_FILTERS/SUBNAME_FORWARD_TO",{EMAIL:i});break;case h.FiltersAction.Vacation:n=Object(g.i18n)("SETTINGS_FILTERS/SUBNAME_VACATION_MESSAGE");break;case h.FiltersAction.Reject:n=Object(g.i18n)("SETTINGS_FILTERS/SUBNAME_REJECT");break;case h.FiltersAction.Discard:n=Object(g.i18n)("SETTINGS_FILTERS/SUBNAME_DISCARD")}return n?"("+n+")":""}),o.actionTemplate=f.a.computed(function(){var e="";switch(o.actionType()){case h.FiltersAction.Forward:e="SettingsFiltersActionForward";break;case h.FiltersAction.Vacation:e="SettingsFiltersActionVacation";break;case h.FiltersAction.Reject:e="SettingsFiltersActionReject";break;case h.FiltersAction.None:e="SettingsFiltersActionNone";break;case h.FiltersAction.Discard:e="SettingsFiltersActionDiscard";break;case h.FiltersAction.MoveTo:default:e="SettingsFiltersActionMoveToFolder"}return e}),o.regDisposables(o.conditions.subscribe(m.windowResizeCallback)),o.regDisposables(o.name.subscribe(function(e){o.name.error(""===e)})),o.regDisposables(o.actionValue.subscribe(function(e){o.actionValue.error(""===e)})),o.regDisposables([o.actionNoStop,o.actionTemplate]),o.deleteAccess=f.a.observable(!1),o.canBeDeleted=f.a.observable(!0),o}u()(t,e);var n=t.prototype;return n.generateID=function(){this.id=Object(m.fakeMd5)()},n.verify=function(){var e,t;return""===this.name()?(this.name.error(!0),!1):!(0<this.conditions().length&&c()(p.a).call(p.a,this.conditions(),function(e){return e&&!e.verify()}))&&(""===this.actionValue()&&-1<Object(m.inArray)(this.actionType(),[h.FiltersAction.MoveTo,h.FiltersAction.Forward,h.FiltersAction.Reject,h.FiltersAction.Vacation])?(this.actionValue.error(!0),!1):h.FiltersAction.Forward===this.actionType()&&-1===r()(e=this.actionValue()).call(e,"@")?(this.actionValue.error(!0),!1):h.FiltersAction.Vacation===this.actionType()&&""!==this.actionValueFourth()&&-1===r()(t=this.actionValueFourth()).call(t,"@")?(this.actionValueFourth.error(!0),!1):(this.name.error(!1),this.actionValue.error(!1),!0))},n.toJson=function(){return{ID:this.id,Enabled:this.enabled()?"1":"0",Name:this.name(),ConditionsType:this.conditionsType(),Conditions:o()(p.a).call(p.a,this.conditions(),function(e){return e.toJson()}),ActionValue:this.actionValue(),ActionValueSecond:this.actionValueSecond(),ActionValueThird:this.actionValueThird(),ActionValueFourth:this.actionValueFourth(),ActionType:this.actionType(),Stop:this.actionNoStop()?"0":"1",Keep:this.actionKeep()?"1":"0",MarkAsRead:this.actionMarkAsRead()?"1":"0"}},n.addCondition=function(){this.conditions.push(new y.a)},n.removeCondition=function(e){this.conditions.remove(e),Object(m.delegateRunOnDestroy)(e)},n.setRecipients=function(){this.actionValueFourth(v.a.accountsEmails().join(", "))},n.parse=function(e){var t=!1;return e&&"Object/Filter"===e["@Object"]&&(this.id=Object(m.pString)(e.ID),this.name(Object(m.pString)(e.Name)),this.enabled(!!e.Enabled),this.conditionsType(Object(m.pString)(e.ConditionsType)),this.conditions([]),Object(m.isNonEmptyArray)(e.Conditions)&&this.conditions(p.a.compact(o()(p.a).call(p.a,e.Conditions,function(e){var t=new y.a;return t&&t.parse(e)?t:null}))),this.actionType(Object(m.pString)(e.ActionType)),this.actionValue(Object(m.pString)(e.ActionValue)),this.actionValueSecond(Object(m.pString)(e.ActionValueSecond)),this.actionValueThird(Object(m.pString)(e.ActionValueThird)),this.actionValueFourth(Object(m.pString)(e.ActionValueFourth)),this.actionNoStop(!e.Stop),this.actionKeep(!!e.Keep),this.actionMarkAsRead(!!e.MarkAsRead),t=!0),t},n.cloneSelf=function(){var e=new t;return e.id=this.id,e.enabled(this.enabled()),e.name(this.name()),e.name.error(this.name.error()),e.conditionsType(this.conditionsType()),e.actionMarkAsRead(this.actionMarkAsRead()),e.actionType(this.actionType()),e.actionValue(this.actionValue()),e.actionValue.error(this.actionValue.error()),e.actionValueSecond(this.actionValueSecond()),e.actionValueThird(this.actionValueThird()),e.actionValueFourth(this.actionValueFourth()),e.actionKeep(this.actionKeep()),e.actionNoStop(this.actionNoStop()),e.conditions(o()(p.a).call(p.a,this.conditions(),function(e){return e.cloneSelf()})),e},t}(n(63).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(33),o=n.n(i),a=n(10),r=n.n(a),s=n(1),c=n(0),l=n(2),u=function(e){function t(){var t;return(t=e.call(this,"FilterConditionModel")||this).field=s.a.observable(c.FilterConditionField.From),t.type=s.a.observable(c.FilterConditionType.Contains),t.value=s.a.observable(""),t.value.error=s.a.observable(!1),t.valueSecond=s.a.observable(""),t.valueSecond.error=s.a.observable(!1),t.template=s.a.computed(function(){var e="";switch(t.field()){case c.FilterConditionField.Size:e="SettingsFiltersConditionSize";break;case c.FilterConditionField.Header:e="SettingsFiltersConditionMore";break;default:e="SettingsFiltersConditionDefault"}return e},o()(t)),t.field.subscribe(function(){t.value(""),t.valueSecond("")}),t.regDisposables([t.template]),t}r()(t,e);var n=t.prototype;return n.verify=function(){return""===this.value()?(this.value.error(!0),!1):c.FilterConditionField.Header!==this.field()||""!==this.valueSecond()||(this.valueSecond.error(!0),!1)},n.parse=function(e){return!!(e&&e.Field&&e.Type)&&(this.field(Object(l.pString)(e.Field)),this.type(Object(l.pString)(e.Type)),this.value(Object(l.pString)(e.Value)),this.valueSecond(Object(l.pString)(e.ValueSecond)),!0)},n.toJson=function(){return{Field:this.field(),Type:this.type(),Value:this.value(),ValueSecond:this.valueSecond()}},n.cloneSelf=function(){var e=new t;return e.field(this.field()),e.type(this.type()),e.value(this.value()),e.valueSecond(this.valueSecond()),e},t}(n(63).a)},function(e,t){e.exports=window.qr},,,,,,,,,,function(e,t,n){"use strict";n.r(t),n.d(t,"KeyboardShortcutsHelpPopupView",function(){return b}),n.d(t,"default",function(){return b});var i,o=n(34),s=n.n(o),a=n(12),c=n.n(a),r=n(10),l=n.n(r),u=n(3),d=n.n(u),p=n(21),f=n.n(p),h=n(0),m=n(7),g=n(27),b=Object(m.popup)({name:"View/Popup/KeyboardShortcutsHelp",templateID:"PopupsKeyboardShortcutsHelp"})(i=function(t){function e(){var e;return(e=t.call(this)||this).sDefaultKeyScope=h.KeyState.PopupKeyboardShortcutsHelp,e}return l()(e,t),e.prototype.onBuild=function(r){f()("tab, shift+tab, left, right",h.KeyState.PopupKeyboardShortcutsHelp,d.a.throttle(function(e,t){if(e&&t){var n,i=c()(r).call(r,".nav.nav-tabs > li"),o=t&&("tab"===t.shortcut||"right"===t.shortcut),a=i.index(s()(i).call(i,".active"));return!o&&0<a?a-=1:o&&a<i.length-1?a+=1:a=o?0:i.length-1,c()(n=i.eq(a)).call(n,'a[data-toggle="tab"]').tab("show"),!1}return!0},h.Magics.Time100ms))},e}(g.a))||i},function(e,t,r){"use strict";r.r(t),r.d(t,"ContactsPopupView",function(){return ee}),r.d(t,"default",function(){return ee});r(76),r(48),r(266);var n,i,o,a,s,c,l,u,d,p=r(19),f=r.n(p),h=r(26),m=r.n(h),g=r(18),b=r.n(g),v=r(12),y=r.n(v),S=r(34),O=r.n(S),w=r(10),T=r.n(w),C=r(20),A=r.n(C),E=r(4),F=r.n(E),j=r(3),N=r.n(j),R=r(8),I=r.n(R),L=r(1),P=r(21),M=r.n(P),D=r(172),_=r.n(D),k=r(0),x=r(2),U=r(25),H=r(6),B=r(270),G=r(15),V=r(9),K=r(37),q=r(101),z=r(16),W=r(5),Y=r(81),$=r(429),J=r(263),X=r(22),Z=r(7),Q=r(27),ee=(n=Object(Z.popup)({name:"View/Popup/Contacts",templateID:"PopupsContacts"}),i=Object(Z.command)(),o=Object(Z.command)(function(e){return 0<e.contactsCheckedOrSelected().length}),a=Object(Z.command)(function(e){return 0<e.contactsCheckedOrSelected().length}),s=Object(Z.command)(),c=Object(Z.command)(function(e){var t=e.viewHasNonEmptyRequiredProperties(),n=e.viewReadOnly();return!e.viewSaving()&&t&&!n}),l=Object(Z.command)(function(e){return!e.contacts.syncing()&&!e.contacts.importing()}),n((d=function(n){function a(){var i,e=function(e){e&&0<e.length&&(i.viewProperties.removeAll(e),Object(x.delegateRunOnDestroy)(e))};(i=n.call(this)||this).bBackToCompose=!1,i.sLastComposeFocusedField="",i.allowContactsSync=q.a.allowContactsSync,i.enableContactsSync=q.a.enableContactsSync,i.allowExport=!H.bMobileDevice,i.search=L.a.observable(""),i.contactsCount=L.a.observable(0),i.contacts=q.a.contacts,i.currentContact=L.a.observable(null),i.importUploaderButton=L.a.observable(null),i.contactsPage=L.a.observable(1),i.contactsPageCount=L.a.computed(function(){var e=F.a.Math.ceil(i.contactsCount()/U.c);return e<=0?1:e}),i.contactsPagenator=L.a.computed(Object(x.computedPagenatorHelper)(i.contactsPage,i.contactsPageCount)),i.emptySelection=L.a.observable(!0),i.viewClearSearch=L.a.observable(!1),i.viewID=L.a.observable(""),i.viewReadOnly=L.a.observable(!1),i.viewProperties=L.a.observableArray([]),i.viewSaveTrigger=L.a.observable(k.SaveSettingsStep.Idle),i.viewPropertiesNames=L.a.computed(function(){return O()(N.a).call(N.a,i.viewProperties(),function(e){return-1<Object(x.inArray)(e.type(),[k.ContactPropertyType.FirstName,k.ContactPropertyType.LastName])})}),i.viewPropertiesOther=L.a.computed(function(){return O()(N.a).call(N.a,i.viewProperties(),function(e){return-1<Object(x.inArray)(e.type(),[k.ContactPropertyType.Nick])})}),i.viewPropertiesEmails=L.a.computed(function(){return O()(N.a).call(N.a,i.viewProperties(),function(e){return k.ContactPropertyType.Email===e.type()})}),i.viewPropertiesWeb=L.a.computed(function(){return O()(N.a).call(N.a,i.viewProperties(),function(e){return k.ContactPropertyType.Web===e.type()})}),i.viewHasNonEmptyRequiredProperties=L.a.computed(function(){var e=i.viewPropertiesNames(),t=i.viewPropertiesEmails(),n=function(e){return""!==Object(x.trim)(e.value())};return!(!y()(N.a).call(N.a,e,n)&&!y()(N.a).call(N.a,t,n))}),i.viewPropertiesPhones=L.a.computed(function(){return O()(N.a).call(N.a,i.viewProperties(),function(e){return k.ContactPropertyType.Phone===e.type()})}),i.viewPropertiesEmailsNonEmpty=L.a.computed(function(){return O()(N.a).call(N.a,i.viewPropertiesNames(),function(e){return""!==Object(x.trim)(e.value())})});var t=function(e){var t=e.focused();return""===Object(x.trim)(e.value())&&!t};return i.viewPropertiesEmailsEmptyAndOnFocused=L.a.computed(function(){return O()(N.a).call(N.a,i.viewPropertiesEmails(),t)}),i.viewPropertiesPhonesEmptyAndOnFocused=L.a.computed(function(){return O()(N.a).call(N.a,i.viewPropertiesPhones(),t)}),i.viewPropertiesWebEmptyAndOnFocused=L.a.computed(function(){return O()(N.a).call(N.a,i.viewPropertiesWeb(),t)}),i.viewPropertiesOtherEmptyAndOnFocused=L.a.computed(function(){return O()(N.a).call(N.a,i.viewPropertiesOther(),t)}),i.viewPropertiesEmailsEmptyAndOnFocused.subscribe(e),i.viewPropertiesPhonesEmptyAndOnFocused.subscribe(e),i.viewPropertiesWebEmptyAndOnFocused.subscribe(e),i.viewPropertiesOtherEmptyAndOnFocused.subscribe(e),i.viewSaving=L.a.observable(!1),i.useCheckboxesInList=K.a.useCheckboxesInList,i.search.subscribe(function(){i.reloadContactList()}),i.contacts.subscribe(x.windowResizeCallback),i.viewProperties.subscribe(x.windowResizeCallback),i.contactsChecked=L.a.computed(function(){return O()(N.a).call(N.a,i.contacts(),function(e){return e.checked()})}),i.contactsCheckedOrSelected=L.a.computed(function(){var e=i.contactsChecked(),t=i.currentContact();return N.a.union(e,t?[t]:[])}),i.contactsCheckedOrSelectedUids=L.a.computed(function(){return b()(N.a).call(N.a,i.contactsCheckedOrSelected(),function(e){return e.idContact})}),i.selector=new B.a(i.contacts,i.currentContact,null,".e-contact-item .actionHandle",".e-contact-item.selected",".e-contact-item .checkboxItem",".e-contact-item.focused"),i.selector.on("onItemSelect",function(e){i.populateViewContact(e||null),e||i.emptySelection(!0)}),i.selector.on("onItemGetUid",function(e){return e?e.generateUid():""}),i.bDropPageAfterDelete=!1,i.watchDirty=L.a.observable(!1),i.watchHash=L.a.observable(!1),i.viewHash=L.a.computed(function(){return""+b()(N.a).call(N.a,i.viewProperties(),function(e){return e.value()}).join("")}),i.viewHash.subscribe(function(){!i.watchHash()||i.viewReadOnly()||i.watchDirty()||i.watchDirty(!0)}),i.sDefaultKeyScope=k.KeyState.ContactList,i}T()(a,n);var e=a.prototype;return e.newCommand=function(){this.populateViewContact(null),this.currentContact(null)},e.deleteCommand=function(){this.deleteSelectedContacts(),this.emptySelection(!0)},e.newMessageCommand=function(){if(!W.capa(k.Capa.Composer))return!1;var e=[],t=null,n=null,i=null,o=this.contactsCheckedOrSelected();if(Object(x.isNonEmptyArray)(o)&&(e=b()(N.a).call(N.a,o,function(e){if(e){var t=e.getNameAndEmailHelper(),n=t?new Y.EmailModel(t[0],t[1]):null;if(n&&n.validate())return n}return null}),e=N.a.compact(e)),Object(x.isNonEmptyArray)(e)){switch(this.bBackToCompose=!1,Object(Z.hideScreenPopup)(a),this.sLastComposeFocusedField){case"cc":n=e;break;case"bcc":i=e;break;case"to":default:t=e}this.sLastComposeFocusedField="",N.a.delay(function(){Object(Z.showScreenPopup)(r(123),[k.ComposeType.Empty,null,t,n,i])},k.Magics.Time200ms)}return!0},e.clearCommand=function(){this.search("")},e.saveCommand=function(){var i=this;this.viewSaving(!0),this.viewSaveTrigger(k.SaveSettingsStep.Animate);var o=Object(x.fakeMd5)(),t=[];N.a.each(this.viewProperties(),function(e){e.type()&&e.type()!==k.ContactPropertyType.FullName&&""!==Object(x.trim)(e.value())&&t.push([e.type(),e.value(),e.typeStr()])}),z.a.contactSave(function(e,t){var n=!1;i.viewSaving(!1),k.StorageResultType.Success===e&&t&&t.Result&&t.Result.RequestUid===o&&0<Object(x.pInt)(t.Result.ResultID)&&(""===i.viewID()&&i.viewID(Object(x.pInt)(t.Result.ResultID)),i.reloadContactList(),n=!0),N.a.delay(function(){i.viewSaveTrigger(n?k.SaveSettingsStep.TrueResult:k.SaveSettingsStep.FalseResult)},k.Magics.Time350ms),n&&(i.watchDirty(!1),N.a.delay(function(){i.viewSaveTrigger(k.SaveSettingsStep.Idle)},k.Magics.Time1s))},o,this.viewID(),t)},e.syncCommand=function(){var n=this;Object(X.a)().contactsSync(function(e,t){k.StorageResultType.Success===e&&t&&t.Result||F.a.alert(Object(V.getNotification)(t&&t.ErrorCode?t.ErrorCode:k.Notification.ContactsSyncError)),n.reloadContactList(!0)})},e.getPropertyPlaceholder=function(e){var t="";switch(e){case k.ContactPropertyType.LastName:t="CONTACTS/PLACEHOLDER_ENTER_LAST_NAME";break;case k.ContactPropertyType.FirstName:t="CONTACTS/PLACEHOLDER_ENTER_FIRST_NAME";break;case k.ContactPropertyType.Nick:t="CONTACTS/PLACEHOLDER_ENTER_NICK_NAME"}return t},e.addNewProperty=function(e,t){this.viewProperties.push(new J.a(e,t||"","",!0,this.getPropertyPlaceholder(e)))},e.addNewOrFocusProperty=function(t,e){var n=y()(N.a).call(N.a,this.viewProperties(),function(e){return t===e.type()});n?n.focused(!0):this.addNewProperty(t,e)},e.addNewEmail=function(){this.addNewProperty(k.ContactPropertyType.Email,"Home")},e.addNewPhone=function(){this.addNewProperty(k.ContactPropertyType.Phone,"Mobile")},e.addNewWeb=function(){this.addNewProperty(k.ContactPropertyType.Web)},e.addNewNickname=function(){this.addNewOrFocusProperty(k.ContactPropertyType.Nick)},e.addNewNotes=function(){this.addNewOrFocusProperty(k.ContactPropertyType.Note)},e.addNewBirthday=function(){this.addNewOrFocusProperty(k.ContactPropertyType.Birthday)},e.exportVcf=function(){Object(X.a)().download(Object(G.l)())},e.exportCsv=function(){Object(X.a)().download(Object(G.k)())},e.initUploader=function(){var i=this;if(this.importUploaderButton()){var e=new _.a({action:Object(G.I)(),name:"uploader",queueSize:1,multipleSizeLimit:1,disableDragAndDrop:!0,disableMultiple:!0,disableDocumentDropPrevent:!0,clickElement:this.importUploaderButton()});e&&e.on("onStart",function(){i.contacts.importing(!0)}).on("onComplete",function(e,t,n){i.contacts.importing(!1),i.reloadContactList(),e&&t&&n&&n.Result||F.a.alert(Object(V.i18n)("CONTACTS/ERROR_IMPORT_FILE"))})}},e.removeCheckedOrSelectedContactsFromList=function(){var t=this,n=this.contacts,e=this.contactsCheckedOrSelected(),i=this.currentContact(),o=this.contacts().length;0<e.length&&(N.a.each(e,function(e){i&&i.idContact===e.idContact&&(i=null,t.currentContact(null)),e.deleted(!0),o-=1}),o<=0&&(this.bDropPageAfterDelete=!0),N.a.delay(function(){N.a.each(e,function(e){n.remove(e),Object(x.delegateRunOnDestroy)(e)})},k.Magics.Time500ms))},e.deleteSelectedContacts=function(){0<this.contactsCheckedOrSelected().length&&(z.a.contactsDelete(m()(N.a).call(N.a,this.deleteResponse,this),this.contactsCheckedOrSelectedUids()),this.removeCheckedOrSelectedContactsFromList())},e.deleteResponse=function(e,t){var n=this;k.Magics.Time500ms<(k.StorageResultType.Success===e&&t&&t.Time?Object(x.pInt)(t.Time):0)?this.reloadContactList(this.bDropPageAfterDelete):N.a.delay(function(){n.reloadContactList(n.bDropPageAfterDelete)},k.Magics.Time500ms)},e.removeProperty=function(e){this.viewProperties.remove(e),Object(x.delegateRunOnDestroy)(e)},e.populateViewContact=function(e){var t="",n="",i="",o=[];this.watchHash(!1),this.emptySelection(!1),this.viewReadOnly(!1),e&&(t=e.idContact,Object(x.isNonEmptyArray)(e.properties)&&N.a.each(e.properties,function(e){e&&e[0]&&(k.ContactPropertyType.LastName===e[0]?n=e[1]:k.ContactPropertyType.FirstName===e[0]?i=e[1]:o.push(new J.a(e[0],e[2]||"",e[1])))}),this.viewReadOnly(!!e.readOnly)),o.unshift(new J.a(k.ContactPropertyType.LastName,"",n,!1,this.getPropertyPlaceholder(k.ContactPropertyType.LastName))),o.unshift(new J.a(k.ContactPropertyType.FirstName,"",i,!e,this.getPropertyPlaceholder(k.ContactPropertyType.FirstName))),this.viewID(t),Object(x.delegateRunOnDestroy)(this.viewProperties()),this.viewProperties([]),this.viewProperties(o),this.watchDirty(!1),this.watchHash(!0)},e.reloadContactList=function(e){var o=this;void 0===e&&(e=!1);var t=(this.contactsPage()-1)*U.c;this.bDropPageAfterDelete=!1,e&&(this.contactsPage(1),t=0),this.contacts.loading(!0),z.a.contacts(function(e,t){var n=0,i=[];k.StorageResultType.Success===e&&t&&t.Result&&t.Result.List&&Object(x.isNonEmptyArray)(t.Result.List)&&(i=b()(N.a).call(N.a,t.Result.List,function(e){var t=new $.a;return t.parse(e)?t:null}),i=N.a.compact(i),n=0<(n=Object(x.pInt)(t.Result.Count))?n:0),o.contactsCount(n),Object(x.delegateRunOnDestroy)(o.contacts()),o.contacts(i),o.contacts.loading(!1),o.viewClearSearch(""!==o.search())},t,U.c,this.search())},e.onBuild=function(e){var t=this;this.oContentVisible=I()(".b-list-content",e),this.oContentScrollable=I()(".content",this.oContentVisible),this.selector.init(this.oContentVisible,this.oContentScrollable,k.KeyState.ContactList),M()("delete",k.KeyState.ContactList,function(){return t.deleteCommand(),!1}),M()("c, w",k.KeyState.ContactList,function(){return t.newMessageCommand(),!1});var n=this;e.on("click",".e-pagenator .e-page",function(){var e=L.a.dataFor(this);e&&(n.contactsPage(Object(x.pInt)(e.value)),n.reloadContactList())}),this.initUploader()},e.onShow=function(e,t){this.bBackToCompose=!Object(x.isUnd)(e)&&!!e,this.sLastComposeFocusedField=Object(x.isUnd)(t)?"":t,Object(Z.routeOff)(),this.reloadContactList(!0)},e.onHide=function(){Object(Z.routeOn)(),this.currentContact(null),this.emptySelection(!0),this.search(""),this.contactsCount(0),Object(x.delegateRunOnDestroy)(this.contacts()),this.contacts([]),this.sLastComposeFocusedField="",this.bBackToCompose&&(this.bBackToCompose=!1,W.capa(k.Capa.Composer)&&Object(Z.showScreenPopup)(r(123)))},a}(Q.a),A()(d.prototype,"newCommand",[i],f()(d.prototype,"newCommand"),d.prototype),A()(d.prototype,"deleteCommand",[o],f()(d.prototype,"deleteCommand"),d.prototype),A()(d.prototype,"newMessageCommand",[a],f()(d.prototype,"newMessageCommand"),d.prototype),A()(d.prototype,"clearCommand",[s],f()(d.prototype,"clearCommand"),d.prototype),A()(d.prototype,"saveCommand",[c],f()(d.prototype,"saveCommand"),d.prototype),A()(d.prototype,"syncCommand",[l],f()(d.prototype,"syncCommand"),d.prototype),u=d))||u)},function(e,t,n){"use strict";n.r(t),n.d(t,"FolderCreateView",function(){return T}),n.d(t,"default",function(){return T});n(52);var i,o,a,r,s=n(19),c=n.n(s),l=n(10),u=n.n(l),d=n(20),p=n.n(d),f=n(1),h=n(0),m=n(25),g=n(6),b=n(2),v=n(11),y=n(88),S=n(22),O=n(7),w=n(27),T=(i=Object(O.popup)({name:"View/Popup/FolderCreate",templateID:"PopupsFolderCreate"}),o=Object(O.command)(function(e){return e.simpleFolderNameValidation(e.folderName())}),i((r=function(t){function e(){var e;return(e=t.call(this)||this).folderName=f.a.observable(""),e.folderName.focused=f.a.observable(!1),e.selectedParentValue=f.a.observable(m.r),e.parentFolderSelectList=f.a.computed(function(){var e=[],t=v.a.folderList();e.push(["",""]);var n=null;return""!==v.a.namespace&&(n=function(e){return v.a.namespace!==e.fullNameRaw.substr(0,v.a.namespace.length)}),Object(b.folderListOptionsBuilder)([],t,[],e,null,n,null,function(e){return e?e.isSystemFolder()?e.name()+" "+e.manageFolderSystemName():e.name():""})}),e.defautOptionsAfterRender=b.defautOptionsAfterRender,e}u()(e,t);var n=e.prototype;return n.createFolderCommand=function(){var e=this.selectedParentValue();""===e&&1<v.a.namespace.length&&(e=v.a.namespace.substr(0,v.a.namespace.length-1)),Object(S.a)().foldersPromisesActionHelper(y.a.folderCreate(this.folderName(),e,v.a.foldersCreating),h.Notification.CantCreateFolder),this.cancelCommand()},n.simpleFolderNameValidation=function(e){return/^[^\\/]+$/g.test(Object(b.trim)(e))},n.clearPopup=function(){this.folderName(""),this.selectedParentValue(""),this.folderName.focused(!1)},n.onShow=function(){this.clearPopup()},n.onShowWithDelay=function(){g.bMobileDevice||this.folderName.focused(!0)},e}(w.a),p()(r.prototype,"createFolderCommand",[o],c()(r.prototype,"createFolderCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";n.r(t),n.d(t,"FilterPopupView",function(){return R}),n.d(t,"default",function(){return R});n(265),n(52);var i,o,a,r,s=n(19),c=n.n(s),l=n(26),u=n.n(l),d=n(34),p=n.n(d),f=n(33),h=n.n(f),m=n(10),g=n.n(m),b=n(20),v=n.n(b),y=n(3),S=n.n(y),O=n(1),w=n(0),T=n(6),C=n(2),A=n(9),E=n(211),F=n(11),j=n(7),N=n(27),R=(i=Object(j.popup)({name:"View/Popup/Filter",templateID:"PopupsFilter"}),o=Object(j.command)(),i((r=function(t){function e(){var e;return(e=t.call(this)||this).isNew=O.a.observable(!0),e.modules=E.a.modules,e.fTrueCallback=null,e.filter=O.a.observable(null),e.allowMarkAsRead=O.a.observable(!1),e.defautOptionsAfterRender=C.defautOptionsAfterRender,e.folderSelectList=F.a.folderMenuForFilters,e.selectedFolderValue=O.a.observable(""),e.selectedFolderValue.subscribe(function(){p()(e).call(e)&&p()(e).call(e).actionValue.error(!1)}),e.actionTypeOptions=O.a.observableArray([]),e.fieldOptions=O.a.observableArray([]),e.typeOptions=O.a.observableArray([]),e.typeOptionsSize=O.a.observableArray([]),Object(A.initOnStartOrLangChange)(u()(S.a).call(S.a,e.populateOptions,h()(e))),e.modules.subscribe(e.populateOptions,h()(e)),e}g()(e,t);var n=e.prototype;return n.saveFilterCommand=function(){if(p()(this).call(this)){if(w.FiltersAction.MoveTo===p()(this).call(this).actionType())p()(this).call(this).actionValue(this.selectedFolderValue());if(!p()(this).call(this).verify())return!1;if(this.fTrueCallback)this.fTrueCallback(p()(this).call(this));this.modalVisibility()&&Object(C.delegateRun)(this,"closeCommand")}return!0},n.populateOptions=function(){this.actionTypeOptions([]);var e=this.modules();e&&(e.markasread&&this.allowMarkAsRead(!0),e.moveto&&this.actionTypeOptions.push({id:w.FiltersAction.MoveTo,name:Object(A.i18n)("POPUPS_FILTER/SELECT_ACTION_MOVE_TO")}),e.redirect&&this.actionTypeOptions.push({id:w.FiltersAction.Forward,name:Object(A.i18n)("POPUPS_FILTER/SELECT_ACTION_FORWARD_TO")}),e.reject&&this.actionTypeOptions.push({id:w.FiltersAction.Reject,name:Object(A.i18n)("POPUPS_FILTER/SELECT_ACTION_REJECT")}),e.vacation&&this.actionTypeOptions.push({id:w.FiltersAction.Vacation,name:Object(A.i18n)("POPUPS_FILTER/SELECT_ACTION_VACATION_MESSAGE")})),this.actionTypeOptions.push({id:w.FiltersAction.Discard,name:Object(A.i18n)("POPUPS_FILTER/SELECT_ACTION_DISCARD")}),this.fieldOptions([{id:w.FilterConditionField.From,name:Object(A.i18n)("POPUPS_FILTER/SELECT_FIELD_FROM")},{id:w.FilterConditionField.Recipient,name:Object(A.i18n)("POPUPS_FILTER/SELECT_FIELD_RECIPIENTS")},{id:w.FilterConditionField.Subject,name:Object(A.i18n)("POPUPS_FILTER/SELECT_FIELD_SUBJECT")},{id:w.FilterConditionField.Size,name:Object(A.i18n)("POPUPS_FILTER/SELECT_FIELD_SIZE")},{id:w.FilterConditionField.Header,name:Object(A.i18n)("POPUPS_FILTER/SELECT_FIELD_HEADER")}]),this.typeOptions([{id:w.FilterConditionType.Contains,name:Object(A.i18n)("POPUPS_FILTER/SELECT_TYPE_CONTAINS")},{id:w.FilterConditionType.NotContains,name:Object(A.i18n)("POPUPS_FILTER/SELECT_TYPE_NOT_CONTAINS")},{id:w.FilterConditionType.EqualTo,name:Object(A.i18n)("POPUPS_FILTER/SELECT_TYPE_EQUAL_TO")},{id:w.FilterConditionType.NotEqualTo,name:Object(A.i18n)("POPUPS_FILTER/SELECT_TYPE_NOT_EQUAL_TO")}]),e&&e.regex&&this.typeOptions.push({id:w.FilterConditionType.Regex,name:"Regex"}),this.typeOptionsSize([{id:w.FilterConditionType.Over,name:Object(A.i18n)("POPUPS_FILTER/SELECT_TYPE_OVER")},{id:w.FilterConditionType.Under,name:Object(A.i18n)("POPUPS_FILTER/SELECT_TYPE_UNDER")}])},n.removeCondition=function(e){p()(this).call(this)&&p()(this).call(this).removeCondition(e)},n.clearPopup=function(){this.isNew(!0),this.fTrueCallback=null,p()(this).call(this,null)},n.onShow=function(e,t,n){this.clearPopup(),this.fTrueCallback=t,p()(this).call(this,e),e&&this.selectedFolderValue(e.actionValue()),this.isNew(!n),!n&&e&&e.name.focused(!0)},n.onShowWithDelay=function(){this.isNew()&&p()(this).call(this)&&!T.bMobileDevice&&p()(this).call(this).name.focused(!0)},e}(N.a),v()(r.prototype,"saveFilterCommand",[o],c()(r.prototype,"saveFilterCommand"),r.prototype),a=r))||a)},function(e,t,i){"use strict";i.r(t),i.d(t,"TwoFactorConfigurationPopupView",function(){return A}),i.d(t,"default",function(){return A});i(48),i(56);var n,o=i(26),a=i.n(o),r=i(33),s=i.n(r),c=i(10),l=i.n(c),u=i(4),d=i.n(u),p=i(3),f=i.n(p),h=i(1),m=i(393),g=i.n(m),b=i(0),v=i(2),y=i(9),S=i(5),O=i(16),w=i(22),T=i(7),C=i(27),A=Object(T.popup)({name:"View/Popup/TwoFactorConfiguration",templateID:"PopupsTwoFactorConfiguration"})(n=function(e){function t(){var n;return(n=e.call(this)||this).lock=h.a.observable(!1),n.capaTwoFactor=S.capa(b.Capa.TwoFactor),n.processing=h.a.observable(!1),n.clearing=h.a.observable(!1),n.secreting=h.a.observable(!1),n.viewUser=h.a.observable(""),n.twoFactorStatus=h.a.observable(!1),n.twoFactorTested=h.a.observable(!1),n.viewSecret=h.a.observable(""),n.viewBackupCodes=h.a.observable(""),n.viewUrlTitle=h.a.observable(""),n.viewUrl=h.a.observable(""),n.viewEnable_=h.a.observable(!1),n.viewEnable=h.a.computed({read:n.viewEnable_,write:function(e){(e=!!e)&&n.twoFactorTested()?(n.viewEnable_(e),O.a.enableTwoFactor(function(e,t){b.StorageResultType.Success===e&&t&&t.Result||n.viewEnable_(!1)},!0)):(e||n.viewEnable_(e),O.a.enableTwoFactor(function(e,t){b.StorageResultType.Success===e&&t&&t.Result||n.viewEnable_(!1)},!1))}}),n.viewTwoFactorEnableTooltip=h.a.computed(function(){return Object(y.trigger)(),n.twoFactorTested()||n.viewEnable_()?"":Object(y.i18n)("POPUPS_TWO_FACTOR_CFG/TWO_FACTOR_SECRET_TEST_BEFORE_DESC")}),n.viewTwoFactorStatus=h.a.computed(function(){return Object(y.trigger)(),Object(y.i18n)(n.twoFactorStatus()?"POPUPS_TWO_FACTOR_CFG/TWO_FACTOR_SECRET_CONFIGURED_DESC":"POPUPS_TWO_FACTOR_CFG/TWO_FACTOR_SECRET_NOT_CONFIGURED_DESC")}),n.twoFactorAllowedEnable=h.a.computed(function(){return n.viewEnable()||n.twoFactorTested()}),n.onResult=a()(f.a).call(f.a,n.onResult,s()(n)),n.onShowSecretResult=a()(f.a).call(f.a,n.onShowSecretResult,s()(n)),n}l()(t,e);var n=t.prototype;return n.showSecret=function(){this.secreting(!0),O.a.showTwoFactorSecret(this.onShowSecretResult)},n.hideSecret=function(){this.viewSecret(""),this.viewBackupCodes(""),this.viewUrlTitle(""),this.viewUrl("")},n.createTwoFactor=function(){this.processing(!0),O.a.createTwoFactor(this.onResult)},n.logout=function(){Object(w.a)().logout()},n.testTwoFactor=function(){Object(T.showScreenPopup)(i(526),[this.twoFactorTested])},n.clearTwoFactor=function(){this.viewSecret(""),this.viewBackupCodes(""),this.viewUrlTitle(""),this.viewUrl(""),this.twoFactorTested(!1),this.clearing(!0),O.a.clearTwoFactor(this.onResult)},n.onShow=function(e){this.lock(!!e),this.viewSecret(""),this.viewBackupCodes(""),this.viewUrlTitle(""),this.viewUrl("")},n.onHide=function(){this.lock()&&d.a.location.reload()},n.getQr=function(){return"otpauth://totp/"+d.a.encodeURIComponent(this.viewUser())+"?secret="+d.a.encodeURIComponent(this.viewSecret())+"&issuer="+d.a.encodeURIComponent("")},n.onResult=function(e,t){this.processing(!1),this.clearing(!1),b.StorageResultType.Success===e&&t&&t.Result?(this.viewUser(Object(v.pString)(t.Result.User)),this.viewEnable_(!!t.Result.Enable),this.twoFactorStatus(!!t.Result.IsSet),this.twoFactorTested(!!t.Result.Tested),this.viewSecret(Object(v.pString)(t.Result.Secret)),this.viewBackupCodes(Object(v.pString)(t.Result.BackupCodes).replace(/[\s]+/g,"  ")),this.viewUrlTitle(Object(v.pString)(t.Result.UrlTitle)),this.viewUrl(g.a.toDataURL({level:"M",size:8,value:this.getQr()}))):(this.viewUser(""),this.viewEnable_(!1),this.twoFactorStatus(!1),this.twoFactorTested(!1),this.viewSecret(""),this.viewBackupCodes(""),this.viewUrlTitle(""),this.viewUrl(""))},n.onShowSecretResult=function(e,t){this.secreting(!1),b.StorageResultType.Success===e&&t&&t.Result?(this.viewSecret(Object(v.pString)(t.Result.Secret)),this.viewUrlTitle(Object(v.pString)(t.Result.UrlTitle)),this.viewUrl(g.a.toDataURL({level:"M",size:6,value:this.getQr()}))):(this.viewSecret(""),this.viewUrlTitle(""),this.viewUrl(""))},n.onBuild=function(){this.capaTwoFactor&&(this.processing(!0),O.a.getTwoFactor(this.onResult))},t}(C.a))||n},function(e,t,n){"use strict";n.r(t),n.d(t,"TemplatePopupView",function(){return w}),n.d(t,"default",function(){return w});n(52);var i,o,a,r,s=n(19),c=n.n(s),l=n(10),u=n.n(l),d=n(20),p=n.n(d),f=n(1),h=n(0),m=n(2),g=n(9),b=n(204),v=n(16),y=n(22),S=n(7),O=n(27),w=(i=Object(S.popup)({name:"View/Popup/Template",templateID:"PopupsTemplate"}),o=Object(S.command)(function(e){return!e.submitRequest()}),i((r=function(t){function e(){var e;return(e=t.call(this)||this).editor=null,e.signatureDom=f.a.observable(null),e.id=f.a.observable(""),e.name=f.a.observable(""),e.name.error=f.a.observable(!1),e.name.focus=f.a.observable(!1),e.body=f.a.observable(""),e.body.loading=f.a.observable(!1),e.body.error=f.a.observable(!1),e.name.subscribe(function(){e.name.error(!1)}),e.body.subscribe(function(){e.body.error(!1)}),e.submitRequest=f.a.observable(!1),e.submitError=f.a.observable(""),e}u()(e,t);var n=e.prototype;return n.addTemplateCommand=function(){var n=this;return this.populateBodyFromEditor(),this.name.error(""===Object(m.trim)(this.name())),this.body.error(""===Object(m.trim)(this.body())||":HTML:"===Object(m.trim)(this.body())),!this.name.error()&&!this.body.error()&&(this.submitRequest(!0),v.a.templateSetup(function(e,t){n.submitRequest(!1),h.StorageResultType.Success===e&&t?t.Result?(Object(y.a)().templates(),n.cancelCommand()):t.ErrorCode&&n.submitError(Object(g.getNotification)(t.ErrorCode)):n.submitError(Object(g.getNotification)(h.Notification.UnknownError))},this.id(),this.name(),this.body()),!0)},n.clearPopup=function(){this.id(""),this.name(""),this.name.error(!1),this.body(""),this.body.loading(!1),this.body.error(!1),this.submitRequest(!1),this.submitError(""),this.editor&&this.editor.setPlain("",!1)},n.populateBodyFromEditor=function(){this.editor&&this.body(this.editor.getDataWithHtmlMark())},n.editorSetBody=function(e){var t=this;!this.editor&&this.signatureDom()?this.editor=new b.HtmlEditor(this.signatureDom(),function(){t.populateBodyFromEditor()},function(){t.editor.setHtmlOrPlain(e)}):this.editor.setHtmlOrPlain(e)},n.onShow=function(n){var i=this;this.clearPopup(),n&&n.id?(this.id(n.id),this.name(n.name),this.body(n.body),n.populated?this.editorSetBody(this.body()):(this.body.loading(!0),this.body.error(!1),v.a.templateGetById(function(e,t){i.body.loading(!1),h.StorageResultType.Success===e&&t&&t.Result&&"Object/Template"===t.Result["@Object"]&&Object(m.isNormal)(t.Result.Body)?(n.body=t.Result.Body,n.populated=!0,i.body(n.body),i.body.error(!1)):(i.body(""),i.body.error(!0)),i.editorSetBody(i.body())},this.id()))):this.editorSetBody("")},n.onShowWithDelay=function(){this.name.focus(!0)},e}(O.a),p()(r.prototype,"addTemplateCommand",[o],c()(r.prototype,"addTemplateCommand"),r.prototype),a=r))||a)},,,,,function(e,t,n){e.exports=n(515)},function(e,t,n){var i;!function(){"use strict";var r={}.hasOwnProperty;function s(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var i=typeof n;if("string"===i||"number"===i)e.push(n);else if(Array.isArray(n)&&n.length){var o=s.apply(null,n);o&&e.push(o)}else if("object"===i)for(var a in n)r.call(n,a)&&n[a]&&e.push(a)}}return e.join(" ")}e.exports?(s.default=s,e.exports=s):void 0===(i=function(){return s}.apply(t,[]))||(e.exports=i)}()},function(e,t,n){e.exports=function(){"use strict";var d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a="undefined"!=typeof document&&document.documentMode,p={rootMargin:"0px",threshold:0,load:function(e){if("picture"===e.nodeName.toLowerCase()){var t=document.createElement("img");a&&e.getAttribute("data-iesrc")&&(t.src=e.getAttribute("data-iesrc")),e.getAttribute("data-alt")&&(t.alt=e.getAttribute("data-alt")),e.appendChild(t)}if("video"===e.nodeName.toLowerCase()&&!e.getAttribute("data-src")&&e.children){for(var n=e.children,i=void 0,o=0;o<=n.length-1;o++)(i=n[o].getAttribute("data-src"))&&(n[o].src=i);e.load()}e.getAttribute("data-src")&&(e.src=e.getAttribute("data-src")),e.getAttribute("data-srcset")&&e.setAttribute("srcset",e.getAttribute("data-srcset")),e.getAttribute("data-background-image")&&(e.style.backgroundImage="url('"+e.getAttribute("data-background-image")+"')"),e.getAttribute("data-toggle-class")&&e.classList.toggle(e.getAttribute("data-toggle-class"))},loaded:function(){}};function f(e){e.setAttribute("data-loaded",!0)}var h=function(e){return"true"===e.getAttribute("data-loaded")};return function(){var n,i,o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:".lozad",e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},t=d({},p,e),a=t.root,r=t.rootMargin,s=t.threshold,c=t.load,l=t.loaded,u=void 0;return window.IntersectionObserver&&(u=new IntersectionObserver((n=c,i=l,function(e,t){e.forEach(function(e){(0<e.intersectionRatio||e.isIntersecting)&&(t.unobserve(e.target),h(e.target)||(n(e.target),f(e.target),i(e.target)))})}),{root:a,rootMargin:r,threshold:s})),{observe:function(){for(var e=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:document;return e instanceof Element?[e]:e instanceof NodeList?e:t.querySelectorAll(e)}(o,a),t=0;t<e.length;t++)h(e[t])||(u?u.observe(e[t]):(c(e[t]),f(e[t]),l(e[t])))},triggerLoad:function(e){h(e)||(c(e),f(e),l(e))},observer:u}}}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(4),o=n.n(i),a=n(272),r=n.n(a),s=n(2),c=n(25),l=function(){function e(){}var t=e.prototype;return t.set=function(e,t){var n=!1,i=null;try{i=r.a.getJSON(c.b)}catch(e){}(i||(i={}))[e]=t;try{r.a.set(c.b,i,{expires:30}),n=!0}catch(e){}return n},t.get=function(e){var t=null;try{var n=r.a.getJSON(c.b);t=n&&!Object(s.isUnd)(n[e])?n[e]:null}catch(e){}return t},e.supported=function(){return!(!o.a.navigator||!o.a.navigator.cookieEnabled)},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(17),o=n.n(i),a=n(4),r=n.n(a),s=n(2),c=n(146),l=n(25),u=function(){function e(){o()(this,"s",null),this.s=r.a.localStorage||null}var t=e.prototype;return t.set=function(e,t){if(!this.s)return!1;var n=null;try{var i=this.s.getItem(l.b)||null;n=null===i?null:r.a.JSON.parse(i)}catch(e){}(n||(n={}))[e]=t;try{return this.s.setItem(l.b,r.a.JSON.stringify(n)),!0}catch(e){}return!1},t.get=function(e){if(!this.s)return null;try{var t=this.s.getItem(l.b)||null,n=null===t?null:r.a.JSON.parse(t);return n&&!Object(s.isUnd)(n[e])?n[e]:null}catch(e){}return null},e.supported=function(){return Object(c.d)("localStorage")},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m});n(76),n(52),n(48),n(168);var i=n(12),o=n.n(i),a=n(10),r=n.n(a),s=n(3),c=n.n(s),l=n(1),u=n(0),d=n(2),p=n(9),f=n(14),h=n(24),m=function(t){function n(){var e;return(e=t.call(this,"FolderModel")||this).name=l.a.observable(""),e.fullName="",e.fullNameRaw="",e.fullNameHash="",e.delimiter="",e.namespace="",e.deep=0,e.interval=0,e.selectable=!1,e.existen=!0,e.type=l.a.observable(u.FolderType.User),e.focused=l.a.observable(!1),e.selected=l.a.observable(!1),e.edited=l.a.observable(!1),e.subScribed=l.a.observable(!0),e.checkable=l.a.observable(!1),e.subFolders=l.a.observableArray([]),e.deleteAccess=l.a.observable(!1),e.actionBlink=l.a.observable(!1).extend({falseTimeout:1e3}),e.nameForEdit=l.a.observable(""),e.privateMessageCountAll=l.a.observable(0),e.privateMessageCountUnread=l.a.observable(0),e.collapsedPrivate=l.a.observable(!0),e}r()(n,t),n.newInstanceFromJson=function(e){var t=new n;return t.initByJson(e)?t.initComputed():null};var e=n.prototype;return e.initComputed=function(){var i=this,e=Object(f.h)();return this.isInbox=l.a.computed(function(){return u.FolderType.Inbox===i.type()}),this.hasSubScribedSubfolders=l.a.computed(function(){return!!o()(c.a).call(c.a,i.subFolders(),function(e){return(e.subScribed()||e.hasSubScribedSubfolders())&&!e.isSystemFolder()})}),this.canBeEdited=l.a.computed(function(){return u.FolderType.User===i.type()&&i.existen&&i.selectable}),this.visible=l.a.computed(function(){var e=i.subScribed(),t=i.hasSubScribedSubfolders();return e||t&&(!i.existen||!i.selectable)}),this.isSystemFolder=l.a.computed(function(){return u.FolderType.User!==i.type()}),this.hidden=l.a.computed(function(){var e=i.isSystemFolder(),t=i.hasSubScribedSubfolders();return e&&!t||!i.selectable&&!t}),this.selectableForFolderList=l.a.computed(function(){return!i.isSystemFolder()&&i.selectable}),this.messageCountAll=l.a.computed({read:this.privateMessageCountAll,write:function(e){Object(d.isPosNumeric)(e,!0)?i.privateMessageCountAll(e):i.privateMessageCountAll.valueHasMutated()}}).extend({notify:"always"}),this.messageCountUnread=l.a.computed({read:this.privateMessageCountUnread,write:function(e){Object(d.isPosNumeric)(e,!0)?i.privateMessageCountUnread(e):i.privateMessageCountUnread.valueHasMutated()}}).extend({notify:"always"}),this.printableUnreadCount=l.a.computed(function(){var e=i.messageCountAll(),t=i.messageCountUnread(),n=i.type();if(0<e){if(u.FolderType.Draft===n)return""+e;if(0<t&&u.FolderType.Trash!==n&&u.FolderType.Archive!==n&&u.FolderType.SentItems!==n)return""+t}return""}),this.canBeDeleted=l.a.computed(function(){return!i.isSystemFolder()&&0===i.subFolders().length&&e!==i.fullNameRaw}),this.canBeSubScribed=l.a.computed(function(){return!i.isSystemFolder()&&i.selectable&&e!==i.fullNameRaw}),this.canBeChecked=this.canBeSubScribed,this.localName=l.a.computed(function(){Object(p.trigger)();var e=i.name(),t=i.type();if(i.isSystemFolder())switch(t){case u.FolderType.Inbox:e=Object(p.i18n)("FOLDER_LIST/INBOX_NAME");break;case u.FolderType.SentItems:e=Object(p.i18n)("FOLDER_LIST/SENT_NAME");break;case u.FolderType.Draft:e=Object(p.i18n)("FOLDER_LIST/DRAFTS_NAME");break;case u.FolderType.Spam:e=Object(p.i18n)("FOLDER_LIST/SPAM_NAME");break;case u.FolderType.Trash:e=Object(p.i18n)("FOLDER_LIST/TRASH_NAME");break;case u.FolderType.Archive:e=Object(p.i18n)("FOLDER_LIST/ARCHIVE_NAME")}return e}),this.manageFolderSystemName=l.a.computed(function(){Object(p.trigger)();var e="",t=i.type(),n=i.name();if(i.isSystemFolder())switch(t){case u.FolderType.Inbox:e="("+Object(p.i18n)("FOLDER_LIST/INBOX_NAME")+")";break;case u.FolderType.SentItems:e="("+Object(p.i18n)("FOLDER_LIST/SENT_NAME")+")";break;case u.FolderType.Draft:e="("+Object(p.i18n)("FOLDER_LIST/DRAFTS_NAME")+")";break;case u.FolderType.Spam:e="("+Object(p.i18n)("FOLDER_LIST/SPAM_NAME")+")";break;case u.FolderType.Trash:e="("+Object(p.i18n)("FOLDER_LIST/TRASH_NAME")+")";break;case u.FolderType.Archive:e="("+Object(p.i18n)("FOLDER_LIST/ARCHIVE_NAME")+")"}return(""!==e&&"("+n+")"===e||"(inbox)"===e.toLowerCase())&&(e=""),e}),this.collapsed=l.a.computed({read:function(){return!i.hidden()&&i.collapsedPrivate()},write:function(e){i.collapsedPrivate(e)}}),this.hasUnreadMessages=l.a.computed(function(){return 0<i.messageCountUnread()&&""!==i.printableUnreadCount()}),this.hasSubScribedUnreadMessagesSubfolders=l.a.computed(function(){return!!o()(c.a).call(c.a,i.subFolders(),function(e){return e.hasUnreadMessages()||e.hasSubScribedUnreadMessagesSubfolders()})}),this.name.subscribe(function(e){i.nameForEdit(e)}),this.edited.subscribe(function(e){e&&i.nameForEdit(i.name())}),this.messageCountUnread.subscribe(function(e){u.FolderType.Inbox===i.type()&&h.a("mailbox.inbox-unread-count",[e])}),this},e.collapsedCss=function(){return this.hasSubScribedSubfolders()?this.collapsed()?"icon-right-mini e-collapsed-sign":"icon-down-mini e-collapsed-sign":"icon-none e-collapsed-sign"},e.initByJson=function(e){var t=!1,n=Object(f.h)();return e&&"Object/Folder"===e["@Object"]&&(this.name(e.Name),this.delimiter=e.Delimiter,this.fullName=e.FullName,this.fullNameRaw=e.FullNameRaw,this.fullNameHash=e.FullNameHash,this.deep=e.FullNameRaw.split(this.delimiter).length-1,this.selectable=!!e.IsSelectable,this.existen=!!e.IsExists,this.subScribed(!!e.IsSubscribed),this.checkable(!!e.Checkable),this.type(n===this.fullNameRaw?u.FolderType.Inbox:u.FolderType.User),t=!0),t},e.printableFullName=function(){return this.fullName.split(this.delimiter).join(" / ")},n}(n(63).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return d});n(55),n(121);var i=n(33),o=n.n(i),a=n(10),r=n.n(a),s=n(17),c=n.n(s),l=n(4),p=n.n(l),u=n(8),f=n.n(u),h=n(15),m=n(2),g=n(25),b=n(0),v=n(6),y=n(38),S=n(5),d=function(t){function e(){var e;return e=t.call(this)||this,c()(o()(e),"oRequests",{}),e.clear(),e}r()(e,t);var n=e.prototype;return n.clear=function(){this.oRequests={}},n.abort=function(e,t){return this.oRequests[e]&&(!t&&this.oRequests[e].abort&&(this.oRequests[e].__aborted__=!0,this.oRequests[e].abort()),this.oRequests[e]=null,delete this.oRequests[e]),this},n.ajaxRequest=function(c,t,n,l,i,u){var d=this;return new p.a.Promise(function(a,r){var s=Object(m.microtime)();n=Object(m.isNormal)(n)?n:g.g,i=Object(m.isUnd)(i)?"":Object(m.pString)(i),t&&(l.XToken=S.appSettingsGet("token")),y.f("ajax-default-request",[c,l,i]),d.setTrigger(u,!0);var e=f.a.ajax({type:t?"POST":"GET",url:Object(h.a)(i),async:!0,dataType:"json",data:t&&l||{},timeout:n,global:!0}).always(function(e,t){var n=!1,i=null;e&&e.Time&&(n=Object(m.pInt)(e.Time)>Object(m.microtime)()-s);var o="";switch(!0){case"success"===t&&e&&e.Result&&c===e.Action:o=b.StorageResultType.Success;break;case!("abort"!==t||e&&e.__aborted__):o=b.StorageResultType.Abort;break;default:o=b.StorageResultType.Error}y.f("ajax-default-response",[c,b.StorageResultType.Success===o?e:null,o,n,l]),"success"===t?e&&e.Result&&c===e.Action?(e.__cached__=n,a(e)):e&&e.Action?r((i=e).ErrorCode?e.ErrorCode:b.Notification.AjaxFalse):(i=e,r(b.Notification.AjaxParse)):"timeout"===t?(i=e,r(b.Notification.AjaxTimeout)):"abort"===t?e&&e.__aborted__||r(b.Notification.AjaxAbort):(i=e,r(b.Notification.AjaxParse)),d.oRequests[c]&&(d.oRequests[c]=null,delete d.oRequests[c]),d.setTrigger(u,!1),i&&(-1<Object(m.inArray)(i.ErrorCode,[b.Notification.AuthError,b.Notification.AccessError,b.Notification.ConnectionError,b.Notification.DomainNotAllowed,b.Notification.AccountNotAllowed,b.Notification.MailServerError,b.Notification.UnknownNotification,b.Notification.UnknownError])&&(v.data.iAjaxErrorCount+=1),b.Notification.InvalidToken===i.ErrorCode&&(v.data.iTokenErrorCount+=1),g.q<v.data.iTokenErrorCount&&v.data.__APP__&&v.data.__APP__.loginAndLogoutReload&&v.data.__APP__.loginAndLogoutReload(!1,!0),(i.ClearAuth||i.Logout||g.a<v.data.iAjaxErrorCount)&&(v.data.__APP__&&v.data.__APP__.clearClientSideToken&&v.data.__APP__.clearClientSideToken(),v.data.__APP__&&!i.ClearAuth&&v.data.__APP__.loginAndLogoutReload&&v.data.__APP__.loginAndLogoutReload(!1,!0)))});e&&(d.oRequests[c]&&(d.oRequests[c]=null,delete d.oRequests[c]),d.oRequests[c]=e)})},n.getRequest=function(e,t,n,i){return n=e+"/"+(n=Object(m.isUnd)(n)?"":Object(m.pString)(n)),this.ajaxRequest(e,!1,i,null,n,t)},n.postRequest=function(e,t,n,i){return(n=n||{}).Action=e,this.ajaxRequest(e,!0,i,n,"",t)},e}(n(268).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(10),a=n.n(i),r=n(1),s=n(15),o=function(o){function e(e,t,n){var i;return void 0===t&&(t=!0),void 0===n&&(n=0),(i=o.call(this,"AccountModel")||this).email=e,i.count=r.a.observable(n),i.deleteAccess=r.a.observable(!1),i.canBeDeleted=r.a.observable(!!t),i.canBeEdit=i.canBeDeleted,i}return a()(e,o),e.prototype.changeAccountLink=function(){return Object(s.i)(this.email)},e}(n(63).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return r});n(52);var i=n(10),o=n.n(i),a=n(1),r=function(i){function e(e,t){var n;return(n=i.call(this,"IdentityModel")||this).id=a.a.observable(e||""),n.email=a.a.observable(t),n.name=a.a.observable(""),n.replyTo=a.a.observable(""),n.bcc=a.a.observable(""),n.signature=a.a.observable(""),n.signatureInsertBefore=a.a.observable(!1),n.deleteAccess=a.a.observable(!1),n.canBeDeleted=a.a.computed(function(){return""!==n.id()}),n}return o()(e,i),e.prototype.formattedName=function(){var e=this.name(),t=this.email();return""!==e?e+" ("+t+")":t},e}(n(63).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return o});n(52);var i=n(10),a=n.n(i),r=n(1),s=n(2),o=function(o){function e(e,t,n){var i;return(i=o.call(this,"TemplateModel")||this).id=e,i.name=t,i.body=n,i.populated=!0,i.deleteAccess=r.a.observable(!1),i}return a()(e,o),e.prototype.parse=function(e){var t=!1;return e&&"Object/Template"===e["@Object"]&&(this.id=Object(s.pString)(e.ID),this.name=Object(s.pString)(e.Name),this.body=Object(s.pString)(e.Body),this.populated=!!e.Populated,t=!0),t},e}(n(63).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return u});var i=n(30),o=n.n(i),a=n(261),r=n.n(a),s=n(10),c=n.n(s),d=n(1),p=n(2),l=n(63),f=n(41),u=function(u){function e(e,t,n,i,o,a,r,s,c){var l;return(l=u.call(this,"OpenPgpKeyModel")||this).index=e,l.id=n,l.ids=Object(p.isNonEmptyArray)(i)?i:[n],l.guid=t,l.user="",l.users=o,l.email="",l.emails=a,l.armor=s,l.isPrivate=!!r,l.selectUser(c),l.deleteAccess=d.a.observable(!1),l}c()(e,u);var t=e.prototype;return t.getNativeKey=function(){var e=null;try{if((e=f.a.openpgp.key.readArmored(this.armor))&&!e.err&&r()(e)&&r()(e)[0])return e}catch(e){Object(p.log)(e)}return null},t.getNativeKeys=function(){var e=this.getNativeKey();return e&&r()(e)?r()(e):null},t.select=function(e,t){if(this[t]){var n,i=o()(n=this[t]).call(n,e);-1!==i&&(this.user=this.users[i],this.email=this.emails[i])}},t.selectUser=function(e){this.select(e,"users")},t.selectEmail=function(e){this.select(e,"emails")},e}(l.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i=n(10),o=n.n(i),a=n(136),r=n(425),s=n(22),c=function(e){function t(){return e.call(this,"login",[r.a])||this}return o()(t,e),t.prototype.onShow=function(){Object(s.a)().setWindowTitle("")},t}(a.a)},function(e,t,i){"use strict";i.d(t,"a",function(){return _});var n,o,a,r,s,c,l,u,d=i(19),p=i.n(d),f=i(10),h=i.n(f),m=i(20),g=i.n(m),b=i(4),v=i.n(b),y=i(3),S=i.n(y),O=i(1),w=i(0),T=i(2),C=i(6),A=i(15),E=i(9),F=i(38),j=i(31),N=i(70),R=i(5),I=i(58),L=i(16),P=i(22),M=i(7),D=i(27),_=(n=Object(M.view)({name:["View/App/Login","View/User/Login"],type:M.ViewType.Center,templateID:"Login"}),o=Object(M.command)(function(e){return!e.submitRequest()&&e.facebookLoginEnabled()}),a=Object(M.command)(function(e){return!e.submitRequest()&&e.googleLoginEnabled()}),r=Object(M.command)(function(e){return!e.submitRequest()&&e.googleFastLoginEnabled()}),s=Object(M.command)(function(e){return!e.submitRequest()&&e.twitterLoginEnabled()}),c=Object(M.command)(function(e){return!e.submitRequest()}),n((u=function(e){function t(){var i;return(i=e.call(this)||this).hideSubmitButton=!!R.appSettingsGet("hideSubmitButton"),i.welcome=O.a.observable(!!R.settingsGet("UseLoginWelcomePage")),i.email=O.a.observable(""),i.password=O.a.observable(""),i.signMe=O.a.observable(!1),i.additionalCode=O.a.observable(""),i.additionalCode.error=O.a.observable(!1),i.additionalCode.errorAnimation=O.a.observable(!1).extend({falseTimeout:500}),i.additionalCode.focused=O.a.observable(!1),i.additionalCode.visibility=O.a.observable(!1),i.additionalCodeSignMe=O.a.observable(!1),i.logoImg=Object(T.trim)(R.settingsGet("LoginLogo")),i.loginDescription=Object(T.trim)(R.settingsGet("LoginDescription")),i.mobile=!!R.appSettingsGet("mobile"),i.mobileDevice=!!R.appSettingsGet("mobileDevice"),i.forgotPasswordLinkUrl=R.appSettingsGet("forgotPasswordLinkUrl"),i.registrationLinkUrl=R.appSettingsGet("registrationLinkUrl"),i.emailError=O.a.observable(!1),i.passwordError=O.a.observable(!1),i.emailErrorAnimation=O.a.observable(!1).extend({falseTimeout:500}),i.passwordErrorAnimation=O.a.observable(!1).extend({falseTimeout:500}),i.formHidden=O.a.observable(!1),i.formError=O.a.computed(function(){return i.emailErrorAnimation()||i.passwordErrorAnimation()||i.additionalCode.visibility()&&i.additionalCode.errorAnimation()}),i.emailFocus=O.a.observable(!1),i.passwordFocus=O.a.observable(!1),i.email.subscribe(function(){i.emailError(!1),i.additionalCode(""),i.additionalCode.visibility(!1)}),i.password.subscribe(function(){i.passwordError(!1)}),i.additionalCode.subscribe(function(){i.additionalCode.error(!1)}),i.additionalCode.visibility.subscribe(function(){i.additionalCode.error(!1)}),i.emailError.subscribe(function(e){i.emailErrorAnimation(!!e)}),i.passwordError.subscribe(function(e){i.passwordErrorAnimation(!!e)}),i.additionalCode.error.subscribe(function(e){i.additionalCode.errorAnimation(!!e)}),i.submitRequest=O.a.observable(!1),i.submitError=O.a.observable(""),i.submitErrorAddidional=O.a.observable(""),i.submitError.subscribe(function(e){""===e&&i.submitErrorAddidional("")}),i.allowLanguagesOnLogin=j.a.allowLanguagesOnLogin,i.langRequest=O.a.observable(!1),i.language=N.a.language,i.languages=N.a.languages,i.bSendLanguage=!1,i.languageFullName=O.a.computed(function(){return Object(T.convertLangName)(i.language())}),i.signMeType=O.a.observable(w.LoginSignMeType.Unused),i.signMeType.subscribe(function(e){i.signMe(w.LoginSignMeType.DefaultOn===e)}),i.signMeVisibility=O.a.computed(function(){return w.LoginSignMeType.Unused!==i.signMeType()}),i.facebookLoginEnabled=O.a.observable(!1),i.googleLoginEnabled=O.a.observable(!1),i.googleFastLoginEnabled=O.a.observable(!1),i.twitterLoginEnabled=O.a.observable(!1),i.socialLoginEnabled=O.a.computed(function(){var e=i.facebookLoginEnabled(),t=i.googleLoginEnabled(),n=i.twitterLoginEnabled();return e||t||n}),R.settingsGet("AdditionalLoginError")&&!i.submitError()&&i.submitError(R.settingsGet("AdditionalLoginError")),i}h()(t,e);var n=t.prototype;return n.windowOpenFeatures=function(e){return"left=200,top=100,width="+e+",height="+e+",menubar=no,status=no,resizable=yes,scrollbars=yes"},n.facebookCommand=function(){return v.a.open(Object(A.A)(),"Facebook",this.windowOpenFeatures(500)),!0},n.googleCommand=function(){return v.a.open(Object(A.B)(),"Google",this.windowOpenFeatures(550)),!0},n.googleFastCommand=function(){return v.a.open(Object(A.B)(!0),"Google",this.windowOpenFeatures(550)),!0},n.twitterCommand=function(){return v.a.open(Object(A.C)(),"Twitter",this.windowOpenFeatures(500)),!0},n.submitCommand=function(){var n=this;if(Object(T.triggerAutocompleteInputChange)(),this.emailError(!1),this.passwordError(!1),this.emailError(""===Object(T.trim)(this.email())),this.passwordError(""===Object(T.trim)(this.password())),this.additionalCode.visibility()&&(this.additionalCode.error(!1),this.additionalCode.error(""===Object(T.trim)(this.additionalCode()))),this.emailError()||this.passwordError()||this.additionalCode.visibility()&&this.additionalCode.error()){switch(!0){case this.emailError():this.emailFocus(!0);break;case this.passwordError():this.passwordFocus(!0);break;case this.additionalCode.visibility()&&this.additionalCode.error():this.additionalCode.focused(!0)}return!1}var i=0,o="";if(F.f("user-login-submit",[function(e,t){i=e||0,o=t||""}]),0<i)return this.submitError(Object(E.getNotification)(i)),!1;if(""!==o)return this.submitError(o),!1;this.submitRequest(!0),C.$win.trigger("rl.tooltips.diactivate");var e;return e=this.password(),L.a.login(function(e,t){C.$win.trigger("rl.tooltips.diactivate"),C.$win.trigger("rl.tooltips.activate"),w.StorageResultType.Success===e&&t&&"Login"===t.Action?t.Result?t.TwoFactorAuth?(n.additionalCode(""),n.additionalCode.visibility(!0),n.submitRequest(!1),S.a.delay(function(){return n.additionalCode.focused(!0)},w.Magics.Time100ms)):t.Admin?Object(P.a)().redirectToAdminPanel():Object(P.a)().loginAndLogoutReload(!1):t.ErrorCode?(n.submitRequest(!1),-1<Object(T.inArray)(t.ErrorCode,[w.Notification.InvalidInputArgument])&&(t.ErrorCode=w.Notification.AuthError),n.submitError(Object(E.getNotificationFromResponse)(t)),""===n.submitError()?n.submitError(Object(E.getNotification)(w.Notification.UnknownError)):t.ErrorMessageAdditional&&n.submitErrorAddidional(t.ErrorMessageAdditional)):n.submitRequest(!1):(n.submitRequest(!1),n.submitError(Object(E.getNotification)(w.Notification.UnknownError)))},n.email(),"",e,!!n.signMe(),n.bSendLanguage?n.language():"",n.additionalCode.visibility()?n.additionalCode():"",!!n.additionalCode.visibility()&&!!n.additionalCodeSignMe()),I.b(w.ClientSideKeyName.LastSignMe,n.signMe()?"-1-":"-0-"),!0},n.displayMainForm=function(){this.welcome(!1)},n.onShow=function(){Object(M.routeOff)()},n.onShowWithDelay=function(){""!==this.email()&&""!==this.password()?this.passwordFocus(!0):""===this.email()?this.emailFocus(!0):""===this.password()?this.passwordFocus(!0):this.emailFocus(!0)},n.onHide=function(){this.emailFocus(!1),this.passwordFocus(!1)},n.onBuild=function(){var t=this,e=I.a(w.ClientSideKeyName.LastSignMe),n=(R.settingsGet("SignMe")||"unused").toLowerCase(),i=R.appSettingsGet("jsHash"),o=function(e){0===(e=Object(T.pInt)(e))?(t.submitRequest(!0),Object(P.a)().loginAndLogoutReload(!1)):t.submitError(Object(E.getNotification)(e))};switch(this.facebookLoginEnabled(!!R.settingsGet("AllowFacebookSocial")),this.twitterLoginEnabled(!!R.settingsGet("AllowTwitterSocial")),this.googleLoginEnabled(!!R.settingsGet("AllowGoogleSocial")&&!!R.settingsGet("AllowGoogleSocialAuth")),this.googleFastLoginEnabled(!!R.settingsGet("AllowGoogleSocial")&&!!R.settingsGet("AllowGoogleSocialAuthFast")),n){case w.LoginSignMeTypeAsString.DefaultOff:case w.LoginSignMeTypeAsString.DefaultOn:switch(this.signMeType(w.LoginSignMeTypeAsString.DefaultOn===n?w.LoginSignMeType.DefaultOn:w.LoginSignMeType.DefaultOff),e){case"-1-":this.signMeType(w.LoginSignMeType.DefaultOn);break;case"-0-":this.signMeType(w.LoginSignMeType.DefaultOff)}break;case w.LoginSignMeTypeAsString.Unused:default:this.signMeType(w.LoginSignMeType.Unused)}this.email(j.a.devEmail),this.password(j.a.devPassword),(this.googleLoginEnabled()||this.googleFastLoginEnabled())&&(v.a["rl_"+i+"_google_login_service"]=o),this.facebookLoginEnabled()&&(v.a["rl_"+i+"_facebook_login_service"]=o),this.twitterLoginEnabled()&&(v.a["rl_"+i+"_twitter_login_service"]=o),S.a.delay(function(){N.a.language.subscribe(function(e){t.langRequest(!0),Object(E.reload)(!1,e).then(function(){t.langRequest(!1),t.bSendLanguage=!0},function(){t.langRequest(!1)})})},w.Magics.Time50ms),Object(T.triggerAutocompleteInputChange)(!0)},n.submitForm=function(){this.submitCommand()},n.selectLanguage=function(){Object(M.showScreenPopup)(i(253),[this.language,this.languages(),N.a.userLanguage()])},n.selectLanguageOnTab=function(e){var t=this;return!!e||(S.a.delay(function(){t.emailFocus(!0)},w.Magics.Time50ms),!1)},t}(D.a),g()(u.prototype,"facebookCommand",[o],p()(u.prototype,"facebookCommand"),u.prototype),g()(u.prototype,"googleCommand",[a],p()(u.prototype,"googleCommand"),u.prototype),g()(u.prototype,"googleFastCommand",[r],p()(u.prototype,"googleFastCommand"),u.prototype),g()(u.prototype,"twitterCommand",[s],p()(u.prototype,"twitterCommand"),u.prototype),g()(u.prototype,"submitCommand",[c],p()(u.prototype,"submitCommand"),u.prototype),l=u))||l)},function(e,t,i){"use strict";i.d(t,"a",function(){return A});i(48),i(56),i(135);var n=i(10),o=i.n(n),a=i(3),r=i.n(a),s=i(0),c=i(6),l=i(2),u=i(14),d=i(9),p=i(24),f=i(5),h=i(31),m=i(46),g=i(37),b=i(11),v=i(13),y=i(427),S=i(428),O=i(430),w=i(431),T=i(22),C=i(7),A=function(e){function t(){return e.call(this,"mailbox",[y.a,S.a,O.a,w.a])||this}o()(t,e);var n=t.prototype;return n.updateWindowTitle=function(){var e=b.a.foldersInboxUnreadCount(),t=m.a.email();f.appSettingsGet("listPermanentFiltered")&&(e=0),Object(T.a)().setWindowTitle((""===t?"":(0<e?"("+e+") ":" ")+t+" - ")+Object(d.i18n)("TITLES/MAILBOX"))},n.onShow=function(){this.updateWindowTitle(),h.a.focusedState(s.Focused.None),h.a.focusedState(s.Focused.MessageList),f.appSettingsGet("mobile")&&Object(c.leftPanelDisabled)(!0),f.capa(s.Capa.Folders)?Object(c.leftPanelType)(""):Object(c.leftPanelType)(f.capa(s.Capa.Composer)||f.capa(s.Capa.Contacts)?"short":"none")},n.onRoute=function(e,t,n){var i=e.replace(/^(.+)~([\d]+)$/,"$2"),o=Object(u.e)(Object(u.f)(e.replace(/~([\d]+)$/,"")));o&&(e===i&&(i=""),b.a.currentFolder(o),v.a.messageListPage(t),v.a.messageListSearch(n),v.a.messageListThreadUid(i),Object(T.a)().reloadMessageList())},n.onStart=function(){var e=this;b.a.folderList.subscribe(l.windowResizeCallback),v.a.messageList.subscribe(l.windowResizeCallback),v.a.message.subscribe(l.windowResizeCallback),r.a.delay(function(){return g.a.layout.valueHasMutated()},s.Magics.Time50ms),r.a.delay(function(){return Object(C.warmUpScreenPopup)(i(123))},s.Magics.Time500ms),p.b("mailbox.inbox-unread-count",function(t){b.a.foldersInboxUnreadCount(t);var n=m.a.email();r.a.each(m.a.accounts(),function(e){e&&n===e.email&&e.count(t)}),e.updateWindowTitle()})},n.onBuild=function(){c.bMobileDevice||f.appSettingsGet("mobile")||r.a.defer(function(){Object(T.a)().initHorizontalLayoutResizer(s.ClientSideKeyName.MessageListSize)}),c.$html.on("click","#rl-right",function(){Object(c.moveAction)(!1)})},n.routes=function(){var n=Object(u.h)(),e=function(e,t){return t[0]=Object(l.pString)(t[0]),t[1]=Object(l.pInt)(t[1]),t[1]=t[1]<=0?1:t[1],t[2]=Object(l.pString)(t[2]),""===e&&(t[0]=n,t[1]=1),[Object(l.decodeURI)(t[0]),t[1],Object(l.decodeURI)(t[2])]};return[[/^([a-zA-Z0-9~]+)\/p([1-9][0-9]*)\/(.+)\/?$/,{normalize_:e}],[/^([a-zA-Z0-9~]+)\/p([1-9][0-9]*)$/,{normalize_:e}],[/^([a-zA-Z0-9~]+)\/(.+)\/?$/,{normalize_:function(e,t){return t[0]=Object(l.pString)(t[0]),t[1]=Object(l.pString)(t[1]),""===e&&(t[0]=n),[Object(l.decodeURI)(t[0]),1,Object(l.decodeURI)(t[1])]}}],[/^([^/]*)$/,{normalize_:e}]]},t}(i(136).a)},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i,o=n(10),a=n.n(o),r=n(7),s=n(269),c=Object(r.view)({name:"View/User/MailBox/SystemDropDown",type:r.ViewType.Right,templateID:"SystemDropDown"})(i=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),t}(s.a))||i},function(e,t,i){"use strict";i.d(t,"a",function(){return R});i(67);var n,o=i(34),c=i.n(o),a=i(30),r=i.n(a),s=i(10),l=i.n(s),u=i(4),d=i.n(u),p=i(8),f=i.n(p),h=i(1),m=i(21),g=i.n(m),b=i(2),v=i(0),y=i(6),S=i(15),O=i(14),w=i(31),T=i(37),C=i(11),A=i(13),E=i(5),F=i(22),j=i(7),N=i(27),R=Object(j.view)({name:"View/User/MailBox/FolderList",type:j.ViewType.Left,templateID:"MailFolderList"})(n=function(t){function e(){var e;return(e=t.call(this)||this).oContentVisible=null,e.oContentScrollable=null,e.composeInEdit=w.a.composeInEdit,e.messageList=A.a.messageList,e.folderList=C.a.folderList,e.folderListSystem=C.a.folderListSystem,e.foldersChanging=C.a.foldersChanging,e.moveAction=y.moveAction,e.foldersListWithSingleInboxRootFolder=C.a.foldersListWithSingleInboxRootFolder,e.leftPanelDisabled=y.leftPanelDisabled,e.iDropOverTimer=0,e.allowComposer=!!E.capa(v.Capa.Composer),e.allowContacts=!!w.a.contactsIsAllowed(),e.allowFolders=!!E.capa(v.Capa.Folders),e.folderListFocused=h.a.computed(function(){return v.Focused.FolderList===w.a.focusedState()}),e.isInboxStarred=h.a.computed(function(){var e;return C.a.currentFolder()&&C.a.currentFolder().isInbox()&&-1<r()(e=Object(b.trim)(A.a.messageListSearch())).call(e,"is:flagged")}),e}l()(e,t);var n=e.prototype;return n.onBuild=function(a){this.oContentVisible=f()(".b-content",a),this.oContentScrollable=f()(".content",this.oContentVisible);var r=this,s=E.appSettingsGet("mobile"),t=function(e,t,n){var i=Object(y.moveAction)();s&&Object(y.leftPanelDisabled)(!0),t.preventDefault(),n&&t.stopPropagation();var o=h.a.dataFor(e);o&&(i?(Object(y.moveAction)(!1),Object(F.a)().moveMessagesToFolder(C.a.currentFolderFullNameRaw(),A.a.messageListCheckedOrSelectedUidsWithSubMails(),o.fullNameRaw,!1)):(v.Layout.NoPreview===T.a.layout()&&A.a.message(null),o.fullNameRaw===C.a.currentFolderFullNameRaw()&&Object(O.q)(o.fullNameRaw,""),n?Object(j.setHash)(Object(S.o)(o.fullNameHash,1,"is:flagged")):Object(j.setHash)(Object(S.o)(o.fullNameHash))),w.a.focusedState(v.Focused.MessageList))};a.on("click",".b-folders .e-item .e-link .e-collapsed-sign",function(e){var t=h.a.dataFor(this);if(t&&e){var n=t.collapsed();Object(F.a)().setExpandedFolder(t.fullNameHash,n),t.collapsed(!n),e.preventDefault(),e.stopPropagation()}}).on("click",".b-folders .e-item .e-link.selectable .inbox-star-icon",function(e){t(this,e,!r.isInboxStarred())}).on("click",".b-folders .e-item .e-link.selectable",function(e){t(this,e,!1)}),g()("up, down",v.KeyState.FolderList,function(e,t){var n=t&&"up"===t.shortcut?v.EventKeyCode.Up:v.EventKeyCode.Down,i=f()(".b-folders .e-item .e-link:not(.hidden):visible",a);if(e&&i.length){var o=i.index(c()(i).call(i,".focused"));-1<o&&i.eq(o).removeClass("focused"),v.EventKeyCode.Up===n&&0<o?o-=1:v.EventKeyCode.Down===n&&o<i.length-1&&(o+=1),i.eq(o).addClass("focused"),r.scrollToFocused()}return!1}),g()("enter",v.KeyState.FolderList,function(){var e=f()(".b-folders .e-item .e-link:not(.hidden).focused",a);return e.length&&e[0]&&(w.a.focusedState(v.Focused.MessageList),e.click()),!1}),g()("space",v.KeyState.FolderList,function(){var e=f()(".b-folders .e-item .e-link:not(.hidden).focused",a);if(e.length&&e[0]){var t=h.a.dataFor(e[0]);if(t){var n=t.collapsed();Object(F.a)().setExpandedFolder(t.fullNameHash,n),t.collapsed(!n)}}return!1}),g()("esc, tab, shift+tab, right",v.KeyState.FolderList,function(){return w.a.focusedState(v.Focused.MessageList),Object(y.moveAction)(!1),!1}),w.a.focusedState.subscribe(function(e){f()(".b-folders .e-item .e-link.focused",a).removeClass("focused"),v.Focused.FolderList===e&&f()(".b-folders .e-item .e-link.selected",a).addClass("focused")})},n.messagesDropOver=function(e){d.a.clearTimeout(this.iDropOverTimer),e&&e.collapsed()&&(this.iDropOverTimer=d.a.setTimeout(function(){e.collapsed(!1),Object(F.a)().setExpandedFolder(e.fullNameHash,!0),Object(b.windowResize)()},v.Magics.Time500ms))},n.messagesDropOut=function(){d.a.clearTimeout(this.iDropOverTimer)},n.scrollToFocused=function(){if(!this.oContentVisible||!this.oContentScrollable)return!1;var e=f()(".e-item .e-link.focused",this.oContentScrollable),t=e.position(),n=this.oContentVisible.height(),i=e.outerHeight();return!(!t||!(t.top<0||t.top+i>n))&&(t.top<0?this.oContentScrollable.scrollTop(this.oContentScrollable.scrollTop()+t.top-20):this.oContentScrollable.scrollTop(this.oContentScrollable.scrollTop()+t.top-n+i+20),!0)},n.messagesDrop=function(e,t){if(e&&t&&t.helper){var n=t.helper.data("rl-folder"),i=y.$html.hasClass("rl-ctrl-key-pressed"),o=t.helper.data("rl-uids");Object(b.isNormal)(n)&&""!==n&&Object(b.isArray)(o)&&Object(F.a)().moveMessagesToFolder(n,o,e.fullNameRaw,i)}},n.composeClick=function(){E.capa(v.Capa.Composer)&&Object(j.showScreenPopup)(i(123))},n.createFolder=function(){Object(j.showScreenPopup)(i(405))},n.configureFolders=function(){Object(j.setHash)(Object(S.z)("folders"))},n.contactsClick=function(){this.allowContacts&&Object(j.showScreenPopup)(i(404))},e}(N.a))||n},function(e,t,n){"use strict";n.d(t,"a",function(){return d});n(76);var i=n(10),o=n.n(i),a=n(3),r=n.n(a),s=n(1),c=n(0),l=n(2),u=n(15),d=function(t){function e(){var e;return(e=t.call(this,"ContactModel")||this).idContact=0,e.display="",e.properties=[],e.readOnly=!1,e.focused=s.a.observable(!1),e.selected=s.a.observable(!1),e.checked=s.a.observable(!1),e.deleted=s.a.observable(!1),e}o()(e,t);var n=e.prototype;return n.getNameAndEmailHelper=function(){var t="",n="";return Object(l.isNonEmptyArray)(this.properties)&&r.a.each(this.properties,function(e){e&&(c.ContactPropertyType.FirstName===e[0]?t=Object(l.trim)(e[1]+" "+t):c.ContactPropertyType.LastName===e[0]?t=Object(l.trim)(t+" "+e[1]):""===n&&c.ContactPropertyType.Email===e[0]&&(n=e[1]))}),""===n?null:[n,t]},n.parse=function(e){var t=this,n=!1;return e&&"Object/Contact"===e["@Object"]&&(this.idContact=Object(l.pInt)(e.IdContact),this.display=Object(l.pString)(e.Display),this.readOnly=!!e.ReadOnly,Object(l.isNonEmptyArray)(e.Properties)&&r.a.each(e.Properties,function(e){e&&e.Type&&Object(l.isNormal)(e.Value)&&Object(l.isNormal)(e.TypeStr)&&t.properties.push([Object(l.pInt)(e.Type),Object(l.pString)(e.Value),Object(l.pString)(e.TypeStr)])}),n=!0),n},n.srcAttr=function(){return Object(u.j)()},n.generateUid=function(){return Object(l.pString)(this.idContact)},n.lineAsCss=function(){var e=[];return this.deleted()&&e.push("deleted"),this.selected()&&e.push("selected"),this.checked()&&e.push("checked"),this.focused()&&e.push("focused"),e.join(" ")},e}(n(63).a)},function(e,t,i){"use strict";i.d(t,"a",function(){return de});i(135),i(67);var n,o,a,r,s,c,l,u,d,p,f,h,m,g=i(19),b=i.n(g),v=i(34),y=i.n(v),S=i(18),O=i.n(S),w=i(12),T=i.n(w),C=i(26),A=i.n(C),E=i(33),F=i.n(E),j=i(10),N=i.n(j),R=i(20),I=i.n(R),L=i(4),P=i.n(L),M=i(3),D=i.n(M),_=i(8),k=i.n(_),x=i(1),U=i(21),H=i.n(U),B=i(172),G=i.n(B),V=i(220),K=i.n(V),q=i(0),z=i(25),W=i(6),Y=i(2),$=i(15),J=i(270),X=i(24),Z=i(9),Q=i(14),ee=i(31),te=i(219),ne=i(37),ie=i(11),oe=i(13),ae=i(5),re=i(16),se=i(22),ce=i(7),le=i(27),ue=function(e){return e.canBeMoved()},de=(n=Object(ce.view)({name:"View/User/MailBox/MessageList",type:ce.ViewType.Right,templateID:"MailMessageList"}),o=Object(ce.command)(),a=Object(ce.command)(),r=Object(ce.command)(ue),s=Object(ce.command)(ue),c=Object(ce.command)(ue),l=Object(ce.command)(ue),u=Object(ce.command)(ue),d=Object(ce.command)(ue),p=Object(ce.command)(ue),f=Object(ce.command)(ue),n((m=function(e){function t(){var i;return(i=e.call(this)||this).sLastUid=null,i.bPrefetch=!1,i.emptySubjectValue="",i.iGoToUpUpOrDownDownTimeout=0,i.mobile=!!ae.appSettingsGet("mobile"),i.newMoveToFolder=ee.a.newMoveToFolder,i.allowReload=!!ae.capa(q.Capa.Reload),i.allowSearch=!!ae.capa(q.Capa.Search),i.allowSearchAdv=!!ae.capa(q.Capa.SearchAdv),i.allowComposer=!!ae.capa(q.Capa.Composer),i.allowMessageListActions=!!ae.capa(q.Capa.MessageListActions),i.allowDangerousActions=!!ae.capa(q.Capa.DangerousActions),i.allowFolders=!!ae.capa(q.Capa.Folders),i.popupVisibility=W.popupVisibility,i.message=oe.a.message,i.messageList=oe.a.messageList,i.messageListDisableAutoSelect=oe.a.messageListDisableAutoSelect,i.folderList=ie.a.folderList,i.composeInEdit=ee.a.composeInEdit,i.leftPanelDisabled=W.leftPanelDisabled,i.selectorMessageSelected=oe.a.selectorMessageSelected,i.selectorMessageFocused=oe.a.selectorMessageFocused,i.isMessageSelected=oe.a.isMessageSelected,i.messageListSearch=oe.a.messageListSearch,i.messageListThreadUid=oe.a.messageListThreadUid,i.messageListError=oe.a.messageListError,i.folderMenuForMove=ie.a.folderMenuForMove,i.useCheckboxesInList=ne.a.useCheckboxesInList,i.mainMessageListSearch=oe.a.mainMessageListSearch,i.messageListEndFolder=oe.a.messageListEndFolder,i.messageListEndThreadUid=oe.a.messageListEndThreadUid,i.messageListChecked=oe.a.messageListChecked,i.messageListCheckedOrSelected=oe.a.messageListCheckedOrSelected,i.messageListCheckedOrSelectedUidsWithSubMails=oe.a.messageListCheckedOrSelectedUidsWithSubMails,i.messageListCompleteLoadingThrottle=oe.a.messageListCompleteLoadingThrottle,i.messageListCompleteLoadingThrottleForAnimation=oe.a.messageListCompleteLoadingThrottleForAnimation,Object(Z.initOnStartOrLangChange)(function(){i.emptySubjectValue=Object(Z.i18n)("MESSAGE_LIST/EMPTY_SUBJECT_TEXT")}),i.userQuota=te.a.quota,i.userUsageSize=te.a.usage,i.userUsageProc=te.a.percentage,i.moveDropdownTrigger=x.a.observable(!1),i.moreDropdownTrigger=x.a.observable(!1),i.dragOver=x.a.observable(!1).extend({throttle:1}),i.dragOverEnter=x.a.observable(!1).extend({throttle:1}),i.dragOverArea=x.a.observable(null),i.dragOverBodyArea=x.a.observable(null),i.messageListItemTemplate=x.a.computed(function(){return i.mobile||q.Layout.SidePreview===ne.a.layout()?"MailMessageListItem":"MailMessageListItemNoPreviewPane"}),i.messageListSearchDesc=x.a.computed(function(){var e=oe.a.messageListEndSearch();return""===e?"":Object(Z.i18n)("MESSAGE_LIST/SEARCH_RESULT_FOR",{SEARCH:e})}),i.messageListPagenator=x.a.computed(Object(Y.computedPagenatorHelper)(oe.a.messageListPage,oe.a.messageListPageCount)),i.checkAll=x.a.computed({read:function(){return 0<oe.a.messageListChecked().length},write:function(t){t=!!t,D.a.each(oe.a.messageList(),function(e){e.checked(t)})}}),i.inputMessageListSearchFocus=x.a.observable(!1),i.sLastSearchValue="",i.inputProxyMessageListSearch=x.a.computed({read:i.mainMessageListSearch,write:function(e){i.sLastSearchValue=e}}),i.isIncompleteChecked=x.a.computed(function(){var e=oe.a.messageList().length,t=oe.a.messageListChecked().length;return 0<e&&0<t&&t<e}),i.hasMessages=x.a.computed(function(){return 0<i.messageList().length}),i.hasCheckedOrSelectedLines=x.a.computed(function(){return 0<i.messageListCheckedOrSelected().length}),i.isSpamFolder=x.a.computed(function(){return ie.a.spamFolder()===i.messageListEndFolder()&&""!==ie.a.spamFolder()}),i.isSpamDisabled=x.a.computed(function(){return z.r===ie.a.spamFolder()}),i.isTrashFolder=x.a.computed(function(){return ie.a.trashFolder()===i.messageListEndFolder()&&""!==ie.a.trashFolder()}),i.isDraftFolder=x.a.computed(function(){return ie.a.draftFolder()===i.messageListEndFolder()&&""!==ie.a.draftFolder()}),i.isSentFolder=x.a.computed(function(){return ie.a.sentFolder()===i.messageListEndFolder()&&""!==ie.a.sentFolder()}),i.isArchiveFolder=x.a.computed(function(){return ie.a.archiveFolder()===i.messageListEndFolder()&&""!==ie.a.archiveFolder()}),i.isArchiveDisabled=x.a.computed(function(){return z.r===ie.a.archiveFolder()}),i.isArchiveVisible=x.a.computed(function(){return!i.isArchiveFolder()&&!i.isArchiveDisabled()&&!i.isDraftFolder()}),i.isSpamVisible=x.a.computed(function(){return!(i.isSpamFolder()||i.isSpamDisabled()||i.isDraftFolder()||i.isSentFolder())}),i.isUnSpamVisible=x.a.computed(function(){return i.isSpamFolder()&&!i.isSpamDisabled()&&!i.isDraftFolder()&&!i.isSentFolder()}),i.mobileCheckedStateShow=x.a.computed(function(){var e=0<i.messageListChecked().length;return!i.mobile||e}),i.mobileCheckedStateHide=x.a.computed(function(){var e=0<i.messageListChecked().length;return!i.mobile||!e}),i.messageListFocused=x.a.computed(function(){return q.Focused.MessageList===ee.a.focusedState()}),i.canBeMoved=i.hasCheckedOrSelectedLines,i.quotaTooltip=A()(D.a).call(D.a,i.quotaTooltip,F()(i)),i.selector=new J.a(i.messageList,i.selectorMessageSelected,i.selectorMessageFocused,".messageListItem .actionHandle",".messageListItem.selected",".messageListItem .checkboxMessage",".messageListItem.focused"),i.selector.on("onItemSelect",function(e){oe.a.selectMessage(e)}),i.selector.on("onItemGetUid",function(e){return e?e.generateUid():""}),i.selector.on("onAutoSelect",function(){return i.useAutoSelect()}),i.selector.on("onUpUpOrDownDown",function(e){i.goToUpUpOrDownDown(e)}),X.b("mailbox.message-list.selector.go-down",function(e){i.selector.goDown(e)}),X.b("mailbox.message-list.selector.go-up",function(e){i.selector.goUp(e)}),X.b("mailbox.message.show",function(t,n){var e=T()(D.a).call(D.a,i.messageList(),function(e){return e&&t===e.folderFullNameRaw&&n===e.uid});"INBOX"===t&&Object(ce.setHash)(Object($.o)(t,1)),e?i.selector.selectMessageItem(e):("INBOX"!==t&&Object(ce.setHash)(Object($.o)(t,1)),oe.a.selectMessageByFolderAndUid(t,n))}),oe.a.messageListEndHash.subscribe(function(){i.selector.scrollToTop()}),i}N()(t,e);var n=t.prototype;return n.clearCommand=function(){ae.capa(q.Capa.DangerousActions)&&Object(ce.showScreenPopup)(i(524),[ie.a.currentFolder()])},n.reloadCommand=function(){!oe.a.messageListCompleteLoadingThrottleForAnimation()&&this.allowReload&&Object(se.a)().reloadMessageList(!1,!0)},n.multyForwardCommand=function(){ae.capa(q.Capa.Composer)&&Object(ce.showScreenPopup)(i(123),[q.ComposeType.ForwardAsAttachment,oe.a.messageListCheckedOrSelected()])},n.deleteWithoutMoveCommand=function(){ae.capa(q.Capa.DangerousActions)&&Object(se.a)().deleteMessagesFromFolder(q.FolderType.Trash,ie.a.currentFolderFullNameRaw(),oe.a.messageListCheckedOrSelectedUidsWithSubMails(),!1)},n.deleteCommand=function(){Object(se.a)().deleteMessagesFromFolder(q.FolderType.Trash,ie.a.currentFolderFullNameRaw(),oe.a.messageListCheckedOrSelectedUidsWithSubMails(),!0)},n.archiveCommand=function(){Object(se.a)().deleteMessagesFromFolder(q.FolderType.Archive,ie.a.currentFolderFullNameRaw(),oe.a.messageListCheckedOrSelectedUidsWithSubMails(),!0)},n.spamCommand=function(){Object(se.a)().deleteMessagesFromFolder(q.FolderType.Spam,ie.a.currentFolderFullNameRaw(),oe.a.messageListCheckedOrSelectedUidsWithSubMails(),!0)},n.notSpamCommand=function(){Object(se.a)().deleteMessagesFromFolder(q.FolderType.NotSpam,ie.a.currentFolderFullNameRaw(),oe.a.messageListCheckedOrSelectedUidsWithSubMails(),!0)},n.moveCommand=function(){},n.moveNewCommand=function(e,t){this.newMoveToFolder()&&this.mobileCheckedStateShow()&&(e&&t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation&&t.stopPropagation()),Object(W.moveAction)()?(ee.a.focusedState(q.Focused.MessageList),Object(W.moveAction)(!1)):(ee.a.focusedState(q.Focused.FolderList),Object(W.moveAction)(!0)))},n.hideLeft=function(e,t){t.preventDefault(),t.stopPropagation(),Object(W.leftPanelDisabled)(!0)},n.showLeft=function(e,t){t.preventDefault(),t.stopPropagation(),Object(W.leftPanelDisabled)(!1)},n.composeClick=function(){ae.capa(q.Capa.Composer)&&Object(ce.showScreenPopup)(i(123))},n.goToUpUpOrDownDown=function(e){var a=this;return!(0<this.messageListChecked().length)&&(P.a.clearTimeout(this.iGoToUpUpOrDownDownTimeout),this.iGoToUpUpOrDownDownTimeout=P.a.setTimeout(function(){var t=null,n=null,i=null,o=null;T()(D.a).call(D.a,a.messageListPagenator(),function(e){if(e){if(o&&(n=e),e.current&&(o=e,t=i),n)return!0;i=e}return!1}),q.Layout.NoPreview!==ne.a.layout()||a.message()?a.selector.iSelectNextHelper=e?-1:1:a.selector.iFocusedNextHelper=e?-1:1,(e?t:n)&&(a.selector.unselect(),a.gotoPage(e?t:n))},q.Magics.Time350ms),!0)},n.useAutoSelect=function(){return!this.messageListDisableAutoSelect()&&(!/is:unseen/.test(this.mainMessageListSearch())&&q.Layout.NoPreview!==ne.a.layout())},n.searchEnterAction=function(){this.mainMessageListSearch(this.sLastSearchValue),this.inputMessageListSearchFocus(!1)},n.printableMessageCountForDeletion=function(){var e=this.messageListCheckedOrSelectedUidsWithSubMails().length;return 1<e?" ("+(e<100?e:"99+")+")":""},n.cancelSearch=function(){this.mainMessageListSearch(""),this.inputMessageListSearchFocus(!1)},n.cancelThreadUid=function(){Object(ce.setHash)(Object($.o)(ie.a.currentFolderFullNameHash(),oe.a.messageListPageBeforeThread(),oe.a.messageListSearch()))},n.moveSelectedMessagesToFolder=function(e,t){return this.canBeMoved()&&Object(se.a)().moveMessagesToFolder(ie.a.currentFolderFullNameRaw(),oe.a.messageListCheckedOrSelectedUidsWithSubMails(),e,t),!1},n.dragAndDronHelper=function(e){e&&e.checked(!0);var t=Object(Y.draggablePlace)(),n=function(){var e=oe.a.messageListCheckedOrSelectedUidsWithSubMails();t.data("rl-uids",e),T()(t).call(t,".text").text(""+e.length)};return t.data("rl-folder",ie.a.currentFolderFullNameRaw()),n(),D.a.defer(n),t},n.setAction=function(e,t,n){Object(se.a)().messageListAction(e,t,n)},n.setActionForAll=function(e,t,n){if(void 0===n&&(n=""),""!==e){var i=0,o=[],a=Object(Q.e)(e);if(a){switch(t){case q.MessageSetAction.SetSeen:(a=Object(Q.e)(e))&&(D.a.each(oe.a.messageList(),function(e){e.unseen()&&(i+=1),e.unseen(!1),o.push(e.uid)}),n?(a.messageCountUnread(a.messageCountUnread()-i),a.messageCountUnread()<0&&a.messageCountUnread(0)):a.messageCountUnread(0),Object(Q.c)(e)),re.a.messageSetSeenToAll(Y.noop,e,!0,n?o:null);break;case q.MessageSetAction.UnsetSeen:(a=Object(Q.e)(e))&&(D.a.each(oe.a.messageList(),function(e){e.unseen()||(i+=1),e.unseen(!0),o.push(e.uid)}),n?(a.messageCountUnread(a.messageCountUnread()+i),a.messageCountAll()<a.messageCountUnread()&&a.messageCountUnread(a.messageCountAll())):a.messageCountUnread(a.messageCountAll()),Object(Q.c)(e)),re.a.messageSetSeenToAll(Y.noop,e,!1,n?o:null)}Object(se.a)().reloadFlagsCurrentMessageListAndMessageFromCache()}}},n.listSetSeen=function(){this.setAction(ie.a.currentFolderFullNameRaw(),q.MessageSetAction.SetSeen,oe.a.messageListCheckedOrSelected())},n.listSetAllSeen=function(){this.setActionForAll(ie.a.currentFolderFullNameRaw(),q.MessageSetAction.SetSeen,this.messageListEndThreadUid())},n.listUnsetSeen=function(){this.setAction(ie.a.currentFolderFullNameRaw(),q.MessageSetAction.UnsetSeen,oe.a.messageListCheckedOrSelected())},n.listSetFlags=function(){this.setAction(ie.a.currentFolderFullNameRaw(),q.MessageSetAction.SetFlag,oe.a.messageListCheckedOrSelected())},n.listUnsetFlags=function(){this.setAction(ie.a.currentFolderFullNameRaw(),q.MessageSetAction.UnsetFlag,oe.a.messageListCheckedOrSelected())},n.flagMessages=function(e){var t=this.messageListCheckedOrSelected();if(e){var n=O()(D.a).call(D.a,t,function(e){return e.uid});0<n.length&&-1<Object(Y.inArray)(e.uid,n)?this.setAction(e.folderFullNameRaw,e.flagged()?q.MessageSetAction.UnsetFlag:q.MessageSetAction.SetFlag,t):this.setAction(e.folderFullNameRaw,e.flagged()?q.MessageSetAction.UnsetFlag:q.MessageSetAction.SetFlag,[e])}},n.flagMessagesFast=function(e){var t=this.messageListCheckedOrSelected();if(0<t.length)if(Object(Y.isUnd)(e)){var n=y()(D.a).call(D.a,t,function(e){return e.flagged()});this.setAction(t[0].folderFullNameRaw,t.length===n.length?q.MessageSetAction.UnsetFlag:q.MessageSetAction.SetFlag,t)}else this.setAction(t[0].folderFullNameRaw,e?q.MessageSetAction.SetFlag:q.MessageSetAction.UnsetFlag,t)},n.seenMessagesFast=function(e){var t=this.messageListCheckedOrSelected();if(0<t.length)if(Object(Y.isUnd)(e)){var n=y()(D.a).call(D.a,t,function(e){return e.unseen()});this.setAction(t[0].folderFullNameRaw,0<n.length?q.MessageSetAction.SetSeen:q.MessageSetAction.UnsetSeen,t)}else this.setAction(t[0].folderFullNameRaw,e?q.MessageSetAction.SetSeen:q.MessageSetAction.UnsetSeen,t)},n.gotoPage=function(e){e&&Object(ce.setHash)(Object($.o)(ie.a.currentFolderFullNameHash(),e.value,oe.a.messageListSearch(),oe.a.messageListThreadUid()))},n.gotoThread=function(e){e&&0<e.threadsLen()&&(oe.a.messageListPageBeforeThread(oe.a.messageListPage()),Object(ce.setHash)(Object($.o)(ie.a.currentFolderFullNameHash(),1,oe.a.messageListSearch(),e.uid)))},n.clearListIsVisible=function(){return""===this.messageListSearchDesc()&&""===this.messageListError()&&""===this.messageListEndThreadUid()&&0<this.messageList().length&&(this.isSpamFolder()||this.isTrashFolder())},n.onBuild=function(e){var t=this,n=this;this.oContentVisible=k()(".b-content",e),this.oContentScrollable=k()(".content",this.oContentVisible),this.selector.init(this.oContentVisible,this.oContentScrollable,q.KeyState.MessageList),this.mobile&&e.on("click",function(){Object(W.leftPanelDisabled)(!0)}),e.on("click",".messageList .b-message-list-wrapper",function(){q.Focused.MessageView===ee.a.focusedState()&&ee.a.focusedState(q.Focused.MessageList)}).on("click",".e-pagenator .e-page",function(){n.gotoPage(x.a.dataFor(this))}).on("click",".messageList .checkboxCkeckAll",function(){t.checkAll(!t.checkAll())}).on("click",".messageList .messageListItem .flagParent",function(){n.flagMessages(x.a.dataFor(this))}).on("click",".messageList .messageListItem .threads-len",function(){n.gotoThread(x.a.dataFor(this))}).on("dblclick",".messageList .messageListItem .actionHandle",function(){n.gotoThread(x.a.dataFor(this))}),this.initUploaderForAppend(),this.initShortcuts(),!W.bMobileDevice&&K.a&&ae.capa(q.Capa.Prefetch)&&(K.a.setIdleDuration(q.Magics.ifvisibleIdle10s),K.a.idle(function(){t.prefetchNextTick()}))},n.initShortcuts=function(){var n=this;H()("enter",q.KeyState.MessageList,function(){return!n.message()||!n.useAutoSelect()||(X.a("mailbox.message-view.toggle-full-screen"),!1)}),ae.capa(q.Capa.MessageListActions)&&(H()("z",[q.KeyState.MessageList,q.KeyState.MessageView],function(){return n.archiveCommand(),!1}),H()("delete, shift+delete, shift+3",q.KeyState.MessageList,function(e,t){return!e||(0<oe.a.messageListCheckedOrSelected().length&&(t&&"shift+delete"===t.shortcut?n.deleteWithoutMoveCommand():n.deleteCommand()),!1)})),ae.capa(q.Capa.Reload)&&H()("ctrl+r, command+r",[q.KeyState.FolderList,q.KeyState.MessageList,q.KeyState.MessageView],function(){return n.reloadCommand(),!1}),H()("ctrl+a, command+a",q.KeyState.MessageList,function(){return n.checkAll(!(n.checkAll()&&!n.isIncompleteChecked())),!1}),ae.capa(q.Capa.Composer)&&H()("w,c",[q.KeyState.MessageList,q.KeyState.MessageView],function(){return Object(ce.showScreenPopup)(i(123)),!1}),ae.capa(q.Capa.MessageListActions)&&H()("i",[q.KeyState.MessageList,q.KeyState.MessageView],function(){return n.flagMessagesFast(),!1}),H()("t",[q.KeyState.MessageList],function(){var e=n.selectorMessageSelected();return e||(e=n.selectorMessageFocused()),e&&0<e.threadsLen()&&n.gotoThread(e),!1}),ae.capa(q.Capa.MessageListActions)&&H()("m",q.KeyState.MessageList,function(){return n.newMoveToFolder()?n.moveNewCommand():n.moveDropdownTrigger(!0),!1}),ae.capa(q.Capa.MessageListActions)&&(H()("q",[q.KeyState.MessageList,q.KeyState.MessageView],function(){return n.seenMessagesFast(!0),!1}),H()("u",[q.KeyState.MessageList,q.KeyState.MessageView],function(){return n.seenMessagesFast(!1),!1})),ae.capa(q.Capa.Composer)&&H()("shift+f",[q.KeyState.MessageList,q.KeyState.MessageView],function(){return n.multyForwardCommand(),!1}),ae.capa(q.Capa.Search)&&H()("/",[q.KeyState.MessageList,q.KeyState.MessageView],function(){return n.inputMessageListSearchFocus(!0),!1}),H()("esc",q.KeyState.MessageList,function(){return""!==n.messageListSearchDesc()?(n.cancelSearch(),!1):""===n.messageListEndThreadUid()||(n.cancelThreadUid(),!1)}),H()("tab, shift+tab, left, right",q.KeyState.MessageList,function(e,t){return e&&t&&("shift+tab"===t.shortcut||"left"===t.shortcut)?ee.a.focusedState(q.Focused.FolderList):n.message()&&ee.a.focusedState(q.Focused.MessageView),!1}),H()("ctrl+left, command+left",q.KeyState.MessageView,Y.noopFalse),H()("ctrl+right, command+right",q.KeyState.MessageView,Y.noopFalse)},n.prefetchNextTick=function(){var i=this;if(K.a&&!this.bPrefetch&&!K.a.now()&&this.viewModelVisibility()){var e=T()(D.a).call(D.a,this.messageList(),function(e){return e&&!Object(Q.m)(e.folderFullNameRaw,e.uid)});e&&(this.bPrefetch=!0,Object(Q.b)(e.folderFullNameRaw,e.uid),re.a.message(function(e,t){var n=!(q.StorageResultType.Success!==e||!t||!t.Result);D.a.delay(function(){i.bPrefetch=!1,n&&i.prefetchNextTick()},q.Magics.Time1s)},e.folderFullNameRaw,e.uid))}},n.advancedSearchClick=function(){ae.capa(q.Capa.SearchAdv)&&Object(ce.showScreenPopup)(i(525),[this.mainMessageListSearch()])},n.quotaTooltip=function(){return Object(Z.i18n)("MESSAGE_LIST/QUOTA_SIZE",{SIZE:Object(Y.friendlySize)(this.userUsageSize()),PROC:this.userUsageProc(),LIMIT:Object(Y.friendlySize)(this.userQuota())})},n.initUploaderForAppend=function(){var t=this;if(!ae.appSettingsGet("allowAppendMessage")||!this.dragOverArea())return!1;var e=new G.a({action:Object($.b)(),name:"AppendFile",queueSize:1,multipleSizeLimit:1,hidden:{Folder:function(){return ie.a.currentFolderFullNameRaw()}},dragAndDropElement:this.dragOverArea(),dragAndDropBodyElement:this.dragOverBodyArea()});return this.dragOver.subscribe(function(e){e&&t.selector.scrollToTop()}),e.on("onDragEnter",function(){t.dragOverEnter(!0)}).on("onDragLeave",function(){t.dragOverEnter(!1)}).on("onBodyDragEnter",function(){t.dragOver(!0)}).on("onBodyDragLeave",function(){t.dragOver(!1)}).on("onSelect",function(e,t){return!(!e||!t||"message/rfc822"!==t.Type)&&(oe.a.messageListLoading(!0),!0)}).on("onComplete",function(){Object(se.a)().reloadMessageList(!0,!0)}),!!e},t}(le.a),I()(m.prototype,"clearCommand",[o],b()(m.prototype,"clearCommand"),m.prototype),I()(m.prototype,"reloadCommand",[a],b()(m.prototype,"reloadCommand"),m.prototype),I()(m.prototype,"multyForwardCommand",[r],b()(m.prototype,"multyForwardCommand"),m.prototype),I()(m.prototype,"deleteWithoutMoveCommand",[s],b()(m.prototype,"deleteWithoutMoveCommand"),m.prototype),I()(m.prototype,"deleteCommand",[c],b()(m.prototype,"deleteCommand"),m.prototype),I()(m.prototype,"archiveCommand",[l],b()(m.prototype,"archiveCommand"),m.prototype),I()(m.prototype,"spamCommand",[u],b()(m.prototype,"spamCommand"),m.prototype),I()(m.prototype,"notSpamCommand",[d],b()(m.prototype,"notSpamCommand"),m.prototype),I()(m.prototype,"moveCommand",[p],b()(m.prototype,"moveCommand"),m.prototype),I()(m.prototype,"moveNewCommand",[f],b()(m.prototype,"moveNewCommand"),m.prototype),h=m))||h)},function(e,t,a){"use strict";a.d(t,"a",function(){return ne});a(135);var n,i,o,r,s,c,l,u,d=a(19),p=a.n(d),f=a(12),h=a.n(f),m=a(18),g=a.n(m),b=a(26),v=a.n(b),y=a(33),S=a.n(y),O=a(10),w=a.n(O),T=a(20),C=a.n(T),A=a(4),E=a.n(A),F=a(3),j=a.n(F),N=a(8),R=a.n(N),I=a(1),L=a(21),P=a.n(L),M=a(25),D=a(0),_=a(6),k=a(2),x=a(82),U=a(24),H=a(9),B=a(15),G=a(14),V=a(29),K=a(31),q=a(37),z=a(46),W=a(11),Y=a(13),$=a(58),J=a(5),X=a(16),Z=a(88),Q=a(22),ee=a(7),te=a(27),ne=(n=Object(ee.view)({name:"View/User/MailBox/MessageView",type:ee.ViewType.Right,templateID:"MailMessageView"}),i=Object(ee.command)(),o=Object(ee.command)(function(e){return e.messageVisibility()}),r=Object(ee.command)(function(e){return e.messageVisibility()}),s=Object(ee.command)(function(e){return!e.messageListAndMessageViewLoading()}),c=Object(ee.command)(function(e){return!e.messageListAndMessageViewLoading()}),n((u=function(o){function e(){var i;i=o.call(this)||this;var n="",e=function(e){return Object(ee.createCommand)(function(){i.lastReplyAction(e),i.replyOrforward(e)},i.canBeRepliedOrForwarded)},t=function(t,n){return Object(ee.createCommand)(function(){var e=i.message();e&&i.allowMessageListActions&&(i.message(null),Object(Q.a)().deleteMessagesFromFolder(t,e.folderFullNameRaw,[e.uid],n))},i.messageVisibility)};return i.oDom=null,i.oHeaderDom=null,i.oMessageScrollerDom=null,i.bodyBackgroundColor=I.a.observable(""),i.pswp=null,i.moveAction=_.moveAction,i.allowComposer=!!J.capa(D.Capa.Composer),i.allowMessageActions=!!J.capa(D.Capa.MessageActions),i.allowMessageListActions=!!J.capa(D.Capa.MessageListActions),i.logoImg=Object(k.trim)(J.settingsGet("UserLogoMessage")),i.logoIframe=Object(k.trim)(J.settingsGet("UserIframeMessage")),i.mobile=!!J.appSettingsGet("mobile"),i.attachmentsActions=K.a.attachmentsActions,i.message=Y.a.message,i.messageListChecked=Y.a.messageListChecked,i.hasCheckedMessages=Y.a.hasCheckedMessages,i.messageListCheckedOrSelectedUidsWithSubMails=Y.a.messageListCheckedOrSelectedUidsWithSubMails,i.messageLoadingThrottle=Y.a.messageLoadingThrottle,i.messagesBodiesDom=Y.a.messagesBodiesDom,i.useThreads=q.a.useThreads,i.replySameFolder=q.a.replySameFolder,i.layout=q.a.layout,i.usePreviewPane=q.a.usePreviewPane,i.isMessageSelected=Y.a.isMessageSelected,i.messageActiveDom=Y.a.messageActiveDom,i.messageError=Y.a.messageError,i.fullScreenMode=Y.a.messageFullScreenMode,i.messageListOfThreadsLoading=I.a.observable(!1).extend({rateLimit:1}),i.highlightUnselectedAttachments=I.a.observable(!1).extend({falseTimeout:2e3}),i.showAttachmnetControls=I.a.observable(!1),i.showAttachmnetControlsState=function(e){$.b(D.ClientSideKeyName.MessageAttachmnetControls,!!e)},i.allowAttachmnetControls=I.a.computed(function(){return 0<i.attachmentsActions().length&&J.capa(D.Capa.AttachmentsActions)}),i.downloadAsZipAllowed=I.a.computed(function(){return-1<Object(k.inArray)("zip",i.attachmentsActions())&&i.allowAttachmnetControls()}),i.downloadAsZipLoading=I.a.observable(!1),i.downloadAsZipError=I.a.observable(!1).extend({falseTimeout:7e3}),i.saveToOwnCloudAllowed=I.a.computed(function(){return-1<Object(k.inArray)("owncloud",i.attachmentsActions())&&i.allowAttachmnetControls()}),i.saveToOwnCloudLoading=I.a.observable(!1),i.saveToOwnCloudSuccess=I.a.observable(!1).extend({falseTimeout:2e3}),i.saveToOwnCloudError=I.a.observable(!1).extend({falseTimeout:7e3}),i.saveToOwnCloudSuccess.subscribe(function(e){e&&i.saveToOwnCloudError(!1)}),i.saveToOwnCloudError.subscribe(function(e){e&&i.saveToOwnCloudSuccess(!1)}),i.saveToDropboxAllowed=I.a.computed(function(){return-1<Object(k.inArray)("dropbox",i.attachmentsActions())&&i.allowAttachmnetControls()}),i.saveToDropboxLoading=I.a.observable(!1),i.saveToDropboxSuccess=I.a.observable(!1).extend({falseTimeout:2e3}),i.saveToDropboxError=I.a.observable(!1).extend({falseTimeout:7e3}),i.saveToDropboxSuccess.subscribe(function(e){e&&i.saveToDropboxError(!1)}),i.saveToDropboxError.subscribe(function(e){e&&i.saveToDropboxSuccess(!1)}),i.showAttachmnetControls.subscribe(function(t){i.message()&&j.a.each(i.message().attachments(),function(e){e&&e.checked(!!t)})}),i.lastReplyAction_=I.a.observable(""),i.lastReplyAction=I.a.computed({read:i.lastReplyAction_,write:function(e){i.lastReplyAction_(-1===Object(k.inArray)(e,[D.ComposeType.Reply,D.ComposeType.ReplyAll,D.ComposeType.Forward])?D.ComposeType.Reply:e)}}),i.lastReplyAction($.a(D.ClientSideKeyName.LastReplyAction)||D.ComposeType.Reply),i.lastReplyAction_.subscribe(function(e){$.b(D.ClientSideKeyName.LastReplyAction,e)}),i.showFullInfo=I.a.observable("1"===$.a(D.ClientSideKeyName.MessageHeaderFullInfo)),i.moreDropdownTrigger=I.a.observable(!1),i.messageDomFocused=I.a.observable(!1).extend({rateLimit:0}),i.messageVisibility=I.a.computed(function(){return!i.messageLoadingThrottle()&&!!i.message()}),i.message.subscribe(function(e){e||Y.a.selectorMessageSelected(null)}),i.canBeRepliedOrForwarded=I.a.computed(function(){var e=i.messageVisibility();return!i.isDraftFolder()&&e}),i.replyCommand=e(D.ComposeType.Reply),i.replyAllCommand=e(D.ComposeType.ReplyAll),i.forwardCommand=e(D.ComposeType.Forward),i.forwardAsAttachmentCommand=e(D.ComposeType.ForwardAsAttachment),i.editAsNewCommand=e(D.ComposeType.EditAsNew),i.deleteCommand=t(D.FolderType.Trash,!0),i.deleteWithoutMoveCommand=t(D.FolderType.Trash,!1),i.archiveCommand=t(D.FolderType.Archive,!0),i.spamCommand=t(D.FolderType.Spam,!0),i.notSpamCommand=t(D.FolderType.NotSpam,!0),i.dropboxEnabled=V.a.dropbox.enabled,i.dropboxApiKey=V.a.dropbox.apiKey,i.viewBodyTopValue=I.a.observable(0),i.viewFolder="",i.viewUid="",i.viewHash="",i.viewSubject=I.a.observable(""),i.viewFromShort=I.a.observable(""),i.viewFromDkimData=I.a.observable(["none",""]),i.viewToShort=I.a.observable(""),i.viewFrom=I.a.observable(""),i.viewTo=I.a.observable(""),i.viewCc=I.a.observable(""),i.viewBcc=I.a.observable(""),i.viewReplyTo=I.a.observable(""),i.viewTimeStamp=I.a.observable(0),i.viewSize=I.a.observable(""),i.viewLineAsCss=I.a.observable(""),i.viewViewLink=I.a.observable(""),i.viewUnsubscribeLink=I.a.observable(""),i.viewDownloadLink=I.a.observable(""),i.viewUserPic=I.a.observable(M.f),i.viewUserPicVisible=I.a.observable(!1),i.viewIsImportant=I.a.observable(!1),i.viewIsFlagged=I.a.observable(!1),i.viewFromDkimVisibility=I.a.computed(function(){return"none"!==i.viewFromDkimData()[0]}),i.viewFromDkimStatusIconClass=I.a.computed(function(){switch(i.viewFromDkimData()[0]){case"none":return"icon-none iconcolor-display-none";case"pass":return"icon-ok iconcolor-green";default:return"icon-warning-alt iconcolor-red"}}),i.viewFromDkimStatusTitle=I.a.computed(function(){var e=i.viewFromDkimData();if(Object(k.isNonEmptyArray)(e)){if(e[0]&&e[1])return e[1];if(e[0])return"DKIM: "+e[0]}return""}),i.messageActiveDom.subscribe(function(e){i.bodyBackgroundColor(e?i.detectDomBackgroundColor(e):"")},S()(i)),i.message.subscribe(function(e){i.messageActiveDom(null),e?(i.showAttachmnetControls(!1),$.a(D.ClientSideKeyName.MessageAttachmnetControls)&&j.a.delay(function(){i.showAttachmnetControls(!0)},D.Magics.Time50ms),i.viewHash!==e.hash&&i.scrollMessageToTop(),i.viewFolder=e.folderFullNameRaw,i.viewUid=e.uid,i.viewHash=e.hash,i.viewSubject(e.subject()),i.viewFromShort(e.fromToLine(!0,!0)),i.viewFromDkimData(e.fromDkimData()),i.viewToShort(e.toToLine(!0,!0)),i.viewFrom(e.fromToLine(!1)),i.viewTo(e.toToLine(!1)),i.viewCc(e.ccToLine(!1)),i.viewBcc(e.bccToLine(!1)),i.viewReplyTo(e.replyToToLine(!1)),i.viewTimeStamp(e.dateTimeStampInUTC()),i.viewSize(e.friendlySize()),i.viewLineAsCss(e.lineAsCss()),i.viewViewLink(e.viewLink()),i.viewUnsubscribeLink(e.getFirstUnsubsribeLink()),i.viewDownloadLink(e.downloadLink()),i.viewIsImportant(e.isImportant()),i.viewIsFlagged(e.flagged()),n=e.fromAsSingleEmail(),Object(G.k)(n,function(e,t){e!==i.viewUserPic()&&n===t&&(i.viewUserPicVisible(!1),i.viewUserPic(M.f),""!==e&&(i.viewUserPicVisible(!0),i.viewUserPic(e)))})):(i.viewFolder="",i.viewUid="",i.viewHash="",i.scrollMessageToTop())}),i.message.viewTrigger.subscribe(function(){var e=i.message();e?i.viewIsFlagged(e.flagged()):i.viewIsFlagged(!1)}),i.fullScreenMode.subscribe(function(e){_.$html.toggleClass("rl-message-fullscreen",e),Object(k.windowResize)()}),i.messageLoadingThrottle.subscribe(k.windowResizeCallback),i.messageFocused=I.a.computed(function(){return D.Focused.MessageView===K.a.focusedState()}),i.messageListAndMessageViewLoading=I.a.computed(function(){return Y.a.messageListCompleteLoadingThrottle()||Y.a.messageLoadingThrottle()}),U.b("mailbox.message-view.toggle-full-screen",function(){i.toggleFullScreen()}),i.attachmentPreview=v()(j.a).call(j.a,i.attachmentPreview,S()(i)),i}w()(e,o);var t=e.prototype;return t.closeMessageCommand=function(){Y.a.message(null)},t.messageVisibilityCommand=function(){},t.messageEditCommand=function(){this.editMessage()},t.goUpCommand=function(){U.a("mailbox.message-list.selector.go-up",[D.Layout.NoPreview!==this.layout()||!!this.message()])},t.goDownCommand=function(){U.a("mailbox.message-list.selector.go-down",[D.Layout.NoPreview!==this.layout()||!!this.message()])},t.detectDomBackgroundColor=function(e){var t,n,i,o,a=5,r="";if(e&&1===e.length){for(var s=e;""===r&&!((a-=1)<=0)&&(o=void 0,s=(o=(i=s)?i.children():null)&&1===o.length&&o.is("table,div,center")?o:null);)n=void 0,n="",(t=s)&&(n=t.css("background-color")||"",t.is("table")||(n=Object(k.isTransparent)(n)?"":n)),r=n;r=Object(k.isTransparent)(r)?"":r}return r},t.fullScreen=function(){this.fullScreenMode(!0),Object(k.windowResize)()},t.unFullScreen=function(){this.fullScreenMode(!1),Object(k.windowResize)()},t.toggleFullScreen=function(){Object(k.removeSelection)(),this.fullScreenMode(!this.fullScreenMode()),Object(k.windowResize)()},t.replyOrforward=function(e){J.capa(D.Capa.Composer)&&Object(ee.showScreenPopup)(a(123),[e,Y.a.message()])},t.checkHeaderHeight=function(){this.oHeaderDom&&this.viewBodyTopValue(this.message()?this.oHeaderDom.height()+D.Magics.Size20px+D.Magics.Size1px:0)},t.attachmentPreview=function(t){if(t&&t.isImage()&&!t.isLinked&&this.message()&&this.message().attachments()){var n=0,i=0,e=R()("<div>"),o=j.a.compact(g()(j.a).call(j.a,this.message().attachments(),function(e){return e&&!e.isLinked&&e.isImage()?(e===t&&(n=i),i+=1,{src:e.linkPreview(),thumb:e.linkThumbnail(),subHtml:e.fileName,downloadUrl:e.linkPreview()}):null}));return 0<o.length&&(e.on("onBeforeOpen.lg",function(){Object(_.useKeyboardShortcuts)(!1),Object(k.removeInFocus)(!0)}),e.on("onCloseAfter.lg",function(){Object(_.useKeyboardShortcuts)(!0)}),e.lightGallery({dynamic:!0,loadYoutubeThumbnail:!1,loadVimeoThumbnail:!1,thumbWidth:80,thumbContHeight:95,showThumbByDefault:!1,mode:"lg-lollipop",index:n,dynamicEl:o})),!1}return!0},t.onBuild=function(e){var t=this,n=this,i=v()(j.a).call(j.a,this.checkHeaderHeight,this);this.oDom=e,this.fullScreenMode.subscribe(function(e){e&&t.message()&&K.a.focusedState(D.Focused.MessageView)}),this.showAttachmnetControls.subscribe(i),this.fullScreenMode.subscribe(i),this.showFullInfo.subscribe(i),this.message.subscribe(i),U.b("window.resize",j.a.throttle(function(){j.a.delay(i,1),j.a.delay(i,D.Magics.Time200ms),j.a.delay(i,D.Magics.Time500ms)},D.Magics.Time50ms)),this.showFullInfo.subscribe(function(e){Object(k.windowResize)(),Object(k.windowResize)(D.Magics.Time200ms),$.b(D.ClientSideKeyName.MessageHeaderFullInfo,e?"1":"0")}),V.a.appendDropbox(),this.oHeaderDom=R()(".messageItemHeader",e),this.oHeaderDom=this.oHeaderDom[0]?this.oHeaderDom:null,this.mobile&&e.on("click",function(){Object(_.leftPanelDisabled)(!0)}),e.on("click","a",function(e){return!(e&&D.Magics.EventWhichMouseMiddle!==e.which&&Object(k.mailToHelper)(R()(this).attr("href"),J.capa(D.Capa.Composer)?a(123):null))}).on("click",".attachmentsPlace .attachmentIconParent",function(e){e&&e.stopPropagation&&e.stopPropagation()}).on("click",".attachmentsPlace .showPreplay",function(e){e&&e.stopPropagation&&e.stopPropagation();var t=I.a.dataFor(this);if(t&&x.a.supported)switch(!0){case x.a.supportedMp3&&t.isMp3():x.a.playMp3(t.linkDownload(),t.fileName);break;case x.a.supportedOgg&&t.isOgg():x.a.playOgg(t.linkDownload(),t.fileName);break;case x.a.supportedWav&&t.isWav():x.a.playWav(t.linkDownload(),t.fileName)}}).on("click",".attachmentsPlace .attachmentItem .attachmentNameParent",function(){var e=I.a.dataFor(this);e&&e.download&&Object(Q.a)().download(e.linkDownload())}).on("click",".messageItemHeader .subjectParent .flagParent",function(){var e=n.message();e&&Object(Q.a)().messageListAction(e.folderFullNameRaw,e.flagged()?D.MessageSetAction.UnsetFlag:D.MessageSetAction.SetFlag,[e])}).on("click",".thread-list .flagParent",function(){var e=I.a.dataFor(this);return e&&e.folder&&e.uid&&Object(Q.a)().messageListAction(e.folder,e.flagged()?D.MessageSetAction.UnsetFlag:D.MessageSetAction.SetFlag,[e]),n.threadsDropdownTrigger(!0),!1}),K.a.focusedState.subscribe(function(e){D.Focused.MessageView!==e&&(t.scrollMessageToTop(),t.scrollMessageToLeft())}),_.keyScopeReal.subscribe(function(e){t.messageDomFocused(D.KeyState.MessageView===e&&!Object(k.inFocus)())}),this.oMessageScrollerDom=h()(e).call(e,".messageItem .content"),this.oMessageScrollerDom=this.oMessageScrollerDom&&this.oMessageScrollerDom[0]?this.oMessageScrollerDom:null,this.initShortcuts()},t.escShortcuts=function(){return!this.viewModelVisibility()||!this.message()||(this.fullScreenMode()?(this.fullScreenMode(!1),D.Layout.NoPreview!==this.layout()&&K.a.focusedState(D.Focused.MessageList)):D.Layout.NoPreview===this.layout()?this.message(null):K.a.focusedState(D.Focused.MessageList),!1)},t.initShortcuts=function(){var n=this;P()("esc, backspace",D.KeyState.MessageView,v()(j.a).call(j.a,this.escShortcuts,this)),P()("enter",D.KeyState.MessageView,function(){return n.toggleFullScreen(),!1}),P()("r",[D.KeyState.MessageList,D.KeyState.MessageView],function(){return!Y.a.message()||(n.replyCommand(),!1)}),P()("a",[D.KeyState.MessageList,D.KeyState.MessageView],function(){return!Y.a.message()||(n.replyAllCommand(),!1)}),P()("f",[D.KeyState.MessageList,D.KeyState.MessageView],function(){return!Y.a.message()||(n.forwardCommand(),!1)}),P()("ctrl+i, command+i",[D.KeyState.MessageList,D.KeyState.MessageView],function(){return Y.a.message()&&n.showFullInfo(!n.showFullInfo()),!1}),P()("b",[D.KeyState.MessageList,D.KeyState.MessageView],function(){var e;return!Y.a.message()||!Y.a.message().body||(h()(e=Y.a.message().body).call(e,".rlBlockquoteSwitcher").click(),!1)}),P()("ctrl+up, command+up, ctrl+left, command+left",[D.KeyState.MessageList,D.KeyState.MessageView],function(){return n.goUpCommand(),!1}),P()("ctrl+down, command+down, ctrl+right, command+right",[D.KeyState.MessageList,D.KeyState.MessageView],function(){return n.goDownCommand(),!1}),P()("ctrl+p, command+p",[D.KeyState.MessageView,D.KeyState.MessageList],function(){return n.message()&&n.message().printMessage(),!1}),P()("delete, shift+delete",D.KeyState.MessageView,function(e,t){return!e||(t&&"shift+delete"===t.shortcut?n.deleteWithoutMoveCommand():n.deleteCommand(),!1)}),P()("tab, shift+tab, left",D.KeyState.MessageView,function(e,t){if(!n.fullScreenMode()&&n.message()&&D.Layout.NoPreview!==n.layout())if(e&&t&&"left"===t.shortcut){if(n.oMessageScrollerDom&&0<n.oMessageScrollerDom.scrollLeft())return!0;K.a.focusedState(D.Focused.MessageList)}else K.a.focusedState(D.Focused.MessageList);else if(n.message()&&D.Layout.NoPreview===n.layout()&&e&&t&&"left"===t.shortcut)return!0;return!1})},t.isDraftFolder=function(){return Y.a.message()&&W.a.draftFolder()===Y.a.message().folderFullNameRaw},t.isSentFolder=function(){return Y.a.message()&&W.a.sentFolder()===Y.a.message().folderFullNameRaw},t.isSpamFolder=function(){return Y.a.message()&&W.a.spamFolder()===Y.a.message().folderFullNameRaw},t.isSpamDisabled=function(){return Y.a.message()&&W.a.spamFolder()===M.r},t.isArchiveFolder=function(){return Y.a.message()&&W.a.archiveFolder()===Y.a.message().folderFullNameRaw},t.isArchiveDisabled=function(){return Y.a.message()&&W.a.archiveFolder()===M.r},t.isDraftOrSentFolder=function(){return this.isDraftFolder()||this.isSentFolder()},t.composeClick=function(){J.capa(D.Capa.Composer)&&Object(ee.showScreenPopup)(a(123))},t.editMessage=function(){J.capa(D.Capa.Composer)&&Y.a.message()&&Object(ee.showScreenPopup)(a(123),[D.ComposeType.Draft,Y.a.message()])},t.scrollMessageToTop=function(){this.oMessageScrollerDom&&(D.Magics.Size50px<this.oMessageScrollerDom.scrollTop()?this.oMessageScrollerDom.scrollTop(D.Magics.Size50px).animate({scrollTop:0},D.Magics.Time200ms):this.oMessageScrollerDom.scrollTop(0),Object(k.windowResize)())},t.scrollMessageToLeft=function(){this.oMessageScrollerDom&&(this.oMessageScrollerDom.scrollLeft(0),Object(k.windowResize)())},t.getAttachmentsHashes=function(){var e=this.message()?this.message().attachments():[];return j.a.compact(g()(j.a).call(j.a,e,function(e){return e&&!e.isLinked&&e.checked()?e.download:""}))},t.downloadAsZip=function(){var t=this,e=this.getAttachmentsHashes();0<e.length?Z.a.attachmentsActions("Zip",e,this.downloadAsZipLoading).then(function(e){e&&e.Result&&e.Result.Files&&e.Result.Files[0]&&e.Result.Files[0].Hash?Object(Q.a)().download(Object(B.c)(e.Result.Files[0].Hash)):t.downloadAsZipError(!0)}).catch(function(){t.downloadAsZipError(!0)}):this.highlightUnselectedAttachments(!0)},t.saveToOwnCloud=function(){var t=this,e=this.getAttachmentsHashes();0<e.length?Z.a.attachmentsActions("OwnCloud",e,this.saveToOwnCloudLoading).then(function(e){e&&e.Result?t.saveToOwnCloudSuccess(!0):t.saveToOwnCloudError(!0)}).catch(function(){t.saveToOwnCloudError(!0)}):this.highlightUnselectedAttachments(!0)},t.saveToDropbox=function(){var e=this,n=[],t=this.getAttachmentsHashes();0<t.length?E.a.Dropbox&&Z.a.attachmentsActions("Dropbox",t,this.saveToDropboxLoading).then(function(t){t&&t.Result&&t.Result.Url&&t.Result.ShortLife&&t.Result.Files&&(E.a.Dropbox&&Object(k.isArray)(t.Result.Files)?(j.a.each(t.Result.Files,function(e){n.push({url:t.Result.Url+Object(B.c)(e.Hash,t.Result.ShortLife),filename:e.FileName})}),E.a.Dropbox.save({files:n,progress:function(){e.saveToDropboxLoading(!0),e.saveToDropboxError(!1),e.saveToDropboxSuccess(!1)},cancel:function(){e.saveToDropboxSuccess(!1),e.saveToDropboxError(!1),e.saveToDropboxLoading(!1)},success:function(){e.saveToDropboxSuccess(!0),e.saveToDropboxLoading(!1)},error:function(){e.saveToDropboxError(!0),e.saveToDropboxLoading(!1)}})):e.saveToDropboxError(!0))}).catch(function(){e.saveToDropboxError(!0)}):this.highlightUnselectedAttachments(!0)},t.showImages=function(e){e&&e.showExternalImages&&e.showExternalImages(!0),this.checkHeaderHeight()},t.printableCheckedMessageCount=function(){var e=this.messageListCheckedOrSelectedUidsWithSubMails().length;return 0<e?e<100?e:"99+":""},t.readReceipt=function(e){e&&""!==e.readReceipt()&&(X.a.sendReadReceiptMessage(k.noop,e.folderFullNameRaw,e.uid,e.readReceipt(),Object(H.i18n)("READ_RECEIPT/SUBJECT",{SUBJECT:e.subject()}),Object(H.i18n)("READ_RECEIPT/BODY",{"READ-RECEIPT":z.a.email()})),e.isReadReceipt(!0),Object(G.u)(e),Object(Q.a)().reloadFlagsCurrentMessageListAndMessageFromCache()),this.checkHeaderHeight()},e}(te.a),C()(u.prototype,"closeMessageCommand",[i],p()(u.prototype,"closeMessageCommand"),u.prototype),C()(u.prototype,"messageVisibilityCommand",[o],p()(u.prototype,"messageVisibilityCommand"),u.prototype),C()(u.prototype,"messageEditCommand",[r],p()(u.prototype,"messageEditCommand"),u.prototype),C()(u.prototype,"goUpCommand",[s],p()(u.prototype,"goUpCommand"),u.prototype),C()(u.prototype,"goDownCommand",[c],p()(u.prototype,"goDownCommand"),u.prototype),l=u))||l)},function(e,t,n){"use strict";n.d(t,"a",function(){return N});var i=n(10),o=n.n(i),a=n(0),r=n(6),s=n(38),c=n(9),l=n(31),u=n(46),d=n(5),p=n(7),f=n(257),h=n(433),m=n(434),g=n(435),b=n(436),v=n(437),y=n(438),S=n(439),O=n(440),w=n(441),T=n(442),C=n(443),A=n(444),E=n(445),F=n(446),j=n(22),N=function(t){function e(){var e;return e=t.call(this,[A.a,E.a,F.a])||this,Object(c.initOnStartOrLangChange)(function(){e.sSettingsTitle=Object(c.i18n)("TITLES/SETTINGS")},function(){e.setSettingsTitle()}),e}o()(e,t);var n=e.prototype;return n.setupSettings=function(e){return void 0===e&&(e=null),d.capa(a.Capa.Settings)?(Object(p.addSettingsViewModel)(h.a,"SettingsGeneral","SETTINGS_LABELS/LABEL_GENERAL_NAME","general",!0),l.a.contactsIsAllowed()&&Object(p.addSettingsViewModel)(m.a,"SettingsContacts","SETTINGS_LABELS/LABEL_CONTACTS_NAME","contacts"),(d.capa(a.Capa.AdditionalAccounts)||d.capa(a.Capa.Identities))&&Object(p.addSettingsViewModel)(g.a,"SettingsAccounts",d.capa(a.Capa.AdditionalAccounts)?"SETTINGS_LABELS/LABEL_ACCOUNTS_NAME":"SETTINGS_LABELS/LABEL_IDENTITIES_NAME","accounts"),d.capa(a.Capa.Sieve)&&Object(p.addSettingsViewModel)(b.a,"SettingsFilters","SETTINGS_LABELS/LABEL_FILTERS_NAME","filters"),(d.capa(a.Capa.AutoLogout)||d.capa(a.Capa.TwoFactor))&&Object(p.addSettingsViewModel)(v.a,"SettingsSecurity","SETTINGS_LABELS/LABEL_SECURITY_NAME","security"),u.a.isRootAccount()&&(d.settingsGet("AllowGoogleSocial")&&d.settingsGet("AllowGoogleSocialAuth")||d.settingsGet("AllowFacebookSocial")||d.settingsGet("AllowTwitterSocial"))&&Object(p.addSettingsViewModel)(y.a,"SettingsSocial","SETTINGS_LABELS/LABEL_SOCIAL_NAME","social"),d.settingsGet("ChangePasswordIsAllowed")&&Object(p.addSettingsViewModel)(S.a,"SettingsChangePassword","SETTINGS_LABELS/LABEL_CHANGE_PASSWORD_NAME","change-password"),d.capa(a.Capa.Templates)&&Object(p.addSettingsViewModel)(O.a,"SettingsTemplates","SETTINGS_LABELS/LABEL_TEMPLATES_NAME","templates"),d.capa(a.Capa.Folders)&&Object(p.addSettingsViewModel)(w.a,"SettingsFolders","SETTINGS_LABELS/LABEL_FOLDERS_NAME","folders"),d.capa(a.Capa.Themes)&&Object(p.addSettingsViewModel)(T.a,"SettingsThemes","SETTINGS_LABELS/LABEL_THEMES_NAME","themes"),d.capa(a.Capa.OpenPGP)&&Object(p.addSettingsViewModel)(C.a,"SettingsOpenPGP","SETTINGS_LABELS/LABEL_OPEN_PGP_NAME","openpgp"),Object(s.g)(!1),e&&e(),!0):(e&&e(),!1)},n.onShow=function(){this.setSettingsTitle(),Object(r.keyScope)(a.KeyState.Settings),Object(r.leftPanelType)(""),d.appSettingsGet("mobile")&&Object(r.leftPanelDisabled)(!0)},n.setSettingsTitle=function(){var e=u.a.email();Object(j.a)().setWindowTitle((""===e?"":e+" - ")+this.sSettingsTitle)},e}(f.a)},function(e,t,n){"use strict";n.d(t,"a",function(){return O});var i=n(12),o=n.n(i),a=n(3),r=n.n(a),s=n(1),c=n(25),l=n(6),u=n(0),d=n(2),p=n(9),f=n(7),h=n(31),m=n(70),g=n(37),b=n(100),v=n(116),y=n(13),S=n(16),O=function(){function e(){var t=this;this.language=m.a.language,this.languages=m.a.languages,this.messagesPerPage=g.a.messagesPerPage,this.messagesPerPageArray=c.j,this.editorDefaultType=g.a.editorDefaultType,this.layout=g.a.layout,this.usePreviewPane=g.a.usePreviewPane,this.soundNotificationIsSupported=v.a.soundNotificationIsSupported,this.enableSoundNotification=v.a.enableSoundNotification,this.enableDesktopNotification=v.a.enableDesktopNotification,this.isDesktopNotificationSupported=v.a.isDesktopNotificationSupported,this.isDesktopNotificationDenied=v.a.isDesktopNotificationDenied,this.showImages=g.a.showImages,this.useCheckboxesInList=g.a.useCheckboxesInList,this.threadsAllowed=h.a.threadsAllowed,this.useThreads=g.a.useThreads,this.replySameFolder=g.a.replySameFolder,this.allowLanguagesOnSettings=h.a.allowLanguagesOnSettings,this.languageFullName=s.a.computed(function(){return Object(d.convertLangName)(t.language())}),this.languageTrigger=s.a.observable(u.SaveSettingsStep.Idle).extend({throttle:u.Magics.Time100ms}),this.mppTrigger=s.a.observable(u.SaveSettingsStep.Idle),this.editorDefaultTypeTrigger=s.a.observable(u.SaveSettingsStep.Idle),this.layoutTrigger=s.a.observable(u.SaveSettingsStep.Idle),this.isAnimationSupported=l.bAnimationSupported,this.identities=b.a.identities,this.identityMain=s.a.computed(function(){var e=t.identities();return Object(d.isArray)(e)?o()(r.a).call(r.a,e,function(e){return e&&""===e.id()}):null}),this.identityMainDesc=s.a.computed(function(){var e=t.identityMain();return e?e.formattedName():"---"}),this.editorDefaultTypes=s.a.computed(function(){return Object(p.trigger)(),[{id:u.EditorDefaultType.Html,name:Object(p.i18n)("SETTINGS_GENERAL/LABEL_EDITOR_HTML")},{id:u.EditorDefaultType.Plain,name:Object(p.i18n)("SETTINGS_GENERAL/LABEL_EDITOR_PLAIN")},{id:u.EditorDefaultType.HtmlForced,name:Object(p.i18n)("SETTINGS_GENERAL/LABEL_EDITOR_HTML_FORCED")},{id:u.EditorDefaultType.PlainForced,name:Object(p.i18n)("SETTINGS_GENERAL/LABEL_EDITOR_PLAIN_FORCED")}]}),this.layoutTypes=s.a.computed(function(){return Object(p.trigger)(),[{id:u.Layout.NoPreview,name:Object(p.i18n)("SETTINGS_GENERAL/LABEL_LAYOUT_NO_SPLIT")},{id:u.Layout.SidePreview,name:Object(p.i18n)("SETTINGS_GENERAL/LABEL_LAYOUT_VERTICAL_SPLIT")},{id:u.Layout.BottomPreview,name:Object(p.i18n)("SETTINGS_GENERAL/LABEL_LAYOUT_HORIZONTAL_SPLIT")}]})}var t=e.prototype;return t.editMainIdentity=function(){var e=this.identityMain();e&&Object(f.showScreenPopup)(n(377),[e])},t.testSoundNotification=function(){v.a.playSoundNotification(!0)},t.onBuild=function(){var o=this;r.a.delay(function(){var e=Object(d.settingsSaveHelperSimpleFunction)(o.editorDefaultTypeTrigger,o),t=Object(d.settingsSaveHelperSimpleFunction)(o.mppTrigger,o),n=Object(d.settingsSaveHelperSimpleFunction)(o.layoutTrigger,o),i=function(e){return function(){o.languageTrigger(e),r.a.delay(function(){return o.languageTrigger(u.SaveSettingsStep.Idle)},u.Magics.Time1s)}};o.language.subscribe(function(e){o.languageTrigger(u.SaveSettingsStep.Animate),Object(p.reload)(!1,e).then(i(u.SaveSettingsStep.TrueResult),i(u.SaveSettingsStep.FalseResult)).then(function(){S.a.saveSettings(null,{Language:e})})}),o.editorDefaultType.subscribe(S.a.saveSettingsHelper("EditorDefaultType",null,e)),o.messagesPerPage.subscribe(S.a.saveSettingsHelper("MPP",null,t)),o.showImages.subscribe(S.a.saveSettingsHelper("ShowImages",d.boolToAjax)),o.useCheckboxesInList.subscribe(S.a.saveSettingsHelper("UseCheckboxesInList",d.boolToAjax)),o.enableDesktopNotification.subscribe(function(e){Object(d.timeOutAction)("SaveDesktopNotifications",function(){S.a.saveSettings(null,{DesktopNotifications:Object(d.boolToAjax)(e)})},u.Magics.Time3s)}),o.enableSoundNotification.subscribe(function(e){Object(d.timeOutAction)("SaveSoundNotification",function(){S.a.saveSettings(null,{SoundNotification:Object(d.boolToAjax)(e)})},u.Magics.Time3s)}),o.replySameFolder.subscribe(function(e){Object(d.timeOutAction)("SaveReplySameFolder",function(){S.a.saveSettings(null,{ReplySameFolder:Object(d.boolToAjax)(e)})},u.Magics.Time3s)}),o.useThreads.subscribe(function(e){y.a.messageList([]),S.a.saveSettings(null,{UseThreads:Object(d.boolToAjax)(e)})}),o.layout.subscribe(function(e){y.a.messageList([]),S.a.saveSettings(n,{Layout:e})})},u.Magics.Time50ms)},t.onShow=function(){this.enableDesktopNotification.valueHasMutated()},t.selectLanguage=function(){Object(f.showScreenPopup)(n(253),[this.language,this.languages(),m.a.userLanguage()])},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return l});n(76);var i=n(1),o=n(0),a=n(2),r=n(31),s=n(101),c=n(16),l=function(){function e(){var e=this;this.contactsAutosave=r.a.contactsAutosave,this.allowContactsSync=s.a.allowContactsSync,this.enableContactsSync=s.a.enableContactsSync,this.contactsSyncUrl=s.a.contactsSyncUrl,this.contactsSyncUser=s.a.contactsSyncUser,this.contactsSyncPass=s.a.contactsSyncPass,this.saveTrigger=i.a.computed(function(){return[e.enableContactsSync()?"1":"0",e.contactsSyncUrl(),e.contactsSyncUser(),e.contactsSyncPass()].join("|")}).extend({throttle:o.Magics.Time500ms})}return e.prototype.onBuild=function(){var e=this;this.contactsAutosave.subscribe(function(e){c.a.saveSettings(null,{ContactsAutosave:Object(a.boolToAjax)(e)})}),this.saveTrigger.subscribe(function(){c.a.saveContactsSyncData(null,e.enableContactsSync(),e.contactsSyncUrl(),e.contactsSyncUser(),e.contactsSyncPass())})},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n(4),o=n.n(i),a=n(3),r=n.n(a),s=n(1),c=n(0),l=n(15),u=n(5),d=n(46),p=n(100),f=n(16),h=n(22),m=n(7),g=function(){function e(){this.allowAdditionalAccount=Object(u.capa)(c.Capa.AdditionalAccounts),this.allowIdentities=Object(u.capa)(c.Capa.Identities),this.accounts=d.a.accounts,this.identities=p.a.identities,this.accountForDeletion=s.a.observable(null).deleteAccessHelper(),this.identityForDeletion=s.a.observable(null).deleteAccessHelper()}var t=e.prototype;return t.scrollableOptions=function(e){return{handle:".drag-handle",containment:e||"parent",axis:"y"}},t.addNewAccount=function(){Object(m.showScreenPopup)(n(376))},t.editAccount=function(e){e&&e.canBeEdit()&&Object(m.showScreenPopup)(n(376),[e])},t.addNewIdentity=function(){Object(m.showScreenPopup)(n(377))},t.editIdentity=function(e){Object(m.showScreenPopup)(n(377),[e])},t.deleteAccount=function(t){t&&t.deleteAccess()&&(this.accountForDeletion(null),t&&(this.accounts.remove(function(e){return t===e}),f.a.accountDelete(function(e,t){c.StorageResultType.Success===e&&t&&t.Result&&t.Reload?(Object(m.routeOff)(),Object(m.setHash)(Object(l.w)(),!0),Object(m.routeOff)(),r.a.defer(function(){return o.a.location.reload()})):Object(h.a)().accountsAndIdentities()},t.email)))},t.deleteIdentity=function(t){t&&t.deleteAccess()&&(this.identityForDeletion(null),t&&(p.a.identities.remove(function(e){return t===e}),f.a.identityDelete(function(){Object(h.a)().accountsAndIdentities()},t.id)))},t.accountsAndIdentitiesAfterMove=function(){f.a.accountsAndIdentitiesSortOrder(null,d.a.accountsEmails.peek(),p.a.identitiesIDS.peek())},t.onBuild=function(e){var t=this;e.on("click",".accounts-list .account-item .e-action",function(){var e=s.a.dataFor(this);e&&t.editAccount(e)}).on("click",".identities-list .identity-item .e-action",function(){var e=s.a.dataFor(this);e&&t.editIdentity(e)})},e}()},function(e,t,a){"use strict";a.d(t,"a",function(){return T});a(76);var n,i,o=a(19),r=a.n(o),s=a(30),c=a.n(s),l=a(18),u=a.n(l),d=a(20),p=a.n(d),f=a(3),h=a.n(f),m=a(1),g=a(2),b=a(0),v=a(9),y=a(211),S=a(16),O=a(391),w=a(7),T=(n=Object(w.command)(function(e){return e.haveChanges()}),i=function(){function e(){var t=this;this.modules=y.a.modules,this.filters=y.a.filters,this.inited=m.a.observable(!1),this.serverError=m.a.observable(!1),this.serverErrorDesc=m.a.observable(""),this.haveChanges=m.a.observable(!1),this.saveErrorText=m.a.observable(""),this.filters.subscribe(g.windowResizeCallback),this.serverError.subscribe(function(e){e||t.serverErrorDesc("")},this),this.filterRaw=y.a.raw,this.filterRaw.capa=y.a.capa,this.filterRaw.active=m.a.observable(!1),this.filterRaw.allow=m.a.observable(!1),this.filterRaw.error=m.a.observable(!1),this.filterForDeletion=m.a.observable(null).deleteAccessHelper(),this.filters.subscribe(function(){t.haveChanges(!0)}),this.filterRaw.subscribe(function(){t.haveChanges(!0),t.filterRaw.error(!1)}),this.haveChanges.subscribe(function(){t.saveErrorText("")}),this.filterRaw.active.subscribe(function(){t.haveChanges(!0),t.filterRaw.error(!1)})}var t=e.prototype;return t.saveChangesCommand=function(){var n=this;if(!this.filters.saving()){if(this.filterRaw.active()&&""===Object(g.trim)(this.filterRaw()))return this.filterRaw.error(!0),!1;this.filters.saving(!0),this.saveErrorText(""),S.a.filtersSave(function(e,t){n.filters.saving(!1),b.StorageResultType.Success===e&&t&&t.Result?(n.haveChanges(!1),n.updateList()):t&&t.ErrorCode?n.saveErrorText(t.ErrorMessageAdditional||Object(v.getNotification)(t.ErrorCode)):n.saveErrorText(Object(v.getNotification)(b.Notification.CantSaveFilters))},this.filters(),this.filterRaw(),this.filterRaw.active())}return!0},t.scrollableOptions=function(e){return{handle:".drag-handle",containment:e||"parent",axis:"y"}},t.updateList=function(){var n=this;this.filters.loading()||(this.filters.loading(!0),S.a.filtersGet(function(e,t){n.filters.loading(!1),n.serverError(!1),b.StorageResultType.Success===e&&t&&t.Result&&Object(g.isArray)(t.Result.Filters)?(n.inited(!0),n.serverError(!1),n.filters(h.a.compact(u()(h.a).call(h.a,t.Result.Filters,function(e){var t=new O.a;return t&&t.parse(e)?t:null}))),n.modules(t.Result.Modules?t.Result.Modules:{}),n.filterRaw(t.Result.Raw||""),n.filterRaw.capa(Object(g.isArray)(t.Result.Capa)?t.Result.Capa.join(" "):""),n.filterRaw.active(!!t.Result.RawIsActive),n.filterRaw.allow(!!t.Result.RawIsAllow)):(n.filters([]),n.modules({}),n.filterRaw(""),n.filterRaw.capa({}),n.serverError(!0),n.serverErrorDesc(t&&t.ErrorCode?Object(v.getNotification)(t.ErrorCode):Object(v.getNotification)(b.Notification.CantGetFilters))),n.haveChanges(!1)}))},t.deleteFilter=function(e){this.filters.remove(e),Object(g.delegateRunOnDestroy)(e)},t.addFilter=function(){var e=this,t=new O.a;t.generateID(),Object(w.showScreenPopup)(a(406),[t,function(){e.filters.push(t),e.filterRaw.active(!1)},!1])},t.editFilter=function(n){var i=this,o=n.cloneSelf();Object(w.showScreenPopup)(a(406),[o,function(){var e=i.filters(),t=c()(e).call(e,n);-1<t&&e[t]&&(Object(g.delegateRunOnDestroy)(e[t]),e[t]=o,i.filters(e),i.haveChanges(!0))},!0])},t.onBuild=function(e){var t=this;e.on("click",".filter-item .e-action",function(){var e=m.a.dataFor(this);e&&t.editFilter(e)})},t.onShow=function(){this.updateList()},e}(),p()(i.prototype,"saveChangesCommand",[n],r()(i.prototype,"saveChangesCommand"),i.prototype),i)},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i=n(3),o=n.n(i),a=n(1),r=n(2),s=n(0),c=n(9),l=n(5),u=n(7),d=n(37),p=n(16),f=function(){function e(){this.capaAutoLogout=Object(l.capa)(s.Capa.AutoLogout),this.capaTwoFactor=Object(l.capa)(s.Capa.TwoFactor),this.autoLogout=d.a.autoLogout,this.autoLogout.trigger=a.a.observable(s.SaveSettingsStep.Idle),this.autoLogoutOptions=a.a.computed(function(){return Object(c.trigger)(),[{id:0,name:Object(c.i18n)("SETTINGS_SECURITY/AUTOLOGIN_NEVER_OPTION_NAME")},{id:5,name:Object(c.i18n)("SETTINGS_SECURITY/AUTOLOGIN_MINUTES_OPTION_NAME",{MINUTES:5})},{id:10,name:Object(c.i18n)("SETTINGS_SECURITY/AUTOLOGIN_MINUTES_OPTION_NAME",{MINUTES:10})},{id:30,name:Object(c.i18n)("SETTINGS_SECURITY/AUTOLOGIN_MINUTES_OPTION_NAME",{MINUTES:30})},{id:60,name:Object(c.i18n)("SETTINGS_SECURITY/AUTOLOGIN_MINUTES_OPTION_NAME",{MINUTES:60})},{id:120,name:Object(c.i18n)("SETTINGS_SECURITY/AUTOLOGIN_HOURS_OPTION_NAME",{HOURS:2})},{id:300,name:Object(c.i18n)("SETTINGS_SECURITY/AUTOLOGIN_HOURS_OPTION_NAME",{HOURS:5})},{id:600,name:Object(c.i18n)("SETTINGS_SECURITY/AUTOLOGIN_HOURS_OPTION_NAME",{HOURS:10})}]})}var t=e.prototype;return t.configureTwoFactor=function(){Object(u.showScreenPopup)(n(407))},t.onBuild=function(){var t=this;this.capaAutoLogout&&o.a.delay(function(){var e=Object(r.settingsSaveHelperSimpleFunction)(t.autoLogout.trigger,t);t.autoLogout.subscribe(p.a.saveSettingsHelper("AutoLogout",r.pInt,e))})},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return b});var i,o,a,r,s,c,l,u=n(19),d=n.n(u),p=n(20),f=n.n(p),h=n(29),m=n(22),g=n(7),b=(i=Object(g.command)(function(e){return!e.googleLoggined()&&!e.googleActions()}),o=Object(g.command)(),a=Object(g.command)(function(e){return!e.facebookLoggined()&&!e.facebookActions()}),r=Object(g.command)(),s=Object(g.command)(function(e){return!e.twitterLoggined()&&!e.twitterActions()}),c=Object(g.command)(),l=function(){function e(){this.googleEnable=h.a.google.enabled,this.googleEnableAuth=h.a.google.capa.auth,this.googleEnableAuthFast=h.a.google.capa.authFast,this.googleEnableDrive=h.a.google.capa.drive,this.googleEnablePreview=h.a.google.capa.preview,this.googleActions=h.a.google.loading,this.googleLoggined=h.a.google.loggined,this.googleUserName=h.a.google.userName,this.facebookEnable=h.a.facebook.enabled,this.facebookActions=h.a.facebook.loading,this.facebookLoggined=h.a.facebook.loggined,this.facebookUserName=h.a.facebook.userName,this.twitterEnable=h.a.twitter.enabled,this.twitterActions=h.a.twitter.loading,this.twitterLoggined=h.a.twitter.loggined,this.twitterUserName=h.a.twitter.userName}var t=e.prototype;return t.connectGoogleCommand=function(){this.googleLoggined()||Object(m.a)().googleConnect()},t.disconnectGoogleCommand=function(){Object(m.a)().googleDisconnect()},t.connectFacebookCommand=function(){this.facebookLoggined()||Object(m.a)().facebookConnect()},t.disconnectFacebookCommand=function(){Object(m.a)().facebookDisconnect()},t.connectTwitterCommand=function(){this.twitterLoggined()||Object(m.a)().twitterConnect()},t.disconnectTwitterCommand=function(){Object(m.a)().twitterDisconnect()},e}(),f()(l.prototype,"connectGoogleCommand",[i],d()(l.prototype,"connectGoogleCommand"),l.prototype),f()(l.prototype,"disconnectGoogleCommand",[o],d()(l.prototype,"disconnectGoogleCommand"),l.prototype),f()(l.prototype,"connectFacebookCommand",[a],d()(l.prototype,"connectFacebookCommand"),l.prototype),f()(l.prototype,"disconnectFacebookCommand",[r],d()(l.prototype,"disconnectFacebookCommand"),l.prototype),f()(l.prototype,"connectTwitterCommand",[s],d()(l.prototype,"connectTwitterCommand"),l.prototype),f()(l.prototype,"disconnectTwitterCommand",[c],d()(l.prototype,"disconnectTwitterCommand"),l.prototype),l)},function(e,t,n){"use strict";n.d(t,"a",function(){return y});var i,o,a=n(19),r=n.n(a),s=n(26),c=n.n(s),l=n(20),u=n.n(l),d=n(3),p=n.n(d),f=n(1),h=n(0),m=n(9),g=n(16),b=n(22),v=n(7),y=(i=Object(v.command)(function(e){return!e.changeProcess()&&""!==e.currentPassword()&&""!==e.newPassword()&&""!==e.newPassword2()}),o=function(){function e(){var e=this;this.changeProcess=f.a.observable(!1),this.errorDescription=f.a.observable(""),this.passwordMismatch=f.a.observable(!1),this.passwordUpdateError=f.a.observable(!1),this.passwordUpdateSuccess=f.a.observable(!1),this.currentPassword=f.a.observable(""),this.currentPassword.error=f.a.observable(!1),this.newPassword=f.a.observable(""),this.newPassword2=f.a.observable(""),this.currentPassword.subscribe(function(){e.passwordUpdateError(!1),e.passwordUpdateSuccess(!1),e.currentPassword.error(!1)}),this.newPassword.subscribe(function(){e.passwordUpdateError(!1),e.passwordUpdateSuccess(!1),e.passwordMismatch(!1)}),this.newPassword2.subscribe(function(){e.passwordUpdateError(!1),e.passwordUpdateSuccess(!1),e.passwordMismatch(!1)}),this.onChangePasswordResponse=c()(p.a).call(p.a,this.onChangePasswordResponse,this)}var t=e.prototype;return t.saveNewPasswordCommand=function(){this.newPassword()!==this.newPassword2()?(this.passwordMismatch(!0),this.errorDescription(Object(m.i18n)("SETTINGS_CHANGE_PASSWORD/ERROR_PASSWORD_MISMATCH"))):(this.changeProcess(!0),this.passwordUpdateError(!1),this.passwordUpdateSuccess(!1),this.currentPassword.error(!1),this.passwordMismatch(!1),this.errorDescription(""),g.a.changePassword(this.onChangePasswordResponse,this.currentPassword(),this.newPassword()))},t.onHide=function(){this.changeProcess(!1),this.currentPassword(""),this.newPassword(""),this.newPassword2(""),this.errorDescription(""),this.passwordMismatch(!1),this.currentPassword.error(!1)},t.onChangePasswordResponse=function(e,t){this.changeProcess(!1),this.passwordMismatch(!1),this.errorDescription(""),this.currentPassword.error(!1),h.StorageResultType.Success===e&&t&&t.Result?(this.currentPassword(""),this.newPassword(""),this.newPassword2(""),this.passwordUpdateSuccess(!0),this.currentPassword.error(!1),Object(b.a)().setClientSideToken(t.Result)):(t&&h.Notification.CurrentPasswordIncorrect===t.ErrorCode&&this.currentPassword.error(!0),this.passwordUpdateError(!0),this.errorDescription(Object(m.getNotificationFromResponse)(t,h.Notification.CouldNotSaveNewPassword)))},e}(),u()(o.prototype,"saveNewPasswordCommand",[i],r()(o.prototype,"saveNewPasswordCommand"),o.prototype),o)},function(e,t,n){"use strict";n.d(t,"a",function(){return l});var i=n(1),o=n(9),a=n(173),r=n(16),s=n(22),c=n(7),l=function(){function e(){var e=this;this.templates=a.a.templates,this.processText=i.a.computed(function(){return a.a.templates.loading()?Object(o.i18n)("SETTINGS_TEMPLETS/LOADING_PROCESS"):""}),this.visibility=i.a.computed(function(){return""===e.processText()?"hidden":"visible"}),this.templateForDeletion=i.a.observable(null).deleteAccessHelper()}var t=e.prototype;return t.scrollableOptions=function(e){return{handle:".drag-handle",containment:e||"parent",axis:"y"}},t.addNewTemplate=function(){Object(c.showScreenPopup)(n(408))},t.editTemplate=function(e){e&&Object(c.showScreenPopup)(n(408),[e])},t.deleteTemplate=function(t){var e=this;t&&t.deleteAccess()&&(this.templateForDeletion(null),t&&(this.templates.remove(function(e){return t===e}),r.a.templateDelete(function(){e.reloadTemplates()},t.id)))},t.reloadTemplates=function(){Object(s.a)().templates()},t.onBuild=function(e){var t=this;e.on("click",".templates-list .template-item .e-action",function(){var e=i.a.dataFor(this);e&&t.editTemplate(e)}),this.reloadTemplates()},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return m});n(52);var i=n(1),o=n(0),a=n(2),r=n(9),s=n(14),c=n(5),l=n(58),u=n(11),d=n(88),p=n(16),f=n(22),h=n(7),m=function(){function e(){this.displaySpecSetting=u.a.displaySpecSetting,this.folderList=u.a.folderList,this.folderListHelp=i.a.observable("").extend({throttle:o.Magics.Time100ms}),this.loading=i.a.computed(function(){var e=u.a.foldersLoading(),t=u.a.foldersCreating(),n=u.a.foldersDeleting(),i=u.a.foldersRenaming();return e||t||n||i}),this.folderForDeletion=i.a.observable(null).deleteAccessHelper(),this.folderForEdit=i.a.observable(null).extend({toggleSubscribeProperty:[this,"edited"]}),this.useImapSubscribe=!!Object(c.appSettingsGet)("useImapSubscribe")}var t=e.prototype;return t.folderEditOnEnter=function(e){var t=e?Object(a.trim)(e.nameForEdit()):"";""!==t&&e.name()!==t&&(l.b(o.ClientSideKeyName.FoldersLashHash,""),Object(f.a)().foldersPromisesActionHelper(d.a.folderRename(e.fullNameRaw,t,u.a.foldersRenaming),o.Notification.CantRenameFolder),Object(s.o)(e.fullNameRaw),e.name(t)),e.edited(!1)},t.folderEditOnEsc=function(e){e&&e.edited(!1)},t.onShow=function(){u.a.folderList.error("")},t.onBuild=function(e){var t=this;e.on("mouseover",".delete-folder-parent",function(){t.folderListHelp(Object(r.i18n)("SETTINGS_FOLDERS/HELP_DELETE_FOLDER"))}).on("mouseover",".subscribe-folder-parent",function(){t.folderListHelp(Object(r.i18n)("SETTINGS_FOLDERS/HELP_SHOW_HIDE_FOLDER"))}).on("mouseover",".check-folder-parent",function(){t.folderListHelp(Object(r.i18n)("SETTINGS_FOLDERS/HELP_CHECK_FOR_NEW_MESSAGES"))}).on("mouseout",".subscribe-folder-parent, .check-folder-parent, .delete-folder-parent",function(){t.folderListHelp("")})},t.createFolder=function(){Object(h.showScreenPopup)(n(405))},t.systemFolder=function(){Object(h.showScreenPopup)(n(267))},t.deleteFolder=function(n){if(n&&n.canBeDeleted()&&n.deleteAccess()&&0===n.privateMessageCountAll()){if(this.folderForDeletion(null),n){l.b(o.ClientSideKeyName.FoldersLashHash,""),u.a.folderList.remove(function e(t){return n===t||(t.subFolders.remove(e),!1)}),Object(f.a)().foldersPromisesActionHelper(d.a.folderDelete(n.fullNameRaw,u.a.foldersDeleting),o.Notification.CantDeleteFolder),Object(s.o)(n.fullNameRaw)}}else 0<n.privateMessageCountAll()&&u.a.folderList.error(Object(r.getNotification)(o.Notification.CantDeleteNonEmptyFolder))},t.subscribeFolder=function(e){l.b(o.ClientSideKeyName.FoldersLashHash,""),p.a.folderSetSubscribe(a.noop,e.fullNameRaw,!0),e.subScribed(!0)},t.unSubscribeFolder=function(e){l.b(o.ClientSideKeyName.FoldersLashHash,""),p.a.folderSetSubscribe(a.noop,e.fullNameRaw,!1),e.subScribed(!1)},t.checkableTrueFolder=function(e){p.a.folderSetCheckable(a.noop,e.fullNameRaw,!0),e.checkable(!0)},t.checkableFalseFolder=function(e){p.a.folderSetCheckable(a.noop,e.fullNameRaw,!1),e.checkable(!1)},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return y});n(52);var i=n(18),o=n.n(i),a=n(3),r=n.n(a),s=n(8),c=n.n(s),l=n(1),u=n(172),d=n.n(u),p=n(0),f=n(2),h=n(15),m=n(9),g=n(5),b=n(115),v=n(16),y=function(){function e(){var e=this;this.theme=b.a.theme,this.themes=b.a.themes,this.themesObjects=l.a.observableArray([]),this.background={},this.background.name=b.a.themeBackgroundName,this.background.hash=b.a.themeBackgroundHash,this.background.uploaderButton=l.a.observable(null),this.background.loading=l.a.observable(!1),this.background.error=l.a.observable(""),this.capaUserBackground=l.a.observable(Object(g.capa)(p.Capa.UserBackground)),this.themeTrigger=l.a.observable(p.SaveSettingsStep.Idle).extend({throttle:p.Magics.Time100ms}),this.iTimer=0,this.oThemeAjaxRequest=null,this.theme.subscribe(function(t){r.a.each(e.themesObjects(),function(e){e.selected(t===e.name)}),Object(f.changeTheme)(t,e.themeTrigger),v.a.saveSettings(null,{Theme:t})}),this.background.hash.subscribe(function(e){var t=c()("#rl-bg");e?t.attr("style","background-image: none !important;").backstretch(Object(h.J)(e),{fade:p.Magics.Time1s,centeredX:!0,centeredY:!0}).removeAttr("style"):t.data("backstretch")&&t.backstretch("destroy").attr("style","")})}var t=e.prototype;return t.onBuild=function(){var t=this.theme();this.themesObjects(o()(r.a).call(r.a,this.themes(),function(e){return{name:e,nameDisplay:Object(f.convertThemeName)(e),selected:l.a.observable(e===t),themePreviewSrc:Object(h.F)(e)}})),this.initUploader()},t.onShow=function(){this.background.error("")},t.clearBackground=function(){var e=this;this.capaUserBackground()&&v.a.clearUserBackground(function(){e.background.name(""),e.background.hash("")})},t.initUploader=function(){var o=this;this.background.uploaderButton()&&this.capaUserBackground()&&new d.a({action:Object(h.H)(),name:"uploader",queueSize:1,multipleSizeLimit:1,disableDragAndDrop:!0,disableMultiple:!0,clickElement:this.background.uploaderButton()}).on("onStart",function(){return o.background.loading(!0),o.background.error(""),!0}).on("onComplete",function(e,t,n){if(o.background.loading(!1),t&&e&&n&&n.Result&&n.Result.Name&&n.Result.Hash)o.background.name(n.Result.Name),o.background.hash(n.Result.Hash);else{o.background.name(""),o.background.hash("");var i="";if(n.ErrorCode)switch(n.ErrorCode){case p.UploadErrorCode.FileIsTooBig:i=Object(m.i18n)("SETTINGS_THEMES/ERROR_FILE_IS_TOO_BIG");break;case p.UploadErrorCode.FileType:i=Object(m.i18n)("SETTINGS_THEMES/ERROR_FILE_TYPE_ERROR")}!i&&n.ErrorMessage&&(i=n.ErrorMessage),o.background.error(i||Object(m.i18n)("SETTINGS_THEMES/ERROR_UNKNOWN"))}return!0})},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return g});var i=n(12),o=n.n(i),a=n(3),r=n.n(a),s=n(1),c=n(2),l=n(0),u=n(6),d=n(41),p=n(37),f=n(16),h=n(22),m=n(7),g=function(){function e(){this.openpgpkeys=d.a.openpgpkeys,this.openpgpkeysPublic=d.a.openpgpkeysPublic,this.openpgpkeysPrivate=d.a.openpgpkeysPrivate,this.openPgpKeyForDeletion=s.a.observable(null).deleteAccessHelper(),this.allowDraftAutosave=p.a.allowDraftAutosave,this.isHttps=u.bIsHttps}var t=e.prototype;return t.addOpenPgpKey=function(){Object(m.showScreenPopup)(n(527))},t.generateOpenPgpKey=function(){Object(m.showScreenPopup)(n(528))},t.viewOpenPgpKey=function(e){e&&Object(m.showScreenPopup)(n(529),[e])},t.deleteOpenPgpKey=function(t){if(t&&t.deleteAccess()&&(this.openPgpKeyForDeletion(null),t&&d.a.openpgpKeyring)){var e=o()(r.a).call(r.a,d.a.openpgpkeys(),function(e){return t===e});e&&(d.a.openpgpkeys.remove(e),Object(c.delegateRunOnDestroy)(e),d.a.openpgpKeyring[e.isPrivate?"privateKeys":"publicKeys"].removeForId(e.guid),d.a.openpgpKeyring.store()),Object(h.a)().reloadOpenPgpKeys()}},t.onBuild=function(){var e=this;r.a.delay(function(){e.allowDraftAutosave.subscribe(f.a.saveSettingsHelper("AllowDraftAutosave",c.boolToAjax))},l.Magics.Time50ms)},e}()},function(e,t,n){"use strict";n.d(t,"a",function(){return c});var i,o=n(10),a=n.n(o),r=n(7),s=n(269),c=Object(r.view)({name:"View/User/Settings/SystemDropDown",type:r.ViewType.Right,templateID:"SystemDropDown"})(i=function(e){function t(){return e.apply(this,arguments)||this}return a()(t,e),t}(s.a))||i},function(e,t,n){"use strict";n.d(t,"a",function(){return b});n(169);var i,o=n(10),a=n.n(o),r=n(8),s=n.n(r),c=n(21),l=n.n(c),u=n(0),d=n(6),p=n(15),f=n(14),h=n(5),m=n(7),g=n(27),b=Object(m.view)({name:"View/User/Settings/Menu",type:m.ViewType.Left,templateID:"SettingsMenu"})(i=function(n){function e(e){var t;return(t=n.call(this)||this).leftPanelDisabled=d.leftPanelDisabled,t.mobile=h.appSettingsGet("mobile"),t.menu=e.menu,t}a()(e,n);var t=e.prototype;return t.onBuild=function(e){this.mobile&&e.on("click",".b-settings-menu .e-item.selectable",function(){Object(d.leftPanelDisabled)(!0)}),l()("up, down",u.KeyState.Settings,Object(m.settingsMenuKeysHandler)(s()(".b-settings-menu .e-item",e)))},t.link=function(e){return Object(p.z)(e)},t.backToMailBoxClick=function(){Object(m.setHash)(Object(p.m)(Object(f.h)()))},e}(g.a))||i},function(e,t,n){"use strict";n.d(t,"a",function(){return f});var i,o=n(10),a=n.n(o),r=n(15),s=n(14),c=n(6),l=n(5),u=n(13),d=n(7),p=n(27),f=Object(d.view)({name:"View/User/Settings/Pane",type:d.ViewType.Right,templateID:"SettingsPane"})(i=function(t){function e(){var e;return(e=t.call(this)||this).mobile=l.appSettingsGet("mobile"),e.leftPanelDisabled=c.leftPanelDisabled,e}a()(e,t);var n=e.prototype;return n.onShow=function(){u.a.message(null)},n.hideLeft=function(e,t){t.preventDefault(),t.stopPropagation(),Object(c.leftPanelDisabled)(!0)},n.showLeft=function(e,t){t.preventDefault(),t.stopPropagation(),Object(c.leftPanelDisabled)(!1)},n.onBuild=function(e){this.mobile&&e.on("click",function(){Object(c.leftPanelDisabled)(!0)})},n.backToMailBoxClick=function(){Object(d.setHash)(Object(r.m)(Object(s.h)()))},e}(p.a))||i},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);var i=n(254),o=n(386);Object(i.a)(o.default)},function(e,t,n){e.exports=n(516)},function(e,t,n){var i=n(517),o=Array.prototype;e.exports=function(e){var t=e.sort;return e===o||e instanceof Array&&t===o.sort?i:t}},function(e,t,n){n(518);var i=n(53);e.exports=i("Array").sort},function(e,t,n){"use strict";var i=n(42),o=n(170),a=n(122),r=n(57),s=n(145),c=[].sort,l=[1,2,3],u=r(function(){l.sort(void 0)}),d=r(function(){l.sort(null)}),p=s("sort");i({target:"Array",proto:!0,forced:u||!d||p},{sort:function(e){return void 0===e?c.call(a(this)):c.call(a(this),o(e))}})},function(e,t,n){"use strict";n.r(t),n.d(t,"MessageOpenPgpPopupView",function(){return E}),n.d(t,"default",function(){return E});var i,o,a,r,s=n(19),c=n.n(s),l=n(12),u=n.n(l),d=n(10),p=n.n(d),f=n(20),h=n.n(f),m=n(3),g=n.n(m),b=n(1),v=n(21),y=n.n(v),S=n(8),O=n.n(S),w=n(2),T=n(0),C=n(7),A=n(27),E=(i=Object(C.popup)({name:"View/Popup/MessageOpenPgp",templateID:"PopupsMessageOpenPgp"}),o=Object(C.command)(function(e){return!e.submitRequest()}),i((r=function(t){function e(){var e;return(e=t.call(this)||this).notification=b.a.observable(""),e.selectedKey=b.a.observable(null),e.privateKeys=b.a.observableArray([]),e.password=b.a.observable(""),e.password.focus=b.a.observable(!1),e.buttonFocus=b.a.observable(!1),e.resultCallback=null,e.submitRequest=b.a.observable(!1),e.sDefaultKeyScope=T.KeyState.PopupMessageOpenPGP,e}p()(e,t);var n=e.prototype;return n.doCommand=function(){var n=this;this.submitRequest(!0),g.a.delay(function(){var t=null;try{if(n.resultCallback&&n.selectedKey()){var e=n.selectedKey().getNativeKeys();if(t=e&&e[0]?e[0]:null)try{t.decrypt(Object(w.pString)(n.password()))||(Object(w.log)("Error: Private key cannot be decrypted"),t=null)}catch(e){Object(w.log)(e),t=null}else Object(w.log)("Error: Private key cannot be found")}}catch(e){Object(w.log)(e),t=null}n.submitRequest(!1),n.cancelCommand(),n.resultCallback(t)},T.Magics.Time100ms)},n.clearPopup=function(){this.notification(""),this.password(""),this.password.focus(!1),this.buttonFocus(!1),this.selectedKey(!1),this.submitRequest(!1),this.resultCallback=null,this.privateKeys([])},n.onBuild=function(t){var e=this;y()("tab,shift+tab",T.KeyState.PopupMessageOpenPGP,function(){switch(!0){case e.password.focus():e.buttonFocus(!0);break;case e.buttonFocus():e.password.focus(!0)}return!1});var n=this;t.on("click",".key-list__item",function(){var e;u()(t).call(t,".key-list__item .key-list__item__radio").addClass("icon-radio-unchecked").removeClass("icon-radio-checked"),u()(e=O()(this)).call(e,".key-list__item__radio").removeClass("icon-radio-unchecked").addClass("icon-radio-checked"),n.selectedKey(b.a.dataFor(this)),n.password.focus(!0)})},n.onHideWithDelay=function(){this.clearPopup()},n.onShowWithDelay=function(){this.password.focus(!0)},n.onShow=function(e,t){var n;(this.clearPopup(),this.resultCallback=e,this.privateKeys(t),this.viewModelDom)&&u()(n=this.viewModelDom).call(n,".key-list__item").first().click()},e}(A.a),h()(r.prototype,"doCommand",[o],c()(r.prototype,"doCommand"),r.prototype),a=r))||a)},function(e,t,n){n(216);var i=n(521),o=n(171),a=Array.prototype,r={DOMTokenList:!0,NodeList:!0};e.exports=function(e){var t=e.keys;return e===a||e instanceof Array&&t===a.keys||r.hasOwnProperty(o(e))?i:t}},function(e,t,n){e.exports=n(522)},function(e,t,n){n(217);var i=n(53);e.exports=i("Array").keys},function(e,t,n){"use strict";n.r(t),n.d(t,"ComposeOpenPgpPopupView",function(){return H}),n.d(t,"default",function(){return H});n(76),n(48),n(168);var i,o,a,r,s,c,l,u=n(19),d=n.n(u),p=n(12),f=n.n(p),h=n(157),m=n.n(h),g=n(26),b=n.n(g),v=n(18),y=n.n(v),S=n(33),O=n.n(S),w=n(10),T=n.n(w),C=n(20),A=n.n(C),E=n(3),F=n.n(E),j=n(8),N=n.n(j),R=n(1),I=n(21),L=n.n(I),P=n(2),M=n(0),D=n(9),_=n(41),k=n(81),x=n(7),U=n(27),H=(i=Object(x.popup)({name:"View/Popup/ComposeOpenPgp",templateID:"PopupsComposeOpenPgp"}),o=Object(x.command)(function(e){return!e.submitRequest()&&(e.sign()||e.encrypt())}),a=Object(x.command)(),r=Object(x.command)(),s=Object(x.command)(),i((l=function(e){function t(){var i;return(i=e.call(this)||this).publicKeysOptionsCaption=Object(D.i18n)("PGP_NOTIFICATIONS/ADD_A_PUBLICK_KEY"),i.privateKeysOptionsCaption=Object(D.i18n)("PGP_NOTIFICATIONS/SELECT_A_PRIVATE_KEY"),i.notification=R.a.observable(""),i.sign=R.a.observable(!1),i.encrypt=R.a.observable(!1),i.password=R.a.observable(""),i.password.focus=R.a.observable(!1),i.buttonFocus=R.a.observable(!1),i.text=R.a.observable(""),i.selectedPrivateKey=R.a.observable(null),i.selectedPublicKey=R.a.observable(null),i.signKey=R.a.observable(null),i.encryptKeys=R.a.observableArray([]),i.encryptKeysView=R.a.computed(function(){return F.a.compact(y()(F.a).call(F.a,i.encryptKeys(),function(e){return e?e.key:null}))}),i.privateKeysOptions=R.a.computed(function(){var e=y()(F.a).call(F.a,_.a.openpgpkeysPrivate(),function(t,n){return i.signKey()&&i.signKey().key.id===t.id?null:y()(F.a).call(F.a,t.users,function(e){return{id:t.guid,name:"("+t.id.substr(-8).toUpperCase()+") "+e,key:t,class:n%2?"odd":"even"}})});return F.a.compact(F.a.flatten(e,!0))}),i.publicKeysOptions=R.a.computed(function(){var e=y()(F.a).call(F.a,_.a.openpgpkeysPublic(),function(t,n){return-1<Object(P.inArray)(t,i.encryptKeysView())?null:y()(F.a).call(F.a,t.users,function(e){return{id:t.guid,name:"("+t.id.substr(-8).toUpperCase()+") "+e,key:t,class:n%2?"odd":"even"}})});return F.a.compact(F.a.flatten(e,!0))}),i.submitRequest=R.a.observable(!1),i.resultCallback=null,i.selectedPrivateKey.subscribe(function(e){e&&(i.selectCommand(),i.updateCommand())}),i.selectedPublicKey.subscribe(function(e){e&&i.addCommand()}),i.sDefaultKeyScope=M.KeyState.PopupComposeOpenPGP,i.defautOptionsAfterRender=P.defautOptionsAfterRender,i.addOptionClass=function(e,t){i.defautOptionsAfterRender(e,t),t&&!Object(P.isUnd)(t.class)&&e&&N()(e).addClass(t.class)},i.deletePublickKey=b()(F.a).call(F.a,i.deletePublickKey,O()(i)),i}T()(t,e);var n=t.prototype;return n.doCommand=function(){var t=this,n=!0,i=null,o=[];if(this.submitRequest(!0),n&&this.sign()&&(this.signKey()?this.signKey().key||(this.notification(Object(D.i18n)("PGP_NOTIFICATIONS/NO_PRIVATE_KEY_FOUND_FOR",{EMAIL:this.signKey().email})),n=!1):(this.notification(Object(D.i18n)("PGP_NOTIFICATIONS/NO_PRIVATE_KEY_FOUND")),n=!1),n)){var e=this.signKey().key.getNativeKeys();i=e[0]||null;try{i&&i.decrypt(Object(P.pString)(this.password()))}catch(e){i=null}i||(this.notification(Object(D.i18n)("PGP_NOTIFICATIONS/NO_PRIVATE_KEY_FOUND")),n=!1)}return n&&this.encrypt()&&(0===this.encryptKeys().length?(this.notification(Object(D.i18n)("PGP_NOTIFICATIONS/NO_PUBLIC_KEYS_FOUND")),n=!1):this.encryptKeys()&&(o=[],F.a.each(this.encryptKeys(),function(e){e&&e.key?o=m()(o).call(o,F.a.compact(F.a.flatten(e.key.getNativeKeys()))):e&&e.email&&(t.notification(Object(D.i18n)("PGP_NOTIFICATIONS/NO_PUBLIC_KEYS_FOUND_FOR",{EMAIL:e.email})),n=!1)}),!n||0!==o.length&&this.encryptKeys().length===o.length||(n=!1))),n&&this.resultCallback?F.a.delay(function(){var e=null;try{i&&0===o.length?e=_.a.openpgp.sign({data:t.text(),privateKeys:[i]}):i&&0<o.length?e=_.a.openpgp.encrypt({data:t.text(),publicKeys:o,privateKeys:[i]}):!i&&0<o.length&&(e=_.a.openpgp.encrypt({data:t.text(),publicKeys:o}))}catch(e){Object(P.log)(e),t.notification(Object(D.i18n)("PGP_NOTIFICATIONS/PGP_ERROR",{ERROR:""+e}))}if(e)try{e.then(function(e){t.resultCallback(e.data),t.cancelCommand()}).catch(function(e){t.notification(Object(D.i18n)("PGP_NOTIFICATIONS/PGP_ERROR",{ERROR:""+e}))})}catch(e){t.notification(Object(D.i18n)("PGP_NOTIFICATIONS/PGP_ERROR",{ERROR:""+e}))}t.submitRequest(!1)},M.Magics.Time20ms):this.submitRequest(!1),n},n.selectCommand=function(){var t=this.selectedPrivateKey(),e=t?f()(F.a).call(F.a,this.privateKeysOptions(),function(e){return e&&t===e.id}):null;e&&this.signKey({empty:!e.key,selected:R.a.observable(!!e.key),users:e.key.users,hash:e.key.id.substr(-8).toUpperCase(),key:e.key})},n.addCommand=function(){var t=this.selectedPublicKey(),e=this.encryptKeys(),n=t?f()(F.a).call(F.a,this.publicKeysOptions(),function(e){return e&&t===e.id}):null;n&&(e.push({empty:!n.key,selected:R.a.observable(!!n.key),removable:R.a.observable(!this.sign()||!this.signKey()||this.signKey().key.id!==n.key.id),users:n.key.users,hash:n.key.id.substr(-8).toUpperCase(),key:n.key}),this.encryptKeys(e))},n.updateCommand=function(){var t=this;F.a.each(this.encryptKeys(),function(e){e.removable(!t.sign()||!t.signKey()||t.signKey().key.id!==e.key.id)})},n.deletePublickKey=function(e){this.encryptKeys.remove(e)},n.clearPopup=function(){this.notification(""),this.sign(!1),this.encrypt(!1),this.password(""),this.password.focus(!1),this.buttonFocus(!1),this.signKey(null),this.encryptKeys([]),this.text(""),this.resultCallback=null},n.onBuild=function(){var e=this;L()("tab,shift+tab",M.KeyState.PopupComposeOpenPGP,function(){switch(!0){case e.password.focus():e.buttonFocus(!0);break;case e.buttonFocus():e.password.focus(!0)}return!1})},n.onHideWithDelay=function(){this.clearPopup()},n.onShowWithDelay=function(){this.sign()?this.password.focus(!0):this.buttonFocus(!0)},n.onShow=function(e,t,n,i,o,a){var r=this;this.clearPopup();var s=[],c="",l=new k.EmailModel;if(this.resultCallback=e,""!==i&&s.push(i),""!==o&&s.push(o),""!==a&&s.push(a),s=s.join(", ").split(","),s=F.a.compact(y()(F.a).call(F.a,s,function(e){return l.clear(),l.parse(Object(P.trim)(e)),""!==l.email&&l.email})),n&&n.email()){c=n.email(),s.unshift(c);var u=_.a.findAllPrivateKeysByEmailNotNative(c);u&&u[0]&&this.signKey({users:u[0].users||[c],hash:u[0].id.substr(-8).toUpperCase(),key:u[0]})}this.signKey()&&this.sign(!0),s&&0<s.length&&(this.encryptKeys(F.a.uniq(F.a.compact(F.a.flatten(y()(F.a).call(F.a,s,function(t){var e=_.a.findAllPublicKeysByEmailNotNative(t);return e?y()(F.a).call(F.a,e,function(e){return{empty:!e,selected:R.a.observable(!!e),removable:R.a.observable(!r.sign()||!r.signKey()||r.signKey().key.id!==e.id),users:e&&e.users||[t],hash:e?e.id.substr(-8).toUpperCase():"",key:e}}):[]}),!0)),function(e){return e.hash})),0<this.encryptKeys().length&&this.encrypt(!0)),this.text(t)},t}(U.a),A()(l.prototype,"doCommand",[o],d()(l.prototype,"doCommand"),l.prototype),A()(l.prototype,"selectCommand",[a],d()(l.prototype,"selectCommand"),l.prototype),A()(l.prototype,"addCommand",[r],d()(l.prototype,"addCommand"),l.prototype),A()(l.prototype,"updateCommand",[s],d()(l.prototype,"updateCommand"),l.prototype),c=l))||c)},function(e,t,n){"use strict";n.r(t),n.d(t,"FolderClearPopupView",function(){return w}),n.d(t,"default",function(){return w});var i,o,a,r,s=n(19),c=n.n(s),l=n(10),u=n.n(l),d=n(20),p=n.n(d),f=n(1),h=n(0),m=n(9),g=n(14),b=n(13),v=n(16),y=n(22),S=n(7),O=n(27),w=(i=Object(S.popup)({name:"View/Popup/FolderClear",templateID:"PopupsFolderClear"}),o=Object(S.command)(function(e){var t=e.selectedFolder();return!e.clearingProcess()&&null!==t}),i((r=function(e){function t(){var t;return(t=e.call(this)||this).selectedFolder=f.a.observable(null),t.clearingProcess=f.a.observable(!1),t.clearingError=f.a.observable(""),t.folderFullNameForClear=f.a.computed(function(){var e=t.selectedFolder();return e?e.printableFullName():""}),t.folderNameForClear=f.a.computed(function(){var e=t.selectedFolder();return e?e.localName():""}),t.dangerDescHtml=f.a.computed(function(){return Object(m.i18n)("POPUPS_CLEAR_FOLDER/DANGER_DESC_HTML_1",{FOLDER:t.folderNameForClear()})}),t}u()(t,e);var n=t.prototype;return n.clearCommand=function(){var n=this,e=this.selectedFolder();e&&(b.a.message(null),b.a.messageList([]),this.clearingProcess(!0),e.messageCountAll(0),e.messageCountUnread(0),Object(g.q)(e.fullNameRaw,""),v.a.folderClear(function(e,t){n.clearingProcess(!1),h.StorageResultType.Success===e&&t&&t.Result?(Object(y.a)().reloadMessageList(!0),n.cancelCommand()):t&&t.ErrorCode?n.clearingError(Object(m.getNotification)(t.ErrorCode)):n.clearingError(Object(m.getNotification)(h.Notification.MailServerError))},e.fullNameRaw))},n.clearPopup=function(){this.clearingProcess(!1),this.selectedFolder(null)},n.onShow=function(e){this.clearPopup(),e&&this.selectedFolder(e)},t}(O.a),p()(r.prototype,"clearCommand",[o],c()(r.prototype,"clearCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";n.r(t),n.d(t,"AdvancedSearchPopupView",function(){return C}),n.d(t,"default",function(){return C});n(76),n(48),n(168);var i,o,a,r,s=n(19),c=n.n(s),l=n(30),u=n.n(l),d=n(10),p=n.n(d),f=n(20),h=n.n(f),m=n(3),g=n.n(m),b=n(1),v=n(2),y=n(9),S=n(60),O=n(13),w=n(7),T=n(27),C=(i=Object(w.popup)({name:"View/Popup/AdvancedSearch",templateID:"PopupsAdvancedSearch"}),o=Object(w.command)(),i((r=function(t){function e(){var e;return(e=t.call(this)||this).fromFocus=b.a.observable(!1),e.from=b.a.observable(""),e.to=b.a.observable(""),e.subject=b.a.observable(""),e.text=b.a.observable(""),e.selectedDateValue=b.a.observable(-1),e.hasAttachment=b.a.observable(!1),e.starred=b.a.observable(!1),e.unseen=b.a.observable(!1),e.selectedDates=b.a.computed(function(){return Object(y.trigger)(),[{id:-1,name:Object(y.i18n)("SEARCH/LABEL_ADV_DATE_ALL")},{id:3,name:Object(y.i18n)("SEARCH/LABEL_ADV_DATE_3_DAYS")},{id:7,name:Object(y.i18n)("SEARCH/LABEL_ADV_DATE_7_DAYS")},{id:30,name:Object(y.i18n)("SEARCH/LABEL_ADV_DATE_MONTH")},{id:90,name:Object(y.i18n)("SEARCH/LABEL_ADV_DATE_3_MONTHS")},{id:180,name:Object(y.i18n)("SEARCH/LABEL_ADV_DATE_6_MONTHS")},{id:365,name:Object(y.i18n)("SEARCH/LABEL_ADV_DATE_YEAR")}]}),e}p()(e,t);var n=e.prototype;return n.searchCommand=function(){var e=this.buildSearchString();""!==e&&O.a.mainMessageListSearch(e),this.cancelCommand()},n.parseSearchStringValue=function(e){var t=this,n=(e||"").split(/[\s]+/g);g.a.each(n,function(e){switch(e){case"has:attachment":t.hasAttachment(!0);break;case"is:unseen,flagged":t.starred(!0);case"is:unseen":t.unseen(!0)}})},n.buildSearchStringValue=function(e){return-1<u()(e).call(e," ")&&(e='"'+e+'"'),e},n.buildSearchString=function(){var e=[],t=Object(v.trim)(this.from()),n=Object(v.trim)(this.to()),i=Object(v.trim)(this.subject()),o=Object(v.trim)(this.text()),a=[],r=[];return t&&""!==t&&e.push("from:"+this.buildSearchStringValue(t)),n&&""!==n&&e.push("to:"+this.buildSearchStringValue(n)),i&&""!==i&&e.push("subject:"+this.buildSearchStringValue(i)),this.hasAttachment()&&r.push("attachment"),this.unseen()&&a.push("unseen"),this.starred()&&a.push("flagged"),0<r.length&&e.push("has:"+r.join(",")),0<a.length&&e.push("is:"+a.join(",")),-1<this.selectedDateValue()&&e.push("date:"+Object(S.searchSubtractFormatDateHelper)(this.selectedDateValue())+"/"),o&&""!==o&&e.push("text:"+this.buildSearchStringValue(o)),Object(v.trim)(e.join(" "))},n.clearPopup=function(){this.from(""),this.to(""),this.subject(""),this.text(""),this.selectedDateValue(-1),this.hasAttachment(!1),this.starred(!1),this.unseen(!1),this.fromFocus(!0)},n.onShow=function(e){this.clearPopup(),this.parseSearchStringValue(e)},n.onShowWithDelay=function(){this.fromFocus(!0)},e}(T.a),h()(r.prototype,"searchCommand",[o],c()(r.prototype,"searchCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";n.r(t),n.d(t,"TwoFactorTestPopupView",function(){return y}),n.d(t,"default",function(){return y});var i,o,a,r,s=n(19),c=n.n(s),l=n(10),u=n.n(l),d=n(20),p=n.n(d),f=n(1),h=n(0),m=n(6),g=n(16),b=n(7),v=n(27),y=(i=Object(b.popup)({name:"View/Popup/TwoFactorTest",templateID:"PopupsTwoFactorTest"}),o=Object(b.command)(function(e){return""!==e.code()&&!e.testing()}),i((r=function(t){function e(){var e;return(e=t.call(this)||this).code=f.a.observable(""),e.code.focused=f.a.observable(!1),e.code.status=f.a.observable(null),e.koTestedTrigger=null,e.testing=f.a.observable(!1),e}u()(e,t);var n=e.prototype;return n.testCodeCommand=function(){var n=this;this.testing(!0),g.a.testTwoFactor(function(e,t){n.testing(!1),n.code.status(h.StorageResultType.Success===e&&t&&!!t.Result),n.koTestedTrigger&&n.code.status()&&n.koTestedTrigger(!0)},this.code())},n.clearPopup=function(){this.code(""),this.code.focused(!1),this.code.status(null),this.testing(!1),this.koTestedTrigger=null},n.onShow=function(e){this.clearPopup(),this.koTestedTrigger=e},n.onShowWithDelay=function(){m.bMobileDevice||this.code.focused(!0)},e}(v.a),p()(r.prototype,"testCodeCommand",[o],c()(r.prototype,"testCodeCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";n.r(t),n.d(t,"AddOpenPgpKeyPopupView",function(){return y}),n.d(t,"default",function(){return y});n(48),n(56);var i,o,a,r,s=n(19),c=n.n(s),l=n(10),u=n.n(l),d=n(20),p=n.n(d),f=n(1),h=n(2),m=n(41),g=n(22),b=n(7),v=n(27),y=(i=Object(b.popup)({name:"View/Popup/AddOpenPgpKey",templateID:"PopupsAddOpenPgpKey"}),o=Object(b.command)(),i((r=function(t){function e(){var e;return(e=t.call(this)||this).key=f.a.observable(""),e.key.focus=f.a.observable(!1),e.key.error=f.a.observable(!1),e.key.errorMessage=f.a.observable(""),e.key.subscribe(function(){e.key.error(!1),e.key.errorMessage("")}),e}u()(e,t);var n=e.prototype;return n.addOpenPgpKeyCommand=function(){var e=/[-]{3,6}BEGIN[\s]PGP[\s](PRIVATE|PUBLIC)[\s]KEY[\s]BLOCK[-]{3,6}[\s\S]+?[-]{3,6}END[\s]PGP[\s](PRIVATE|PUBLIC)[\s]KEY[\s]BLOCK[-]{3,6}/gi,t=m.a.openpgpKeyring,n=Object(h.trim)(this.key());if(/[\n]/.test(n)&&(n=n.replace(/[\r]+/g,"").replace(/[\n]{2,}/g,"\n\n")),this.key.error(""===n),this.key.errorMessage(""),!t||this.key.error())return!1;var i=null,o=30,a=!1;do{if((i=e.exec(n))&&0<o){if(i[0]&&i[1]&&i[2]&&i[1]===i[2]){var r=null;"PRIVATE"===i[1]?r=t.privateKeys.importKey(i[0]):"PUBLIC"===i[1]&&(r=t.publicKeys.importKey(i[0])),r&&(this.key.error(!0),this.key.errorMessage(r&&r[0]?""+r[0]:""),Object(h.log)(r))}o-=1,a=!1}else a=!0}while(!a);return t.store(),Object(g.a)().reloadOpenPgpKeys(),!this.key.error()&&(Object(h.delegateRun)(this,"cancelCommand"),!0)},n.clearPopup=function(){this.key(""),this.key.error(!1),this.key.errorMessage("")},n.onShow=function(){this.clearPopup()},n.onShowWithDelay=function(){this.key.focus(!0)},e}(v.a),p()(r.prototype,"addOpenPgpKeyCommand",[o],c()(r.prototype,"addOpenPgpKeyCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";n.r(t),n.d(t,"NewOpenPgpKeyPopupView",function(){return w}),n.d(t,"default",function(){return w});n(52);var i,o,a,r,s=n(19),c=n.n(s),l=n(10),u=n.n(l),d=n(20),p=n.n(d),f=n(3),h=n.n(f),m=n(1),g=n(0),b=n(2),v=n(41),y=n(22),S=n(7),O=n(27),w=(i=Object(S.popup)({name:"View/Popup/NewOpenPgpKey",templateID:"PopupsNewOpenPgpKey"}),o=Object(S.command)(),i((r=function(t){function e(){var e;return(e=t.call(this)||this).email=m.a.observable(""),e.email.focus=m.a.observable(""),e.email.error=m.a.observable(!1),e.name=m.a.observable(""),e.password=m.a.observable(""),e.keyBitLength=m.a.observable(g.Magics.BitLength2048),e.submitRequest=m.a.observable(!1),e.submitError=m.a.observable(""),e.email.subscribe(function(){e.email.error(!1)}),e}u()(e,t);var n=e.prototype;return n.generateOpenPgpKeyCommand=function(){var t=this,e={},n=v.a.openpgpKeyring;return this.email.error(""===Object(b.trim)(this.email())),!(!n||this.email.error())&&(e.email=this.email(),""!==this.name()&&(e.name=this.name()),this.submitRequest(!0),this.submitError(""),h.a.delay(function(){try{v.a.openpgp.generateKey({userIds:[e],numBits:Object(b.pInt)(t.keyBitLength()),passphrase:Object(b.trim)(t.password())}).then(function(e){t.submitRequest(!1),e&&e.privateKeyArmored&&(n.privateKeys.importKey(e.privateKeyArmored),n.publicKeys.importKey(e.publicKeyArmored),n.store(),Object(y.a)().reloadOpenPgpKeys(),Object(b.delegateRun)(t,"cancelCommand"))}).catch(function(e){t.submitRequest(!1),t.showError(e)})}catch(e){t.submitRequest(!1),t.showError(e)}},g.Magics.Time100ms),!0)},n.showError=function(e){Object(b.log)(e),e&&e.message&&this.submitError(e.message)},n.clearPopup=function(){this.name(""),this.password(""),this.email(""),this.email.error(!1),this.keyBitLength(g.Magics.BitLength2048),this.submitError("")},n.onShow=function(){this.clearPopup()},n.onShowWithDelay=function(){this.email.focus(!0)},e}(O.a),p()(r.prototype,"generateOpenPgpKeyCommand",[o],c()(r.prototype,"generateOpenPgpKeyCommand"),r.prototype),a=r))||a)},function(e,t,n){"use strict";n.r(t),n.d(t,"ViewOpenPgpKeyPopupView",function(){return f}),n.d(t,"default",function(){return f});var i,o=n(10),a=n.n(o),r=n(1),s=n(21),c=n.n(s),l=n(0),u=n(2),d=n(7),p=n(27),f=Object(d.popup)({name:"View/Popup/ViewOpenPgpKey",templateID:"PopupsViewOpenPgpKey"})(i=function(t){function e(){var e;return(e=t.call(this)||this).key=r.a.observable(""),e.keyDom=r.a.observable(null),e.sDefaultKeyScope=l.KeyState.PopupViewOpenPGP,e}a()(e,t);var n=e.prototype;return n.clearPopup=function(){this.key("")},n.selectKey=function(){var e=this.keyDom();e&&Object(u.selectElement)(e)},n.onShow=function(e){this.clearPopup(),e&&this.key(e.armor)},n.onBuild=function(){var e=this;c()("ctrl+a, command+a",l.KeyState.PopupViewOpenPGP,function(){return e.selectKey(),!1})},e}(p.a))||i},function(e,t,n){"use strict";n.r(t),n.d(t,"WelcomePagePopupView",function(){return u}),n.d(t,"default",function(){return u});var i,o=n(10),a=n.n(o),r=n(1),s=n(88),c=n(7),l=n(27),u=Object(c.popup)({name:"View/Popup/WelcomePage",templateID:"PopupsWelcomePage"})(i=function(t){function e(){var e;return(e=t.call(this)||this).welcomePageURL=r.a.observable(""),e.closeFocused=r.a.observable(!1),e}a()(e,t);var n=e.prototype;return n.clearPopup=function(){this.welcomePageURL(""),this.closeFocused(!1)},n.onShow=function(e){this.clearPopup(),this.welcomePageURL(e)},n.onShowWithDelay=function(){this.closeFocused(!0)},n.onHide=function(){s.a.welcomeClose()},e}(l.a))||i}]);
